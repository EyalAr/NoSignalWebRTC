{"version":3,"sources":["../dist/index.js","../webpack/bootstrap 91e40059ad5991426f16",".././app/index.js",".././~/jquery/dist/jquery.js",".././lib/call.js",".././~/webrtc-adapter-test/adapter.js",".././~/eventemitter2/lib/eventemitter2.js",".././lib/getUserMedia.js",".././lib/signalling/manual/index.js",".././~/ractive/ractive.js",".././lib/signalling/manual/index.html",".././lib/signalling/manual/index.less",".././lib/signalling/manual/index.less*",".././~/css-loader/lib/css-base.js",".././~/style-loader/addStyles.js",".././lib/signalling/files/index.js",".././lib/signalling/files/index.html",".././lib/signalling/files/index.less",".././lib/signalling/files/index.less*",".././app/meeting/index.js",".././app/meeting/index.html",".././app/meeting/index.less",".././app/meeting/index.less*",".././app/index.html",".././app/index.less",".././app/index.less*"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","registerSignallingService","service","_jquery2","text","getName","data","appendTo","$serviceList","on","_libCall2","$error","hide","meeting","setLocalStream","bind","addRemoteStream","offer","then","sendOffer","toJSON","candidates","map","once","acknowledge","answer","show","sendAnswer","activateService","$serviceContainer","empty","render","_jquery","_libCall","_libSignallingManual","_libSignallingManual2","_libSignallingFiles","_libSignallingFiles2","_meeting","_meeting2","_htmlIndexHtml","_htmlIndexHtml2","$body","append","find","$meetingContainer","change","$option","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","global","factory","document","w","Error","window","undefined","noGlobal","isArraylike","length","type","jQuery","isWindow","nodeType","winnow","elements","qualifier","not","isFunction","grep","elem","i","risSimple","test","filter","indexOf","sibling","cur","dir","createOptions","options","object","optionsCache","each","match","rnotwhite","_","flag","completed","removeEventListener","ready","Data","Object","defineProperty","this","cache","get","expando","uid","dataAttr","key","name","replace","rmultiDash","toLowerCase","getAttribute","rbrace","parseJSON","e","data_user","set","returnTrue","returnFalse","safeActiveElement","activeElement","err","manipulationTarget","content","nodeName","firstChild","getElementsByTagName","appendChild","ownerDocument","createElement","disableScript","restoreScript","rscriptTypeMasked","exec","removeAttribute","setGlobalEval","elems","refElements","l","data_priv","cloneCopyEvent","src","dest","pdataOld","pdataCur","udataOld","udataCur","events","hasData","access","handle","event","add","extend","getAll","context","tag","ret","querySelectorAll","merge","fixInput","rcheckableType","checked","defaultValue","actualDisplay","doc","style","body","display","getDefaultComputedStyle","css","detach","defaultDisplay","elemdisplay","iframe","documentElement","contentDocument","write","close","curCSS","computed","width","minWidth","maxWidth","getStyles","getPropertyValue","contains","rnumnonpx","rmargin","addGetHookIf","conditionFn","hookFn","apply","arguments","vendorPropName","capName","toUpperCase","slice","origName","cssPrefixes","setPositiveNumber","value","subtract","matches","rnumsplit","Math","max","augmentWidthOrHeight","extra","isBorderBox","styles","val","cssExpand","getWidthOrHeight","valueIsBorderBox","offsetWidth","offsetHeight","support","boxSizingReliable","parseFloat","showHide","hidden","values","index","isHidden","Tween","prop","end","easing","prototype","init","createFxNow","setTimeout","fxNow","now","genFx","includeWidth","which","attrs","height","opacity","createTween","animation","tween","collection","tweeners","concat","defaultPrefilter","props","opts","toggle","hooks","oldfire","checkDisplay","anim","orig","dataShow","queue","_queueHooks","unqueued","fire","always","overflow","overflowX","overflowY","rfxtypes","isEmptyObject","done","remove","start","propFilter","specialEasing","camelCase","isArray","cssHooks","expand","Animation","properties","result","stopped","animationPrefilters","deferred","Deferred","tick","currentTime","remaining","startTime","duration","temp","percent","tweens","run","notifyWith","resolveWith","promise","originalProperties","originalOptions","push","stop","gotoEnd","rejectWith","fx","timer","progress","complete","fail","addToPrefiltersOrTransports","structure","dataTypeExpression","func","dataType","dataTypes","unshift","inspectPrefiltersOrTransports","jqXHR","inspect","selected","inspected","prefilterOrFactory","dataTypeOrTransport","seekingTransport","transports","ajaxExtend","target","deep","flatOptions","ajaxSettings","ajaxHandleResponses","s","responses","ct","finalDataType","firstDataType","contents","shift","mimeType","getResponseHeader","converters","ajaxConvert","response","isSuccess","conv2","current","conv","tmp","prev","responseFields","dataFilter","split","state","error","buildParams","prefix","traditional","v","rbracket","getWindow","defaultView","arr","_slice","class2type","toString","hasOwn","hasOwnProperty","version","selector","fn","rtrim","rmsPrefix","rdashAlpha","fcamelCase","all","letter","jquery","constructor","toArray","num","pushStack","prevObject","callback","args","first","eq","last","len","j","sort","splice","copy","copyIsArray","clone","isPlainObject","random","isReady","msg","noop","Array","isNumeric","globalEval","code","script","indirect","eval","trim","head","parentNode","removeChild","string","makeArray","results","inArray","second","invert","callbackInverse","callbackExpect","arg","guid","proxy","Date","Sizzle","seed","groups","old","nid","newContext","newSelector","preferredDoc","setDocument","documentIsHTML","rquickExpr","getElementById","getElementsByClassName","qsa","rbuggyQSA","tokenize","rescape","setAttribute","toSelector","rsibling","testContext","join","qsaError","select","createCache","keys","Expr","cacheLength","markFunction","assert","div","addHandle","handler","attrHandle","siblingCheck","a","b","diff","sourceIndex","MAX_NEGATIVE","nextSibling","createInputPseudo","createButtonPseudo","createPositionalPseudo","argument","matchIndexes","setFilters","tokens","addCombinator","matcher","combinator","base","checkNonElements","doneName","xml","oldCache","outerCache","newCache","dirruns","elementMatcher","matchers","multipleContexts","contexts","condense","unmatched","newUnmatched","mapped","setMatcher","preFilter","postFilter","postFinder","postSelector","preMap","postMap","preexisting","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","relative","implicitRelative","matchContext","matchAnyContext","outermostContext","matcherFromGroupMatchers","elementMatchers","setMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","pop","uniqueSort","getText","isXML","compile","sortInput","hasDuplicate","docElem","rbuggyMatches","classCache","tokenCache","compilerCache","sortOrder","push_native","list","booleans","whitespace","characterEncoding","identifier","attributes","pseudos","rwhitespace","RegExp","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rnative","runescape","funescape","escaped","escapedWhitespace","high","String","fromCharCode","unloadHandler","childNodes","els","node","hasCompare","parent","top","addEventListener","attachEvent","className","createComment","getById","getElementsByName","attrId","getAttributeNode","innerHTML","input","matchesSelector","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","msMatchesSelector","disconnectedMatch","compareDocumentPosition","adown","bup","compare","sortDetached","aup","ap","bp","expr","attr","specified","duplicates","detectDuplicates","sortStable","textContent","nodeValue","selectors","createPseudo",">"," ","+","~","excess","unquoted","nodeNameSelector","pattern","operator","check","what","simple","forward","ofType","nodeIndex","useCache","lastChild","pseudo","idx","matched","has","innerText","lang","elemLang","hash","location","root","focus","hasFocus","href","tabIndex","enabled","disabled","selectedIndex","header","button","even","odd","lt","gt","radio","checkbox","file","password","image","submit","reset","filters","parseOnly","soFar","preFilters","cached","token","compiled","div1","unique","isXMLDoc","rneedsContext","rsingleTag","self","is","rootjQuery","parseHTML","rparentsprev","guaranteedUnique","children","next","_dir","until","truncate","n","targets","closest","pos","prevAll","addBack","parents","parentsUntil","nextAll","nextUntil","prevUntil","siblings","reverse","Callbacks","memory","_fired","firing","firingStart","firingLength","firingIndex","stack","stopOnFalse","disable","lock","locked","fireWith","fired","tuples","_state","_promise","fns","newDefer","tuple","returned","resolve","reject","notify","pipe","stateString","when","subordinate","progressValues","progressContexts","resolveContexts","resolveValues","updateFunc","readyList","readyWait","holdReady","hold","wait","triggerHandler","off","readyState","chainable","emptyGet","raw","bulk","acceptData","owner","accepts","descriptor","unlock","defineProperties","stored","camel","discard","_data","removeData","_removeData","camelKey","dequeue","startLength","setter","clearQueue","count","defer","pnum","source","el","fragment","createDocumentFragment","checkClone","cloneNode","noCloneChecked","strundefined","focusinBubbles","rkeyEvent","rmouseEvent","rfocusMorph","rtypenamespace","types","handleObjIn","eventHandle","t","handleObj","special","handlers","namespaces","origType","elemData","triggered","dispatch","delegateType","bindType","namespace","delegateCount","setup","mappedTypes","origCount","teardown","removeEvent","trigger","onlyHandlers","bubbleType","ontype","eventPath","Event","isTrigger","namespace_re","noBubble","parentWindow","isPropagationStopped","preventDefault","isDefaultPrevented","_default","fix","handlerQueue","delegateTarget","preDispatch","currentTarget","isImmediatePropagationStopped","stopPropagation","postDispatch","_handlers","sel","fixHooks","keyHooks","original","charCode","keyCode","mouseHooks","eventDoc","pageX","clientX","scrollLeft","clientLeft","pageY","clientY","scrollTop","clientTop","originalEvent","fixHook","load","blur","click","beforeunload","returnValue","simulate","bubble","isSimulated","defaultPrevented","timeStamp","stopImmediatePropagation","mouseenter","mouseleave","pointerenter","pointerleave","related","relatedTarget","attaches","one","origFn","rxhtmlTag","rtagName","rhtml","rnoInnerhtml","rchecked","rscriptType","rcleanScript","wrapMap","option","thead","col","tr","td","optgroup","tbody","tfoot","colgroup","caption","th","dataAndEvents","deepDataAndEvents","srcElements","destElements","inPage","buildFragment","scripts","selection","wrap","nodes","createTextNode","cleanData","domManip","prepend","insertBefore","before","after","keepData","html","replaceWith","replaceChild","hasScripts","iNoClone","_evalUrl","prependTo","insertAfter","replaceAll","insert","opener","getComputedStyle","computePixelPositionAndBoxSizingReliable","cssText","container","divStyle","pixelPositionVal","boxSizingReliableVal","backgroundClip","clearCloneStyle","pixelPosition","reliableMarginRight","marginDiv","marginRight","swap","rdisplayswap","rrelNum","cssShow","position","visibility","cssNormalTransform","letterSpacing","fontWeight","cssNumber","columnCount","fillOpacity","flexGrow","flexShrink","lineHeight","order","orphans","widows","zIndex","zoom","cssProps","float","margin","padding","border","suffix","expanded","parts","unit","propHooks","eased","step","linear","swing","cos","PI","timerId","rfxnum","rrun","*","scale","maxIterations","tweener","prefilter","speed","opt","speeds","fadeTo","to","animate","optall","doAnimation","finish","stopQueue","timers","cssFn","slideDown","slideUp","slideToggle","fadeIn","fadeOut","fadeToggle","interval","setInterval","clearInterval","slow","fast","delay","time","timeout","clearTimeout","checkOn","optSelected","optDisabled","radioValue","nodeHook","boolHook","removeAttr","nType","attrHooks","propName","attrNames","propFix","getter","rfocusable","removeProp","for","class","notxml","hasAttribute","rclass","addClass","classes","clazz","finalValue","proceed","removeClass","toggleClass","stateVal","classNames","hasClass","rreturn","valHooks","optionSet","hover","fnOver","fnOut","unbind","delegate","undelegate","nonce","rquery","JSON","parse","parseXML","DOMParser","parseFromString","rhash","rts","rheaders","rlocalProtocol","rnoContent","rprotocol","rurl","prefilters","allTypes","ajaxLocation","ajaxLocParts","active","lastModified","etag","url","isLocal","processData","async","contentType","json","* text","text html","text json","text xml","ajaxSetup","settings","ajaxPrefilter","ajaxTransport","ajax","status","nativeStatusText","headers","success","modified","statusText","timeoutTimer","transport","responseHeadersString","ifModified","cacheURL","callbackContext","statusCode","_statusCode","fireGlobals","globalEventContext","completeDeferred","responseHeaders","requestHeaders","requestHeadersNames","strAbort","getAllResponseHeaders","setRequestHeader","lname","overrideMimeType","abort","finalText","method","crossDomain","param","hasContent","beforeSend","send","getJSON","getScript","throws","wrapAll","firstElementChild","wrapInner","unwrap","visible","r20","rCRLF","rsubmitterTypes","rsubmittable","encodeURIComponent","serialize","serializeArray","xhr","XMLHttpRequest","xhrId","xhrCallbacks","xhrSuccessStatus",1223,"xhrSupported","cors","open","username","xhrFields","onload","onerror","responseText","text script","charset","scriptCharset","evt","oldCallbacks","rjsonp","jsonp","jsonpCallback","originalSettings","callbackName","overwritten","responseContainer","jsonProp","keepScripts","parsed","_load","params","animated","offset","setOffset","curPosition","curLeft","curCSSTop","curTop","curOffset","curCSSLeft","calculatePosition","curElem","left","using","win","box","getBoundingClientRect","pageYOffset","pageXOffset","offsetParent","parentOffset","scrollTo","Height","Width","defaultExtra","funcName","size","andSelf","_jQuery","_$","$","noConflict","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","create","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","protoProps","staticProps","_get","_x","_x2","_x3","_again","property","receiver","desc","Function","getOwnPropertyDescriptor","getPrototypeOf","_eventemitter2","_eventemitter22","_getUserMedia","_getUserMedia2","Call","_EventEmitter","video","audio","_this","that","_audio","_video","_pc","RTCPeerConnection","_initiator","_pUserMedia","_iceCandidates","_pIceCandidates","Promise","onicecandidate","candidate","iceGatheringState","onaddstream","emit","stream","_this2","userMedia","addStream","_createOffer","_setLocalDescription","offeranswer","remoteCandidates","_this3","_setRemoteDescription","_addRemoteIceCandidate","_this4","_createAnswer","createOffer","createAnswer","setLocalDescription","RTCSessionDescription","setRemoteDescription","addIceCandidate","RTCIceCandidate","requestUserMedia","constraints","getUserMedia","attachMediaStream","reattachMediaStream","webrtcDetectedBrowser","webrtcDetectedVersion","webrtcMinimumVersion","webrtcUtils","log","HTMLMediaElement","mozSrcObject","_srcObject","URL","createObjectURL","navigator","element","srcObject","from","mozGetUserMedia","mozRTCPeerConnection","parseInt","userAgent","pcConfig","pcConstraints","iceServers","newIceServers","server","urls","newServer","credential","mozRTCSessionDescription","mozRTCIceCandidate","onSuccess","onError","constraintsToFF37","require","forEach","r","ideal","min","exact","advanced","oc","stringify","mediaDevices","enumerateDevices","infos","kind","deviceId","label","groupId","orgEnumerateDevices","webkitGetUserMedia","chrome","iceTransportPolicy","iceTransports","pc","webkitRTCPeerConnection","origGetStats","getStats","successCallback","errorCallback","fixChromeStats","standardReport","reports","report","standardStats","timestamp","names","stat","successCallbackWrapper","nativeMethod","constraintsToChrome","mandatory","optional","cc","oldname","charAt","mix","kinds","MediaStreamTrack","getSources","devices","device","origGetUserMedia","webrtcTesting","_events","_conf","configure","conf","delimiter","maxListeners","wildcard","newListener","listenerTree","EventEmitter","searchListenerTree","tree","leaf","branch","xTree","xxTree","isolatedBranch","endReached","listeners","typeLength","currentType","nextType","_listeners","**","growListenerTree","listener","warned","defaultMaxListeners","console","trace","setMaxListeners","many","ttl","_origin","_all","ns","onAny","addListener","leafs","iLeaf","offAny","removeListener","removeAllListeners","listenersAny","gotCam","gotMic","VID_WIDTH","VID_HEIGHT","media","res","_ractive","_ractive2","_ractiveIndexHtml","_ractiveIndexHtml2","ManualSignalling","_model","_comp","template","makeOffer","gotAnswer","gotOffer","$target","getElement","output","querySelector","detachNode","safeToStringValue","utils_object__extend","_len","sources","_key","fillGaps","thing","is__toString","isArrayLike","arrayLikePattern","isEqual","is__isNumeric","isNaN","isFinite","isObject","format","message","fatal","logIfDebug","_Ractive","DEBUG","warn","printWarning","warnOnce","alreadyWarned","warnIfDebug","warnOnceIfDebug","findInViewHierarchy","registryName","ractive","findInstance","isolated","snap","getPotentialWildcardMatches","keypath","starMap","mapper","wildcardKeypath","starMaps","getStarMap","star","binary","ones","digit","assignNewKeypath","oldKeypath","newKeypath","existingKeypath","equalsOrStartsWith","decodeKeypath","getKeypath","str","keypathCache","Keypath","getMatchingKeypaths","matchingKeypaths","wrapper","isRoot","viewmodel","mappings","computations","wrapped","rootKeypath","reduce","concatenate","normalise","ref","refPattern","d","changes","shared_add__errorMessage","Ractive$add","shared_add","Hook","deprecate","deprecations","addToArray","array","arrayContains","arrayContentsMatch","ensureArray","x","lastItem","removeFromArray","member","arrayLike","makeDispatcher","utils_Promise__resolve","fulfil","_Promise","called","resolvePromise","rejectPromise","y","resolveRef","substr","substring","createMappingIfNecessary","firstKey","resolveAncestorRef","getInnerContext","resolveAmbiguousReference","baseContext","contextKeys","isParentLookup","parentValue","hasContextChain","parentKeypath","isRootProperty","component","parentFragment","origin","methodCallers__unbind","methodCallers__unrender","unrender","cancel","_detachNodes","tm","detachNodes","outros","outroChildren","outrosComplete","decrementOutros","intros","totalChildren","decrementTotal","flushChanges","changeHash","batch","ractives","applyChanges","changeHook","attemptKeypathResolution","views","update","tasks","item","resolved","unresolved","shared_resolveRef","global_runloop__resolve","Ractive$animate","fulfilPromise","k","animations","makeValueCollector","currentValues","collectValue","dummy","dummyOptions","utils_Promise","shared_animations","noAnimation","animate_Animation","interpolator","_animations","Ractive$detach","detached","__ractive_instances__","prototype_detach__detachHook","Ractive$find","Query$test","noDirty","itemMatches","_isComponentQuery","_makeDirty","getParent","getAncestry","ancestry","ancestor","makeQuery","live","isComponentQuery","query","_test","makeQuery_cancel","_root","_sort","makeQuery_dirty","_remove","_dirty","Ractive$findAll","liveQueries","_liveQueries","_makeQuery","findAll","Ractive$findAllComponents","_liveComponentQueries","findAllComponents","Ractive$findComponent","findComponent","Ractive$findContainer","findContainer","Ractive$findParent","findParent","fireEvent","eventName","_noArg","eventNames","wildcardMatches","fireEventAs","subscribers","initialFire","shared_eventStack","enqueue","_subs","notifySubscribers","fullName","stopEvent","Ractive$fire","shared_fireEvent","Ractive$get","Ractive$insert","anchor","rendered","fireInsertHook","insertHook","child","Ractive$merge","currentArray","global_runloop","getPattern","getObserverFacade","observer","isPatternObserver","cancelled","emptyObject","isPattern","observe_PatternObserver","patternObservers","observe_Observer","register","facade","unregister","_observers","Ractive$observe","observers","keypaths","observe","observe_getObserverFacade","Ractive$observeOnce","Ractive$off","shared_trim","notEmptyString","Ractive$on","Ractive$once","getNewIndices","methodName","spliceArguments","removeStart","removeEnd","balance","newIndices","getSpliceEquivalent","touchedFrom","Ractive$render","instances","transitionsEnabled","noIntro","scheduleTask","renderHook","others","removeOtherInstances","cssId","global_css","completeHook","custom_adapt__combine","transformCss","transformed","addGuid","selectorUnits","prepended","appended","selectorUnitPattern","modifiers","extractString","dataRvcGuidPattern","commentsPattern","selectorsPattern","$1","mediaQueryPattern","validate","custom_data__combine","childValue","parentIsFn","childIsFn","callDataFunction","fromProperties","primary","secondary","readDelimiterChange","parser","opening","closing","matchString","allowWhitespace","matchPattern","delimiterChangePattern","whitespacePattern","readRegexpLiteral__readNumberLiteral","regexpPattern","REGEXP_LITERAL","readMustache","mustache","interpolate","inside","tags","readMustacheOfType","reader","mustache_readDelimiterChange","sortMustacheTags","delimiterChangeToken","rewind","readRegexpLiteral","readers","isStatic","includeLinePositions","getLinePos","literal_readNumberLiteral__readNumberLiteral","literal_readNumberLiteral__numberPattern","NUMBER_LITERAL","readBooleanLiteral","BOOLEAN_LITERAL","readKey","readStringLiteral","literal_readNumberLiteral","patterns__name","readKeyValuePair","shared_readKey","converters_readExpression","KEY_VALUE_PAIR","readKeyValuePairs","pairs","pair","keyValuePairs","keyValuePair","readExpressionList","expression","expressions","expectedExpression","readLiteral","literal_readBooleanLiteral","readObjectLiteral","readArrayLiteral","readReference","startPos","reference","lastDotIndex","prefixPattern","relaxedNames","relaxedName","legalReference","keywords","globals","GLOBAL","lastIndexOf","REFERENCE","readBracketedExpression","expectedParen","BRACKETED","readRefinement","REFINEMENT","getConditional","ifTrue","ifFalse","expressions_readLogicalOr","CONDITIONAL","o","readExpression","readConditional","flattenExpression","STRING_LITERAL","ARRAY_LITERAL","OBJECT_LITERAL","PREFIX_OPERATOR","INFIX_OPERATOR","INVOCATION","MEMBER","refs","extractRefs","refineExpression","referenceExpression","arrayMemberPattern","getReferenceExpression","rx","utils_flattenExpression","refinement","members","readTriple","triple","TRIPLE","utils_refineExpression","readUnescaped","readPartial","nameStart","partial","PARTIAL","SECTION","SECTION_WITH","f","readComment","COMMENT","readExpressionOrReference","expectedFollowers","primary_readReference","readInterpolator","converters_readExpressionOrReference","nextChar","INTERPOLATOR","readYielder","yielder","yieldPattern","YIELDER","readClosing","CLOSING","section_readElse__readElse","section_readElse__elsePattern","ELSE","readElseIf__readElse","readElseIf__elsePattern","ELSEIF","readSection","section","hasElse","block","unlessBlock","conditions","closed","expectedClose","SECTION_UNLESS","standardDelimiters","handlebarsBlockPattern","handlebarsBlockCodes","indexRefPattern","keyIndexRefPattern","sectionDepth","section_readClosing","readElseIf","createUnlessBlock","SECTION_IF","mustache_readSection__combine","section_readElse","read","READERS","SECTION_IF_WITH","sectionType","parensIfNecessary","readHtmlComment","endIndex","comment","OPEN_COMMENT","CLOSE_COMMENT","decodeCharacterReferences","entityPattern","entity","htmlEntities","validateCode","controlCharacters","escapeHtml","amp","lessThan","greaterThan","isString","isComment","DELIMCHANGE","isSection","INVERTED","cleanup","items","stripComments","preserveWhitespace","removeLeadingWhitespace","removeTrailingWhitespace","previousItem","nextItem","preserveWhitespaceInsideFragment","removeLeadingWhitespaceInsideFragment","removeTrailingWhitespaceInsideFragment","stripStandalones","exclude","trimWhitespace","utils_cleanup__leadingWhitespace","trailingWhitespace","isPreserveWhitespaceElement","ELEMENT","preserveWhitespaceElements","leadingNewLine","trailingNewLine","contiguousWhitespace","readClosingTag","closingTagPattern","CLOSING_TAG","readAttribute","attributeNamePattern","readAttributeValue","valueStart","startDepth","readQuotedAttributeValue","readUnquotedAttributeValue","readUnquotedAttributeValueToken","haystack","needles","unquotedAttributeValueTextPattern","getLowestIndex","inAttribute","converters_readMustache","quoteMark","readQuotedStringToken","getKeyValuePair","valueToken","processDirective","parentParser","colonIndex","directiveName","directiveArgs","methodCallPattern","methodCallExcessPattern","ExpressionParser","readElement","addProxyEvent","attribute","directive","selfClosing","partials","hasPartials","closingTag","DOCTYPE","tagNamePattern","validTagNameFollower","reservedEventNames","element_readAttribute","directives","element_processDirective","proxyEventPattern","sanitizeEventAttributes","onPattern","lowerCaseName","voidElementNames","elementStack","canContain","element_readClosingTag","closingTagName","errorMessage","PARTIAL_READERS","utils_cleanup","sanitizeElements","disallowed","disallowedContents","readText","barrier","escapeRegExp","utils_escapeRegExp__pattern","readPartialDefinitionComment","firstPos","startPattern","namePattern","finishPattern","endPattern","utils_escapeRegExp","INLINE_PARTIAL","readPartialDefinitionSection","delimiters","partialDefinitionSectionPattern","readTemplate","TEMPLATE_VERSION","StandardParser","template_parser__createHelper","parseOptions","helper","doParse","_parse","fromId","isClient","noThrow","isHashedId","tagName","isParsed","getParseOptions","defaults","resetValue","initial","_config","getDynamicTemplate","parseIfString","template_template__createHelper","template_parser","extendPartials","existingPartials","newPartials","overwrite","superMethod","getSuperMethod","_parent","hasSuper","oldSuper","_super","_method","getMessage","deprecated","correct","isError","deprecateOption","deprecatedOption","adaptors","Parent","config_deprecate","isStandardKey","config_registries","registry","custom_adapt","template_template","css_css","extendOtherMethods","isBlacklisted","wrapPrototype","makeObj","Fragment$bubble","dirtyValue","dirtyArgs","bound","Fragment$detach","docFrag","Fragment$find","queryResult","Fragment$findAll","Fragment$findAllComponents","Fragment$findComponent","Fragment$findNextNode","firstNode","findNextNode","Fragment$firstNode","processItems","counter","placeholderId","fragments","getValue","Fragment$getArgsList","shared_processItems","_guid","argsList","Fragment$getNode","pElement","Fragment$getValue","shared_unbind__unbind","registered","resolver","Mustache$getValue","getProp","findIndexRefs","refName","fragRefs","hit","indexRefs","getIndexRef","componentBoundary","createReferenceResolver","indexRef","Resolvers_SpecialResolver","Resolvers_findIndexRefs","Resolvers_IndexResolver","Resolvers_ReferenceResolver","getFunctionFromString","getUniqueString","isSpecial","createExpressionKeypath","uniqueString","isValidDependency","wrapFunction","__ractive_nowrap","Resolvers_ExpressionResolver__bind","_boundFunctions","ReferenceExpressionResolver_ReferenceExpressionResolver__getValue","isDefined","_forceResolution","forceResolution","Mustache$init","resolveAndRebindChildren","rebind","Resolvers_createReferenceResolver","Resolvers_ExpressionResolver","ReferenceExpressionResolver_ReferenceExpressionResolver","setValue","Mustache$resolve","wasResolved","twowayBinding","rebound","Mustache$rebind","Section$bubble","Section$detach","Section$find","Section$findAll","Section$findAllComponents","Section$findComponent","Section$findNextNode","Section$firstNode","Section$shuffle","firstChange","newLength","reboundFragments","fragmentOptions","shuffling","unbound","currentSubtype","SECTION_EACH","newIndex","oldIndex","by","deps","fragmentsToUnrender","registeredIndexRefs","shuffle__blindRebind","addView","fragmentsToCreate","dep","Section$render","renderedFragments","fragmentsToRender","Section$setValue","updating","virtualdom_Fragment","reevaluateSection","changeCurrentSubtype","hasContext","subtype","reevaluateConditionalSection","reevaluateContextSection","reevaluateConditionalContextSection","reevaluateListObjectSection","ordered","reevaluateListSection","hasKey","changed","setValue__blindRebind","removeSectionFragments","inverted","doRender","emptyArray","isRendered","Section$toString","escape","Section$unbind","shared_unbind","Section$unrender","shouldDestroy","unrenderAndDestroy","prototype_unrender__unrender","Section$update","renderIndex","getNode","Triple$detach","Triple$find","Triple$findAll","queryAllResult","numNodes","Triple$firstNode","elementCache","updateSelect","parentElement","selectedOptions","binding","isSelected","Triple$render","insertHtml","helpers_updateSelect","Triple$setValue","Triple$toString","Triple$unrender","Triple$update","Element$detach","Element$findNextNode","Element$firstNode","Element$getAttribute","Attribute$bubble","useProperty","getInterpolator","Attribute$init","ATTRIBUTE","determineNameAndNamespace","isBoolean","booleanAttributes","helpers_getInterpolator","isBindable","Attribute$rebind","Attribute$render","propertyName","namespaceURI","propertyNames","isTwoway","Attribute$toString","_ref","namespacePrefix","Attribute_prototype_toString__escape","Attribute$unbind","Attribute$updateSelect","optionValue","Attribute$updateMultipleSelect","Attribute$updateRadioName","Attribute$updateRadioValue","wasChecked","bindings","addRactive","handleChange","Attribute$updateCheckboxName","valueAttribute","isChecked","Attribute$updateClassName","Attribute$updateIdAttribute","Attribute$updateIEStyleAttribute","Attribute$updateContentEditableValue","Attribute$updateValue","Attribute$updateBooleanAttribute","Attribute$updateEverythingElse","setAttributeNS","Attribute$update","updateMethod","updateIdAttribute","updateMultipleSelectValue","updateSelectValue","updateValue","updateContentEditableValue","updateRadioValue","updateRadioName","updateCheckboxName","updateIEStyleAttribute","updateBoolean","updateClassName","updateEverythingElse","parseAttributes","isSvg","_ConditionalAttribute__div","notIn","needle","findParentForm","handleBlur","handleDomEvent","handleDelay","_timeout","lazy","getSiblings","group","sets","Binding_CheckboxNameBinding__getValue","createTwowayBinding","Binding","bindName","bindChecked","contenteditable","Binding_ContentEditableBinding","Binding_RadioNameBinding","Binding_CheckboxNameBinding","Binding_RadioBinding","Binding_CheckboxBinding","Binding_FileListBinding","NumericBinding","Binding_GenericBinding","Binding_MultipleSelectBinding","Binding_SelectBinding","EventHandler$bubble","hasAction","getAction","hasListener","listen","EventHandler$fire","EventHandler$getAction","action","EventHandler$init","invalid","shared_getFunctionFromString","refResolvers","eventPattern","eventObject","refinements","fireMethodCall","dynamicParams","fireEventWithDynamicParams","fireEventWithParams","getArgsList","genericHandler","storage","indices","EventHandler$listen","definition","custom","getCustomHandler","isJsdom","touchEvents","missingPlugin","shared_genericHandler","customHandlers","EventHandler$rebind","EventHandler$render","EventHandler$resolve","EventHandler$unbind","EventHandler$unrender","select__bubble","dirty","sync","selectElement","selectNode","selectValue","isMultiple","optionWasSelected","shouldSelect","valueContains","forceUpdate","special_option__init","findParentSelect","special_option__unbind","Element$init","twoway","bindingAttrs","enforceCase","formBindings","processBindingAttributes","createAttributes","conditionalAttributes","createConditionalAttributes","cssIds","init_createTwowayBinding","_twowayBindings","eventHandlers","createEventHandlers","decorator","_Decorator","intro","t0","t1","outro","t2","Element$rebind","special_img__render","img","loadHandler","form__render","handleReset","form__unrender","updateModel","Transition$init","isIntro","_fn","onChange","onHide","onShow","Transition$start","originalStyle","noReset","resetStyle","transition","_manager","Element$render","getNamespace","updateScript","updateCss","h","processOption","defaultSelected","torndown","_Transition","registerTransition","autofocus","updateLiveQueries","xmlns","svg","multiple","optionIsSelected","inputIsCheckedRadio","typeAttribute","nameAttribute","stringifyAttribute","Element$unbind","Element$unrender","detachWhenReady","registerDecorator","removeFromLiveQueries","reducer","previous","line","lineIndent","deIndent__leadingWhitespace","getPartialTemplate","getPartialFromRegistry","deIndent","findParentPartial","isOwner","noRegistryFunctionReturn","findOwner","findConstructor","_again2","_Parent","_x4","_again3","_function3","getComponent","Component","components","Component$detach","Component_prototype_detach__detachHook","Component$find","Component$findAll","Component$findAllComponents","Component$findComponent","Component$findNextNode","Component$firstNode","createAccessors","originalWrapper","updateWrapper","mark","oldGet","oldSet","_ractiveWrappers","Viewmodel$adapt","adaptor","getPrefixer","prefixKeypath","prefixed","rootDot","prefixers","relativeKeypath","getUpstreamChanges","upstreamChanges","notifyPatternObservers","onlyDirect","potentialWildcardMatches","updateMatchingPatternObservers","upstreamPattern","cascade","actualChildKeypath","depsMap","childKeypath","lastKey","regex","Viewmodel$applyChanges","invalidateComputation","computation","clearCache","invalidate","noCascade","helpers_getUpstreamChanges","applyChanges_notifyPatternObservers","notifyUpstreamDependants","notifyAllDependants","notifyBindings","implicitChanges","groupName","dependants","findDependants","refineValue","useSet","addKeypaths","addKeypath","childDeps","Viewmodel$capture","captureGroups","Viewmodel$clearCache","keepExistingWrapper","cacheMap","isUnresolved","Viewmodel$compute","signature","Computation_Computation","Viewmodel$get","captureGroup","keypathStr","viewmodel_prototype_get__empty","capture","bypass","adapt","retrieve","noUnwrap","fullRootGet","FAILED_LOOKUP","Viewmodel$init","Viewmodel$map","mapping","Mapping","initViewmodel","Viewmodel$mark","implicit","onchange","Viewmodel$merge","oldArray","newArray","comparator","getComparatorFunction","mapOldToNewIndex","smartUpdate","comparators","Viewmodel$register","dependant","depsByKeypath","register__updateDependantsMap","Viewmodel$release","Viewmodel$reset","Viewmodel$set","noMapping","setting","resolveSet","silent","wrapperSet","valueSet","createBranch","Viewmodel$smartUpdate","oldLength","noCascadeOption","canShuffle","shuffle","implicitOption","Viewmodel$teardown","unresolvedImplicitDependency","unresolvedImplicitDependencies","Viewmodel$unregister","unregister__updateDependantsMap","HookQueue","hook","hooks_Hook","inProcess","getChildQueue","hookQueue","childQueue","getComputationSignatures","signatures","getComputationSignature","helpers_getComputationSignatures__bind","createFunctionFromString","functionBody","hasThis","helpers_getComputationSignatures__pattern","initialiseRactiveInstance","userOptions","welcome","initialiseProperties","deprecateRactiveData","constructHook","initialise__registryNames","viewmodel_Viewmodel","getAdaptors","custom_data","helpers_getComputationSignatures","config_config","configHook","initHook","begin","DEBUG_PROMISES","protoAdapt","lookup","magic","modifyArrays","initialise__combine","environment__magic","magicArray","adaptors_magic","array_index","initialise__uid","_inlinePartials","inlinePartials","ComplexParameter","createResolver","isSingleInterpolator","propagateEvents","eventsDescriptor","propagateEvent","childInstance","parentInstance","proxyEventName","Component$init","COMPONENT","indexRefBindings","yielders","resolvers","createInstance","initialise_propagateEvents","initialise_updateLiveQueries","Component$rebind","Component$render","Component$toString","Component$unbind","removeFromLiveComponentQueries","Component_prototype_unbind__teardownHook","Component$unrender","Fragment$init","createItem","items_Text","items_Yielder","items_Interpolator","_Section","_Triple","Component_getComponent","_Component","_Element","_Partial","items_Comment","items_Doctype","Fragment$rebind","Fragment$render","Fragment$toString","toEscapedString","Fragment_prototype_toString__toString","Fragment$unbind","unbindItem","Fragment$unrender","Ractive$reset","rerender","shouldRerender","resetHook","Ractive$resetTemplate","Ractive$set","Ractive$subtract","Ractive$teardown","Ractive_prototype_teardown__teardownHook","deleteFunctionCopy","Ractive$toggle","badArguments","Ractive$toHTML","Ractive$unrender","unrenderHook","Ractive$update","updateHook","Ractive$updateModel","consolidate","checkboxGroups","oldValue","newValue","radioName","checkboxName","needsSuper","Child","addRegistries","addOtherOptions","addRegistry","useDefaults","wrapMethod","_extend__extend","extendOne","proto","unwrapExtended","initialise","hasConsole","vendors","defaultOptions","sanitize","tripleDelimiters","noCssTransform","config_defaults","static_easing","easeIn","pow","easeOut","easeInOut","appName","mathml","xlink","implementation","hasFeature","dom__div","methodNames","unprefixed","dom__i","makeFunction","createElementNS","legacy","F","welcomeIntro","welcomeMessage","hasGroup","groupCollapsed","groupEnd","_name","interpol","static_interpolators","number","shared_interpolate","interpolators","delta","intermediate","utils_getPotentialWildcardMatches","patternPattern","startsWith","valueOf","_wildcardMatches","requestAnimationFrame","prototype_add","lastTime","currTime","timeToCall","getTime","rAF","performance","utils_getTime","construct","replacement","PENDING","FULFILLED","REJECTED","dispatchHandlers","makeResolver","fulfilledHandlers","rejectedHandlers","newState","onFulfilled","onRejected","promise2","processResolutionHandler","p1result","promises","pending","processPromise","reason","TransitionManager","detachQueue","decoratorQueue","addChild","addDecorator","runloop","global_TransitionManager","returnPromise","previousBatch","transitionManager","view","addUnresolved","removeUnresolved","task","postRender","_batch","running","elapsed","timeNow","prototype_animate","prototype_detach","prototype_find","sortByItemPosition","ancestryA","ancestryB","oldestA","oldestB","mutualAncestor","indexA","indexB","fragmentA","fragmentB","sortByDocumentPosition","otherNode","bitmask","nodeOrComponent","prototype_findAll","prototype_findAllComponents","prototype_findComponent","eventStack","_eventQueue","prototype_fire","prototype_get","prototype_merge","Observer","immediate","PatternObserver","observe_getPattern","proxies","getProxy","reallyUpdate","styleElement","styleSheet","inDom","observeOnce","shared_getNewIndices","arrayProto","makeArrayMethod","global_css__prefix","Parser","ParseError","prototype_render","adaptConfigurator","transform","css_css__uid","cssConfigurator","dataConfigurator","parse_Parser__leadingWhitespace","lineStart","lines","lineEnds","lineEnd","leftover","postProcess","char","columnNum","lineNum","numTabs","annotation","character","shortMessage","stringMiddlePattern","escapeSequencePattern","lineContinuationPattern","parse_Parser","TEXT","makeQuotedStringMatcher","okQuote","literal","charCodeAt","getSingleQuotedString","getDoubleQuotedString","objectLiteral_keyValuePairs","shared_readExpressionList","expressionList","primary_readLiteral","readTypeOf","makePrefixSequenceMatcher","primary_readBracketedExpression","readPrimary","shared_readRefinement","readMemberOrInvocation","symbol","fallthrough","prefixOperators","readLogicalOr","makeInfixSequenceMatcher","readTypeof","right","infixOperators","mustache_readTriple","mustache_readUnescaped","mustache_readPartial","readMustacheComment","mustache_readInterpolator","mustache_readYielder","if","if-with","with","unless","mustache_readSection","converters_readHtmlComment","quot","apos","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","ordf","laquo","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34","iquest","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","times","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","szlig","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","divide","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","OElig","oelig","Scaron","scaron","Yuml","fnof","circ","tilde","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","alpha","beta","gamma","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigmaf","sigma","tau","upsilon","phi","chi","psi","omega","thetasym","upsih","piv","ensp","emsp","thinsp","zwnj","zwj","lrm","rlm","ndash","mdash","lsquo","rsquo","sbquo","ldquo","rdquo","bdquo","dagger","Dagger","bull","hellip","permil","prime","Prime","lsaquo","rsaquo","oline","frasl","euro","weierp","real","trade","alefsym","larr","uarr","rarr","darr","harr","crarr","lArr","uArr","rArr","dArr","hArr","forall","part","exist","nabla","isin","notin","ni","prod","sum","minus","lowast","radic","infin","ang","and","or","cap","cup","int","there4","sim","cong","asymp","ne","equiv","le","ge","sub","sup","nsub","sube","supe","oplus","otimes","perp","sdot","lceil","rceil","lfloor","rfloor","rang","loz","spades","clubs","hearts","diams","JsonParser","specials","specialsPattern","parseJSON__numberPattern","placeholderPattern","placeholderAtStartPattern","onlyWhitespace","leadingLinebreak","trailingLinebreak","backOne","backTwo","lastSectionItem","leadingPattern","trailingPattern","lowest","true","false","null","placeholder","stringLiteral","intro-outro","li","dt","dd","rt","rp","converters_readElement","converters_readText","converters_readPartialDefinitionComment","converters_readPartialDefinitionSection","converters_readTemplate","STANDARD_READERS","TRIPLE_READERS","STATIC_READERS","staticDelimiters","staticTripleDelimiters","isTriple","eventAttributes","config_registries__registryNames","Registry","registries","createHelper","templateConfigurator","config","defaultKeys","prototype_bubble","Fragment_prototype_detach","Fragment_prototype_find","Fragment_prototype_findAll","Fragment_prototype_findAllComponents","Fragment_prototype_findComponent","prototype_findNextNode","prototype_firstNode","prototype_getValue","shared_detach","Text","Mustache_getValue","ReferenceResolver","SpecialResolver","@keypath","@index","@key","registerIndexRef","unregisterIndexRef","IndexResolver","ExpressionResolver","createEvaluator","valueGetters","compute","MemberResolver","refResolver","ReferenceExpressionResolver_MemberResolver","ReferenceExpressionResolver","baseResolver","every","newBase","Mustache_initialise","Mustache_resolve","Mustache_rebind","Mustache","Interpolator","Section_prototype_bubble","Section_prototype_detach","prototype_rebind","Section_prototype_render","prototype_toString","prototype_unbind","prototype_unrender","prototype_update","Section","ieBug","ieBlacklist","Triple_prototype_detach","Triple_prototype_find","Triple_prototype_findAll","Triple_prototype_firstNode","TABLE","THEAD","TBODY","TR","SELECT","selectedOption","Triple_prototype_render","prototype_setValue","Triple_prototype_toString","Triple_prototype_unrender","Triple_prototype_update","Triple","svgCamelCaseElements","svgCamelCaseAttributes","createMap","Element_prototype_bubble","Element_prototype_detach","Element_prototype_find","Element_prototype_findAll","Element_prototype_findAllComponents","Element_prototype_findComponent","Element_prototype_findNextNode","Element_prototype_firstNode","truthy","processBindingAttributes__isNumeric","Attribute_prototype_bubble","elementName","lowerCaseElementName","prototype_init","Attribute_prototype_rebind","Attribute_prototype_render","accept-charset","accesskey","bgcolor","codebase","colspan","datetime","dirname","http-equiv","ismap","maxlength","novalidate","pubdate","readonly","rowspan","tabindex","usemap","Attribute_prototype_toString","Attribute_prototype_unbind","Attribute_prototype_update","Attribute","_Attribute","ConditionalAttribute","_ConditionalAttribute","parentForm","getInitialValue","SpecialisedBinding","GenericBinding","Binding_Binding","ContentEditableBinding","shared_getSiblings","RadioBinding","RadioNameBinding","CheckboxNameBinding","noInitialValue","existingValue","bindingValue","CheckboxBinding","SelectBinding","MultipleSelectBinding","valueFromModel","selectedValues","previousValue","initialValue","FileListBinding","files","EventHandler_prototype_bubble","EventHandler_prototype_fire","EventHandler_prototype_init","touchstart","touchmove","touchend","touchcancel","touchleave","EventHandler_prototype_rebind","EventHandler_prototype_render","prototype_resolve","EventHandler_prototype_unbind","EventHandler_prototype_unrender","EventHandler","_EventHandler","Decorator","actual","helpers_prefix__prefix","prefixCache","helpers_prefix__testStyle","Element_prototype_init","Element_prototype_rebind","Transition_prototype_init","hyphenatedStr","vendor","capped","getStyle","prototype_getStyle__getComputedStyle","helpers_prefix","computedStyle","prototype_getStyle","setStyle","Ticker","createTransitions","animateStyle_createTransitions__testStyle","TRANSITION","TRANSITIONEND","CSS_TRANSITIONS_ENABLED","TRANSITION_DURATION","TRANSITION_PROPERTY","TRANSITION_TIMING_FUNCTION","shared_Ticker","unprefixPattern","unprefix","vendorPattern","hyphenate","hyphenated","canUseCssTransitions","cannotUseCssTransitions","webkitTransition","changedProperties","hashPrefix","jsTransitionsComplete","cssTransitionsComplete","checkComplete","transitionEndHandler","originalValue","propertiesToTransitionInJs","animateStyle_visibility__prefix","animateStyle_visibility__i","animateStyle_createTransitions","animateStyle","_animateStyle__getComputedStyle","animateStyle_visibility","_animateStyle","processParams","prototype_start","Transition","Element_prototype_render","appearsToBeIELessEqual8","hasChildNodes","Element_prototype_toString","Element_prototype_unbind","Element_prototype_unrender","Element","deIndent__empty","firstLine","lastLine","minIndent","Partial_getPartialTemplate","applyIndent","indent","indented","notFirstLine","missingPartialMessage","Partial","fragmentToRender","fragmentToUnrender","isNamed","setTemplate","getPartialName","_toString","testObj","patchArrayMethods","unpatchArrayMethods","Component_prototype_detach","Component_prototype_find","Component_prototype_findAll","Component_prototype_findAllComponents","Component_prototype_findComponent","Component_prototype_findNextNode","Component_prototype_firstNode","processWrapper","patchedArrayProto","mutatorMethods","wrappers","unpatch","arrayAdaptor","ArrayWrapper","array_index__errorMessage","patch","magicAdaptor","MagicWrapper","numeric","parentWrapper","objKeypath","originalDescriptor","magicArrayAdaptor","MagicArrayWrapper","magicWrapper","arrayWrapper","prototype_adapt","UnresolvedDependency","softDeps","unresolvedDeps","Computation_UnresolvedDependency","Computation","hardDeps","depValues","_firstRun","newDeps","dependenciesChanged","dependencyValuesChanged","getting","release","updateDependencies","oldDeps","viewmodel_prototype_get","viewmodel_prototype_init","prototype_map","localKey","local","keepLocal","tracker","usedIndices","firstUnusedIndex","prototype_set","prototype_teardown","Viewmodel","hooks_HookQueue","initialise_ComplexParameter","yieldTemplate","Component_prototype_init","Component_prototype_rebind","Component_prototype_render","Component_prototype_toString","Component_prototype_unbind","Component_prototype_unrender","Comment","Yielder","containerFragment","Doctype","declaration","Fragment_prototype_init","Fragment_prototype_rebind","Fragment_prototype_render","Fragment_prototype_toString","Fragment_prototype_unbind","Fragment_prototype_unrender","Fragment","idxs","Ractive","prototype_reset","resetPartial","collect","resetTemplate","Ractive_prototype_set","prototype_sort","Ractive_prototype_teardown","toHTML","Ractive_prototype_unrender","Ractive_prototype_update","prototype_updateModel","toHtml","force","_extend","getNodeInfo","priv","info","VERSION","decorators","transitions","FUNCTION","locals","mediaQuery","alreadyImportedModules","addStylesToDom","domStyle","stylesInDom","addStyle","listToStyles","newStyles","sourceMap","insertStyleElement","getHeadElement","lastStyleElementInsertedAtTop","styleElementsInsertedAtTop","insertAt","removeStyleElement","createStyleElement","createLinkElement","linkElement","rel","singleton","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","revokeObjectURL","Blob","btoa","updateLink","applyToTag","newObj","replaceText","cssNode","unescape","blob","oldSrc","memoize","memo","isOldIE","newList","mayRemove","textStore","Boolean","getFileContents","FileReader","readAsText","downloadFile","filename","model","fileList","Meeting","_$root","$vid"],"mappings":"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","file":"dist/index.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _jquery = __webpack_require__(1);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _libCall = __webpack_require__(2);\n\t\n\tvar _libCall2 = _interopRequireDefault(_libCall);\n\t\n\tvar _libSignallingManual = __webpack_require__(6);\n\t\n\tvar _libSignallingManual2 = _interopRequireDefault(_libSignallingManual);\n\t\n\tvar _libSignallingFiles = __webpack_require__(13);\n\t\n\tvar _libSignallingFiles2 = _interopRequireDefault(_libSignallingFiles);\n\t\n\tvar _meeting = __webpack_require__(17);\n\t\n\tvar _meeting2 = _interopRequireDefault(_meeting);\n\t\n\tvar _htmlIndexHtml = __webpack_require__(21);\n\t\n\tvar _htmlIndexHtml2 = _interopRequireDefault(_htmlIndexHtml);\n\t\n\t__webpack_require__(22);\n\t\n\tvar $body = (0, _jquery2['default'])('body').append((0, _jquery2['default'])(_htmlIndexHtml2['default'])),\n\t    $error = $body.find('#error'),\n\t    $serviceList = $body.find('#signalling-services'),\n\t    $servicePrompt = $body.find('#signalling-services-prompt'),\n\t    $serviceContainer = $body.find('#service-container'),\n\t    $meetingContainer = $body.find('#meeting-container');\n\t\n\tvar meeting = new _meeting2['default']();\n\tmeeting.render($meetingContainer);\n\t\n\tregisterSignallingService(new _libSignallingManual2['default']());\n\tregisterSignallingService(new _libSignallingFiles2['default']());\n\t\n\t$serviceList.change(function () {\n\t    var $option = $serviceList.find(\"option:selected\");\n\t    activateService($option.data('service'));\n\t});\n\t\n\tfunction registerSignallingService(service) {\n\t    (0, _jquery2['default'])('<option>').text(service.getName()).data('service', service).appendTo($serviceList);\n\t\n\t    service.on('make-offer', function () {\n\t        var call = new _libCall2['default'](true, true);\n\t        $error.hide();\n\t        call.on('stream.add.local', meeting.setLocalStream.bind(meeting));\n\t        call.on('stream.add.remote', meeting.addRemoteStream.bind(meeting));\n\t        call.offer().then(function (data) {\n\t            service.sendOffer({\n\t                offer: data.offer.toJSON(),\n\t                candidates: data.candidates.map(function (c) {\n\t                    return c.toJSON();\n\t                })\n\t            });\n\t            service.once('got-answer', function (data) {\n\t                call.acknowledge(data.answer, data.candidates)['catch'](function () {\n\t                    return $error.show();\n\t                });\n\t            });\n\t        })['catch'](function () {\n\t            return $error.show();\n\t        });\n\t    });\n\t\n\t    service.on('got-offer', function (data) {\n\t        var call = new _libCall2['default'](true, true);\n\t        $error.hide();\n\t        call.on('stream.add.local', meeting.setLocalStream.bind(meeting));\n\t        call.on('stream.add.remote', meeting.addRemoteStream.bind(meeting));\n\t        call.answer(data.offer, data.candidates).then(function (data) {\n\t            service.sendAnswer({\n\t                answer: data.answer.toJSON(),\n\t                candidates: data.candidates.map(function (c) {\n\t                    return c.toJSON();\n\t                })\n\t            });\n\t        })['catch'](function () {\n\t            return $error.show();\n\t        });\n\t    });\n\t}\n\t\n\tfunction activateService(service) {\n\t    $serviceContainer.empty();\n\t    if (service) service.render($serviceContainer);\n\t}\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n\t * jQuery JavaScript Library v2.1.4\n\t * http://jquery.com/\n\t *\n\t * Includes Sizzle.js\n\t * http://sizzlejs.com/\n\t *\n\t * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors\n\t * Released under the MIT license\n\t * http://jquery.org/license\n\t *\n\t * Date: 2015-04-28T16:01Z\n\t */\"use strict\";(function(global,factory){if(typeof module === \"object\" && typeof module.exports === \"object\"){ // For CommonJS and CommonJS-like environments where a proper `window`\n\t// is present, execute the factory and get jQuery.\n\t// For environments that do not have a `window` with a `document`\n\t// (such as Node.js), expose a factory as module.exports.\n\t// This accentuates the need for the creation of a real `window`.\n\t// e.g. var jQuery = require(\"jquery\")(window);\n\t// See ticket #14549 for more info.\n\tmodule.exports = global.document?factory(global,true):function(w){if(!w.document){throw new Error(\"jQuery requires a window with a document\");}return factory(w);};}else {factory(global);} // Pass this if window is not defined yet\n\t})(typeof window !== \"undefined\"?window:undefined,function(window,noGlobal){ // Support: Firefox 18+\n\t// Can't be in strict mode, several libs including ASP.NET trace\n\t// the stack via arguments.caller.callee and Firefox dies if\n\t// you try to trace through \"use strict\" call chains. (#13335)\n\t//\n\tvar arr=[];var _slice=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var support={};var  // Use the correct document accordingly with window argument (sandbox)\n\tdocument=window.document,version=\"2.1.4\", // Define a local copy of jQuery\n\tjQuery=function jQuery(selector,context){ // The jQuery object is actually just the init constructor 'enhanced'\n\t// Need init if jQuery is called (just allow error to be thrown if not included)\n\treturn new jQuery.fn.init(selector,context);}, // Support: Android<4.1\n\t// Make sure we trim BOM and NBSP\n\trtrim=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, // Matches dashed string for camelizing\n\trmsPrefix=/^-ms-/,rdashAlpha=/-([\\da-z])/gi, // Used by jQuery.camelCase as callback to replace()\n\tfcamelCase=function fcamelCase(all,letter){return letter.toUpperCase();};jQuery.fn = jQuery.prototype = { // The current version of jQuery being used\n\tjquery:version,constructor:jQuery, // Start with an empty selector\n\tselector:\"\", // The default length of a jQuery object is 0\n\tlength:0,toArray:function toArray(){return _slice.call(this);}, // Get the Nth element in the matched element set OR\n\t// Get the whole matched element set as a clean array\n\tget:function get(num){return num != null? // Return just the one element from the set\n\tnum < 0?this[num + this.length]:this[num]: // Return all the elements in a clean array\n\t_slice.call(this);}, // Take an array of elements and push it onto the stack\n\t// (returning the new matched element set)\n\tpushStack:function pushStack(elems){ // Build a new jQuery matched element set\n\tvar ret=jQuery.merge(this.constructor(),elems); // Add the old object onto the stack (as a reference)\n\tret.prevObject = this;ret.context = this.context; // Return the newly-formed element set\n\treturn ret;}, // Execute a callback for every element in the matched set.\n\t// (You can seed the arguments with an array of args, but this is\n\t// only used internally.)\n\teach:function each(callback,args){return jQuery.each(this,callback,args);},map:function map(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},slice:function slice(){return this.pushStack(_slice.apply(this,arguments));},first:function first(){return this.eq(0);},last:function last(){return this.eq(-1);},eq:function eq(i){var len=this.length,j=+i + (i < 0?len:0);return this.pushStack(j >= 0 && j < len?[this[j]]:[]);},end:function end(){return this.prevObject || this.constructor(null);}, // For internal use only.\n\t// Behaves like an Array's method, not like a jQuery method.\n\tpush:push,sort:arr.sort,splice:arr.splice};jQuery.extend = jQuery.fn.extend = function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0] || {},i=1,length=arguments.length,deep=false; // Handle a deep copy situation\n\tif(typeof target === \"boolean\"){deep = target; // Skip the boolean and the target\n\ttarget = arguments[i] || {};i++;} // Handle case when target is a string or something (possible in deep copy)\n\tif(typeof target !== \"object\" && !jQuery.isFunction(target)){target = {};} // Extend jQuery itself if only one argument is passed\n\tif(i === length){target = this;i--;}for(;i < length;i++) { // Only deal with non-null/undefined values\n\tif((options = arguments[i]) != null){ // Extend the base object\n\tfor(name in options) {src = target[name];copy = options[name]; // Prevent never-ending loop\n\tif(target === copy){continue;} // Recurse if we're merging plain objects or arrays\n\tif(deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))){if(copyIsArray){copyIsArray = false;clone = src && jQuery.isArray(src)?src:[];}else {clone = src && jQuery.isPlainObject(src)?src:{};} // Never move original objects, clone them\n\ttarget[name] = jQuery.extend(deep,clone,copy); // Don't bring in undefined values\n\t}else if(copy !== undefined){target[name] = copy;}}}} // Return the modified object\n\treturn target;};jQuery.extend({ // Unique for each copy of jQuery on the page\n\texpando:\"jQuery\" + (version + Math.random()).replace(/\\D/g,\"\"), // Assume jQuery is ready without the ready module\n\tisReady:true,error:function error(msg){throw new Error(msg);},noop:function noop(){},isFunction:function isFunction(obj){return jQuery.type(obj) === \"function\";},isArray:Array.isArray,isWindow:function isWindow(obj){return obj != null && obj === obj.window;},isNumeric:function isNumeric(obj){ // parseFloat NaNs numeric-cast false positives (null|true|false|\"\")\n\t// ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n\t// subtraction forces infinities to NaN\n\t// adding 1 corrects loss of precision from parseFloat (#15100)\n\treturn !jQuery.isArray(obj) && obj - parseFloat(obj) + 1 >= 0;},isPlainObject:function isPlainObject(obj){ // Not plain objects:\n\t// - Any object or value whose internal [[Class]] property is not \"[object Object]\"\n\t// - DOM nodes\n\t// - window\n\tif(jQuery.type(obj) !== \"object\" || obj.nodeType || jQuery.isWindow(obj)){return false;}if(obj.constructor && !hasOwn.call(obj.constructor.prototype,\"isPrototypeOf\")){return false;} // If the function hasn't returned already, we're confident that\n\t// |obj| is a plain object, created by {} or constructed with new Object\n\treturn true;},isEmptyObject:function isEmptyObject(obj){var name;for(name in obj) {return false;}return true;},type:function type(obj){if(obj == null){return obj + \"\";} // Support: Android<4.0, iOS<6 (functionish RegExp)\n\treturn typeof obj === \"object\" || typeof obj === \"function\"?class2type[toString.call(obj)] || \"object\":typeof obj;}, // Evaluates a script in a global context\n\tglobalEval:function globalEval(code){var script,indirect=eval;code = jQuery.trim(code);if(code){ // If the code includes a valid, prologue position\n\t// strict mode pragma, execute code by injecting a\n\t// script tag into the document.\n\tif(code.indexOf(\"use strict\") === 1){script = document.createElement(\"script\");script.text = code;document.head.appendChild(script).parentNode.removeChild(script);}else { // Otherwise, avoid the DOM node creation, insertion\n\t// and removal by using an indirect global eval\n\tindirect(code);}}}, // Convert dashed to camelCase; used by the css and data modules\n\t// Support: IE9-11+\n\t// Microsoft forgot to hump their vendor prefix (#9572)\n\tcamelCase:function camelCase(string){return string.replace(rmsPrefix,\"ms-\").replace(rdashAlpha,fcamelCase);},nodeName:function nodeName(elem,name){return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();}, // args is for internal usage only\n\teach:function each(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray){for(;i < length;i++) {value = callback.apply(obj[i],args);if(value === false){break;}}}else {for(i in obj) {value = callback.apply(obj[i],args);if(value === false){break;}}} // A special, fast, case for the most common use of each\n\t}else {if(isArray){for(;i < length;i++) {value = callback.call(obj[i],i,obj[i]);if(value === false){break;}}}else {for(i in obj) {value = callback.call(obj[i],i,obj[i]);if(value === false){break;}}}}return obj;}, // Support: Android<4.1\n\ttrim:function trim(text){return text == null?\"\":(text + \"\").replace(rtrim,\"\");}, // results is for internal usage only\n\tmakeArray:function makeArray(arr,results){var ret=results || [];if(arr != null){if(isArraylike(Object(arr))){jQuery.merge(ret,typeof arr === \"string\"?[arr]:arr);}else {push.call(ret,arr);}}return ret;},inArray:function inArray(elem,arr,i){return arr == null?-1:indexOf.call(arr,elem,i);},merge:function merge(first,second){var len=+second.length,j=0,i=first.length;for(;j < len;j++) {first[i++] = second[j];}first.length = i;return first;},grep:function grep(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert; // Go through the array, only saving the items\n\t// that pass the validator function\n\tfor(;i < length;i++) {callbackInverse = !callback(elems[i],i);if(callbackInverse !== callbackExpect){matches.push(elems[i]);}}return matches;}, // arg is for internal usage only\n\tmap:function map(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[]; // Go through the array, translating each of the items to their new values\n\tif(isArray){for(;i < length;i++) {value = callback(elems[i],i,arg);if(value != null){ret.push(value);}} // Go through every key on the object,\n\t}else {for(i in elems) {value = callback(elems[i],i,arg);if(value != null){ret.push(value);}}} // Flatten any nested arrays\n\treturn concat.apply([],ret);}, // A global GUID counter for objects\n\tguid:1, // Bind a function to a context, optionally partially applying any\n\t// arguments.\n\tproxy:function proxy(fn,context){var tmp,args,proxy;if(typeof context === \"string\"){tmp = fn[context];context = fn;fn = tmp;} // Quick check to determine if target is callable, in the spec\n\t// this throws a TypeError, but we will just return undefined.\n\tif(!jQuery.isFunction(fn)){return undefined;} // Simulated bind\n\targs = _slice.call(arguments,2);proxy = function(){return fn.apply(context || this,args.concat(_slice.call(arguments)));}; // Set the guid of unique handler to the same of original handler, so it can be removed\n\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;return proxy;},now:Date.now, // jQuery.support is not used in Core but other projects attach their\n\t// properties to it so it needs to exist.\n\tsupport:support}); // Populate the class2type map\n\tjQuery.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"),function(i,name){class2type[\"[object \" + name + \"]\"] = name.toLowerCase();});function isArraylike(obj){ // Support: iOS 8.2 (not reproducible in simulator)\n\t// `in` check used to prevent JIT error (gh-2145)\n\t// hasOwn isn't used here due to false negatives\n\t// regarding Nodelist length in IE\n\tvar length=\"length\" in obj && obj.length,type=jQuery.type(obj);if(type === \"function\" || jQuery.isWindow(obj)){return false;}if(obj.nodeType === 1 && length){return true;}return type === \"array\" || length === 0 || typeof length === \"number\" && length > 0 && length - 1 in obj;}var Sizzle= /*!\n\t * Sizzle CSS Selector Engine v2.2.0-pre\n\t * http://sizzlejs.com/\n\t *\n\t * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors\n\t * Released under the MIT license\n\t * http://jquery.org/license\n\t *\n\t * Date: 2014-12-16\n\t */(function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate, // Local document vars\n\tsetDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains, // Instance-specific data\n\texpando=\"sizzle\" + 1 * new Date(),preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function sortOrder(a,b){if(a === b){hasDuplicate = true;}return 0;}, // General-purpose constants\n\tMAX_NEGATIVE=1 << 31, // Instance methods\n\thasOwn=({}).hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice, // Use a stripped-down indexOf as it's faster than native\n\t// http://jsperf.com/thor-indexof-vs-for/5\n\tindexOf=function indexOf(list,elem){var i=0,len=list.length;for(;i < len;i++) {if(list[i] === elem){return i;}}return -1;},booleans=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\", // Regular expressions\n\t// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace\n\twhitespace=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\", // http://www.w3.org/TR/css3-syntax/#characters\n\tcharacterEncoding=\"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\", // Loosely modeled on CSS identifier characters\n\t// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors\n\t// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier\n\tidentifier=characterEncoding.replace(\"w\",\"w#\"), // Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors\n\tattributes=\"\\\\[\" + whitespace + \"*(\" + characterEncoding + \")(?:\" + whitespace +  // Operator (capture 2)\n\t\"*([*^$|!~]?=)\" + whitespace +  // \"Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]\"\n\t\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" + whitespace + \"*\\\\]\",pseudos=\":(\" + characterEncoding + \")(?:\\\\((\" +  // To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\n\t// 1. quoted (capture 3; capture 4 or capture 5)\n\t\"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +  // 2. simple (capture 6)\n\t\"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +  // 3. anything else (capture 2)\n\t\".*\" + \")\\\\)|)\", // Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\trwhitespace=new RegExp(whitespace + \"+\",\"g\"),rtrim=new RegExp(\"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\",\"g\"),rcomma=new RegExp(\"^\" + whitespace + \"*,\" + whitespace + \"*\"),rcombinators=new RegExp(\"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace + \"*\"),rattributeQuotes=new RegExp(\"=\" + whitespace + \"*([^\\\\]'\\\"]*?)\" + whitespace + \"*\\\\]\",\"g\"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp(\"^\" + identifier + \"$\"),matchExpr={\"ID\":new RegExp(\"^#(\" + characterEncoding + \")\"),\"CLASS\":new RegExp(\"^\\\\.(\" + characterEncoding + \")\"),\"TAG\":new RegExp(\"^(\" + characterEncoding.replace(\"w\",\"w*\") + \")\"),\"ATTR\":new RegExp(\"^\" + attributes),\"PSEUDO\":new RegExp(\"^\" + pseudos),\"CHILD\":new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace + \"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace + \"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\",\"i\"),\"bool\":new RegExp(\"^(?:\" + booleans + \")$\",\"i\"), // For use in libraries implementing .is()\n\t// We use this for POS matching in `select`\n\t\"needsContext\":new RegExp(\"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" + whitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\",\"i\")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\\d$/i,rnative=/^[^{]+\\{\\s*\\[native \\w/, // Easily-parseable/retrievable ID or TAG or CLASS selectors\n\trquickExpr=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\\\/g, // CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\trunescape=new RegExp(\"\\\\\\\\([\\\\da-f]{1,6}\" + whitespace + \"?|(\" + whitespace + \")|.)\",\"ig\"),funescape=function funescape(_,escaped,escapedWhitespace){var high=\"0x\" + escaped - 0x10000; // NaN means non-codepoint\n\t// Support: Firefox<24\n\t// Workaround erroneous numeric interpretation of +\"0x\"\n\treturn high !== high || escapedWhitespace?escaped:high < 0? // BMP codepoint\n\tString.fromCharCode(high + 0x10000): // Supplemental Plane codepoint (surrogate pair)\n\tString.fromCharCode(high >> 10 | 0xD800,high & 0x3FF | 0xDC00);}, // Used for iframes\n\t// See setDocument()\n\t// Removing the function wrapper causes a \"Permission Denied\"\n\t// error in IE\n\tunloadHandler=function unloadHandler(){setDocument();}; // Optimize for push.apply( _, NodeList )\n\ttry{push.apply(arr = slice.call(preferredDoc.childNodes),preferredDoc.childNodes); // Support: Android<4.0\n\t// Detect silently failing push.apply\n\tarr[preferredDoc.childNodes.length].nodeType;}catch(e) {push = {apply:arr.length? // Leverage slice if possible\n\tfunction(target,els){push_native.apply(target,slice.call(els));}: // Support: IE<9\n\tfunction(target,els){var j=target.length,i=0; // Can't trust NodeList.length\n\twhile(target[j++] = els[i++]) {}target.length = j - 1;}};}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType, // QSA vars\n\ti,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument || context:preferredDoc) !== document){setDocument(context);}context = context || document;results = results || [];nodeType = context.nodeType;if(typeof selector !== \"string\" || !selector || nodeType !== 1 && nodeType !== 9 && nodeType !== 11){return results;}if(!seed && documentIsHTML){ // Try to shortcut find operations when possible (e.g., not under DocumentFragment)\n\tif(nodeType !== 11 && (match = rquickExpr.exec(selector))){ // Speed-up: Sizzle(\"#ID\")\n\tif(m = match[1]){if(nodeType === 9){elem = context.getElementById(m); // Check parentNode to catch when Blackberry 4.6 returns\n\t// nodes that are no longer in the document (jQuery #6963)\n\tif(elem && elem.parentNode){ // Handle the case where IE, Opera, and Webkit return items\n\t// by name instead of ID\n\tif(elem.id === m){results.push(elem);return results;}}else {return results;}}else { // Context is not a document\n\tif(context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains(context,elem) && elem.id === m){results.push(elem);return results;}} // Speed-up: Sizzle(\"TAG\")\n\t}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results; // Speed-up: Sizzle(\".CLASS\")\n\t}else if((m = match[3]) && support.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results;}} // QSA path\n\tif(support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))){nid = old = expando;newContext = context;newSelector = nodeType !== 1 && selector; // qSA works strangely on Element-rooted queries\n\t// We can work around this by specifying an extra ID on the root\n\t// and working up from there (Thanks to Andrew Dupont for the technique)\n\t// IE 8 doesn't work on object elements\n\tif(nodeType === 1 && context.nodeName.toLowerCase() !== \"object\"){groups = tokenize(selector);if(old = context.getAttribute(\"id\")){nid = old.replace(rescape,\"\\\\$&\");}else {context.setAttribute(\"id\",nid);}nid = \"[id='\" + nid + \"'] \";i = groups.length;while(i--) {groups[i] = nid + toSelector(groups[i]);}newContext = rsibling.test(selector) && testContext(context.parentNode) || context;newSelector = groups.join(\",\");}if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results;}catch(qsaError) {}finally {if(!old){context.removeAttribute(\"id\");}}}}} // All others\n\treturn select(selector.replace(rtrim,\"$1\"),context,results,seed);} /**\n\t * Create key-value caches of limited size\n\t * @returns {Function(string, Object)} Returns the Object data after storing it on itself with\n\t *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n\t *\tdeleting the oldest entry\n\t */function createCache(){var keys=[];function cache(key,value){ // Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n\tif(keys.push(key + \" \") > Expr.cacheLength){ // Only keep the most recent entries\n\tdelete cache[keys.shift()];}return cache[key + \" \"] = value;}return cache;} /**\n\t * Mark a function for special use by Sizzle\n\t * @param {Function} fn The function to mark\n\t */function markFunction(fn){fn[expando] = true;return fn;} /**\n\t * Support testing using an element\n\t * @param {Function} fn Passed the created div and expects a boolean result\n\t */function assert(fn){var div=document.createElement(\"div\");try{return !!fn(div);}catch(e) {return false;}finally { // Remove from its parent by default\n\tif(div.parentNode){div.parentNode.removeChild(div);} // release memory in IE\n\tdiv = null;}} /**\n\t * Adds the same handler for all of the specified attrs\n\t * @param {String} attrs Pipe-separated list of attributes\n\t * @param {Function} handler The method that will be applied\n\t */function addHandle(attrs,handler){var arr=attrs.split(\"|\"),i=attrs.length;while(i--) {Expr.attrHandle[arr[i]] = handler;}} /**\n\t * Checks document order of two siblings\n\t * @param {Element} a\n\t * @param {Element} b\n\t * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n\t */function siblingCheck(a,b){var cur=b && a,diff=cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE); // Use IE sourceIndex if available on both nodes\n\tif(diff){return diff;} // Check if b follows a\n\tif(cur){while(cur = cur.nextSibling) {if(cur === b){return -1;}}}return a?1:-1;} /**\n\t * Returns a function to use in pseudos for input types\n\t * @param {String} type\n\t */function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name === \"input\" && elem.type === type;};} /**\n\t * Returns a function to use in pseudos for buttons\n\t * @param {String} type\n\t */function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return (name === \"input\" || name === \"button\") && elem.type === type;};} /**\n\t * Returns a function to use in pseudos for positionals\n\t * @param {Function} fn\n\t */function createPositionalPseudo(fn){return markFunction(function(argument){argument = +argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length; // Match elements found at the specified indexes\n\twhile(i--) {if(seed[j = matchIndexes[i]]){seed[j] = !(matches[j] = seed[j]);}}});});} /**\n\t * Checks a node for validity as a Sizzle context\n\t * @param {Element|Object=} context\n\t * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n\t */function testContext(context){return context && typeof context.getElementsByTagName !== \"undefined\" && context;} // Expose support vars for convenience\n\tsupport = Sizzle.support = {}; /**\n\t * Detects XML nodes\n\t * @param {Element|Object} elem An element or a document\n\t * @returns {Boolean} True iff elem is a non-HTML XML node\n\t */isXML = Sizzle.isXML = function(elem){ // documentElement is verified for cases where it doesn't yet exist\n\t// (such as loading iframes in IE - #4833)\n\tvar documentElement=elem && (elem.ownerDocument || elem).documentElement;return documentElement?documentElement.nodeName !== \"HTML\":false;}; /**\n\t * Sets document-related variables once based on the current document\n\t * @param {Element|Object} [doc] An element or document object to use to set the document\n\t * @returns {Object} Returns the current document\n\t */setDocument = Sizzle.setDocument = function(node){var hasCompare,parent,doc=node?node.ownerDocument || node:preferredDoc; // If no document and documentElement is available, return\n\tif(doc === document || doc.nodeType !== 9 || !doc.documentElement){return document;} // Set our document\n\tdocument = doc;docElem = doc.documentElement;parent = doc.defaultView; // Support: IE>8\n\t// If iframe document is assigned to \"document\" variable and if iframe has been reloaded,\n\t// IE will throw \"permission denied\" error when accessing \"document\" variable, see jQuery #13936\n\t// IE6-8 do not support the defaultView property so parent will be undefined\n\tif(parent && parent !== parent.top){ // IE11 does not have attachEvent, so all must suffer\n\tif(parent.addEventListener){parent.addEventListener(\"unload\",unloadHandler,false);}else if(parent.attachEvent){parent.attachEvent(\"onunload\",unloadHandler);}} /* Support tests\n\t\t---------------------------------------------------------------------- */documentIsHTML = !isXML(doc); /* Attributes\n\t\t---------------------------------------------------------------------- */ // Support: IE<8\n\t// Verify that getAttribute really returns attributes and not properties\n\t// (excepting IE8 booleans)\n\tsupport.attributes = assert(function(div){div.className = \"i\";return !div.getAttribute(\"className\");}); /* getElement(s)By*\n\t\t---------------------------------------------------------------------- */ // Check if getElementsByTagName(\"*\") returns only elements\n\tsupport.getElementsByTagName = assert(function(div){div.appendChild(doc.createComment(\"\"));return !div.getElementsByTagName(\"*\").length;}); // Support: IE<9\n\tsupport.getElementsByClassName = rnative.test(doc.getElementsByClassName); // Support: IE<10\n\t// Check if getElementById returns elements by name\n\t// The broken getElementById methods don't pick up programatically-set names,\n\t// so use a roundabout getElementsByName test\n\tsupport.getById = assert(function(div){docElem.appendChild(div).id = expando;return !doc.getElementsByName || !doc.getElementsByName(expando).length;}); // ID find and filter\n\tif(support.getById){Expr.find[\"ID\"] = function(id,context){if(typeof context.getElementById !== \"undefined\" && documentIsHTML){var m=context.getElementById(id); // Check parentNode to catch when Blackberry 4.6 returns\n\t// nodes that are no longer in the document #6963\n\treturn m && m.parentNode?[m]:[];}};Expr.filter[\"ID\"] = function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute(\"id\") === attrId;};};}else { // Support: IE6/7\n\t// getElementById is not reliable as a find shortcut\n\tdelete Expr.find[\"ID\"];Expr.filter[\"ID\"] = function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode !== \"undefined\" && elem.getAttributeNode(\"id\");return node && node.value === attrId;};};} // Tag\n\tExpr.find[\"TAG\"] = support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName !== \"undefined\"){return context.getElementsByTagName(tag); // DocumentFragment nodes don't have gEBTN\n\t}else if(support.qsa){return context.querySelectorAll(tag);}}:function(tag,context){var elem,tmp=[],i=0, // By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too\n\tresults=context.getElementsByTagName(tag); // Filter out possible comments\n\tif(tag === \"*\"){while(elem = results[i++]) {if(elem.nodeType === 1){tmp.push(elem);}}return tmp;}return results;}; // Class\n\tExpr.find[\"CLASS\"] = support.getElementsByClassName && function(className,context){if(documentIsHTML){return context.getElementsByClassName(className);}}; /* QSA/matchesSelector\n\t\t---------------------------------------------------------------------- */ // QSA and matchesSelector support\n\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\trbuggyMatches = []; // qSa(:focus) reports false when true (Chrome 21)\n\t// We allow this because of a bug in IE8/9 that throws an error\n\t// whenever `document.activeElement` is accessed on an iframe\n\t// So, we allow :focus to pass through QSA all the time to avoid the IE error\n\t// See http://bugs.jquery.com/ticket/13378\n\trbuggyQSA = [];if(support.qsa = rnative.test(doc.querySelectorAll)){ // Build QSA regex\n\t// Regex strategy adopted from Diego Perini\n\tassert(function(div){ // Select is set to empty string on purpose\n\t// This is to test IE's treatment of not explicitly\n\t// setting a boolean content attribute,\n\t// since its presence should be enough\n\t// http://bugs.jquery.com/ticket/12359\n\tdocElem.appendChild(div).innerHTML = \"<a id='\" + expando + \"'></a>\" + \"<select id='\" + expando + \"-\\f]' msallowcapture=''>\" + \"<option selected=''></option></select>\"; // Support: IE8, Opera 11-12.16\n\t// Nothing should be selected when empty strings follow ^= or $= or *=\n\t// The test attribute must be unknown in Opera but \"safe\" for WinRT\n\t// http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section\n\tif(div.querySelectorAll(\"[msallowcapture^='']\").length){rbuggyQSA.push(\"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\");} // Support: IE8\n\t// Boolean attributes and \"value\" are not treated correctly\n\tif(!div.querySelectorAll(\"[selected]\").length){rbuggyQSA.push(\"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\");} // Support: Chrome<29, Android<4.2+, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.7+\n\tif(!div.querySelectorAll(\"[id~=\" + expando + \"-]\").length){rbuggyQSA.push(\"~=\");} // Webkit/Opera - :checked should return selected option elements\n\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t// IE8 throws error here and will not see later tests\n\tif(!div.querySelectorAll(\":checked\").length){rbuggyQSA.push(\":checked\");} // Support: Safari 8+, iOS 8+\n\t// https://bugs.webkit.org/show_bug.cgi?id=136851\n\t// In-page `selector#id sibing-combinator selector` fails\n\tif(!div.querySelectorAll(\"a#\" + expando + \"+*\").length){rbuggyQSA.push(\".#.+[+~]\");}});assert(function(div){ // Support: Windows 8 Native Apps\n\t// The type and name attributes are restricted during .innerHTML assignment\n\tvar input=doc.createElement(\"input\");input.setAttribute(\"type\",\"hidden\");div.appendChild(input).setAttribute(\"name\",\"D\"); // Support: IE8\n\t// Enforce case-sensitivity of name attribute\n\tif(div.querySelectorAll(\"[name=d]\").length){rbuggyQSA.push(\"name\" + whitespace + \"*[*^$|!~]?=\");} // FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n\t// IE8 throws error here and will not see later tests\n\tif(!div.querySelectorAll(\":enabled\").length){rbuggyQSA.push(\":enabled\",\":disabled\");} // Opera 10-11 does not throw on post-comma invalid pseudos\n\tdiv.querySelectorAll(\"*,:x\");rbuggyQSA.push(\",.*:\");});}if(support.matchesSelector = rnative.test(matches = docElem.matches || docElem.webkitMatchesSelector || docElem.mozMatchesSelector || docElem.oMatchesSelector || docElem.msMatchesSelector)){assert(function(div){ // Check to see if it's possible to do matchesSelector\n\t// on a disconnected node (IE 9)\n\tsupport.disconnectedMatch = matches.call(div,\"div\"); // This should fail with an exception\n\t// Gecko does not error, returns false instead\n\tmatches.call(div,\"[s!='']:x\");rbuggyMatches.push(\"!=\",pseudos);});}rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join(\"|\"));rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join(\"|\")); /* Contains\n\t\t---------------------------------------------------------------------- */hasCompare = rnative.test(docElem.compareDocumentPosition); // Element contains another\n\t// Purposefully does not implement inclusive descendent\n\t// As in, an element does not contain itself\n\tcontains = hasCompare || rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType === 9?a.documentElement:a,bup=b && b.parentNode;return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains?adown.contains(bup):a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));}:function(a,b){if(b){while(b = b.parentNode) {if(b === a){return true;}}}return false;}; /* Sorting\n\t\t---------------------------------------------------------------------- */ // Document order sorting\n\tsortOrder = hasCompare?function(a,b){ // Flag for duplicate removal\n\tif(a === b){hasDuplicate = true;return 0;} // Sort on method existence if only one input has compareDocumentPosition\n\tvar compare=!a.compareDocumentPosition - !b.compareDocumentPosition;if(compare){return compare;} // Calculate position if both inputs belong to the same document\n\tcompare = (a.ownerDocument || a) === (b.ownerDocument || b)?a.compareDocumentPosition(b): // Otherwise we know they are disconnected\n\t1; // Disconnected nodes\n\tif(compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare){ // Choose the first element that is related to our preferred document\n\tif(a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc,a)){return -1;}if(b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc,b)){return 1;} // Maintain original order\n\treturn sortInput?indexOf(sortInput,a) - indexOf(sortInput,b):0;}return compare & 4?-1:1;}:function(a,b){ // Exit early if the nodes are identical\n\tif(a === b){hasDuplicate = true;return 0;}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b]; // Parentless nodes are either documents or disconnected\n\tif(!aup || !bup){return a === doc?-1:b === doc?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a) - indexOf(sortInput,b):0; // If the nodes are siblings, we can do a quick check\n\t}else if(aup === bup){return siblingCheck(a,b);} // Otherwise we need full lists of their ancestors for comparison\n\tcur = a;while(cur = cur.parentNode) {ap.unshift(cur);}cur = b;while(cur = cur.parentNode) {bp.unshift(cur);} // Walk down the tree looking for a discrepancy\n\twhile(ap[i] === bp[i]) {i++;}return i? // Do a sibling check if the nodes have a common ancestor\n\tsiblingCheck(ap[i],bp[i]): // Otherwise nodes in our document sort first\n\tap[i] === preferredDoc?-1:bp[i] === preferredDoc?1:0;};return doc;};Sizzle.matches = function(expr,elements){return Sizzle(expr,null,null,elements);};Sizzle.matchesSelector = function(elem,expr){ // Set document vars if needed\n\tif((elem.ownerDocument || elem) !== document){setDocument(elem);} // Make sure that attribute selectors are quoted\n\texpr = expr.replace(rattributeQuotes,\"='$1']\");if(support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr); // IE 9's matchesSelector returns false on disconnected nodes\n\tif(ret || support.disconnectedMatch ||  // As well, disconnected nodes are said to be in a document\n\t// fragment in IE 9\n\telem.document && elem.document.nodeType !== 11){return ret;}}catch(e) {}}return Sizzle(expr,document,null,[elem]).length > 0;};Sizzle.contains = function(context,elem){ // Set document vars if needed\n\tif((context.ownerDocument || context) !== document){setDocument(context);}return contains(context,elem);};Sizzle.attr = function(elem,name){ // Set document vars if needed\n\tif((elem.ownerDocument || elem) !== document){setDocument(elem);}var fn=Expr.attrHandle[name.toLowerCase()], // Don't get fooled by Object.prototype properties (jQuery #13807)\n\tval=fn && hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val !== undefined?val:support.attributes || !documentIsHTML?elem.getAttribute(name):(val = elem.getAttributeNode(name)) && val.specified?val.value:null;};Sizzle.error = function(msg){throw new Error(\"Syntax error, unrecognized expression: \" + msg);}; /**\n\t * Document sorting and removing duplicates\n\t * @param {ArrayLike} results\n\t */Sizzle.uniqueSort = function(results){var elem,duplicates=[],j=0,i=0; // Unless we *know* we can detect duplicates, assume their presence\n\thasDuplicate = !support.detectDuplicates;sortInput = !support.sortStable && results.slice(0);results.sort(sortOrder);if(hasDuplicate){while(elem = results[i++]) {if(elem === results[i]){j = duplicates.push(i);}}while(j--) {results.splice(duplicates[j],1);}} // Clear input after sorting to release objects\n\t// See https://github.com/jquery/sizzle/pull/225\n\tsortInput = null;return results;}; /**\n\t * Utility function for retrieving the text value of an array of DOM nodes\n\t * @param {Array|Element} elem\n\t */getText = Sizzle.getText = function(elem){var node,ret=\"\",i=0,nodeType=elem.nodeType;if(!nodeType){ // If no nodeType, this is expected to be an array\n\twhile(node = elem[i++]) { // Do not traverse comment nodes\n\tret += getText(node);}}else if(nodeType === 1 || nodeType === 9 || nodeType === 11){ // Use textContent for elements\n\t// innerText usage removed for consistency of new lines (jQuery #11153)\n\tif(typeof elem.textContent === \"string\"){return elem.textContent;}else { // Traverse its children\n\tfor(elem = elem.firstChild;elem;elem = elem.nextSibling) {ret += getText(elem);}}}else if(nodeType === 3 || nodeType === 4){return elem.nodeValue;} // Do not include comment or processing instruction nodes\n\treturn ret;};Expr = Sizzle.selectors = { // Can be adjusted by the user\n\tcacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:true},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:true},\"~\":{dir:\"previousSibling\"}},preFilter:{\"ATTR\":function ATTR(match){match[1] = match[1].replace(runescape,funescape); // Move the given value to match[3] whether quoted or unquoted\n\tmatch[3] = (match[3] || match[4] || match[5] || \"\").replace(runescape,funescape);if(match[2] === \"~=\"){match[3] = \" \" + match[3] + \" \";}return match.slice(0,4);},\"CHILD\":function CHILD(match){ /* matches from matchExpr[\"CHILD\"]\n\t\t\t\t\t1 type (only|nth|...)\n\t\t\t\t\t2 what (child|of-type)\n\t\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t\t5 sign of xn-component\n\t\t\t\t\t6 x of xn-component\n\t\t\t\t\t7 sign of y-component\n\t\t\t\t\t8 y of y-component\n\t\t\t\t*/match[1] = match[1].toLowerCase();if(match[1].slice(0,3) === \"nth\"){ // nth-* requires argument\n\tif(!match[3]){Sizzle.error(match[0]);} // numeric x and y parameters for Expr.filter.CHILD\n\t// remember that false/true cast respectively to 0/1\n\tmatch[4] = +(match[4]?match[5] + (match[6] || 1):2 * (match[3] === \"even\" || match[3] === \"odd\"));match[5] = +(match[7] + match[8] || match[3] === \"odd\"); // other types prohibit arguments\n\t}else if(match[3]){Sizzle.error(match[0]);}return match;},\"PSEUDO\":function PSEUDO(match){var excess,unquoted=!match[6] && match[2];if(matchExpr[\"CHILD\"].test(match[0])){return null;} // Accept quoted arguments as-is\n\tif(match[3]){match[2] = match[4] || match[5] || \"\"; // Strip excess characters from unquoted arguments\n\t}else if(unquoted && rpseudo.test(unquoted) && ( // Get excess from tokenize (recursively)\n\texcess = tokenize(unquoted,true)) && ( // advance to the next closing parenthesis\n\texcess = unquoted.indexOf(\")\",unquoted.length - excess) - unquoted.length)){ // excess is a negative index\n\tmatch[0] = match[0].slice(0,excess);match[2] = unquoted.slice(0,excess);} // Return only captures needed by the pseudo filter method (type and argument)\n\treturn match.slice(0,3);}},filter:{\"TAG\":function TAG(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector === \"*\"?function(){return true;}:function(elem){return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;};},\"CLASS\":function CLASS(className){var pattern=classCache[className + \" \"];return pattern || (pattern = new RegExp(\"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\")) && classCache(className,function(elem){return pattern.test(typeof elem.className === \"string\" && elem.className || typeof elem.getAttribute !== \"undefined\" && elem.getAttribute(\"class\") || \"\");});},\"ATTR\":function ATTR(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result == null){return operator === \"!=\";}if(!operator){return true;}result += \"\";return operator === \"=\"?result === check:operator === \"!=\"?result !== check:operator === \"^=\"?check && result.indexOf(check) === 0:operator === \"*=\"?check && result.indexOf(check) > -1:operator === \"$=\"?check && result.slice(-check.length) === check:operator === \"~=\"?(\" \" + result.replace(rwhitespace,\" \") + \" \").indexOf(check) > -1:operator === \"|=\"?result === check || result.slice(0,check.length + 1) === check + \"-\":false;};},\"CHILD\":function CHILD(type,what,argument,first,last){var simple=type.slice(0,3) !== \"nth\",forward=type.slice(-4) !== \"last\",ofType=what === \"of-type\";return first === 1 && last === 0? // Shortcut for :nth-*(n)\n\tfunction(elem){return !!elem.parentNode;}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple !== forward?\"nextSibling\":\"previousSibling\",parent=elem.parentNode,name=ofType && elem.nodeName.toLowerCase(),useCache=!xml && !ofType;if(parent){ // :(first|last|only)-(child|of-type)\n\tif(simple){while(dir) {node = elem;while(node = node[dir]) {if(ofType?node.nodeName.toLowerCase() === name:node.nodeType === 1){return false;}} // Reverse direction for :only-* (if we haven't yet done so)\n\tstart = dir = type === \"only\" && !start && \"nextSibling\";}return true;}start = [forward?parent.firstChild:parent.lastChild]; // non-xml :nth-child(...) stores cache data on `parent`\n\tif(forward && useCache){ // Seek `elem` from a previously-cached index\n\touterCache = parent[expando] || (parent[expando] = {});cache = outerCache[type] || [];nodeIndex = cache[0] === dirruns && cache[1];diff = cache[0] === dirruns && cache[2];node = nodeIndex && parent.childNodes[nodeIndex];while(node = ++nodeIndex && node && node[dir] || ( // Fallback to seeking `elem` from the start\n\tdiff = nodeIndex = 0) || start.pop()) { // When found, cache indexes on `parent` and break\n\tif(node.nodeType === 1 && ++diff && node === elem){outerCache[type] = [dirruns,nodeIndex,diff];break;}} // Use previously-cached element index if available\n\t}else if(useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns){diff = cache[1]; // xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t}else { // Use the same loop as above to seek `elem` from the start\n\twhile(node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {if((ofType?node.nodeName.toLowerCase() === name:node.nodeType === 1) && ++diff){ // Cache the index of each encountered element\n\tif(useCache){(node[expando] || (node[expando] = {}))[type] = [dirruns,diff];}if(node === elem){break;}}}} // Incorporate the offset, then check against cycle size\n\tdiff -= last;return diff === first || diff % first === 0 && diff / first >= 0;}};},\"PSEUDO\":function PSEUDO(pseudo,argument){ // pseudo-class names are case-insensitive\n\t// http://www.w3.org/TR/selectors/#pseudo-classes\n\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t// Remember that setFilters inherits from pseudos\n\tvar args,fn=Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error(\"unsupported pseudo: \" + pseudo); // The user may use createPseudo to indicate that\n\t// arguments are needed to create the filter function\n\t// just as Sizzle does\n\tif(fn[expando]){return fn(argument);} // But maintain support for old signatures\n\tif(fn.length > 1){args = [pseudo,pseudo,\"\",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--) {idx = indexOf(seed,matched[i]);seed[idx] = !(matches[idx] = matched[i]);}}):function(elem){return fn(elem,0,args);};}return fn;}},pseudos:{ // Potentially complex pseudos\n\t\"not\":markFunction(function(selector){ // Trim the selector passed to compile\n\t// to avoid treating leading and trailing\n\t// spaces as combinators\n\tvar input=[],results=[],matcher=compile(selector.replace(rtrim,\"$1\"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length; // Match elements unmatched by `matcher`\n\twhile(i--) {if(elem = unmatched[i]){seed[i] = !(matches[i] = elem);}}}):function(elem,context,xml){input[0] = elem;matcher(input,null,xml,results); // Don't keep the element (issue #299)\n\tinput[0] = null;return !results.pop();};}),\"has\":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length > 0;};}),\"contains\":markFunction(function(text){text = text.replace(runescape,funescape);return function(elem){return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;};}), // \"Whether an element is represented by a :lang() selector\n\t// is based solely on the element's language value\n\t// being equal to the identifier C,\n\t// or beginning with the identifier C immediately followed by \"-\".\n\t// The matching of C against the element's language value is performed case-insensitively.\n\t// The identifier C does not have to be a valid language name.\"\n\t// http://www.w3.org/TR/selectors/#lang-pseudo\n\t\"lang\":markFunction(function(lang){ // lang value must be a valid identifier\n\tif(!ridentifier.test(lang || \"\")){Sizzle.error(\"unsupported lang: \" + lang);}lang = lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do {if(elemLang = documentIsHTML?elem.lang:elem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\")){elemLang = elemLang.toLowerCase();return elemLang === lang || elemLang.indexOf(lang + \"-\") === 0;}}while((elem = elem.parentNode) && elem.nodeType === 1);return false;};}), // Miscellaneous\n\t\"target\":function target(elem){var hash=window.location && window.location.hash;return hash && hash.slice(1) === elem.id;},\"root\":function root(elem){return elem === docElem;},\"focus\":function focus(elem){return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);}, // Boolean properties\n\t\"enabled\":function enabled(elem){return elem.disabled === false;},\"disabled\":function disabled(elem){return elem.disabled === true;},\"checked\":function checked(elem){ // In CSS3, :checked should return both checked and selected elements\n\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\tvar nodeName=elem.nodeName.toLowerCase();return nodeName === \"input\" && !!elem.checked || nodeName === \"option\" && !!elem.selected;},\"selected\":function selected(elem){ // Accessing this property makes selected-by-default\n\t// options in Safari work properly\n\tif(elem.parentNode){elem.parentNode.selectedIndex;}return elem.selected === true;}, // Contents\n\t\"empty\":function empty(elem){ // http://www.w3.org/TR/selectors/#empty-pseudo\n\t// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n\t//   but not by others (comment: 8; processing instruction: 7; etc.)\n\t// nodeType < 6 works because attributes (2) do not appear as children\n\tfor(elem = elem.firstChild;elem;elem = elem.nextSibling) {if(elem.nodeType < 6){return false;}}return true;},\"parent\":function parent(elem){return !Expr.pseudos[\"empty\"](elem);}, // Element/input types\n\t\"header\":function header(elem){return rheader.test(elem.nodeName);},\"input\":function input(elem){return rinputs.test(elem.nodeName);},\"button\":function button(elem){var name=elem.nodeName.toLowerCase();return name === \"input\" && elem.type === \"button\" || name === \"button\";},\"text\":function text(elem){var attr;return elem.nodeName.toLowerCase() === \"input\" && elem.type === \"text\" && ( // Support: IE<8\n\t// New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\n\t(attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === \"text\");}, // Position-in-collection\n\t\"first\":createPositionalPseudo(function(){return [0];}),\"last\":createPositionalPseudo(function(matchIndexes,length){return [length - 1];}),\"eq\":createPositionalPseudo(function(matchIndexes,length,argument){return [argument < 0?argument + length:argument];}),\"even\":createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i < length;i += 2) {matchIndexes.push(i);}return matchIndexes;}),\"odd\":createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i < length;i += 2) {matchIndexes.push(i);}return matchIndexes;}),\"lt\":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument < 0?argument + length:argument;for(;--i >= 0;) {matchIndexes.push(i);}return matchIndexes;}),\"gt\":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument < 0?argument + length:argument;for(;++i < length;) {matchIndexes.push(i);}return matchIndexes;})}};Expr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"]; // Add button/input type pseudos\n\tfor(i in {radio:true,checkbox:true,file:true,password:true,image:true}) {Expr.pseudos[i] = createInputPseudo(i);}for(i in {submit:true,reset:true}) {Expr.pseudos[i] = createButtonPseudo(i);} // Easy API for creating new setFilters\n\tfunction setFilters(){}setFilters.prototype = Expr.filters = Expr.pseudos;Expr.setFilters = new setFilters();tokenize = Sizzle.tokenize = function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector + \" \"];if(cached){return parseOnly?0:cached.slice(0);}soFar = selector;groups = [];preFilters = Expr.preFilter;while(soFar) { // Comma and first run\n\tif(!matched || (match = rcomma.exec(soFar))){if(match){ // Don't consume trailing commas as valid\n\tsoFar = soFar.slice(match[0].length) || soFar;}groups.push(tokens = []);}matched = false; // Combinators\n\tif(match = rcombinators.exec(soFar)){matched = match.shift();tokens.push({value:matched, // Cast descendant combinators to space\n\ttype:match[0].replace(rtrim,\" \")});soFar = soFar.slice(matched.length);} // Filters\n\tfor(type in Expr.filter) {if((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))){matched = match.shift();tokens.push({value:matched,type:type,matches:match});soFar = soFar.slice(matched.length);}}if(!matched){break;}} // Return the length of the invalid excess\n\t// if we're just parsing\n\t// Otherwise, throw an error or return tokens\n\treturn parseOnly?soFar.length:soFar?Sizzle.error(selector): // Cache the tokens\n\ttokenCache(selector,groups).slice(0);};function toSelector(tokens){var i=0,len=tokens.length,selector=\"\";for(;i < len;i++) {selector += tokens[i].value;}return selector;}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base && dir === \"parentNode\",doneName=done++;return combinator.first? // Check against closest ancestor/preceding element\n\tfunction(elem,context,xml){while(elem = elem[dir]) {if(elem.nodeType === 1 || checkNonElements){return matcher(elem,context,xml);}}}: // Check against all ancestor/preceding elements\n\tfunction(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName]; // We can't set arbitrary data on XML nodes, so they don't benefit from dir caching\n\tif(xml){while(elem = elem[dir]) {if(elem.nodeType === 1 || checkNonElements){if(matcher(elem,context,xml)){return true;}}}}else {while(elem = elem[dir]) {if(elem.nodeType === 1 || checkNonElements){outerCache = elem[expando] || (elem[expando] = {});if((oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName){ // Assign to newCache so results back-propagate to previous elements\n\treturn newCache[2] = oldCache[2];}else { // Reuse newcache so results back-propagate to previous elements\n\touterCache[dir] = newCache; // A match means we're done; a fail means we have to keep checking\n\tif(newCache[2] = matcher(elem,context,xml)){return true;}}}}}};}function elementMatcher(matchers){return matchers.length > 1?function(elem,context,xml){var i=matchers.length;while(i--) {if(!matchers[i](elem,context,xml)){return false;}}return true;}:matchers[0];}function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i < len;i++) {Sizzle(selector,contexts[i],results);}return results;}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map != null;for(;i < len;i++) {if(elem = unmatched[i]){if(!filter || filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i);}}}}return newUnmatched;}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter && !postFilter[expando]){postFilter = setMatcher(postFilter);}if(postFinder && !postFinder[expando]){postFinder = setMatcher(postFinder,postSelector);}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length, // Get initial elements from seed or context\n\telems=seed || multipleContexts(selector || \"*\",context.nodeType?[context]:context,[]), // Prefilter to get matcher input, preserving a map for seed-results synchronization\n\tmatcherIn=preFilter && (seed || !selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher? // If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n\tpostFinder || (seed?preFilter:preexisting || postFilter)? // ...intermediate processing is necessary\n\t[]: // ...otherwise use results directly\n\tresults:matcherIn; // Find primary matches\n\tif(matcher){matcher(matcherIn,matcherOut,context,xml);} // Apply postFilter\n\tif(postFilter){temp = condense(matcherOut,postMap);postFilter(temp,[],context,xml); // Un-match failing elements by moving them back to matcherIn\n\ti = temp.length;while(i--) {if(elem = temp[i]){matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);}}}if(seed){if(postFinder || preFilter){if(postFinder){ // Get the final matcherOut by condensing this intermediate into postFinder contexts\n\ttemp = [];i = matcherOut.length;while(i--) {if(elem = matcherOut[i]){ // Restore matcherIn since elem is not yet a final match\n\ttemp.push(matcherIn[i] = elem);}}postFinder(null,matcherOut = [],temp,xml);} // Move matched elements from seed to results to keep them synchronized\n\ti = matcherOut.length;while(i--) {if((elem = matcherOut[i]) && (temp = postFinder?indexOf(seed,elem):preMap[i]) > -1){seed[temp] = !(results[temp] = elem);}}} // Add elements to results, through postFinder if defined\n\t}else {matcherOut = condense(matcherOut === results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml);}else {push.apply(results,matcherOut);}}});}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative || Expr.relative[\" \"],i=leadingRelative?1:0, // The foundational matcher ensures that elements are reachable from top-level context(s)\n\tmatchContext=addCombinator(function(elem){return elem === checkContext;},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem) > -1;},implicitRelative,true),matchers=[function(elem,context,xml){var ret=!leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml)); // Avoid hanging onto element (issue #299)\n\tcheckContext = null;return ret;}];for(;i < len;i++) {if(matcher = Expr.relative[tokens[i].type]){matchers = [addCombinator(elementMatcher(matchers),matcher)];}else {matcher = Expr.filter[tokens[i].type].apply(null,tokens[i].matches); // Return special upon seeing a positional matcher\n\tif(matcher[expando]){ // Find the next relative operator (if any) for proper handling\n\tj = ++i;for(;j < len;j++) {if(Expr.relative[tokens[j].type]){break;}}return setMatcher(i > 1 && elementMatcher(matchers),i > 1 && toSelector( // If the preceding token was a descendant combinator, insert an implicit any-element `*`\n\ttokens.slice(0,i - 1).concat({value:tokens[i - 2].type === \" \"?\"*\":\"\"})).replace(rtrim,\"$1\"),matcher,i < j && matcherFromTokens(tokens.slice(i,j)),j < len && matcherFromTokens(tokens = tokens.slice(j)),j < len && toSelector(tokens));}matchers.push(matcher);}}return elementMatcher(matchers);}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length > 0,byElement=elementMatchers.length > 0,superMatcher=function superMatcher(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i=\"0\",unmatched=seed && [],setMatched=[],contextBackup=outermostContext, // We must always have either seed elements or outermost context\n\telems=seed || byElement && Expr.find[\"TAG\"](\"*\",outermost), // Use integer dirruns iff this is the outermost matcher\n\tdirrunsUnique=dirruns += contextBackup == null?1:Math.random() || 0.1,len=elems.length;if(outermost){outermostContext = context !== document && context;} // Add elements passing elementMatchers directly to results\n\t// Keep `i` a string if there are no elements so `matchedCount` will be \"00\" below\n\t// Support: IE<9, Safari\n\t// Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\n\tfor(;i !== len && (elem = elems[i]) != null;i++) {if(byElement && elem){j = 0;while(matcher = elementMatchers[j++]) {if(matcher(elem,context,xml)){results.push(elem);break;}}if(outermost){dirruns = dirrunsUnique;}} // Track unmatched elements for set filters\n\tif(bySet){ // They will have gone through all possible matchers\n\tif(elem = !matcher && elem){matchedCount--;} // Lengthen the array for every element, matched or not\n\tif(seed){unmatched.push(elem);}}} // Apply set filters to unmatched elements\n\tmatchedCount += i;if(bySet && i !== matchedCount){j = 0;while(matcher = setMatchers[j++]) {matcher(unmatched,setMatched,context,xml);}if(seed){ // Reintegrate element matches to eliminate the need for sorting\n\tif(matchedCount > 0){while(i--) {if(!(unmatched[i] || setMatched[i])){setMatched[i] = pop.call(results);}}} // Discard index placeholder values to get only actual matches\n\tsetMatched = condense(setMatched);} // Add matches to results\n\tpush.apply(results,setMatched); // Seedless set matches succeeding multiple successful matchers stipulate sorting\n\tif(outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1){Sizzle.uniqueSort(results);}} // Override manipulation of globals by nested matchers\n\tif(outermost){dirruns = dirrunsUnique;outermostContext = contextBackup;}return unmatched;};return bySet?markFunction(superMatcher):superMatcher;}compile = Sizzle.compile = function(selector,match /* Internal Use Only */){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector + \" \"];if(!cached){ // Generate a function of recursive functions that can be used to check each element\n\tif(!match){match = tokenize(selector);}i = match.length;while(i--) {cached = matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached);}else {elementMatchers.push(cached);}} // Cache the compiled function\n\tcached = compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers)); // Save selector and tokenization\n\tcached.selector = selector;}return cached;}; /**\n\t * A low-level selection function that works with Sizzle's compiled\n\t *  selector functions\n\t * @param {String|Function} selector A selector or a pre-compiled\n\t *  selector function built with Sizzle.compile\n\t * @param {Element} context\n\t * @param {Array} [results]\n\t * @param {Array} [seed] A set of elements to match against\n\t */select = Sizzle.select = function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector === \"function\" && selector,match=!seed && tokenize(selector = compiled.selector || selector);results = results || []; // Try to minimize operations if there is no seed and only one group\n\tif(match.length === 1){ // Take a shortcut and set the context if the root selector is an ID\n\ttokens = match[0] = match[0].slice(0);if(tokens.length > 2 && (token = tokens[0]).type === \"ID\" && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]){context = (Expr.find[\"ID\"](token.matches[0].replace(runescape,funescape),context) || [])[0];if(!context){return results; // Precompiled matchers will still verify ancestry, so step up a level\n\t}else if(compiled){context = context.parentNode;}selector = selector.slice(tokens.shift().value.length);} // Fetch a seed set for right-to-left matching\n\ti = matchExpr[\"needsContext\"].test(selector)?0:tokens.length;while(i--) {token = tokens[i]; // Abort if we hit a combinator\n\tif(Expr.relative[type = token.type]){break;}if(find = Expr.find[type]){ // Search, expanding context for leading sibling combinators\n\tif(seed = find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)){ // If seed is empty or no tokens remain, we can return early\n\ttokens.splice(i,1);selector = seed.length && toSelector(tokens);if(!selector){push.apply(results,seed);return results;}break;}}}} // Compile and execute a filtering function if one is not provided\n\t// Provide `match` to avoid retokenization if we modified the selector above\n\t(compiled || compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector) && testContext(context.parentNode) || context);return results;}; // One-time assignments\n\t// Sort stability\n\tsupport.sortStable = expando.split(\"\").sort(sortOrder).join(\"\") === expando; // Support: Chrome 14-35+\n\t// Always assume duplicates if they aren't passed to the comparison function\n\tsupport.detectDuplicates = !!hasDuplicate; // Initialize against the default document\n\tsetDocument(); // Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\n\t// Detached nodes confoundingly follow *each other*\n\tsupport.sortDetached = assert(function(div1){ // Should return 1, but returns 4 (following)\n\treturn div1.compareDocumentPosition(document.createElement(\"div\")) & 1;}); // Support: IE<8\n\t// Prevent attribute/property \"interpolation\"\n\t// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\n\tif(!assert(function(div){div.innerHTML = \"<a href='#'></a>\";return div.firstChild.getAttribute(\"href\") === \"#\";})){addHandle(\"type|href|height|width\",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase() === \"type\"?1:2);}});} // Support: IE<9\n\t// Use defaultValue in place of getAttribute(\"value\")\n\tif(!support.attributes || !assert(function(div){div.innerHTML = \"<input/>\";div.firstChild.setAttribute(\"value\",\"\");return div.firstChild.getAttribute(\"value\") === \"\";})){addHandle(\"value\",function(elem,name,isXML){if(!isXML && elem.nodeName.toLowerCase() === \"input\"){return elem.defaultValue;}});} // Support: IE<9\n\t// Use getAttributeNode to fetch booleans when getAttribute lies\n\tif(!assert(function(div){return div.getAttribute(\"disabled\") == null;})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return elem[name] === true?name.toLowerCase():(val = elem.getAttributeNode(name)) && val.specified?val.value:null;}});}return Sizzle;})(window);jQuery.find = Sizzle;jQuery.expr = Sizzle.selectors;jQuery.expr[\":\"] = jQuery.expr.pseudos;jQuery.unique = Sizzle.uniqueSort;jQuery.text = Sizzle.getText;jQuery.isXMLDoc = Sizzle.isXML;jQuery.contains = Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/;var risSimple=/^.[^:#\\[\\.,]*$/; // Implement the identical functionality for filter and not\n\tfunction winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){ /* jshint -W018 */return !!qualifier.call(elem,i,elem) !== not;});}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return elem === qualifier !== not;});}if(typeof qualifier === \"string\"){if(risSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not);}qualifier = jQuery.filter(qualifier,elements);}return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem) >= 0 !== not;});}jQuery.filter = function(expr,elems,not){var elem=elems[0];if(not){expr = \":not(\" + expr + \")\";}return elems.length === 1 && elem.nodeType === 1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType === 1;}));};jQuery.fn.extend({find:function find(selector){var i,len=this.length,ret=[],self=this;if(typeof selector !== \"string\"){return this.pushStack(jQuery(selector).filter(function(){for(i = 0;i < len;i++) {if(jQuery.contains(self[i],this)){return true;}}}));}for(i = 0;i < len;i++) {jQuery.find(selector,self[i],ret);} // Needed because $( selector, context ) becomes $( context ).find( selector )\n\tret = this.pushStack(len > 1?jQuery.unique(ret):ret);ret.selector = this.selector?this.selector + \" \" + selector:selector;return ret;},filter:function filter(selector){return this.pushStack(winnow(this,selector || [],false));},not:function not(selector){return this.pushStack(winnow(this,selector || [],true));},is:function is(selector){return !!winnow(this, // If this is a positional/relative selector, check membership in the returned set\n\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\ttypeof selector === \"string\" && rneedsContext.test(selector)?jQuery(selector):selector || [],false).length;}}); // Initialize a jQuery object\n\t// A central reference to the root jQuery(document)\n\tvar rootjQuery, // A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\n\t// Strict HTML recognition (#11290: must start with <)\n\trquickExpr=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,init=jQuery.fn.init = function(selector,context){var match,elem; // HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\tif(!selector){return this;} // Handle HTML strings\n\tif(typeof selector === \"string\"){if(selector[0] === \"<\" && selector[selector.length - 1] === \">\" && selector.length >= 3){ // Assume that strings that start and end with <> are HTML and skip the regex check\n\tmatch = [null,selector,null];}else {match = rquickExpr.exec(selector);} // Match html or make sure no context is specified for #id\n\tif(match && (match[1] || !context)){ // HANDLE: $(html) -> $(array)\n\tif(match[1]){context = context instanceof jQuery?context[0]:context; // Option to run scripts is true for back-compat\n\t// Intentionally let the error be thrown if parseHTML is not present\n\tjQuery.merge(this,jQuery.parseHTML(match[1],context && context.nodeType?context.ownerDocument || context:document,true)); // HANDLE: $(html, props)\n\tif(rsingleTag.test(match[1]) && jQuery.isPlainObject(context)){for(match in context) { // Properties of context are called as methods if possible\n\tif(jQuery.isFunction(this[match])){this[match](context[match]); // ...and otherwise set as attributes\n\t}else {this.attr(match,context[match]);}}}return this; // HANDLE: $(#id)\n\t}else {elem = document.getElementById(match[2]); // Support: Blackberry 4.6\n\t// gEBID returns nodes no longer in the document (#6963)\n\tif(elem && elem.parentNode){ // Inject the element directly into the jQuery object\n\tthis.length = 1;this[0] = elem;}this.context = document;this.selector = selector;return this;} // HANDLE: $(expr, $(...))\n\t}else if(!context || context.jquery){return (context || rootjQuery).find(selector); // HANDLE: $(expr, context)\n\t// (which is just equivalent to: $(context).find(expr)\n\t}else {return this.constructor(context).find(selector);} // HANDLE: $(DOMElement)\n\t}else if(selector.nodeType){this.context = this[0] = selector;this.length = 1;return this; // HANDLE: $(function)\n\t// Shortcut for document ready\n\t}else if(jQuery.isFunction(selector)){return typeof rootjQuery.ready !== \"undefined\"?rootjQuery.ready(selector): // Execute immediately if ready is not present\n\tselector(jQuery);}if(selector.selector !== undefined){this.selector = selector.selector;this.context = selector.context;}return jQuery.makeArray(selector,this);}; // Give the init function the jQuery prototype for later instantiation\n\tinit.prototype = jQuery.fn; // Initialize central reference\n\trootjQuery = jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/, // Methods guaranteed to produce a unique set when starting from a unique set\n\tguaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.extend({dir:function dir(elem,_dir,until){var matched=[],truncate=until !== undefined;while((elem = elem[_dir]) && elem.nodeType !== 9) {if(elem.nodeType === 1){if(truncate && jQuery(elem).is(until)){break;}matched.push(elem);}}return matched;},sibling:function sibling(n,elem){var matched=[];for(;n;n = n.nextSibling) {if(n.nodeType === 1 && n !== elem){matched.push(n);}}return matched;}});jQuery.fn.extend({has:function has(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i < l;i++) {if(jQuery.contains(this,targets[i])){return true;}}});},closest:function closest(selectors,context){var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors) || typeof selectors !== \"string\"?jQuery(selectors,context || this.context):0;for(;i < l;i++) {for(cur = this[i];cur && cur !== context;cur = cur.parentNode) { // Always skip document fragments\n\tif(cur.nodeType < 11 && (pos?pos.index(cur) > -1: // Don't pass non-elements to Sizzle\n\tcur.nodeType === 1 && jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break;}}}return this.pushStack(matched.length > 1?jQuery.unique(matched):matched);}, // Determine the position of an element within the set\n\tindex:function index(elem){ // No argument, return index in parent\n\tif(!elem){return this[0] && this[0].parentNode?this.first().prevAll().length:-1;} // Index in selector\n\tif(typeof elem === \"string\"){return indexOf.call(jQuery(elem),this[0]);} // Locate the position of the desired element\n\treturn indexOf.call(this, // If it receives a jQuery object, the first element is used\n\telem.jquery?elem[0]:elem);},add:function add(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))));},addBack:function addBack(selector){return this.add(selector == null?this.prevObject:this.prevObject.filter(selector));}});function sibling(cur,dir){while((cur = cur[dir]) && cur.nodeType !== 1) {}return cur;}jQuery.each({parent:function parent(elem){var parent=elem.parentNode;return parent && parent.nodeType !== 11?parent:null;},parents:function parents(elem){return jQuery.dir(elem,\"parentNode\");},parentsUntil:function parentsUntil(elem,i,until){return jQuery.dir(elem,\"parentNode\",until);},next:function next(elem){return sibling(elem,\"nextSibling\");},prev:function prev(elem){return sibling(elem,\"previousSibling\");},nextAll:function nextAll(elem){return jQuery.dir(elem,\"nextSibling\");},prevAll:function prevAll(elem){return jQuery.dir(elem,\"previousSibling\");},nextUntil:function nextUntil(elem,i,until){return jQuery.dir(elem,\"nextSibling\",until);},prevUntil:function prevUntil(elem,i,until){return jQuery.dir(elem,\"previousSibling\",until);},siblings:function siblings(elem){return jQuery.sibling((elem.parentNode || {}).firstChild,elem);},children:function children(elem){return jQuery.sibling(elem.firstChild);},contents:function contents(elem){return elem.contentDocument || jQuery.merge([],elem.childNodes);}},function(name,fn){jQuery.fn[name] = function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5) !== \"Until\"){selector = until;}if(selector && typeof selector === \"string\"){matched = jQuery.filter(selector,matched);}if(this.length > 1){ // Remove duplicates\n\tif(!guaranteedUnique[name]){jQuery.unique(matched);} // Reverse order for parents* and prev-derivatives\n\tif(rparentsprev.test(name)){matched.reverse();}}return this.pushStack(matched);};});var rnotwhite=/\\S+/g; // String to Object options format cache\n\tvar optionsCache={}; // Convert String-formatted options into Object-formatted ones and store in cache\n\tfunction createOptions(options){var object=optionsCache[options] = {};jQuery.each(options.match(rnotwhite) || [],function(_,flag){object[flag] = true;});return object;} /*\n\t * Create a callback list using the following parameters:\n\t *\n\t *\toptions: an optional list of space-separated options that will change how\n\t *\t\t\tthe callback list behaves or a more traditional option object\n\t *\n\t * By default a callback list will act like an event callback list and can be\n\t * \"fired\" multiple times.\n\t *\n\t * Possible options:\n\t *\n\t *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n\t *\n\t *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n\t *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n\t *\t\t\t\t\tvalues (like a Deferred)\n\t *\n\t *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n\t *\n\t *\tstopOnFalse:\tinterrupt callings when a callback returns false\n\t *\n\t */jQuery.Callbacks = function(options){ // Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\"?optionsCache[options] || createOptions(options):jQuery.extend({},options);var  // Last fire value (for non-forgettable lists)\n\tmemory, // Flag to know if list was already fired\n\t_fired, // Flag to know if list is currently firing\n\tfiring, // First callback to fire (used internally by add and fireWith)\n\tfiringStart, // End of the loop when firing\n\tfiringLength, // Index of currently firing callback (modified by remove if needed)\n\tfiringIndex, // Actual callback list\n\tlist=[], // Stack of fire calls for repeatable lists\n\tstack=!options.once && [], // Fire callbacks\n\tfire=function fire(data){memory = options.memory && data;_fired = true;firingIndex = firingStart || 0;firingStart = 0;firingLength = list.length;firing = true;for(;list && firingIndex < firingLength;firingIndex++) {if(list[firingIndex].apply(data[0],data[1]) === false && options.stopOnFalse){memory = false; // To prevent further calls using add\n\tbreak;}}firing = false;if(list){if(stack){if(stack.length){fire(stack.shift());}}else if(memory){list = [];}else {self.disable();}}}, // Actual Callbacks object\n\tself={ // Add a callback or a collection of callbacks to the list\n\tadd:function add(){if(list){ // First, we save the current length\n\tvar start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if(type === \"function\"){if(!options.unique || !self.has(arg)){list.push(arg);}}else if(arg && arg.length && type !== \"string\"){ // Inspect recursively\n\tadd(arg);}});})(arguments); // Do we need to add the callbacks to the\n\t// current firing batch?\n\tif(firing){firingLength = list.length; // With memory, if we're not firing then\n\t// we should call right away\n\t}else if(memory){firingStart = start;fire(memory);}}return this;}, // Remove a callback from the list\n\tremove:function remove(){if(list){jQuery.each(arguments,function(_,arg){var index;while((index = jQuery.inArray(arg,list,index)) > -1) {list.splice(index,1); // Handle firing indexes\n\tif(firing){if(index <= firingLength){firingLength--;}if(index <= firingIndex){firingIndex--;}}}});}return this;}, // Check if a given callback is in the list.\n\t// If no argument is given, return whether or not list has callbacks attached.\n\thas:function has(fn){return fn?jQuery.inArray(fn,list) > -1:!!(list && list.length);}, // Remove all callbacks from the list\n\tempty:function empty(){list = [];firingLength = 0;return this;}, // Have the list do nothing anymore\n\tdisable:function disable(){list = stack = memory = undefined;return this;}, // Is it disabled?\n\tdisabled:function disabled(){return !list;}, // Lock the list in its current state\n\tlock:function lock(){stack = undefined;if(!memory){self.disable();}return this;}, // Is it locked?\n\tlocked:function locked(){return !stack;}, // Call all callbacks with the given context and arguments\n\tfireWith:function fireWith(context,args){if(list && (!_fired || stack)){args = args || [];args = [context,args.slice?args.slice():args];if(firing){stack.push(args);}else {fire(args);}}return this;}, // Call all the callbacks with the given arguments\n\tfire:function fire(){self.fireWith(this,arguments);return this;}, // To know if the callbacks have already been called at least once\n\tfired:function fired(){return !!_fired;}};return self;};jQuery.extend({Deferred:function Deferred(func){var tuples=[ // action, add listener, listener list, final state\n\t[\"resolve\",\"done\",jQuery.Callbacks(\"once memory\"),\"resolved\"],[\"reject\",\"fail\",jQuery.Callbacks(\"once memory\"),\"rejected\"],[\"notify\",\"progress\",jQuery.Callbacks(\"memory\")]],_state=\"pending\",_promise={state:function state(){return _state;},always:function always(){deferred.done(arguments).fail(arguments);return this;},then:function then() /* fnDone, fnFail, fnProgress */{var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i]) && fns[i]; // deferred[ done | fail | progress ] for forwarding actions to newDefer\n\tdeferred[tuple[1]](function(){var returned=fn && fn.apply(this,arguments);if(returned && jQuery.isFunction(returned.promise)){returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify);}else {newDefer[tuple[0] + \"With\"](this === _promise?newDefer.promise():this,fn?[returned]:arguments);}});});fns = null;}).promise();}, // Get a promise for this deferred\n\t// If obj is provided, the promise aspect is added to the object\n\tpromise:function promise(obj){return obj != null?jQuery.extend(obj,_promise):_promise;}},deferred={}; // Keep pipe for back-compat\n\t_promise.pipe = _promise.then; // Add list-specific methods\n\tjQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3]; // promise[ done | fail | progress ] = list.add\n\t_promise[tuple[1]] = list.add; // Handle state\n\tif(stateString){list.add(function(){ // state = [ resolved | rejected ]\n\t_state = stateString; // [ reject_list | resolve_list ].disable; progress_list.lock\n\t},tuples[i ^ 1][2].disable,tuples[2][2].lock);} // deferred[ resolve | reject | notify ]\n\tdeferred[tuple[0]] = function(){deferred[tuple[0] + \"With\"](this === deferred?_promise:this,arguments);return this;};deferred[tuple[0] + \"With\"] = list.fireWith;}); // Make the deferred a promise\n\t_promise.promise(deferred); // Call given func if any\n\tif(func){func.call(deferred,deferred);} // All done!\n\treturn deferred;}, // Deferred helper\n\twhen:function when(subordinate /* , ..., subordinateN */){var i=0,resolveValues=_slice.call(arguments),length=resolveValues.length, // the count of uncompleted subordinates\n\tremaining=length !== 1 || subordinate && jQuery.isFunction(subordinate.promise)?length:0, // the master Deferred. If resolveValues consist of only a single Deferred, just use that.\n\tdeferred=remaining === 1?subordinate:jQuery.Deferred(), // Update function for both resolve and progress values\n\tupdateFunc=function updateFunc(i,contexts,values){return function(value){contexts[i] = this;values[i] = arguments.length > 1?_slice.call(arguments):value;if(values === progressValues){deferred.notifyWith(contexts,values);}else if(! --remaining){deferred.resolveWith(contexts,values);}};},progressValues,progressContexts,resolveContexts; // Add listeners to Deferred subordinates; treat others as resolved\n\tif(length > 1){progressValues = new Array(length);progressContexts = new Array(length);resolveContexts = new Array(length);for(;i < length;i++) {if(resolveValues[i] && jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues));}else {--remaining;}}} // If we're not waiting on anything, resolve the master\n\tif(!remaining){deferred.resolveWith(resolveContexts,resolveValues);}return deferred.promise();}}); // The deferred used on DOM ready\n\tvar readyList;jQuery.fn.ready = function(fn){ // Add the callback\n\tjQuery.ready.promise().done(fn);return this;};jQuery.extend({ // Is the DOM ready to be used? Set to true once it occurs.\n\tisReady:false, // A counter to track how many items to wait for before\n\t// the ready event fires. See #6781\n\treadyWait:1, // Hold (or release) the ready event\n\tholdReady:function holdReady(hold){if(hold){jQuery.readyWait++;}else {jQuery.ready(true);}}, // Handle when the DOM is ready\n\tready:function ready(wait){ // Abort if there are pending holds or we're already ready\n\tif(wait === true?--jQuery.readyWait:jQuery.isReady){return;} // Remember that the DOM is ready\n\tjQuery.isReady = true; // If a normal DOM Ready event fired, decrement, and wait if need be\n\tif(wait !== true && --jQuery.readyWait > 0){return;} // If there are functions bound, to execute\n\treadyList.resolveWith(document,[jQuery]); // Trigger any bound ready events\n\tif(jQuery.fn.triggerHandler){jQuery(document).triggerHandler(\"ready\");jQuery(document).off(\"ready\");}}}); /**\n\t * The ready event handler and self cleanup method\n\t */function completed(){document.removeEventListener(\"DOMContentLoaded\",completed,false);window.removeEventListener(\"load\",completed,false);jQuery.ready();}jQuery.ready.promise = function(obj){if(!readyList){readyList = jQuery.Deferred(); // Catch cases where $(document).ready() is called after the browser event has already occurred.\n\t// We once tried to use readyState \"interactive\" here, but it caused issues like the one\n\t// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15\n\tif(document.readyState === \"complete\"){ // Handle it asynchronously to allow scripts the opportunity to delay ready\n\tsetTimeout(jQuery.ready);}else { // Use the handy event callback\n\tdocument.addEventListener(\"DOMContentLoaded\",completed,false); // A fallback to window.onload, that will always work\n\twindow.addEventListener(\"load\",completed,false);}}return readyList.promise(obj);}; // Kick off the DOM ready check even if the user does not\n\tjQuery.ready.promise(); // Multifunctional method to get and set values of a collection\n\t// The value/s can optionally be executed if it's a function\n\tvar access=jQuery.access = function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key == null; // Sets many values\n\tif(jQuery.type(key) === \"object\"){chainable = true;for(i in key) {jQuery.access(elems,fn,i,key[i],true,emptyGet,raw);} // Sets one value\n\t}else if(value !== undefined){chainable = true;if(!jQuery.isFunction(value)){raw = true;}if(bulk){ // Bulk operations run against the entire set\n\tif(raw){fn.call(elems,value);fn = null; // ...except when executing function values\n\t}else {bulk = fn;fn = function(elem,key,value){return bulk.call(jQuery(elem),value);};}}if(fn){for(;i < len;i++) {fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));}}}return chainable?elems: // Gets\n\tbulk?fn.call(elems):len?fn(elems[0],key):emptyGet;}; /**\n\t * Determines whether an object can have data\n\t */jQuery.acceptData = function(owner){ // Accepts only:\n\t//  - Node\n\t//    - Node.ELEMENT_NODE\n\t//    - Node.DOCUMENT_NODE\n\t//  - Object\n\t//    - Any\n\t/* jshint -W018 */return owner.nodeType === 1 || owner.nodeType === 9 || ! +owner.nodeType;};function Data(){ // Support: Android<4,\n\t// Old WebKit does not have Object.preventExtensions/freeze method,\n\t// return new empty object instead with no [[set]] accessor\n\tObject.defineProperty(this.cache = {},0,{get:function get(){return {};}});this.expando = jQuery.expando + Data.uid++;}Data.uid = 1;Data.accepts = jQuery.acceptData;Data.prototype = {key:function key(owner){ // We can accept data for non-element nodes in modern browsers,\n\t// but we should not, see #8335.\n\t// Always return the key for a frozen object.\n\tif(!Data.accepts(owner)){return 0;}var descriptor={}, // Check if the owner object already has a cache key\n\tunlock=owner[this.expando]; // If not, create one\n\tif(!unlock){unlock = Data.uid++; // Secure it in a non-enumerable, non-writable property\n\ttry{descriptor[this.expando] = {value:unlock};Object.defineProperties(owner,descriptor); // Support: Android<4\n\t// Fallback to a less secure definition\n\t}catch(e) {descriptor[this.expando] = unlock;jQuery.extend(owner,descriptor);}} // Ensure the cache object\n\tif(!this.cache[unlock]){this.cache[unlock] = {};}return unlock;},set:function set(owner,data,value){var prop, // There may be an unlock assigned to this node,\n\t// if there is no entry for this \"owner\", create one inline\n\t// and set the unlock as though an owner entry had always existed\n\tunlock=this.key(owner),cache=this.cache[unlock]; // Handle: [ owner, key, value ] args\n\tif(typeof data === \"string\"){cache[data] = value; // Handle: [ owner, { properties } ] args\n\t}else { // Fresh assignments by object are shallow copied\n\tif(jQuery.isEmptyObject(cache)){jQuery.extend(this.cache[unlock],data); // Otherwise, copy the properties one-by-one to the cache object\n\t}else {for(prop in data) {cache[prop] = data[prop];}}}return cache;},get:function get(owner,key){ // Either a valid cache is found, or will be created.\n\t// New caches will be created and the unlock returned,\n\t// allowing direct access to the newly created\n\t// empty data object. A valid owner object must be provided.\n\tvar cache=this.cache[this.key(owner)];return key === undefined?cache:cache[key];},access:function access(owner,key,value){var stored; // In cases where either:\n\t//\n\t//   1. No key was specified\n\t//   2. A string key was specified, but no value provided\n\t//\n\t// Take the \"read\" path and allow the get method to determine\n\t// which value to return, respectively either:\n\t//\n\t//   1. The entire cache object\n\t//   2. The data stored at the key\n\t//\n\tif(key === undefined || key && typeof key === \"string\" && value === undefined){stored = this.get(owner,key);return stored !== undefined?stored:this.get(owner,jQuery.camelCase(key));} // [*]When the key is not a string, or both a key and value\n\t// are specified, set or extend (existing objects) with either:\n\t//\n\t//   1. An object of properties\n\t//   2. A key and value\n\t//\n\tthis.set(owner,key,value); // Since the \"set\" path can have two possible entry points\n\t// return the expected data based on which path was taken[*]\n\treturn value !== undefined?value:key;},remove:function remove(owner,key){var i,name,camel,unlock=this.key(owner),cache=this.cache[unlock];if(key === undefined){this.cache[unlock] = {};}else { // Support array or space separated string of keys\n\tif(jQuery.isArray(key)){ // If \"name\" is an array of keys...\n\t// When data is initially created, via (\"key\", \"val\") signature,\n\t// keys will be converted to camelCase.\n\t// Since there is no way to tell _how_ a key was added, remove\n\t// both plain key and camelCase key. #12786\n\t// This will only penalize the array argument path.\n\tname = key.concat(key.map(jQuery.camelCase));}else {camel = jQuery.camelCase(key); // Try the string as a key before any manipulation\n\tif(key in cache){name = [key,camel];}else { // If a key with the spaces exists, use it.\n\t// Otherwise, create an array by matching non-whitespace\n\tname = camel;name = name in cache?[name]:name.match(rnotwhite) || [];}}i = name.length;while(i--) {delete cache[name[i]];}}},hasData:function hasData(owner){return !jQuery.isEmptyObject(this.cache[owner[this.expando]] || {});},discard:function discard(owner){if(owner[this.expando]){delete this.cache[owner[this.expando]];}}};var data_priv=new Data();var data_user=new Data(); //\tImplementation Summary\n\t//\n\t//\t1. Enforce API surface and semantic compatibility with 1.9.x branch\n\t//\t2. Improve the module's maintainability by reducing the storage\n\t//\t\tpaths to a single mechanism.\n\t//\t3. Use the same single mechanism to support \"private\" and \"user\" data.\n\t//\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\n\t//\t5. Avoid exposing implementation details on user objects (eg. expando properties)\n\t//\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\n\tvar rbrace=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,rmultiDash=/([A-Z])/g;function dataAttr(elem,key,data){var name; // If nothing was found internally, try to fetch any\n\t// data from the HTML5 data-* attribute\n\tif(data === undefined && elem.nodeType === 1){name = \"data-\" + key.replace(rmultiDash,\"-$1\").toLowerCase();data = elem.getAttribute(name);if(typeof data === \"string\"){try{data = data === \"true\"?true:data === \"false\"?false:data === \"null\"?null: // Only convert to a number if it doesn't change the string\n\t+data + \"\" === data?+data:rbrace.test(data)?jQuery.parseJSON(data):data;}catch(e) {} // Make sure we set the data so it isn't changed later\n\tdata_user.set(elem,key,data);}else {data = undefined;}}return data;}jQuery.extend({hasData:function hasData(elem){return data_user.hasData(elem) || data_priv.hasData(elem);},data:function data(elem,name,_data){return data_user.access(elem,name,_data);},removeData:function removeData(elem,name){data_user.remove(elem,name);}, // TODO: Now that all calls to _data and _removeData have been replaced\n\t// with direct calls to data_priv methods, these can be deprecated.\n\t_data:function _data(elem,name,data){return data_priv.access(elem,name,data);},_removeData:function _removeData(elem,name){data_priv.remove(elem,name);}});jQuery.fn.extend({data:function data(key,value){var i,name,data,elem=this[0],attrs=elem && elem.attributes; // Gets all values\n\tif(key === undefined){if(this.length){data = data_user.get(elem);if(elem.nodeType === 1 && !data_priv.get(elem,\"hasDataAttrs\")){i = attrs.length;while(i--) { // Support: IE11+\n\t// The attrs elements can be null (#14894)\n\tif(attrs[i]){name = attrs[i].name;if(name.indexOf(\"data-\") === 0){name = jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name]);}}}data_priv.set(elem,\"hasDataAttrs\",true);}}return data;} // Sets multiple values\n\tif(typeof key === \"object\"){return this.each(function(){data_user.set(this,key);});}return access(this,function(value){var data,camelKey=jQuery.camelCase(key); // The calling jQuery object (element matches) is not empty\n\t// (and therefore has an element appears at this[ 0 ]) and the\n\t// `value` parameter was not undefined. An empty jQuery object\n\t// will result in `undefined` for elem = this[ 0 ] which will\n\t// throw an exception if an attempt to read a data cache is made.\n\tif(elem && value === undefined){ // Attempt to get data from the cache\n\t// with the key as-is\n\tdata = data_user.get(elem,key);if(data !== undefined){return data;} // Attempt to get data from the cache\n\t// with the key camelized\n\tdata = data_user.get(elem,camelKey);if(data !== undefined){return data;} // Attempt to \"discover\" the data in\n\t// HTML5 custom data-* attrs\n\tdata = dataAttr(elem,camelKey,undefined);if(data !== undefined){return data;} // We tried really hard, but the data doesn't exist.\n\treturn;} // Set the data...\n\tthis.each(function(){ // First, attempt to store a copy or reference of any\n\t// data that might've been store with a camelCased key.\n\tvar data=data_user.get(this,camelKey); // For HTML5 data-* attribute interop, we have to\n\t// store property names with dashes in a camelCase form.\n\t// This might not apply to all properties...*\n\tdata_user.set(this,camelKey,value); // *... In the case of properties that might _actually_\n\t// have dashes, we need to also store a copy of that\n\t// unchanged property.\n\tif(key.indexOf(\"-\") !== -1 && data !== undefined){data_user.set(this,key,value);}});},null,value,arguments.length > 1,null,true);},removeData:function removeData(key){return this.each(function(){data_user.remove(this,key);});}});jQuery.extend({queue:function queue(elem,type,data){var queue;if(elem){type = (type || \"fx\") + \"queue\";queue = data_priv.get(elem,type); // Speed up dequeue by getting out quickly if this is just a lookup\n\tif(data){if(!queue || jQuery.isArray(data)){queue = data_priv.access(elem,type,jQuery.makeArray(data));}else {queue.push(data);}}return queue || [];}},dequeue:function dequeue(elem,type){type = type || \"fx\";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function next(){jQuery.dequeue(elem,type);}; // If the fx queue is dequeued, always remove the progress sentinel\n\tif(fn === \"inprogress\"){fn = queue.shift();startLength--;}if(fn){ // Add a progress sentinel to prevent the fx queue from being\n\t// automatically dequeued\n\tif(type === \"fx\"){queue.unshift(\"inprogress\");} // Clear up the last queue stop function\n\tdelete hooks.stop;fn.call(elem,next,hooks);}if(!startLength && hooks){hooks.empty.fire();}}, // Not public - generate a queueHooks object, or return the current one\n\t_queueHooks:function _queueHooks(elem,type){var key=type + \"queueHooks\";return data_priv.get(elem,key) || data_priv.access(elem,key,{empty:jQuery.Callbacks(\"once memory\").add(function(){data_priv.remove(elem,[type + \"queue\",key]);})});}});jQuery.fn.extend({queue:function queue(type,data){var setter=2;if(typeof type !== \"string\"){data = type;type = \"fx\";setter--;}if(arguments.length < setter){return jQuery.queue(this[0],type);}return data === undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data); // Ensure a hooks for this queue\n\tjQuery._queueHooks(this,type);if(type === \"fx\" && queue[0] !== \"inprogress\"){jQuery.dequeue(this,type);}});},dequeue:function dequeue(type){return this.each(function(){jQuery.dequeue(this,type);});},clearQueue:function clearQueue(type){return this.queue(type || \"fx\",[]);}, // Get a promise resolved when queues of a certain type\n\t// are emptied (fx is the type by default)\n\tpromise:function promise(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function resolve(){if(! --count){defer.resolveWith(elements,[elements]);}};if(typeof type !== \"string\"){obj = type;type = undefined;}type = type || \"fx\";while(i--) {tmp = data_priv.get(elements[i],type + \"queueHooks\");if(tmp && tmp.empty){count++;tmp.empty.add(resolve);}}resolve();return defer.promise(obj);}});var pnum=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source;var cssExpand=[\"Top\",\"Right\",\"Bottom\",\"Left\"];var isHidden=function isHidden(elem,el){ // isHidden might be called from jQuery#filter function;\n\t// in that case, element will be second argument\n\telem = el || elem;return jQuery.css(elem,\"display\") === \"none\" || !jQuery.contains(elem.ownerDocument,elem);};var rcheckableType=/^(?:checkbox|radio)$/i;(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement(\"div\")),input=document.createElement(\"input\"); // Support: Safari<=5.1\n\t// Check state lost if the name is set (#11217)\n\t// Support: Windows Web Apps (WWA)\n\t// `name` and `type` must use .setAttribute for WWA (#14901)\n\tinput.setAttribute(\"type\",\"radio\");input.setAttribute(\"checked\",\"checked\");input.setAttribute(\"name\",\"t\");div.appendChild(input); // Support: Safari<=5.1, Android<4.2\n\t// Older WebKit doesn't clone checked state correctly in fragments\n\tsupport.checkClone = div.cloneNode(true).cloneNode(true).lastChild.checked; // Support: IE<=11+\n\t// Make sure textarea (and checkbox) defaultValue is properly cloned\n\tdiv.innerHTML = \"<textarea>x</textarea>\";support.noCloneChecked = !!div.cloneNode(true).lastChild.defaultValue;})();var strundefined=typeof undefined;support.focusinBubbles = \"onfocusin\" in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\\.(.+)|)$/;function returnTrue(){return true;}function returnFalse(){return false;}function safeActiveElement(){try{return document.activeElement;}catch(err) {}} /*\n\t * Helper functions for managing events -- not part of the public interface.\n\t * Props to Dean Edwards' addEvent library for many of the ideas.\n\t */jQuery.event = {global:{},add:function add(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.get(elem); // Don't attach events to noData or text/comment nodes (but allow plain objects)\n\tif(!elemData){return;} // Caller can pass in an object of custom data in lieu of the handler\n\tif(handler.handler){handleObjIn = handler;handler = handleObjIn.handler;selector = handleObjIn.selector;} // Make sure that the handler has a unique ID, used to find/remove it later\n\tif(!handler.guid){handler.guid = jQuery.guid++;} // Init the element's event structure and main handler, if this is the first\n\tif(!(events = elemData.events)){events = elemData.events = {};}if(!(eventHandle = elemData.handle)){eventHandle = elemData.handle = function(e){ // Discard the second event of a jQuery.event.trigger() and\n\t// when an event is called after a page has unloaded\n\treturn typeof jQuery !== strundefined && jQuery.event.triggered !== e.type?jQuery.event.dispatch.apply(elem,arguments):undefined;};} // Handle multiple events separated by a space\n\ttypes = (types || \"\").match(rnotwhite) || [\"\"];t = types.length;while(t--) {tmp = rtypenamespace.exec(types[t]) || [];type = origType = tmp[1];namespaces = (tmp[2] || \"\").split(\".\").sort(); // There *must* be a type, no attaching namespace-only handlers\n\tif(!type){continue;} // If event changes its type, use the special event handlers for the changed type\n\tspecial = jQuery.event.special[type] || {}; // If selector defined, determine special event api type, otherwise given type\n\ttype = (selector?special.delegateType:special.bindType) || type; // Update special based on newly reset type\n\tspecial = jQuery.event.special[type] || {}; // handleObj is passed to all event handlers\n\thandleObj = jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector && jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(\".\")},handleObjIn); // Init the event handler queue if we're the first\n\tif(!(handlers = events[type])){handlers = events[type] = [];handlers.delegateCount = 0; // Only use addEventListener if the special events handler returns false\n\tif(!special.setup || special.setup.call(elem,data,namespaces,eventHandle) === false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false);}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid = handler.guid;}} // Add to the element's handler list, delegates in front\n\tif(selector){handlers.splice(handlers.delegateCount++,0,handleObj);}else {handlers.push(handleObj);} // Keep track of which events have ever been used, for event optimization\n\tjQuery.event.global[type] = true;}}, // Detach an event or set of events from an element\n\tremove:function remove(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.hasData(elem) && data_priv.get(elem);if(!elemData || !(events = elemData.events)){return;} // Once for each type.namespace in types; type may be omitted\n\ttypes = (types || \"\").match(rnotwhite) || [\"\"];t = types.length;while(t--) {tmp = rtypenamespace.exec(types[t]) || [];type = origType = tmp[1];namespaces = (tmp[2] || \"\").split(\".\").sort(); // Unbind all events (on this namespace, if provided) for the element\n\tif(!type){for(type in events) {jQuery.event.remove(elem,type + types[t],handler,selector,true);}continue;}special = jQuery.event.special[type] || {};type = (selector?special.delegateType:special.bindType) || type;handlers = events[type] || [];tmp = tmp[2] && new RegExp(\"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\"); // Remove matching events\n\torigCount = j = handlers.length;while(j--) {handleObj = handlers[j];if((mappedTypes || origType === handleObj.origType) && (!handler || handler.guid === handleObj.guid) && (!tmp || tmp.test(handleObj.namespace)) && (!selector || selector === handleObj.selector || selector === \"**\" && handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--;}if(special.remove){special.remove.call(elem,handleObj);}}} // Remove generic event handler if we removed something and no more handlers exist\n\t// (avoids potential for endless recursion during removal of special event handlers)\n\tif(origCount && !handlers.length){if(!special.teardown || special.teardown.call(elem,namespaces,elemData.handle) === false){jQuery.removeEvent(elem,type,elemData.handle);}delete events[type];}} // Remove the expando if it's no longer used\n\tif(jQuery.isEmptyObject(events)){delete elemData.handle;data_priv.remove(elem,\"events\");}},trigger:function trigger(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem || document],type=hasOwn.call(event,\"type\")?event.type:event,namespaces=hasOwn.call(event,\"namespace\")?event.namespace.split(\".\"):[];cur = tmp = elem = elem || document; // Don't do events on text and comment nodes\n\tif(elem.nodeType === 3 || elem.nodeType === 8){return;} // focus/blur morphs to focusin/out; ensure we're not firing them right now\n\tif(rfocusMorph.test(type + jQuery.event.triggered)){return;}if(type.indexOf(\".\") >= 0){ // Namespaced trigger; create a regexp to match event type in handle()\n\tnamespaces = type.split(\".\");type = namespaces.shift();namespaces.sort();}ontype = type.indexOf(\":\") < 0 && \"on\" + type; // Caller can pass in a jQuery.Event object, Object, or just an event type string\n\tevent = event[jQuery.expando]?event:new jQuery.Event(type,typeof event === \"object\" && event); // Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n\tevent.isTrigger = onlyHandlers?2:3;event.namespace = namespaces.join(\".\");event.namespace_re = event.namespace?new RegExp(\"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\"):null; // Clean up the event in case it is being reused\n\tevent.result = undefined;if(!event.target){event.target = elem;} // Clone any incoming data and prepend the event, creating the handler arg list\n\tdata = data == null?[event]:jQuery.makeArray(data,[event]); // Allow special events to draw outside the lines\n\tspecial = jQuery.event.special[type] || {};if(!onlyHandlers && special.trigger && special.trigger.apply(elem,data) === false){return;} // Determine event propagation path in advance, per W3C events spec (#9951)\n\t// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\n\tif(!onlyHandlers && !special.noBubble && !jQuery.isWindow(elem)){bubbleType = special.delegateType || type;if(!rfocusMorph.test(bubbleType + type)){cur = cur.parentNode;}for(;cur;cur = cur.parentNode) {eventPath.push(cur);tmp = cur;} // Only add window if we got to document (e.g., not plain obj or detached DOM)\n\tif(tmp === (elem.ownerDocument || document)){eventPath.push(tmp.defaultView || tmp.parentWindow || window);}} // Fire handlers on the event path\n\ti = 0;while((cur = eventPath[i++]) && !event.isPropagationStopped()) {event.type = i > 1?bubbleType:special.bindType || type; // jQuery handler\n\thandle = (data_priv.get(cur,\"events\") || {})[event.type] && data_priv.get(cur,\"handle\");if(handle){handle.apply(cur,data);} // Native handler\n\thandle = ontype && cur[ontype];if(handle && handle.apply && jQuery.acceptData(cur)){event.result = handle.apply(cur,data);if(event.result === false){event.preventDefault();}}}event.type = type; // If nobody prevented the default action, do it now\n\tif(!onlyHandlers && !event.isDefaultPrevented()){if((!special._default || special._default.apply(eventPath.pop(),data) === false) && jQuery.acceptData(elem)){ // Call a native DOM method on the target with the same name name as the event.\n\t// Don't do default actions on window, that's where global variables be (#6170)\n\tif(ontype && jQuery.isFunction(elem[type]) && !jQuery.isWindow(elem)){ // Don't re-trigger an onFOO event when we call its FOO() method\n\ttmp = elem[ontype];if(tmp){elem[ontype] = null;} // Prevent re-triggering of the same event, since we already bubbled it above\n\tjQuery.event.triggered = type;elem[type]();jQuery.event.triggered = undefined;if(tmp){elem[ontype] = tmp;}}}}return event.result;},dispatch:function dispatch(event){ // Make a writable jQuery.Event from the native event object\n\tevent = jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=_slice.call(arguments),handlers=(data_priv.get(this,\"events\") || {})[event.type] || [],special=jQuery.event.special[event.type] || {}; // Use the fix-ed jQuery.Event rather than the (read-only) native event\n\targs[0] = event;event.delegateTarget = this; // Call the preDispatch hook for the mapped type, and let it bail if desired\n\tif(special.preDispatch && special.preDispatch.call(this,event) === false){return;} // Determine handlers\n\thandlerQueue = jQuery.event.handlers.call(this,event,handlers); // Run delegates first; they may want to stop propagation beneath us\n\ti = 0;while((matched = handlerQueue[i++]) && !event.isPropagationStopped()) {event.currentTarget = matched.elem;j = 0;while((handleObj = matched.handlers[j++]) && !event.isImmediatePropagationStopped()) { // Triggered event must either 1) have no namespace, or 2) have namespace(s)\n\t// a subset or equal to those in the bound event (both can have no namespace).\n\tif(!event.namespace_re || event.namespace_re.test(handleObj.namespace)){event.handleObj = handleObj;event.data = handleObj.data;ret = ((jQuery.event.special[handleObj.origType] || {}).handle || handleObj.handler).apply(matched.elem,args);if(ret !== undefined){if((event.result = ret) === false){event.preventDefault();event.stopPropagation();}}}}} // Call the postDispatch hook for the mapped type\n\tif(special.postDispatch){special.postDispatch.call(this,event);}return event.result;},handlers:function handlers(event,_handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=_handlers.delegateCount,cur=event.target; // Find delegate handlers\n\t// Black-hole SVG <use> instance trees (#13180)\n\t// Avoid non-left-click bubbling in Firefox (#3861)\n\tif(delegateCount && cur.nodeType && (!event.button || event.type !== \"click\")){for(;cur !== this;cur = cur.parentNode || this) { // Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)\n\tif(cur.disabled !== true || event.type !== \"click\"){matches = [];for(i = 0;i < delegateCount;i++) {handleObj = _handlers[i]; // Don't conflict with Object.prototype properties (#13203)\n\tsel = handleObj.selector + \" \";if(matches[sel] === undefined){matches[sel] = handleObj.needsContext?jQuery(sel,this).index(cur) >= 0:jQuery.find(sel,this,null,[cur]).length;}if(matches[sel]){matches.push(handleObj);}}if(matches.length){handlerQueue.push({elem:cur,handlers:matches});}}}} // Add the remaining (directly-bound) handlers\n\tif(delegateCount < _handlers.length){handlerQueue.push({elem:this,handlers:_handlers.slice(delegateCount)});}return handlerQueue;}, // Includes some event props shared by KeyEvent and MouseEvent\n\tprops:\"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),fixHooks:{},keyHooks:{props:\"char charCode key keyCode\".split(\" \"),filter:function filter(event,original){ // Add which for key events\n\tif(event.which == null){event.which = original.charCode != null?original.charCode:original.keyCode;}return event;}},mouseHooks:{props:\"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),filter:function filter(event,original){var eventDoc,doc,body,button=original.button; // Calculate pageX/Y if missing and clientX/Y available\n\tif(event.pageX == null && original.clientX != null){eventDoc = event.target.ownerDocument || document;doc = eventDoc.documentElement;body = eventDoc.body;event.pageX = original.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);event.pageY = original.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);} // Add which for click: 1 === left; 2 === middle; 3 === right\n\t// Note: button is not normalized, so don't use it\n\tif(!event.which && button !== undefined){event.which = button & 1?1:button & 2?3:button & 4?2:0;}return event;}},fix:function fix(event){if(event[jQuery.expando]){return event;} // Create a writable copy of the event object and normalize some properties\n\tvar i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook){this.fixHooks[type] = fixHook = rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{};}copy = fixHook.props?this.props.concat(fixHook.props):this.props;event = new jQuery.Event(originalEvent);i = copy.length;while(i--) {prop = copy[i];event[prop] = originalEvent[prop];} // Support: Cordova 2.5 (WebKit) (#13255)\n\t// All events should have a target; Cordova deviceready doesn't\n\tif(!event.target){event.target = document;} // Support: Safari 6.0+, Chrome<28\n\t// Target should not be a text node (#504, #13143)\n\tif(event.target.nodeType === 3){event.target = event.target.parentNode;}return fixHook.filter?fixHook.filter(event,originalEvent):event;},special:{load:{ // Prevent triggered image.load events from bubbling to window.load\n\tnoBubble:true},focus:{ // Fire native event if possible so blur/focus sequence is correct\n\ttrigger:function trigger(){if(this !== safeActiveElement() && this.focus){this.focus();return false;}},delegateType:\"focusin\"},blur:{trigger:function trigger(){if(this === safeActiveElement() && this.blur){this.blur();return false;}},delegateType:\"focusout\"},click:{ // For checkbox, fire native event so checked state will be right\n\ttrigger:function trigger(){if(this.type === \"checkbox\" && this.click && jQuery.nodeName(this,\"input\")){this.click();return false;}}, // For cross-browser consistency, don't fire native .click() on links\n\t_default:function _default(event){return jQuery.nodeName(event.target,\"a\");}},beforeunload:{postDispatch:function postDispatch(event){ // Support: Firefox 20+\n\t// Firefox doesn't alert if the returnValue field is not set.\n\tif(event.result !== undefined && event.originalEvent){event.originalEvent.returnValue = event.result;}}}},simulate:function simulate(type,elem,event,bubble){ // Piggyback on a donor event to simulate a different one.\n\t// Fake originalEvent to avoid donor's stopPropagation, but if the\n\t// simulated event prevents default then we do the same on the donor.\n\tvar e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){jQuery.event.trigger(e,null,elem);}else {jQuery.event.dispatch.call(elem,e);}if(e.isDefaultPrevented()){event.preventDefault();}}};jQuery.removeEvent = function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false);}};jQuery.Event = function(src,props){ // Allow instantiation without the 'new' keyword\n\tif(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props);} // Event object\n\tif(src && src.type){this.originalEvent = src;this.type = src.type; // Events bubbling up the document may have been marked as prevented\n\t// by a handler lower down the tree; reflect the correct value.\n\tthis.isDefaultPrevented = src.defaultPrevented || src.defaultPrevented === undefined &&  // Support: Android<4.0\n\tsrc.returnValue === false?returnTrue:returnFalse; // Event type\n\t}else {this.type = src;} // Put explicitly provided properties onto the event object\n\tif(props){jQuery.extend(this,props);} // Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = src && src.timeStamp || jQuery.now(); // Mark it as fixed\n\tthis[jQuery.expando] = true;}; // jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n\t// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\n\tjQuery.Event.prototype = {isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function preventDefault(){var e=this.originalEvent;this.isDefaultPrevented = returnTrue;if(e && e.preventDefault){e.preventDefault();}},stopPropagation:function stopPropagation(){var e=this.originalEvent;this.isPropagationStopped = returnTrue;if(e && e.stopPropagation){e.stopPropagation();}},stopImmediatePropagation:function stopImmediatePropagation(){var e=this.originalEvent;this.isImmediatePropagationStopped = returnTrue;if(e && e.stopImmediatePropagation){e.stopImmediatePropagation();}this.stopPropagation();}}; // Create mouseenter/leave events using mouseover/out and event-time checks\n\t// Support: Chrome 15+\n\tjQuery.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(orig,fix){jQuery.event.special[orig] = {delegateType:fix,bindType:fix,handle:function handle(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj; // For mousenter/leave call the handler if related is outside the target.\n\t// NB: No relatedTarget if the mouse left/entered the browser window\n\tif(!related || related !== target && !jQuery.contains(target,related)){event.type = handleObj.origType;ret = handleObj.handler.apply(this,arguments);event.type = fix;}return ret;}};}); // Support: Firefox, Chrome, Safari\n\t// Create \"bubbling\" focus and blur events\n\tif(!support.focusinBubbles){jQuery.each({focus:\"focusin\",blur:\"focusout\"},function(orig,fix){ // Attach a single capturing handler on the document while someone wants focusin/focusout\n\tvar handler=function handler(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true);};jQuery.event.special[fix] = {setup:function setup(){var doc=this.ownerDocument || this,attaches=data_priv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true);}data_priv.access(doc,fix,(attaches || 0) + 1);},teardown:function teardown(){var doc=this.ownerDocument || this,attaches=data_priv.access(doc,fix) - 1;if(!attaches){doc.removeEventListener(orig,handler,true);data_priv.remove(doc,fix);}else {data_priv.access(doc,fix,attaches);}}};});}jQuery.fn.extend({on:function on(types,selector,data,fn, /*INTERNAL*/one){var origFn,type; // Types can be a map of types/handlers\n\tif(typeof types === \"object\"){ // ( types-Object, selector, data )\n\tif(typeof selector !== \"string\"){ // ( types-Object, data )\n\tdata = data || selector;selector = undefined;}for(type in types) {this.on(type,selector,data,types[type],one);}return this;}if(data == null && fn == null){ // ( types, fn )\n\tfn = selector;data = selector = undefined;}else if(fn == null){if(typeof selector === \"string\"){ // ( types, selector, fn )\n\tfn = data;data = undefined;}else { // ( types, data, fn )\n\tfn = data;data = selector;selector = undefined;}}if(fn === false){fn = returnFalse;}else if(!fn){return this;}if(one === 1){origFn = fn;fn = function(event){ // Can use an empty set, since event contains the info\n\tjQuery().off(event);return origFn.apply(this,arguments);}; // Use same guid so caller can remove using origFn\n\tfn.guid = origFn.guid || (origFn.guid = jQuery.guid++);}return this.each(function(){jQuery.event.add(this,types,fn,data,selector);});},one:function one(types,selector,data,fn){return this.on(types,selector,data,fn,1);},off:function off(types,selector,fn){var handleObj,type;if(types && types.preventDefault && types.handleObj){ // ( event )  dispatched jQuery.Event\n\thandleObj = types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType + \".\" + handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this;}if(typeof types === \"object\"){ // ( types-object [, selector] )\n\tfor(type in types) {this.off(type,selector,types[type]);}return this;}if(selector === false || typeof selector === \"function\"){ // ( types [, fn] )\n\tfn = selector;selector = undefined;}if(fn === false){fn = returnFalse;}return this.each(function(){jQuery.event.remove(this,types,fn,selector);});},trigger:function trigger(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function triggerHandler(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true);}}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,rtagName=/<([\\w:]+)/,rhtml=/<|&#?\\w+;/,rnoInnerhtml=/<(?:script|style|link)/i, // checked=\"checked\" or checked\n\trchecked=/checked\\s*(?:[^=]|=\\s*.checked.)/i,rscriptType=/^$|\\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\\/(.*)/,rcleanScript=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g, // We have to close these tags to support XHTML (#13200)\n\twrapMap={ // Support: IE9\n\toption:[1,\"<select multiple='multiple'>\",\"</select>\"],thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]}; // Support: IE9\n\twrapMap.optgroup = wrapMap.option;wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;wrapMap.th = wrapMap.td; // Support: 1.x compatibility\n\t// Manipulating tables requires a tbody\n\tfunction manipulationTarget(elem,content){return jQuery.nodeName(elem,\"table\") && jQuery.nodeName(content.nodeType !== 11?content:content.firstChild,\"tr\")?elem.getElementsByTagName(\"tbody\")[0] || elem.appendChild(elem.ownerDocument.createElement(\"tbody\")):elem;} // Replace/restore the type attribute of script elements for safe DOM manipulation\n\tfunction disableScript(elem){elem.type = (elem.getAttribute(\"type\") !== null) + \"/\" + elem.type;return elem;}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type = match[1];}else {elem.removeAttribute(\"type\");}return elem;} // Mark scripts as having already been evaluated\n\tfunction setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i < l;i++) {data_priv.set(elems[i],\"globalEval\",!refElements || data_priv.get(refElements[i],\"globalEval\"));}}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType !== 1){return;} // 1. Copy private data: events, handlers, etc.\n\tif(data_priv.hasData(src)){pdataOld = data_priv.access(src);pdataCur = data_priv.set(dest,pdataOld);events = pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events = {};for(type in events) {for(i = 0,l = events[type].length;i < l;i++) {jQuery.event.add(dest,type,events[type][i]);}}}} // 2. Copy user data\n\tif(data_user.hasData(src)){udataOld = data_user.access(src);udataCur = jQuery.extend({},udataOld);data_user.set(dest,udataCur);}}function getAll(context,tag){var ret=context.getElementsByTagName?context.getElementsByTagName(tag || \"*\"):context.querySelectorAll?context.querySelectorAll(tag || \"*\"):[];return tag === undefined || tag && jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret;} // Fix IE bugs, see support tests\n\tfunction fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase(); // Fails to persist the checked state of a cloned checkbox or radio button.\n\tif(nodeName === \"input\" && rcheckableType.test(src.type)){dest.checked = src.checked; // Fails to return the selected option to the default selected state when cloning options\n\t}else if(nodeName === \"input\" || nodeName === \"textarea\"){dest.defaultValue = src.defaultValue;}}jQuery.extend({clone:function clone(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem); // Fix IE cloning issues\n\tif(!support.noCloneChecked && (elem.nodeType === 1 || elem.nodeType === 11) && !jQuery.isXMLDoc(elem)){ // We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2\n\tdestElements = getAll(clone);srcElements = getAll(elem);for(i = 0,l = srcElements.length;i < l;i++) {fixInput(srcElements[i],destElements[i]);}} // Copy the events from the original to the clone\n\tif(dataAndEvents){if(deepDataAndEvents){srcElements = srcElements || getAll(elem);destElements = destElements || getAll(clone);for(i = 0,l = srcElements.length;i < l;i++) {cloneCopyEvent(srcElements[i],destElements[i]);}}else {cloneCopyEvent(elem,clone);}} // Preserve script evaluation history\n\tdestElements = getAll(clone,\"script\");if(destElements.length > 0){setGlobalEval(destElements,!inPage && getAll(elem,\"script\"));} // Return the cloned set\n\treturn clone;},buildFragment:function buildFragment(elems,context,scripts,selection){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i < l;i++) {elem = elems[i];if(elem || elem === 0){ // Add nodes directly\n\tif(jQuery.type(elem) === \"object\"){ // Support: QtWebKit, PhantomJS\n\t// push.apply(_, arraylike) throws on ancient WebKit\n\tjQuery.merge(nodes,elem.nodeType?[elem]:elem); // Convert non-html into a text node\n\t}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem)); // Convert html into DOM nodes\n\t}else {tmp = tmp || fragment.appendChild(context.createElement(\"div\")); // Deserialize a standard representation\n\ttag = (rtagName.exec(elem) || [\"\",\"\"])[1].toLowerCase();wrap = wrapMap[tag] || wrapMap._default;tmp.innerHTML = wrap[1] + elem.replace(rxhtmlTag,\"<$1></$2>\") + wrap[2]; // Descend through wrappers to the right content\n\tj = wrap[0];while(j--) {tmp = tmp.lastChild;} // Support: QtWebKit, PhantomJS\n\t// push.apply(_, arraylike) throws on ancient WebKit\n\tjQuery.merge(nodes,tmp.childNodes); // Remember the top-level container\n\ttmp = fragment.firstChild; // Ensure the created nodes are orphaned (#12392)\n\ttmp.textContent = \"\";}}} // Remove wrapper from fragment\n\tfragment.textContent = \"\";i = 0;while(elem = nodes[i++]) { // #4087 - If origin and destination elements are the same, and this is\n\t// that element, do not do anything\n\tif(selection && jQuery.inArray(elem,selection) !== -1){continue;}contains = jQuery.contains(elem.ownerDocument,elem); // Append to fragment\n\ttmp = getAll(fragment.appendChild(elem),\"script\"); // Preserve script evaluation history\n\tif(contains){setGlobalEval(tmp);} // Capture executables\n\tif(scripts){j = 0;while(elem = tmp[j++]) {if(rscriptType.test(elem.type || \"\")){scripts.push(elem);}}}}return fragment;},cleanData:function cleanData(elems){var data,elem,type,key,special=jQuery.event.special,i=0;for(;(elem = elems[i]) !== undefined;i++) {if(jQuery.acceptData(elem)){key = elem[data_priv.expando];if(key && (data = data_priv.cache[key])){if(data.events){for(type in data.events) {if(special[type]){jQuery.event.remove(elem,type); // This is a shortcut to avoid jQuery.event.remove's overhead\n\t}else {jQuery.removeEvent(elem,type,data.handle);}}}if(data_priv.cache[key]){ // Discard any remaining `private` data\n\tdelete data_priv.cache[key];}}} // Discard any remaining `user` data\n\tdelete data_user.cache[elem[data_user.expando]];}}});jQuery.fn.extend({text:function text(value){return access(this,function(value){return value === undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9){this.textContent = value;}});},null,value,arguments.length);},append:function append(){return this.domManip(arguments,function(elem){if(this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9){var target=manipulationTarget(this,elem);target.appendChild(elem);}});},prepend:function prepend(){return this.domManip(arguments,function(elem){if(this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild);}});},before:function before(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this);}});},after:function after(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling);}});},remove:function remove(selector,keepData /* Internal Use Only */){var elem,elems=selector?jQuery.filter(selector,this):this,i=0;for(;(elem = elems[i]) != null;i++) {if(!keepData && elem.nodeType === 1){jQuery.cleanData(getAll(elem));}if(elem.parentNode){if(keepData && jQuery.contains(elem.ownerDocument,elem)){setGlobalEval(getAll(elem,\"script\"));}elem.parentNode.removeChild(elem);}}return this;},empty:function empty(){var elem,i=0;for(;(elem = this[i]) != null;i++) {if(elem.nodeType === 1){ // Prevent memory leaks\n\tjQuery.cleanData(getAll(elem,false)); // Remove any remaining nodes\n\telem.textContent = \"\";}}return this;},clone:function clone(dataAndEvents,deepDataAndEvents){dataAndEvents = dataAndEvents == null?false:dataAndEvents;deepDataAndEvents = deepDataAndEvents == null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents);});},html:function html(value){return access(this,function(value){var elem=this[0] || {},i=0,l=this.length;if(value === undefined && elem.nodeType === 1){return elem.innerHTML;} // See if we can take a shortcut and just use innerHTML\n\tif(typeof value === \"string\" && !rnoInnerhtml.test(value) && !wrapMap[(rtagName.exec(value) || [\"\",\"\"])[1].toLowerCase()]){value = value.replace(rxhtmlTag,\"<$1></$2>\");try{for(;i < l;i++) {elem = this[i] || {}; // Remove element nodes and prevent memory leaks\n\tif(elem.nodeType === 1){jQuery.cleanData(getAll(elem,false));elem.innerHTML = value;}}elem = 0; // If using innerHTML throws an exception, use the fallback method\n\t}catch(e) {}}if(elem){this.empty().append(value);}},null,value,arguments.length);},replaceWith:function replaceWith(){var arg=arguments[0]; // Make the changes, replacing each context element with the new content\n\tthis.domManip(arguments,function(elem){arg = this.parentNode;jQuery.cleanData(getAll(this));if(arg){arg.replaceChild(elem,this);}}); // Force removal if there was no new content (e.g., from empty arguments)\n\treturn arg && (arg.length || arg.nodeType)?this:this.remove();},detach:function detach(selector){return this.remove(selector,true);},domManip:function domManip(args,callback){ // Flatten any nested arrays\n\targs = concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=this.length,set=this,iNoClone=l - 1,value=args[0],isFunction=jQuery.isFunction(value); // We can't cloneNode fragments that contain checked, in WebKit\n\tif(isFunction || l > 1 && typeof value === \"string\" && !support.checkClone && rchecked.test(value)){return this.each(function(index){var self=set.eq(index);if(isFunction){args[0] = value.call(this,index,self.html());}self.domManip(args,callback);});}if(l){fragment = jQuery.buildFragment(args,this[0].ownerDocument,false,this);first = fragment.firstChild;if(fragment.childNodes.length === 1){fragment = first;}if(first){scripts = jQuery.map(getAll(fragment,\"script\"),disableScript);hasScripts = scripts.length; // Use the original fragment for the last item instead of the first because it can end up\n\t// being emptied incorrectly in certain situations (#8070).\n\tfor(;i < l;i++) {node = fragment;if(i !== iNoClone){node = jQuery.clone(node,true,true); // Keep references to cloned scripts for later restoration\n\tif(hasScripts){ // Support: QtWebKit\n\t// jQuery.merge because push.apply(_, arraylike) throws\n\tjQuery.merge(scripts,getAll(node,\"script\"));}}callback.call(this[i],node,i);}if(hasScripts){doc = scripts[scripts.length - 1].ownerDocument; // Reenable scripts\n\tjQuery.map(scripts,restoreScript); // Evaluate executable scripts on first document insertion\n\tfor(i = 0;i < hasScripts;i++) {node = scripts[i];if(rscriptType.test(node.type || \"\") && !data_priv.access(node,\"globalEval\") && jQuery.contains(doc,node)){if(node.src){ // Optional AJAX dependency, but won't run scripts if not present\n\tif(jQuery._evalUrl){jQuery._evalUrl(node.src);}}else {jQuery.globalEval(node.textContent.replace(rcleanScript,\"\"));}}}}}}return this;}});jQuery.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(name,original){jQuery.fn[name] = function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length - 1,i=0;for(;i <= last;i++) {elems = i === last?this:this.clone(true);jQuery(insert[i])[original](elems); // Support: QtWebKit\n\t// .get() because push.apply(_, arraylike) throws\n\tpush.apply(ret,elems.get());}return this.pushStack(ret);};});var iframe,elemdisplay={}; /**\n\t * Retrieve the actual display of a element\n\t * @param {String} name nodeName of the element\n\t * @param {Object} doc Document object\n\t */ // Called only from within defaultDisplay\n\tfunction actualDisplay(name,doc){var style,elem=jQuery(doc.createElement(name)).appendTo(doc.body), // getDefaultComputedStyle might be reliably used only on attached element\n\tdisplay=window.getDefaultComputedStyle && (style = window.getDefaultComputedStyle(elem[0]))? // Use of this method is a temporary fix (more like optimization) until something better comes along,\n\t// since it was removed from specification and supported only in FF\n\tstyle.display:jQuery.css(elem[0],\"display\"); // We don't have any data stored on the element,\n\t// so use \"detach\" method as fast way to get rid of the element\n\telem.detach();return display;} /**\n\t * Try to determine the default display value of an element\n\t * @param {String} nodeName\n\t */function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display = actualDisplay(nodeName,doc); // If the simple way fails, read from inside an iframe\n\tif(display === \"none\" || !display){ // Use the already-created iframe if possible\n\tiframe = (iframe || jQuery(\"<iframe frameborder='0' width='0' height='0'/>\")).appendTo(doc.documentElement); // Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse\n\tdoc = iframe[0].contentDocument; // Support: IE\n\tdoc.write();doc.close();display = actualDisplay(nodeName,doc);iframe.detach();} // Store the correct default display\n\telemdisplay[nodeName] = display;}return display;}var rmargin=/^margin/;var rnumnonpx=new RegExp(\"^(\" + pnum + \")(?!px)[a-z%]+$\",\"i\");var getStyles=function getStyles(elem){ // Support: IE<=11+, Firefox<=30+ (#15098, #14150)\n\t// IE throws on elements created in popups\n\t// FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\n\tif(elem.ownerDocument.defaultView.opener){return elem.ownerDocument.defaultView.getComputedStyle(elem,null);}return window.getComputedStyle(elem,null);};function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed = computed || getStyles(elem); // Support: IE9\n\t// getPropertyValue is only needed for .css('filter') (#12537)\n\tif(computed){ret = computed.getPropertyValue(name) || computed[name];}if(computed){if(ret === \"\" && !jQuery.contains(elem.ownerDocument,elem)){ret = jQuery.style(elem,name);} // Support: iOS < 6\n\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t// iOS < 6 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels\n\t// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values\n\tif(rnumnonpx.test(ret) && rmargin.test(name)){ // Remember the original values\n\twidth = style.width;minWidth = style.minWidth;maxWidth = style.maxWidth; // Put in the new values to get a computed value out\n\tstyle.minWidth = style.maxWidth = style.width = ret;ret = computed.width; // Revert the changed values\n\tstyle.width = width;style.minWidth = minWidth;style.maxWidth = maxWidth;}}return ret !== undefined? // Support: IE\n\t// IE returns zIndex value as an integer.\n\tret + \"\":ret;}function addGetHookIf(conditionFn,hookFn){ // Define the hook, we'll check on the first run if it's really needed.\n\treturn {get:function get(){if(conditionFn()){ // Hook not needed (or it's not possible to use it due\n\t// to missing dependency), remove it.\n\tdelete this.get;return;} // Hook needed; redefine it so that the support test is not executed again.\n\treturn (this.get = hookFn).apply(this,arguments);}};}(function(){var pixelPositionVal,boxSizingReliableVal,docElem=document.documentElement,container=document.createElement(\"div\"),div=document.createElement(\"div\");if(!div.style){return;} // Support: IE9-11+\n\t// Style of cloned element affects source element cloned (#8908)\n\tdiv.style.backgroundClip = \"content-box\";div.cloneNode(true).style.backgroundClip = \"\";support.clearCloneStyle = div.style.backgroundClip === \"content-box\";container.style.cssText = \"border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;\" + \"position:absolute\";container.appendChild(div); // Executing both pixelPosition & boxSizingReliable tests require only one layout\n\t// so they're executed at the same time to save the second computation.\n\tfunction computePixelPositionAndBoxSizingReliable(){div.style.cssText =  // Support: Firefox<29, Android 2.3\n\t// Vendor-prefix box-sizing\n\t\"-webkit-box-sizing:border-box;-moz-box-sizing:border-box;\" + \"box-sizing:border-box;display:block;margin-top:1%;top:1%;\" + \"border:1px;padding:1px;width:4px;position:absolute\";div.innerHTML = \"\";docElem.appendChild(container);var divStyle=window.getComputedStyle(div,null);pixelPositionVal = divStyle.top !== \"1%\";boxSizingReliableVal = divStyle.width === \"4px\";docElem.removeChild(container);} // Support: node.js jsdom\n\t// Don't assume that getComputedStyle is a property of the global object\n\tif(window.getComputedStyle){jQuery.extend(support,{pixelPosition:function pixelPosition(){ // This test is executed only once but we still do memoizing\n\t// since we can use the boxSizingReliable pre-computing.\n\t// No need to check if the test was already performed, though.\n\tcomputePixelPositionAndBoxSizingReliable();return pixelPositionVal;},boxSizingReliable:function boxSizingReliable(){if(boxSizingReliableVal == null){computePixelPositionAndBoxSizingReliable();}return boxSizingReliableVal;},reliableMarginRight:function reliableMarginRight(){ // Support: Android 2.3\n\t// Check if div with explicit width and no margin-right incorrectly\n\t// gets computed margin-right based on width of container. (#3333)\n\t// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right\n\t// This support function is only executed once so no memoizing is needed.\n\tvar ret,marginDiv=div.appendChild(document.createElement(\"div\")); // Reset CSS: box-sizing; display; margin; border; padding\n\tmarginDiv.style.cssText = div.style.cssText =  // Support: Firefox<29, Android 2.3\n\t// Vendor-prefix box-sizing\n\t\"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;\" + \"box-sizing:content-box;display:block;margin:0;border:0;padding:0\";marginDiv.style.marginRight = marginDiv.style.width = \"0\";div.style.width = \"1px\";docElem.appendChild(container);ret = !parseFloat(window.getComputedStyle(marginDiv,null).marginRight);docElem.removeChild(container);div.removeChild(marginDiv);return ret;}});}})(); // A method for quickly swapping in/out CSS properties to get correct calculations.\n\tjQuery.swap = function(elem,options,callback,args){var ret,name,old={}; // Remember the old values, and insert the new ones\n\tfor(name in options) {old[name] = elem.style[name];elem.style[name] = options[name];}ret = callback.apply(elem,args || []); // Revert the old values\n\tfor(name in options) {elem.style[name] = old[name];}return ret;};var  // Swappable if display is none or starts with table except \"table\", \"table-cell\", or \"table-caption\"\n\t// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\n\trdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp(\"^(\" + pnum + \")(.*)$\",\"i\"),rrelNum=new RegExp(\"^([+-])=(\" + pnum + \")\",\"i\"),cssShow={position:\"absolute\",visibility:\"hidden\",display:\"block\"},cssNormalTransform={letterSpacing:\"0\",fontWeight:\"400\"},cssPrefixes=[\"Webkit\",\"O\",\"Moz\",\"ms\"]; // Return a css property mapped to a potentially vendor prefixed property\n\tfunction vendorPropName(style,name){ // Shortcut for names that are not vendor prefixed\n\tif(name in style){return name;} // Check for vendor prefixed names\n\tvar capName=name[0].toUpperCase() + name.slice(1),origName=name,i=cssPrefixes.length;while(i--) {name = cssPrefixes[i] + capName;if(name in style){return name;}}return origName;}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches? // Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\tMath.max(0,matches[1] - (subtract || 0)) + (matches[2] || \"px\"):value;}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra === (isBorderBox?\"border\":\"content\")? // If we already have the right measurement, avoid augmentation\n\t4: // Otherwise initialize for horizontal or vertical properties\n\tname === \"width\"?1:0,val=0;for(;i < 4;i += 2) { // Both box models exclude margin, so add it if we want it\n\tif(extra === \"margin\"){val += jQuery.css(elem,extra + cssExpand[i],true,styles);}if(isBorderBox){ // border-box includes padding, so remove it if we want content\n\tif(extra === \"content\"){val -= jQuery.css(elem,\"padding\" + cssExpand[i],true,styles);} // At this point, extra isn't border nor margin, so remove border\n\tif(extra !== \"margin\"){val -= jQuery.css(elem,\"border\" + cssExpand[i] + \"Width\",true,styles);}}else { // At this point, extra isn't content, so add padding\n\tval += jQuery.css(elem,\"padding\" + cssExpand[i],true,styles); // At this point, extra isn't content nor padding, so add border\n\tif(extra !== \"padding\"){val += jQuery.css(elem,\"border\" + cssExpand[i] + \"Width\",true,styles);}}}return val;}function getWidthOrHeight(elem,name,extra){ // Start with offset property, which is equivalent to the border-box value\n\tvar valueIsBorderBox=true,val=name === \"width\"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.css(elem,\"boxSizing\",false,styles) === \"border-box\"; // Some non-html elements return undefined for offsetWidth, so check for null/undefined\n\t// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285\n\t// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668\n\tif(val <= 0 || val == null){ // Fall back to computed then uncomputed css if necessary\n\tval = curCSS(elem,name,styles);if(val < 0 || val == null){val = elem.style[name];} // Computed unit is not pixels. Stop here and return.\n\tif(rnumnonpx.test(val)){return val;} // Check for style in case a browser which returns unreliable values\n\t// for getComputedStyle silently falls back to the reliable elem.style\n\tvalueIsBorderBox = isBorderBox && (support.boxSizingReliable() || val === elem.style[name]); // Normalize \"\", auto, and prepare for extra\n\tval = parseFloat(val) || 0;} // Use the active box-sizing model to add/subtract irrelevant styles\n\treturn val + augmentWidthOrHeight(elem,name,extra || (isBorderBox?\"border\":\"content\"),valueIsBorderBox,styles) + \"px\";}function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index < length;index++) {elem = elements[index];if(!elem.style){continue;}values[index] = data_priv.get(elem,\"olddisplay\");display = elem.style.display;if(show){ // Reset the inline display of this element to learn if it is\n\t// being hidden by cascaded rules or not\n\tif(!values[index] && display === \"none\"){elem.style.display = \"\";} // Set elements which have been overridden with display: none\n\t// in a stylesheet to whatever the default browser style is\n\t// for such an element\n\tif(elem.style.display === \"\" && isHidden(elem)){values[index] = data_priv.access(elem,\"olddisplay\",defaultDisplay(elem.nodeName));}}else {hidden = isHidden(elem);if(display !== \"none\" || !hidden){data_priv.set(elem,\"olddisplay\",hidden?display:jQuery.css(elem,\"display\"));}}} // Set the display of most of the elements in a second loop\n\t// to avoid the constant reflow\n\tfor(index = 0;index < length;index++) {elem = elements[index];if(!elem.style){continue;}if(!show || elem.style.display === \"none\" || elem.style.display === \"\"){elem.style.display = show?values[index] || \"\":\"none\";}}return elements;}jQuery.extend({ // Add in style property hooks for overriding the default\n\t// behavior of getting and setting a style property\n\tcssHooks:{opacity:{get:function get(elem,computed){if(computed){ // We should always get a number back from opacity\n\tvar ret=curCSS(elem,\"opacity\");return ret === \"\"?\"1\":ret;}}}}, // Don't automatically add \"px\" to these possibly-unitless properties\n\tcssNumber:{\"columnCount\":true,\"fillOpacity\":true,\"flexGrow\":true,\"flexShrink\":true,\"fontWeight\":true,\"lineHeight\":true,\"opacity\":true,\"order\":true,\"orphans\":true,\"widows\":true,\"zIndex\":true,\"zoom\":true}, // Add in properties whose names you wish to fix before\n\t// setting or getting the value\n\tcssProps:{\"float\":\"cssFloat\"}, // Get and set the style property on a DOM Node\n\tstyle:function style(elem,name,value,extra){ // Don't set styles on text and comment nodes\n\tif(!elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style){return;} // Make sure that we're working with the right name\n\tvar ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name = jQuery.cssProps[origName] || (jQuery.cssProps[origName] = vendorPropName(style,origName)); // Gets hook for the prefixed version, then unprefixed version\n\thooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName]; // Check if we're setting a value\n\tif(value !== undefined){type = typeof value; // Convert \"+=\" or \"-=\" to relative numbers (#7345)\n\tif(type === \"string\" && (ret = rrelNum.exec(value))){value = (ret[1] + 1) * ret[2] + parseFloat(jQuery.css(elem,name)); // Fixes bug #9237\n\ttype = \"number\";} // Make sure that null and NaN values aren't set (#7116)\n\tif(value == null || value !== value){return;} // If a number, add 'px' to the (except for certain CSS properties)\n\tif(type === \"number\" && !jQuery.cssNumber[origName]){value += \"px\";} // Support: IE9-11+\n\t// background-* props affect original clone's values\n\tif(!support.clearCloneStyle && value === \"\" && name.indexOf(\"background\") === 0){style[name] = \"inherit\";} // If a hook was provided, use that value, otherwise just set the specified value\n\tif(!hooks || !(\"set\" in hooks) || (value = hooks.set(elem,value,extra)) !== undefined){style[name] = value;}}else { // If a hook was provided get the non-computed value from there\n\tif(hooks && \"get\" in hooks && (ret = hooks.get(elem,false,extra)) !== undefined){return ret;} // Otherwise just get the value from the style object\n\treturn style[name];}},css:function css(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name); // Make sure that we're working with the right name\n\tname = jQuery.cssProps[origName] || (jQuery.cssProps[origName] = vendorPropName(elem.style,origName)); // Try prefixed name followed by the unprefixed name\n\thooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName]; // If a hook was provided get the computed value from there\n\tif(hooks && \"get\" in hooks){val = hooks.get(elem,true,extra);} // Otherwise, if a way to get the computed value exists, use that\n\tif(val === undefined){val = curCSS(elem,name,styles);} // Convert \"normal\" to computed value\n\tif(val === \"normal\" && name in cssNormalTransform){val = cssNormalTransform[name];} // Make numeric if forced or a qualifier was provided and val looks numeric\n\tif(extra === \"\" || extra){num = parseFloat(val);return extra === true || jQuery.isNumeric(num)?num || 0:val;}return val;}});jQuery.each([\"height\",\"width\"],function(i,name){jQuery.cssHooks[name] = {get:function get(elem,computed,extra){if(computed){ // Certain elements can have dimension info if we invisibly show them\n\t// but it must have a current display style that would benefit\n\treturn rdisplayswap.test(jQuery.css(elem,\"display\")) && elem.offsetWidth === 0?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra);}):getWidthOrHeight(elem,name,extra);}},set:function set(elem,value,extra){var styles=extra && getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.css(elem,\"boxSizing\",false,styles) === \"border-box\",styles):0);}};}); // Support: Android 2.3\n\tjQuery.cssHooks.marginRight = addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed){return jQuery.swap(elem,{\"display\":\"inline-block\"},curCSS,[elem,\"marginRight\"]);}}); // These hooks are used by animate to expand properties\n\tjQuery.each({margin:\"\",padding:\"\",border:\"Width\"},function(prefix,suffix){jQuery.cssHooks[prefix + suffix] = {expand:function expand(value){var i=0,expanded={}, // Assumes a single number if not a string\n\tparts=typeof value === \"string\"?value.split(\" \"):[value];for(;i < 4;i++) {expanded[prefix + cssExpand[i] + suffix] = parts[i] || parts[i - 2] || parts[0];}return expanded;}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix + suffix].set = setPositiveNumber;}});jQuery.fn.extend({css:function css(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles = getStyles(elem);len = name.length;for(;i < len;i++) {map[name[i]] = jQuery.css(elem,name[i],false,styles);}return map;}return value !== undefined?jQuery.style(elem,name,value):jQuery.css(elem,name);},name,value,arguments.length > 1);},show:function show(){return showHide(this,true);},hide:function hide(){return showHide(this);},toggle:function toggle(state){if(typeof state === \"boolean\"){return state?this.show():this.hide();}return this.each(function(){if(isHidden(this)){jQuery(this).show();}else {jQuery(this).hide();}});}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing);}jQuery.Tween = Tween;Tween.prototype = {constructor:Tween,init:function init(elem,options,prop,end,easing,unit){this.elem = elem;this.prop = prop;this.easing = easing || \"swing\";this.options = options;this.start = this.now = this.cur();this.end = end;this.unit = unit || (jQuery.cssNumber[prop]?\"\":\"px\");},cur:function cur(){var hooks=Tween.propHooks[this.prop];return hooks && hooks.get?hooks.get(this):Tween.propHooks._default.get(this);},run:function run(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos = eased = jQuery.easing[this.easing](percent,this.options.duration * percent,0,1,this.options.duration);}else {this.pos = eased = percent;}this.now = (this.end - this.start) * eased + this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this);}if(hooks && hooks.set){hooks.set(this);}else {Tween.propHooks._default.set(this);}return this;}};Tween.prototype.init.prototype = Tween.prototype;Tween.propHooks = {_default:{get:function get(tween){var result;if(tween.elem[tween.prop] != null && (!tween.elem.style || tween.elem.style[tween.prop] == null)){return tween.elem[tween.prop];} // Passing an empty string as a 3rd parameter to .css will automatically\n\t// attempt a parseFloat and fallback to a string if the parse fails.\n\t// Simple values such as \"10px\" are parsed to Float;\n\t// complex values such as \"rotate(1rad)\" are returned as-is.\n\tresult = jQuery.css(tween.elem,tween.prop,\"\"); // Empty strings, null, undefined and \"auto\" are converted to 0.\n\treturn !result || result === \"auto\"?0:result;},set:function set(tween){ // Use step hook for back compat.\n\t// Use cssHook if its there.\n\t// Use .style if available and use plain properties where available.\n\tif(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween);}else if(tween.elem.style && (tween.elem.style[jQuery.cssProps[tween.prop]] != null || jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now + tween.unit);}else {tween.elem[tween.prop] = tween.now;}}}}; // Support: IE9\n\t// Panic based approach to setting things on disconnected nodes\n\tTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {set:function set(tween){if(tween.elem.nodeType && tween.elem.parentNode){tween.elem[tween.prop] = tween.now;}}};jQuery.easing = {linear:function linear(p){return p;},swing:function swing(p){return 0.5 - Math.cos(p * Math.PI) / 2;}};jQuery.fx = Tween.prototype.init; // Back Compat <1.8 extension point\n\tjQuery.fx.step = {};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp(\"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\",\"i\"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={\"*\":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts && parts[3] || (jQuery.cssNumber[prop]?\"\":\"px\"), // Starting value computation is required for potential unit mismatches\n\tstart=(jQuery.cssNumber[prop] || unit !== \"px\" && +target) && rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start && start[3] !== unit){ // Trust units reported by jQuery.css\n\tunit = unit || start[3]; // Make sure we update the tween properties later on\n\tparts = parts || []; // Iteratively approximate from a nonzero starting point\n\tstart = +target || 1;do { // If previous iteration zeroed out, double until we get *something*.\n\t// Use string for doubling so we don't accidentally see scale as unchanged below\n\tscale = scale || \".5\"; // Adjust and apply\n\tstart = start / scale;jQuery.style(tween.elem,prop,start + unit); // Update scale, tolerating zero or NaN from tween.cur(),\n\t// break the loop if scale is unchanged or perfect, or if we've just had enough\n\t}while(scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations);} // Update tween properties\n\tif(parts){start = tween.start = +start || +target || 0;tween.unit = unit; // If a +=/-= token was provided, we're doing a relative animation\n\ttween.end = parts[1]?start + (parts[1] + 1) * parts[2]:+parts[2];}return tween;}]}; // Animations created synchronously will run synchronously\n\tfunction createFxNow(){setTimeout(function(){fxNow = undefined;});return fxNow = jQuery.now();} // Generate parameters to create a standard animation\n\tfunction genFx(type,includeWidth){var which,i=0,attrs={height:type}; // If we include width, step value is 1 to do all cssExpand values,\n\t// otherwise step value is 2 to skip over Left and Right\n\tincludeWidth = includeWidth?1:0;for(;i < 4;i += 2 - includeWidth) {which = cssExpand[i];attrs[\"margin\" + which] = attrs[\"padding\" + which] = type;}if(includeWidth){attrs.opacity = attrs.width = type;}return attrs;}function createTween(value,prop,animation){var tween,collection=(tweeners[prop] || []).concat(tweeners[\"*\"]),index=0,length=collection.length;for(;index < length;index++) {if(tween = collection[index].call(animation,prop,value)){ // We're done with this property\n\treturn tween;}}}function defaultPrefilter(elem,props,opts){ /* jshint validthis: true */var prop,value,toggle,tween,hooks,oldfire,display,checkDisplay,anim=this,orig={},style=elem.style,hidden=elem.nodeType && isHidden(elem),dataShow=data_priv.get(elem,\"fxshow\"); // Handle queue: false promises\n\tif(!opts.queue){hooks = jQuery._queueHooks(elem,\"fx\");if(hooks.unqueued == null){hooks.unqueued = 0;oldfire = hooks.empty.fire;hooks.empty.fire = function(){if(!hooks.unqueued){oldfire();}};}hooks.unqueued++;anim.always(function(){ // Ensure the complete handler is called before this completes\n\tanim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,\"fx\").length){hooks.empty.fire();}});});} // Height/width overflow pass\n\tif(elem.nodeType === 1 && (\"height\" in props || \"width\" in props)){ // Make sure that nothing sneaks out\n\t// Record all 3 overflow attributes because IE9-10 do not\n\t// change the overflow attribute when overflowX and\n\t// overflowY are set to the same value\n\topts.overflow = [style.overflow,style.overflowX,style.overflowY]; // Set display property to inline-block for height/width\n\t// animations on inline elements that are having width/height animated\n\tdisplay = jQuery.css(elem,\"display\"); // Test default display if display is currently \"none\"\n\tcheckDisplay = display === \"none\"?data_priv.get(elem,\"olddisplay\") || defaultDisplay(elem.nodeName):display;if(checkDisplay === \"inline\" && jQuery.css(elem,\"float\") === \"none\"){style.display = \"inline-block\";}}if(opts.overflow){style.overflow = \"hidden\";anim.always(function(){style.overflow = opts.overflow[0];style.overflowX = opts.overflow[1];style.overflowY = opts.overflow[2];});} // show/hide pass\n\tfor(prop in props) {value = props[prop];if(rfxtypes.exec(value)){delete props[prop];toggle = toggle || value === \"toggle\";if(value === (hidden?\"hide\":\"show\")){ // If there is dataShow left over from a stopped hide or show and we are going to proceed with show, we should pretend to be hidden\n\tif(value === \"show\" && dataShow && dataShow[prop] !== undefined){hidden = true;}else {continue;}}orig[prop] = dataShow && dataShow[prop] || jQuery.style(elem,prop); // Any non-fx value stops us from restoring the original display value\n\t}else {display = undefined;}}if(!jQuery.isEmptyObject(orig)){if(dataShow){if(\"hidden\" in dataShow){hidden = dataShow.hidden;}}else {dataShow = data_priv.access(elem,\"fxshow\",{});} // Store state if its toggle - enables .stop().toggle() to \"reverse\"\n\tif(toggle){dataShow.hidden = !hidden;}if(hidden){jQuery(elem).show();}else {anim.done(function(){jQuery(elem).hide();});}anim.done(function(){var prop;data_priv.remove(elem,\"fxshow\");for(prop in orig) {jQuery.style(elem,prop,orig[prop]);}});for(prop in orig) {tween = createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop] = tween.start;if(hidden){tween.end = tween.start;tween.start = prop === \"width\" || prop === \"height\"?1:0;}}} // If this is a noop like .hide().hide(), restore an overwritten display value\n\t}else if((display === \"none\"?defaultDisplay(elem.nodeName):display) === \"inline\"){style.display = display;}}function propFilter(props,specialEasing){var index,name,easing,value,hooks; // camelCase, specialEasing and expand cssHook pass\n\tfor(index in props) {name = jQuery.camelCase(index);easing = specialEasing[name];value = props[index];if(jQuery.isArray(value)){easing = value[1];value = props[index] = value[0];}if(index !== name){props[name] = value;delete props[index];}hooks = jQuery.cssHooks[name];if(hooks && \"expand\" in hooks){value = hooks.expand(value);delete props[name]; // Not quite $.extend, this won't overwrite existing keys.\n\t// Reusing 'index' because we have the correct \"name\"\n\tfor(index in value) {if(!(index in props)){props[index] = value[index];specialEasing[index] = easing;}}}else {specialEasing[name] = easing;}}}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){ // Don't match elem in the :animated selector\n\tdelete tick.elem;}),tick=function tick(){if(stopped){return false;}var currentTime=fxNow || createFxNow(),remaining=Math.max(0,animation.startTime + animation.duration - currentTime), // Support: Android 2.3\n\t// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)\n\ttemp=remaining / animation.duration || 0,percent=1 - temp,index=0,length=animation.tweens.length;for(;index < length;index++) {animation.tweens[index].run(percent);}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent < 1 && length){return remaining;}else {deferred.resolveWith(elem,[animation]);return false;}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow || createFxNow(),duration:options.duration,tweens:[],createTween:function createTween(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop] || animation.opts.easing);animation.tweens.push(tween);return tween;},stop:function stop(gotoEnd){var index=0, // If we are going to the end, we want to run all the tweens\n\t// otherwise we skip this part\n\tlength=gotoEnd?animation.tweens.length:0;if(stopped){return this;}stopped = true;for(;index < length;index++) {animation.tweens[index].run(1);} // Resolve when we played the last frame; otherwise, reject\n\tif(gotoEnd){deferred.resolveWith(elem,[animation,gotoEnd]);}else {deferred.rejectWith(elem,[animation,gotoEnd]);}return this;}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index < length;index++) {result = animationPrefilters[index].call(animation,elem,props,animation.opts);if(result){return result;}}jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation);}jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})); // attach callbacks from options\n\treturn animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always);}jQuery.Animation = jQuery.extend(Animation,{tweener:function tweener(props,callback){if(jQuery.isFunction(props)){callback = props;props = [\"*\"];}else {props = props.split(\" \");}var prop,index=0,length=props.length;for(;index < length;index++) {prop = props[index];tweeners[prop] = tweeners[prop] || [];tweeners[prop].unshift(callback);}},prefilter:function prefilter(callback,prepend){if(prepend){animationPrefilters.unshift(callback);}else {animationPrefilters.push(callback);}}});jQuery.speed = function(speed,easing,fn){var opt=speed && typeof speed === \"object\"?jQuery.extend({},speed):{complete:fn || !fn && easing || jQuery.isFunction(speed) && speed,duration:speed,easing:fn && easing || easing && !jQuery.isFunction(easing) && easing};opt.duration = jQuery.fx.off?0:typeof opt.duration === \"number\"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default; // Normalize opt.queue - true/undefined/null -> \"fx\"\n\tif(opt.queue == null || opt.queue === true){opt.queue = \"fx\";} // Queueing\n\topt.old = opt.complete;opt.complete = function(){if(jQuery.isFunction(opt.old)){opt.old.call(this);}if(opt.queue){jQuery.dequeue(this,opt.queue);}};return opt;};jQuery.fn.extend({fadeTo:function fadeTo(speed,to,easing,callback){ // Show any hidden elements after setting opacity to 0\n\treturn this.filter(isHidden).css(\"opacity\",0).show() // Animate to the value specified\n\t.end().animate({opacity:to},speed,easing,callback);},animate:function animate(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function doAnimation(){ // Operate on a copy of prop so per-property easing won't be lost\n\tvar anim=Animation(this,jQuery.extend({},prop),optall); // Empty animations, or finishing resolves immediately\n\tif(empty || data_priv.get(this,\"finish\")){anim.stop(true);}};doAnimation.finish = doAnimation;return empty || optall.queue === false?this.each(doAnimation):this.queue(optall.queue,doAnimation);},stop:function stop(type,clearQueue,gotoEnd){var stopQueue=function stopQueue(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd);};if(typeof type !== \"string\"){gotoEnd = clearQueue;clearQueue = type;type = undefined;}if(clearQueue && type !== false){this.queue(type || \"fx\",[]);}return this.each(function(){var dequeue=true,index=type != null && type + \"queueHooks\",timers=jQuery.timers,data=data_priv.get(this);if(index){if(data[index] && data[index].stop){stopQueue(data[index]);}}else {for(index in data) {if(data[index] && data[index].stop && rrun.test(index)){stopQueue(data[index]);}}}for(index = timers.length;index--;) {if(timers[index].elem === this && (type == null || timers[index].queue === type)){timers[index].anim.stop(gotoEnd);dequeue = false;timers.splice(index,1);}} // Start the next in the queue if the last step wasn't forced.\n\t// Timers currently will call their complete callbacks, which\n\t// will dequeue but only if they were gotoEnd.\n\tif(dequeue || !gotoEnd){jQuery.dequeue(this,type);}});},finish:function finish(type){if(type !== false){type = type || \"fx\";}return this.each(function(){var index,data=data_priv.get(this),queue=data[type + \"queue\"],hooks=data[type + \"queueHooks\"],timers=jQuery.timers,length=queue?queue.length:0; // Enable finishing flag on private data\n\tdata.finish = true; // Empty the queue first\n\tjQuery.queue(this,type,[]);if(hooks && hooks.stop){hooks.stop.call(this,true);} // Look for any active animations, and finish them\n\tfor(index = timers.length;index--;) {if(timers[index].elem === this && timers[index].queue === type){timers[index].anim.stop(true);timers.splice(index,1);}} // Look for any animations in the old queue and finish them\n\tfor(index = 0;index < length;index++) {if(queue[index] && queue[index].finish){queue[index].finish.call(this);}} // Turn off finishing flag\n\tdelete data.finish;});}});jQuery.each([\"toggle\",\"show\",\"hide\"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name] = function(speed,easing,callback){return speed == null || typeof speed === \"boolean\"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback);};}); // Generate shortcuts for custom animations\n\tjQuery.each({slideDown:genFx(\"show\"),slideUp:genFx(\"hide\"),slideToggle:genFx(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(name,props){jQuery.fn[name] = function(speed,easing,callback){return this.animate(props,speed,easing,callback);};});jQuery.timers = [];jQuery.fx.tick = function(){var timer,i=0,timers=jQuery.timers;fxNow = jQuery.now();for(;i < timers.length;i++) {timer = timers[i]; // Checks the timer has not already been removed\n\tif(!timer() && timers[i] === timer){timers.splice(i--,1);}}if(!timers.length){jQuery.fx.stop();}fxNow = undefined;};jQuery.fx.timer = function(timer){jQuery.timers.push(timer);if(timer()){jQuery.fx.start();}else {jQuery.timers.pop();}};jQuery.fx.interval = 13;jQuery.fx.start = function(){if(!timerId){timerId = setInterval(jQuery.fx.tick,jQuery.fx.interval);}};jQuery.fx.stop = function(){clearInterval(timerId);timerId = null;};jQuery.fx.speeds = {slow:600,fast:200, // Default speed\n\t_default:400}; // Based off of the plugin by Clint Helfers, with permission.\n\t// http://blindsignals.com/index.php/2009/07/jquery-delay/\n\tjQuery.fn.delay = function(time,type){time = jQuery.fx?jQuery.fx.speeds[time] || time:time;type = type || \"fx\";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop = function(){clearTimeout(timeout);};});};(function(){var input=document.createElement(\"input\"),select=document.createElement(\"select\"),opt=select.appendChild(document.createElement(\"option\"));input.type = \"checkbox\"; // Support: iOS<=5.1, Android<=4.2+\n\t// Default value for a checkbox should be \"on\"\n\tsupport.checkOn = input.value !== \"\"; // Support: IE<=11+\n\t// Must access selectedIndex to make default options select\n\tsupport.optSelected = opt.selected; // Support: Android<=2.3\n\t// Options inside disabled selects are incorrectly marked as disabled\n\tselect.disabled = true;support.optDisabled = !opt.disabled; // Support: IE<=11+\n\t// An input loses its value after becoming a radio\n\tinput = document.createElement(\"input\");input.value = \"t\";input.type = \"radio\";support.radioValue = input.value === \"t\";})();var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function attr(name,value){return access(this,jQuery.attr,name,value,arguments.length > 1);},removeAttr:function removeAttr(name){return this.each(function(){jQuery.removeAttr(this,name);});}});jQuery.extend({attr:function attr(elem,name,value){var hooks,ret,nType=elem.nodeType; // don't get/set attributes on text, comment and attribute nodes\n\tif(!elem || nType === 3 || nType === 8 || nType === 2){return;} // Fallback to prop when attributes are not supported\n\tif(typeof elem.getAttribute === strundefined){return jQuery.prop(elem,name,value);} // All attributes are lowercase\n\t// Grab necessary hook if one is defined\n\tif(nType !== 1 || !jQuery.isXMLDoc(elem)){name = name.toLowerCase();hooks = jQuery.attrHooks[name] || (jQuery.expr.match.bool.test(name)?boolHook:nodeHook);}if(value !== undefined){if(value === null){jQuery.removeAttr(elem,name);}else if(hooks && \"set\" in hooks && (ret = hooks.set(elem,value,name)) !== undefined){return ret;}else {elem.setAttribute(name,value + \"\");return value;}}else if(hooks && \"get\" in hooks && (ret = hooks.get(elem,name)) !== null){return ret;}else {ret = jQuery.find.attr(elem,name); // Non-existent attributes return null, we normalize to undefined\n\treturn ret == null?undefined:ret;}},removeAttr:function removeAttr(elem,value){var name,propName,i=0,attrNames=value && value.match(rnotwhite);if(attrNames && elem.nodeType === 1){while(name = attrNames[i++]) {propName = jQuery.propFix[name] || name; // Boolean attributes get special treatment (#10870)\n\tif(jQuery.expr.match.bool.test(name)){ // Set corresponding property to false\n\telem[propName] = false;}elem.removeAttribute(name);}}},attrHooks:{type:{set:function set(elem,value){if(!support.radioValue && value === \"radio\" && jQuery.nodeName(elem,\"input\")){var val=elem.value;elem.setAttribute(\"type\",value);if(val){elem.value = val;}return value;}}}}}); // Hooks for boolean attributes\n\tboolHook = {set:function set(elem,value,name){if(value === false){ // Remove boolean attributes when set to false\n\tjQuery.removeAttr(elem,name);}else {elem.setAttribute(name,name);}return name;}};jQuery.each(jQuery.expr.match.bool.source.match(/\\w+/g),function(i,name){var getter=attrHandle[name] || jQuery.find.attr;attrHandle[name] = function(elem,name,isXML){var ret,handle;if(!isXML){ // Avoid an infinite loop by temporarily removing this function from the getter\n\thandle = attrHandle[name];attrHandle[name] = ret;ret = getter(elem,name,isXML) != null?name.toLowerCase():null;attrHandle[name] = handle;}return ret;};});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function prop(name,value){return access(this,jQuery.prop,name,value,arguments.length > 1);},removeProp:function removeProp(name){return this.each(function(){delete this[jQuery.propFix[name] || name];});}});jQuery.extend({propFix:{\"for\":\"htmlFor\",\"class\":\"className\"},prop:function prop(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType; // Don't get/set properties on text, comment and attribute nodes\n\tif(!elem || nType === 3 || nType === 8 || nType === 2){return;}notxml = nType !== 1 || !jQuery.isXMLDoc(elem);if(notxml){ // Fix name and attach hooks\n\tname = jQuery.propFix[name] || name;hooks = jQuery.propHooks[name];}if(value !== undefined){return hooks && \"set\" in hooks && (ret = hooks.set(elem,value,name)) !== undefined?ret:elem[name] = value;}else {return hooks && \"get\" in hooks && (ret = hooks.get(elem,name)) !== null?ret:elem[name];}},propHooks:{tabIndex:{get:function get(elem){return elem.hasAttribute(\"tabindex\") || rfocusable.test(elem.nodeName) || elem.href?elem.tabIndex:-1;}}}});if(!support.optSelected){jQuery.propHooks.selected = {get:function get(elem){var parent=elem.parentNode;if(parent && parent.parentNode){parent.parentNode.selectedIndex;}return null;}};}jQuery.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){jQuery.propFix[this.toLowerCase()] = this;});var rclass=/[\\t\\r\\n\\f]/g;jQuery.fn.extend({addClass:function addClass(value){var classes,elem,cur,clazz,j,finalValue,proceed=typeof value === \"string\" && value,i=0,len=this.length;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className));});}if(proceed){ // The disjunction here is for better compressibility (see removeClass)\n\tclasses = (value || \"\").match(rnotwhite) || [];for(;i < len;i++) {elem = this[i];cur = elem.nodeType === 1 && (elem.className?(\" \" + elem.className + \" \").replace(rclass,\" \"):\" \");if(cur){j = 0;while(clazz = classes[j++]) {if(cur.indexOf(\" \" + clazz + \" \") < 0){cur += clazz + \" \";}} // only assign if different to avoid unneeded rendering.\n\tfinalValue = jQuery.trim(cur);if(elem.className !== finalValue){elem.className = finalValue;}}}}return this;},removeClass:function removeClass(value){var classes,elem,cur,clazz,j,finalValue,proceed=arguments.length === 0 || typeof value === \"string\" && value,i=0,len=this.length;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className));});}if(proceed){classes = (value || \"\").match(rnotwhite) || [];for(;i < len;i++) {elem = this[i]; // This expression is here for better compressibility (see addClass)\n\tcur = elem.nodeType === 1 && (elem.className?(\" \" + elem.className + \" \").replace(rclass,\" \"):\"\");if(cur){j = 0;while(clazz = classes[j++]) { // Remove *all* instances\n\twhile(cur.indexOf(\" \" + clazz + \" \") >= 0) {cur = cur.replace(\" \" + clazz + \" \",\" \");}} // Only assign if different to avoid unneeded rendering.\n\tfinalValue = value?jQuery.trim(cur):\"\";if(elem.className !== finalValue){elem.className = finalValue;}}}}return this;},toggleClass:function toggleClass(value,stateVal){var type=typeof value;if(typeof stateVal === \"boolean\" && type === \"string\"){return stateVal?this.addClass(value):this.removeClass(value);}if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal);});}return this.each(function(){if(type === \"string\"){ // Toggle individual class names\n\tvar className,i=0,self=jQuery(this),classNames=value.match(rnotwhite) || [];while(className = classNames[i++]) { // Check each className given, space separated list\n\tif(self.hasClass(className)){self.removeClass(className);}else {self.addClass(className);}} // Toggle whole class name\n\t}else if(type === strundefined || type === \"boolean\"){if(this.className){ // store className if set\n\tdata_priv.set(this,\"__className__\",this.className);} // If the element has a class name or if we're passed `false`,\n\t// then remove the whole classname (if there was one, the above saved it).\n\t// Otherwise bring back whatever was previously saved (if anything),\n\t// falling back to the empty string if nothing was stored.\n\tthis.className = this.className || value === false?\"\":data_priv.get(this,\"__className__\") || \"\";}});},hasClass:function hasClass(selector){var className=\" \" + selector + \" \",i=0,l=this.length;for(;i < l;i++) {if(this[i].nodeType === 1 && (\" \" + this[i].className + \" \").replace(rclass,\" \").indexOf(className) >= 0){return true;}}return false;}});var rreturn=/\\r/g;jQuery.fn.extend({val:function val(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks = jQuery.valHooks[elem.type] || jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks && \"get\" in hooks && (ret = hooks.get(elem,\"value\")) !== undefined){return ret;}ret = elem.value;return typeof ret === \"string\"? // Handle most common string cases\n\tret.replace(rreturn,\"\"): // Handle cases where value is null/undef or number\n\tret == null?\"\":ret;}return;}isFunction = jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType !== 1){return;}if(isFunction){val = value.call(this,i,jQuery(this).val());}else {val = value;} // Treat null/undefined as \"\"; convert numbers to string\n\tif(val == null){val = \"\";}else if(typeof val === \"number\"){val += \"\";}else if(jQuery.isArray(val)){val = jQuery.map(val,function(value){return value == null?\"\":value + \"\";});}hooks = jQuery.valHooks[this.type] || jQuery.valHooks[this.nodeName.toLowerCase()]; // If set returns undefined, fall back to normal setting\n\tif(!hooks || !(\"set\" in hooks) || hooks.set(this,val,\"value\") === undefined){this.value = val;}});}});jQuery.extend({valHooks:{option:{get:function get(elem){var val=jQuery.find.attr(elem,\"value\");return val != null?val: // Support: IE10-11+\n\t// option.text throws exceptions (#14686, #14858)\n\tjQuery.trim(jQuery.text(elem));}},select:{get:function get(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type === \"select-one\" || index < 0,values=one?null:[],max=one?index + 1:options.length,i=index < 0?max:one?index:0; // Loop through all the selected options\n\tfor(;i < max;i++) {option = options[i]; // IE6-9 doesn't update selected after form reset (#2551)\n\tif((option.selected || i === index) && ( // Don't return options that are disabled or in a disabled optgroup\n\tsupport.optDisabled?!option.disabled:option.getAttribute(\"disabled\") === null) && (!option.parentNode.disabled || !jQuery.nodeName(option.parentNode,\"optgroup\"))){ // Get the specific value for the option\n\tvalue = jQuery(option).val(); // We don't need an array for one selects\n\tif(one){return value;} // Multi-Selects return an array\n\tvalues.push(value);}}return values;},set:function set(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--) {option = options[i];if(option.selected = jQuery.inArray(option.value,values) >= 0){optionSet = true;}} // Force browsers to behave consistently when non-matching value is set\n\tif(!optionSet){elem.selectedIndex = -1;}return values;}}}}); // Radios and checkboxes getter/setter\n\tjQuery.each([\"radio\",\"checkbox\"],function(){jQuery.valHooks[this] = {set:function set(elem,value){if(jQuery.isArray(value)){return elem.checked = jQuery.inArray(jQuery(elem).val(),value) >= 0;}}};if(!support.checkOn){jQuery.valHooks[this].get = function(elem){return elem.getAttribute(\"value\") === null?\"on\":elem.value;};}}); // Return jQuery for attributes-only inclusion\n\tjQuery.each((\"blur focus focusin focusout load resize scroll unload click dblclick \" + \"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" + \"change select submit keydown keypress keyup error contextmenu\").split(\" \"),function(i,name){ // Handle event binding\n\tjQuery.fn[name] = function(data,fn){return arguments.length > 0?this.on(name,null,data,fn):this.trigger(name);};});jQuery.fn.extend({hover:function hover(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut || fnOver);},bind:function bind(types,data,fn){return this.on(types,null,data,fn);},unbind:function unbind(types,fn){return this.off(types,null,fn);},delegate:function delegate(selector,types,data,fn){return this.on(types,selector,data,fn);},undelegate:function undelegate(selector,types,fn){ // ( namespace ) or ( selector, types [, fn] )\n\treturn arguments.length === 1?this.off(selector,\"**\"):this.off(types,selector || \"**\",fn);}});var nonce=jQuery.now();var rquery=/\\?/; // Support: Android 2.3\n\t// Workaround failure to string-cast null input\n\tjQuery.parseJSON = function(data){return JSON.parse(data + \"\");}; // Cross-browser xml parsing\n\tjQuery.parseXML = function(data){var xml,tmp;if(!data || typeof data !== \"string\"){return null;} // Support: IE9\n\ttry{tmp = new DOMParser();xml = tmp.parseFromString(data,\"text/xml\");}catch(e) {xml = undefined;}if(!xml || xml.getElementsByTagName(\"parsererror\").length){jQuery.error(\"Invalid XML: \" + data);}return xml;};var rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \\t]*([^\\r\\n]*)$/mg, // #7653, #8125, #8152: local protocol detection\n\trlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\\/\\//,rurl=/^([\\w.+-]+:)(?:\\/\\/(?:[^\\/?#]*@|)([^\\/?#:]*)(?::(\\d+)|)|)/, /* Prefilters\n\t\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t\t * 2) These are called:\n\t\t *    - BEFORE asking for a transport\n\t\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t\t * 3) key is the dataType\n\t\t * 4) the catchall symbol \"*\" can be used\n\t\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t\t */prefilters={}, /* Transports bindings\n\t\t * 1) key is the dataType\n\t\t * 2) the catchall symbol \"*\" can be used\n\t\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t\t */transports={}, // Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\n\tallTypes=\"*/\".concat(\"*\"), // Document location\n\tajaxLocation=window.location.href, // Segment location into parts\n\tajaxLocParts=rurl.exec(ajaxLocation.toLowerCase()) || []; // Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\n\tfunction addToPrefiltersOrTransports(structure){ // dataTypeExpression is optional and defaults to \"*\"\n\treturn function(dataTypeExpression,func){if(typeof dataTypeExpression !== \"string\"){func = dataTypeExpression;dataTypeExpression = \"*\";}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite) || [];if(jQuery.isFunction(func)){ // For each dataType in the dataTypeExpression\n\twhile(dataType = dataTypes[i++]) { // Prepend if requested\n\tif(dataType[0] === \"+\"){dataType = dataType.slice(1) || \"*\";(structure[dataType] = structure[dataType] || []).unshift(func); // Otherwise append\n\t}else {(structure[dataType] = structure[dataType] || []).push(func);}}}};} // Base inspection function for prefilters and transports\n\tfunction inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure === transports;function inspect(dataType){var selected;inspected[dataType] = true;jQuery.each(structure[dataType] || [],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport === \"string\" && !seekingTransport && !inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false;}else if(seekingTransport){return !(selected = dataTypeOrTransport);}});return selected;}return inspect(options.dataTypes[0]) || !inspected[\"*\"] && inspect(\"*\");} // A special extend for ajax options\n\t// that takes \"flat\" options (not to be deep extended)\n\t// Fixes #9887\n\tfunction ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions || {};for(key in src) {if(src[key] !== undefined){(flatOptions[key]?target:deep || (deep = {}))[key] = src[key];}}if(deep){jQuery.extend(true,target,deep);}return target;} /* Handles responses to an ajax request:\n\t * - finds the right dataType (mediates between content-type and expected dataType)\n\t * - returns the corresponding response\n\t */function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes; // Remove auto dataType and get content-type in the process\n\twhile(dataTypes[0] === \"*\") {dataTypes.shift();if(ct === undefined){ct = s.mimeType || jqXHR.getResponseHeader(\"Content-Type\");}} // Check if we're dealing with a known content-type\n\tif(ct){for(type in contents) {if(contents[type] && contents[type].test(ct)){dataTypes.unshift(type);break;}}} // Check to see if we have a response for the expected dataType\n\tif(dataTypes[0] in responses){finalDataType = dataTypes[0];}else { // Try convertible dataTypes\n\tfor(type in responses) {if(!dataTypes[0] || s.converters[type + \" \" + dataTypes[0]]){finalDataType = type;break;}if(!firstDataType){firstDataType = type;}} // Or just use first one\n\tfinalDataType = finalDataType || firstDataType;} // If we found a dataType\n\t// We add the dataType to the list if needed\n\t// and return the corresponding response\n\tif(finalDataType){if(finalDataType !== dataTypes[0]){dataTypes.unshift(finalDataType);}return responses[finalDataType];}} /* Chain conversions given the request and the original response\n\t * Also sets the responseXXX fields on the jqXHR instance\n\t */function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={}, // Work with a copy of dataTypes in case we need to modify it for conversion\n\tdataTypes=s.dataTypes.slice(); // Create converters map with lowercased keys\n\tif(dataTypes[1]){for(conv in s.converters) {converters[conv.toLowerCase()] = s.converters[conv];}}current = dataTypes.shift(); // Convert to each sequential dataType\n\twhile(current) {if(s.responseFields[current]){jqXHR[s.responseFields[current]] = response;} // Apply the dataFilter if provided\n\tif(!prev && isSuccess && s.dataFilter){response = s.dataFilter(response,s.dataType);}prev = current;current = dataTypes.shift();if(current){ // There's only work to do if current dataType is non-auto\n\tif(current === \"*\"){current = prev; // Convert response if prev dataType is non-auto and differs from current\n\t}else if(prev !== \"*\" && prev !== current){ // Seek a direct converter\n\tconv = converters[prev + \" \" + current] || converters[\"* \" + current]; // If none found, seek a pair\n\tif(!conv){for(conv2 in converters) { // If conv2 outputs current\n\ttmp = conv2.split(\" \");if(tmp[1] === current){ // If prev can be converted to accepted input\n\tconv = converters[prev + \" \" + tmp[0]] || converters[\"* \" + tmp[0]];if(conv){ // Condense equivalence converters\n\tif(conv === true){conv = converters[conv2]; // Otherwise, insert the intermediate dataType\n\t}else if(converters[conv2] !== true){current = tmp[0];dataTypes.unshift(tmp[1]);}break;}}}} // Apply converter (if not an equivalence)\n\tif(conv !== true){ // Unless errors are allowed to bubble, catch and return them\n\tif(conv && s[\"throws\"]){response = conv(response);}else {try{response = conv(response);}catch(e) {return {state:\"parsererror\",error:conv?e:\"No conversion from \" + prev + \" to \" + current};}}}}}}return {state:\"success\",data:response};}jQuery.extend({ // Counter for holding the number of active queries\n\tactive:0, // Last-Modified header cache for next request\n\tlastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:\"GET\",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,processData:true,async:true,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\", /*\n\t\t\ttimeout: 0,\n\t\t\tdata: null,\n\t\t\tdataType: null,\n\t\t\tusername: null,\n\t\t\tpassword: null,\n\t\t\tcache: null,\n\t\t\tthrows: false,\n\t\t\ttraditional: false,\n\t\t\theaders: {},\n\t\t\t*/accepts:{\"*\":allTypes,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"}, // Data converters\n\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\tconverters:{ // Convert anything to text\n\t\"* text\":String, // Text to html (true = no transformation)\n\t\"text html\":true, // Evaluate text as a json expression\n\t\"text json\":jQuery.parseJSON, // Parse text as xml\n\t\"text xml\":jQuery.parseXML}, // For options that shouldn't be deep extended:\n\t// you can add your own custom options here if\n\t// and when you create one that shouldn't be\n\t// deep extended (see ajaxExtend)\n\tflatOptions:{url:true,context:true}}, // Creates a full fledged settings object into target\n\t// with both ajaxSettings and settings fields.\n\t// If target is omitted, writes into ajaxSettings.\n\tajaxSetup:function ajaxSetup(target,settings){return settings? // Building a settings object\n\tajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings): // Extending ajaxSettings\n\tajaxExtend(jQuery.ajaxSettings,target);},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports), // Main method\n\tajax:function ajax(url,options){ // If url is an object, simulate pre-1.5 signature\n\tif(typeof url === \"object\"){options = url;url = undefined;} // Force options to be an object\n\toptions = options || {};var transport, // URL without anti-cache param\n\tcacheURL, // Response headers\n\tresponseHeadersString,responseHeaders, // timeout handle\n\ttimeoutTimer, // Cross-domain detection vars\n\tparts, // To know if global events are to be dispatched\n\tfireGlobals, // Loop variable\n\ti, // Create the final options object\n\ts=jQuery.ajaxSetup({},options), // Callbacks context\n\tcallbackContext=s.context || s, // Context for global events is callbackContext if it is a DOM node or jQuery collection\n\tglobalEventContext=s.context && (callbackContext.nodeType || callbackContext.jquery)?jQuery(callbackContext):jQuery.event, // Deferreds\n\tdeferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks(\"once memory\"), // Status-dependent callbacks\n\t_statusCode=s.statusCode || {}, // Headers (they are sent all at once)\n\trequestHeaders={},requestHeadersNames={}, // The jqXHR state\n\tstate=0, // Default abort message\n\tstrAbort=\"canceled\", // Fake xhr\n\tjqXHR={readyState:0, // Builds headers hashtable if needed\n\tgetResponseHeader:function getResponseHeader(key){var match;if(state === 2){if(!responseHeaders){responseHeaders = {};while(match = rheaders.exec(responseHeadersString)) {responseHeaders[match[1].toLowerCase()] = match[2];}}match = responseHeaders[key.toLowerCase()];}return match == null?null:match;}, // Raw string\n\tgetAllResponseHeaders:function getAllResponseHeaders(){return state === 2?responseHeadersString:null;}, // Caches the header\n\tsetRequestHeader:function setRequestHeader(name,value){var lname=name.toLowerCase();if(!state){name = requestHeadersNames[lname] = requestHeadersNames[lname] || name;requestHeaders[name] = value;}return this;}, // Overrides response content-type header\n\toverrideMimeType:function overrideMimeType(type){if(!state){s.mimeType = type;}return this;}, // Status-dependent callbacks\n\tstatusCode:function statusCode(map){var code;if(map){if(state < 2){for(code in map) { // Lazy-add the new callback in a way that preserves old ones\n\t_statusCode[code] = [_statusCode[code],map[code]];}}else { // Execute the appropriate callbacks\n\tjqXHR.always(map[jqXHR.status]);}}return this;}, // Cancel the request\n\tabort:function abort(statusText){var finalText=statusText || strAbort;if(transport){transport.abort(finalText);}done(0,finalText);return this;}}; // Attach deferreds\n\tdeferred.promise(jqXHR).complete = completeDeferred.add;jqXHR.success = jqXHR.done;jqXHR.error = jqXHR.fail; // Remove hash character (#7531: and string promotion)\n\t// Add protocol if not provided (prefilters might expect it)\n\t// Handle falsy url in the settings object (#10093: consistency with old signature)\n\t// We also use the url parameter if available\n\ts.url = ((url || s.url || ajaxLocation) + \"\").replace(rhash,\"\").replace(rprotocol,ajaxLocParts[1] + \"//\"); // Alias method option to type as per ticket #12004\n\ts.type = options.method || options.type || s.method || s.type; // Extract dataTypes list\n\ts.dataTypes = jQuery.trim(s.dataType || \"*\").toLowerCase().match(rnotwhite) || [\"\"]; // A cross-domain request is in order when we have a protocol:host:port mismatch\n\tif(s.crossDomain == null){parts = rurl.exec(s.url.toLowerCase());s.crossDomain = !!(parts && (parts[1] !== ajaxLocParts[1] || parts[2] !== ajaxLocParts[2] || (parts[3] || (parts[1] === \"http:\"?\"80\":\"443\")) !== (ajaxLocParts[3] || (ajaxLocParts[1] === \"http:\"?\"80\":\"443\"))));} // Convert data if not already a string\n\tif(s.data && s.processData && typeof s.data !== \"string\"){s.data = jQuery.param(s.data,s.traditional);} // Apply prefilters\n\tinspectPrefiltersOrTransports(prefilters,s,options,jqXHR); // If request was aborted inside a prefilter, stop there\n\tif(state === 2){return jqXHR;} // We can fire global events as of now if asked to\n\t// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)\n\tfireGlobals = jQuery.event && s.global; // Watch for a new set of requests\n\tif(fireGlobals && jQuery.active++ === 0){jQuery.event.trigger(\"ajaxStart\");} // Uppercase the type\n\ts.type = s.type.toUpperCase(); // Determine if request has content\n\ts.hasContent = !rnoContent.test(s.type); // Save the URL in case we're toying with the If-Modified-Since\n\t// and/or If-None-Match header later on\n\tcacheURL = s.url; // More options handling for requests with no content\n\tif(!s.hasContent){ // If data is available, append data to url\n\tif(s.data){cacheURL = s.url += (rquery.test(cacheURL)?\"&\":\"?\") + s.data; // #9682: remove data so that it's not used in an eventual retry\n\tdelete s.data;} // Add anti-cache in url if needed\n\tif(s.cache === false){s.url = rts.test(cacheURL)? // If there is already a '_' parameter, set its value\n\tcacheURL.replace(rts,\"$1_=\" + nonce++): // Otherwise add one to the end\n\tcacheURL + (rquery.test(cacheURL)?\"&\":\"?\") + \"_=\" + nonce++;}} // Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\tif(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader(\"If-Modified-Since\",jQuery.lastModified[cacheURL]);}if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader(\"If-None-Match\",jQuery.etag[cacheURL]);}} // Set the correct header, if data is being sent\n\tif(s.data && s.hasContent && s.contentType !== false || options.contentType){jqXHR.setRequestHeader(\"Content-Type\",s.contentType);} // Set the Accepts header for the server, depending on the dataType\n\tjqXHR.setRequestHeader(\"Accept\",s.dataTypes[0] && s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]] + (s.dataTypes[0] !== \"*\"?\", \" + allTypes + \"; q=0.01\":\"\"):s.accepts[\"*\"]); // Check for headers option\n\tfor(i in s.headers) {jqXHR.setRequestHeader(i,s.headers[i]);} // Allow custom headers/mimetypes and early abort\n\tif(s.beforeSend && (s.beforeSend.call(callbackContext,jqXHR,s) === false || state === 2)){ // Abort if not done already and return\n\treturn jqXHR.abort();} // Aborting is no longer a cancellation\n\tstrAbort = \"abort\"; // Install callbacks on deferreds\n\tfor(i in {success:1,error:1,complete:1}) {jqXHR[i](s[i]);} // Get transport\n\ttransport = inspectPrefiltersOrTransports(transports,s,options,jqXHR); // If no transport, we auto-abort\n\tif(!transport){done(-1,\"No Transport\");}else {jqXHR.readyState = 1; // Send global event\n\tif(fireGlobals){globalEventContext.trigger(\"ajaxSend\",[jqXHR,s]);} // Timeout\n\tif(s.async && s.timeout > 0){timeoutTimer = setTimeout(function(){jqXHR.abort(\"timeout\");},s.timeout);}try{state = 1;transport.send(requestHeaders,done);}catch(e) { // Propagate exception as error if not done\n\tif(state < 2){done(-1,e); // Simply rethrow otherwise\n\t}else {throw e;}}} // Callback for when everything is done\n\tfunction done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText; // Called once\n\tif(state === 2){return;} // State is \"done\" now\n\tstate = 2; // Clear timeout if it exists\n\tif(timeoutTimer){clearTimeout(timeoutTimer);} // Dereference transport for early garbage collection\n\t// (no matter how long the jqXHR object will be used)\n\ttransport = undefined; // Cache response headers\n\tresponseHeadersString = headers || \"\"; // Set readyState\n\tjqXHR.readyState = status > 0?4:0; // Determine if successful\n\tisSuccess = status >= 200 && status < 300 || status === 304; // Get response data\n\tif(responses){response = ajaxHandleResponses(s,jqXHR,responses);} // Convert no matter what (that way responseXXX fields are always set)\n\tresponse = ajaxConvert(s,response,jqXHR,isSuccess); // If successful, handle type chaining\n\tif(isSuccess){ // Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\tif(s.ifModified){modified = jqXHR.getResponseHeader(\"Last-Modified\");if(modified){jQuery.lastModified[cacheURL] = modified;}modified = jqXHR.getResponseHeader(\"etag\");if(modified){jQuery.etag[cacheURL] = modified;}} // if no content\n\tif(status === 204 || s.type === \"HEAD\"){statusText = \"nocontent\"; // if not modified\n\t}else if(status === 304){statusText = \"notmodified\"; // If we have data, let's convert it\n\t}else {statusText = response.state;success = response.data;error = response.error;isSuccess = !error;}}else { // Extract error from statusText and normalize for non-aborts\n\terror = statusText;if(status || !statusText){statusText = \"error\";if(status < 0){status = 0;}}} // Set data for the fake xhr object\n\tjqXHR.status = status;jqXHR.statusText = (nativeStatusText || statusText) + \"\"; // Success/Error\n\tif(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);}else {deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);} // Status-dependent callbacks\n\tjqXHR.statusCode(_statusCode);_statusCode = undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?\"ajaxSuccess\":\"ajaxError\",[jqXHR,s,isSuccess?success:error]);} // Complete\n\tcompleteDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger(\"ajaxComplete\",[jqXHR,s]); // Handle the global AJAX counter\n\tif(! --jQuery.active){jQuery.event.trigger(\"ajaxStop\");}}}return jqXHR;},getJSON:function getJSON(url,data,callback){return jQuery.get(url,data,callback,\"json\");},getScript:function getScript(url,callback){return jQuery.get(url,undefined,callback,\"script\");}});jQuery.each([\"get\",\"post\"],function(i,method){jQuery[method] = function(url,data,callback,type){ // Shift arguments if data argument was omitted\n\tif(jQuery.isFunction(data)){type = type || callback;callback = data;data = undefined;}return jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback});};});jQuery._evalUrl = function(url){return jQuery.ajax({url:url,type:\"GET\",dataType:\"script\",async:false,global:false,\"throws\":true});};jQuery.fn.extend({wrapAll:function wrapAll(html){var wrap;if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i));});}if(this[0]){ // The elements to wrap the target around\n\twrap = jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}wrap.map(function(){var elem=this;while(elem.firstElementChild) {elem = elem.firstElementChild;}return elem;}).append(this);}return this;},wrapInner:function wrapInner(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));});}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else {self.append(html);}});},wrap:function wrap(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html);});},unwrap:function unwrap(){return this.parent().each(function(){if(!jQuery.nodeName(this,\"body\")){jQuery(this).replaceWith(this.childNodes);}}).end();}});jQuery.expr.filters.hidden = function(elem){ // Support: Opera <= 12.12\n\t// Opera reports offsetWidths and offsetHeights less than zero on some elements\n\treturn elem.offsetWidth <= 0 && elem.offsetHeight <= 0;};jQuery.expr.filters.visible = function(elem){return !jQuery.expr.filters.hidden(elem);};var r20=/%20/g,rbracket=/\\[\\]$/,rCRLF=/\\r?\\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){ // Serialize array item.\n\tjQuery.each(obj,function(i,v){if(traditional || rbracket.test(prefix)){ // Treat each array item as a scalar.\n\tadd(prefix,v);}else { // Item is non-scalar (array or object), encode its numeric index.\n\tbuildParams(prefix + \"[\" + (typeof v === \"object\"?i:\"\") + \"]\",v,traditional,add);}});}else if(!traditional && jQuery.type(obj) === \"object\"){ // Serialize object item.\n\tfor(name in obj) {buildParams(prefix + \"[\" + name + \"]\",obj[name],traditional,add);}}else { // Serialize scalar item.\n\tadd(prefix,obj);}} // Serialize an array of form elements or a set of\n\t// key/values into a query string\n\tjQuery.param = function(a,traditional){var prefix,s=[],add=function add(key,value){ // If value is a function, invoke it and return its value\n\tvalue = jQuery.isFunction(value)?value():value == null?\"\":value;s[s.length] = encodeURIComponent(key) + \"=\" + encodeURIComponent(value);}; // Set traditional to true for jQuery <= 1.3.2 behavior.\n\tif(traditional === undefined){traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;} // If an array was passed in, assume that it is an array of form elements.\n\tif(jQuery.isArray(a) || a.jquery && !jQuery.isPlainObject(a)){ // Serialize the form elements\n\tjQuery.each(a,function(){add(this.name,this.value);});}else { // If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t// did it), otherwise encode params recursively.\n\tfor(prefix in a) {buildParams(prefix,a[prefix],traditional,add);}} // Return the resulting serialization\n\treturn s.join(\"&\").replace(r20,\"+\");};jQuery.fn.extend({serialize:function serialize(){return jQuery.param(this.serializeArray());},serializeArray:function serializeArray(){return this.map(function(){ // Can add propHook for \"elements\" to filter or add form elements\n\tvar elements=jQuery.prop(this,\"elements\");return elements?jQuery.makeArray(elements):this;}).filter(function(){var type=this.type; // Use .is( \":disabled\" ) so that fieldset[disabled] works\n\treturn this.name && !jQuery(this).is(\":disabled\") && rsubmittable.test(this.nodeName) && !rsubmitterTypes.test(type) && (this.checked || !rcheckableType.test(type));}).map(function(i,elem){var val=jQuery(this).val();return val == null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return {name:elem.name,value:val.replace(rCRLF,\"\\r\\n\")};}):{name:elem.name,value:val.replace(rCRLF,\"\\r\\n\")};}).get();}});jQuery.ajaxSettings.xhr = function(){try{return new XMLHttpRequest();}catch(e) {}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={ // file protocol always yields status code 0, assume 200\n\t0:200, // Support: IE9\n\t// #1450: sometimes IE returns 1223 when it should be 204\n\t1223:204},xhrSupported=jQuery.ajaxSettings.xhr(); // Support: IE9\n\t// Open requests must be manually aborted on unload (#5280)\n\t// See https://support.microsoft.com/kb/2856746 for more info\n\tif(window.attachEvent){window.attachEvent(\"onunload\",function(){for(var key in xhrCallbacks) {xhrCallbacks[key]();}});}support.cors = !!xhrSupported && \"withCredentials\" in xhrSupported;support.ajax = xhrSupported = !!xhrSupported;jQuery.ajaxTransport(function(options){var callback; // Cross domain only allowed if supported through XMLHttpRequest\n\tif(support.cors || xhrSupported && !options.crossDomain){return {send:function send(headers,complete){var i,xhr=options.xhr(),id=++xhrId;xhr.open(options.type,options.url,options.async,options.username,options.password); // Apply custom fields if provided\n\tif(options.xhrFields){for(i in options.xhrFields) {xhr[i] = options.xhrFields[i];}} // Override mime type if needed\n\tif(options.mimeType && xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType);} // X-Requested-With header\n\t// For cross-domain requests, seeing as conditions for a preflight are\n\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t// For same-domain requests, won't change header if already provided.\n\tif(!options.crossDomain && !headers[\"X-Requested-With\"]){headers[\"X-Requested-With\"] = \"XMLHttpRequest\";} // Set headers\n\tfor(i in headers) {xhr.setRequestHeader(i,headers[i]);} // Callback\n\tcallback = function(type){return function(){if(callback){delete xhrCallbacks[id];callback = xhr.onload = xhr.onerror = null;if(type === \"abort\"){xhr.abort();}else if(type === \"error\"){complete( // file: protocol always yields status 0; see #8605, #14207\n\txhr.status,xhr.statusText);}else {complete(xhrSuccessStatus[xhr.status] || xhr.status,xhr.statusText, // Support: IE9\n\t// Accessing binary-data responseText throws an exception\n\t// (#11426)\n\ttypeof xhr.responseText === \"string\"?{text:xhr.responseText}:undefined,xhr.getAllResponseHeaders());}}};}; // Listen to events\n\txhr.onload = callback();xhr.onerror = callback(\"error\"); // Create the abort callback\n\tcallback = xhrCallbacks[id] = callback(\"abort\");try{ // Do send the request (this may raise an exception)\n\txhr.send(options.hasContent && options.data || null);}catch(e) { // #14683: Only rethrow if this hasn't been notified as an error yet\n\tif(callback){throw e;}}},abort:function abort(){if(callback){callback();}}};}}); // Install script dataType\n\tjQuery.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/(?:java|ecma)script/},converters:{\"text script\":function textScript(text){jQuery.globalEval(text);return text;}}}); // Handle cache's special case and crossDomain\n\tjQuery.ajaxPrefilter(\"script\",function(s){if(s.cache === undefined){s.cache = false;}if(s.crossDomain){s.type = \"GET\";}}); // Bind script tag hack transport\n\tjQuery.ajaxTransport(\"script\",function(s){ // This transport only deals with cross domain requests\n\tif(s.crossDomain){var script,callback;return {send:function send(_,complete){script = jQuery(\"<script>\").prop({async:true,charset:s.scriptCharset,src:s.url}).on(\"load error\",callback = function(evt){script.remove();callback = null;if(evt){complete(evt.type === \"error\"?404:200,evt.type);}});document.head.appendChild(script[0]);},abort:function abort(){if(callback){callback();}}};}});var oldCallbacks=[],rjsonp=/(=)\\?(?=&|$)|\\?\\?/; // Default jsonp settings\n\tjQuery.ajaxSetup({jsonp:\"callback\",jsonpCallback:function jsonpCallback(){var callback=oldCallbacks.pop() || jQuery.expando + \"_\" + nonce++;this[callback] = true;return callback;}}); // Detect, normalize options and install callbacks for jsonp requests\n\tjQuery.ajaxPrefilter(\"json jsonp\",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp !== false && (rjsonp.test(s.url)?\"url\":typeof s.data === \"string\" && !(s.contentType || \"\").indexOf(\"application/x-www-form-urlencoded\") && rjsonp.test(s.data) && \"data\"); // Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\tif(jsonProp || s.dataTypes[0] === \"jsonp\"){ // Get callback name, remembering preexisting value associated with it\n\tcallbackName = s.jsonpCallback = jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback; // Insert callback into url or form data\n\tif(jsonProp){s[jsonProp] = s[jsonProp].replace(rjsonp,\"$1\" + callbackName);}else if(s.jsonp !== false){s.url += (rquery.test(s.url)?\"&\":\"?\") + s.jsonp + \"=\" + callbackName;} // Use data converter to retrieve json after script execution\n\ts.converters[\"script json\"] = function(){if(!responseContainer){jQuery.error(callbackName + \" was not called\");}return responseContainer[0];}; // force json dataType\n\ts.dataTypes[0] = \"json\"; // Install callback\n\toverwritten = window[callbackName];window[callbackName] = function(){responseContainer = arguments;}; // Clean-up function (fires after converters)\n\tjqXHR.always(function(){ // Restore preexisting value\n\twindow[callbackName] = overwritten; // Save back as free\n\tif(s[callbackName]){ // make sure that re-using the options doesn't screw things around\n\ts.jsonpCallback = originalSettings.jsonpCallback; // save the callback name for future use\n\toldCallbacks.push(callbackName);} // Call if it was a function and we have a response\n\tif(responseContainer && jQuery.isFunction(overwritten)){overwritten(responseContainer[0]);}responseContainer = overwritten = undefined;}); // Delegate to script\n\treturn \"script\";}}); // data: string of html\n\t// context (optional): If specified, the fragment will be created in this context, defaults to document\n\t// keepScripts (optional): If true, will include scripts passed in the html string\n\tjQuery.parseHTML = function(data,context,keepScripts){if(!data || typeof data !== \"string\"){return null;}if(typeof context === \"boolean\"){keepScripts = context;context = false;}context = context || document;var parsed=rsingleTag.exec(data),scripts=!keepScripts && []; // Single tag\n\tif(parsed){return [context.createElement(parsed[1])];}parsed = jQuery.buildFragment([data],context,scripts);if(scripts && scripts.length){jQuery(scripts).remove();}return jQuery.merge([],parsed.childNodes);}; // Keep a copy of the old load method\n\tvar _load=jQuery.fn.load; /**\n\t * Load a url into a page\n\t */jQuery.fn.load = function(url,params,callback){if(typeof url !== \"string\" && _load){return _load.apply(this,arguments);}var selector,type,response,self=this,off=url.indexOf(\" \");if(off >= 0){selector = jQuery.trim(url.slice(off));url = url.slice(0,off);} // If it's a function\n\tif(jQuery.isFunction(params)){ // We assume that it's the callback\n\tcallback = params;params = undefined; // Otherwise, build a param string\n\t}else if(params && typeof params === \"object\"){type = \"POST\";} // If we have elements to modify, make the request\n\tif(self.length > 0){jQuery.ajax({url:url, // if \"type\" variable is undefined, then \"GET\" method will be used\n\ttype:type,dataType:\"html\",data:params}).done(function(responseText){ // Save response for use in complete callback\n\tresponse = arguments;self.html(selector? // If a selector was specified, locate the right elements in a dummy div\n\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\tjQuery(\"<div>\").append(jQuery.parseHTML(responseText)).find(selector): // Otherwise use the full result\n\tresponseText);}).complete(callback && function(jqXHR,status){self.each(callback,response || [jqXHR.responseText,status,jqXHR]);});}return this;}; // Attach a bunch of functions for handling common AJAX events\n\tjQuery.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(i,type){jQuery.fn[type] = function(fn){return this.on(type,fn);};});jQuery.expr.filters.animated = function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem === fn.elem;}).length;};var docElem=window.document.documentElement; /**\n\t * Gets a window from an element\n\t */function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType === 9 && elem.defaultView;}jQuery.offset = {setOffset:function setOffset(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,\"position\"),curElem=jQuery(elem),props={}; // Set position first, in-case top/left are set even on static elem\n\tif(position === \"static\"){elem.style.position = \"relative\";}curOffset = curElem.offset();curCSSTop = jQuery.css(elem,\"top\");curCSSLeft = jQuery.css(elem,\"left\");calculatePosition = (position === \"absolute\" || position === \"fixed\") && (curCSSTop + curCSSLeft).indexOf(\"auto\") > -1; // Need to be able to calculate position if either\n\t// top or left is auto and position is either absolute or fixed\n\tif(calculatePosition){curPosition = curElem.position();curTop = curPosition.top;curLeft = curPosition.left;}else {curTop = parseFloat(curCSSTop) || 0;curLeft = parseFloat(curCSSLeft) || 0;}if(jQuery.isFunction(options)){options = options.call(elem,i,curOffset);}if(options.top != null){props.top = options.top - curOffset.top + curTop;}if(options.left != null){props.left = options.left - curOffset.left + curLeft;}if(\"using\" in options){options.using.call(elem,props);}else {curElem.css(props);}}};jQuery.fn.extend({offset:function offset(options){if(arguments.length){return options === undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i);});}var docElem,win,elem=this[0],box={top:0,left:0},doc=elem && elem.ownerDocument;if(!doc){return;}docElem = doc.documentElement; // Make sure it's not a disconnected DOM node\n\tif(!jQuery.contains(docElem,elem)){return box;} // Support: BlackBerry 5, iOS 3 (original iPhone)\n\t// If we don't have gBCR, just use 0,0 rather than error\n\tif(typeof elem.getBoundingClientRect !== strundefined){box = elem.getBoundingClientRect();}win = getWindow(doc);return {top:box.top + win.pageYOffset - docElem.clientTop,left:box.left + win.pageXOffset - docElem.clientLeft};},position:function position(){if(!this[0]){return;}var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0}; // Fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is its only offset parent\n\tif(jQuery.css(elem,\"position\") === \"fixed\"){ // Assume getBoundingClientRect is there when computed position is fixed\n\toffset = elem.getBoundingClientRect();}else { // Get *real* offsetParent\n\toffsetParent = this.offsetParent(); // Get correct offsets\n\toffset = this.offset();if(!jQuery.nodeName(offsetParent[0],\"html\")){parentOffset = offsetParent.offset();} // Add offsetParent borders\n\tparentOffset.top += jQuery.css(offsetParent[0],\"borderTopWidth\",true);parentOffset.left += jQuery.css(offsetParent[0],\"borderLeftWidth\",true);} // Subtract parent offsets and element margins\n\treturn {top:offset.top - parentOffset.top - jQuery.css(elem,\"marginTop\",true),left:offset.left - parentOffset.left - jQuery.css(elem,\"marginLeft\",true)};},offsetParent:function offsetParent(){return this.map(function(){var offsetParent=this.offsetParent || docElem;while(offsetParent && (!jQuery.nodeName(offsetParent,\"html\") && jQuery.css(offsetParent,\"position\") === \"static\")) {offsetParent = offsetParent.offsetParent;}return offsetParent || docElem;});}}); // Create scrollLeft and scrollTop methods\n\tjQuery.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(method,prop){var top=\"pageYOffset\" === prop;jQuery.fn[method] = function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val === undefined){return win?win[prop]:elem[method];}if(win){win.scrollTo(!top?val:window.pageXOffset,top?val:window.pageYOffset);}else {elem[method] = val;}},method,val,arguments.length,null);};}); // Support: Safari<7+, Chrome<37+\n\t// Add the top/left cssHooks using jQuery.fn.position\n\t// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n\t// Blink bug: https://code.google.com/p/chromium/issues/detail?id=229280\n\t// getComputedStyle returns percent when specified for top/left/bottom/right;\n\t// rather than make the css module depend on the offset module, just check for it here\n\tjQuery.each([\"top\",\"left\"],function(i,prop){jQuery.cssHooks[prop] = addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed = curCSS(elem,prop); // If curCSS returns percentage, fallback to offset\n\treturn rnumnonpx.test(computed)?jQuery(elem).position()[prop] + \"px\":computed;}});}); // Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\n\tjQuery.each({Height:\"height\",Width:\"width\"},function(name,type){jQuery.each({padding:\"inner\" + name,content:type,\"\":\"outer\" + name},function(defaultExtra,funcName){ // Margin is only for outerHeight, outerWidth\n\tjQuery.fn[funcName] = function(margin,value){var chainable=arguments.length && (defaultExtra || typeof margin !== \"boolean\"),extra=defaultExtra || (margin === true || value === true?\"margin\":\"border\");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){ // As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there\n\t// isn't a whole lot we can do. See pull request at this URL for discussion:\n\t// https://github.com/jquery/jquery/pull/764\n\treturn elem.document.documentElement[\"client\" + name];} // Get document width or height\n\tif(elem.nodeType === 9){doc = elem.documentElement; // Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\n\t// whichever is greatest\n\treturn Math.max(elem.body[\"scroll\" + name],doc[\"scroll\" + name],elem.body[\"offset\" + name],doc[\"offset\" + name],doc[\"client\" + name]);}return value === undefined? // Get width or height on the element, requesting but not forcing parseFloat\n\tjQuery.css(elem,type,extra): // Set width or height on the element\n\tjQuery.style(elem,type,value,extra);},type,chainable?margin:undefined,chainable,null);};});}); // The number of elements contained in the matched element set\n\tjQuery.fn.size = function(){return this.length;};jQuery.fn.andSelf = jQuery.fn.addBack; // Register as a named AMD module, since jQuery can be concatenated with other\n\t// files that may use define, but not via a proper concatenation script that\n\t// understands anonymous AMD modules. A named AMD is safest and most robust\n\t// way to register. Lowercase jquery is used because AMD module names are\n\t// derived from file names, and jQuery is normally delivered in a lowercase\n\t// file name. Do this after creating the global so that if an AMD module wants\n\t// to call noConflict to hide this version of jQuery, it will work.\n\t// Note that for maximum portability, libraries that are not jQuery should\n\t// declare themselves as anonymous modules, and avoid setting a global if an\n\t// AMD loader is present. jQuery is a special case. For more information, see\n\t// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon\n\tif(true){!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function(){return jQuery;}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));}var  // Map over jQuery in case of overwrite\n\t_jQuery=window.jQuery, // Map over the $ in case of overwrite\n\t_$=window.$;jQuery.noConflict = function(deep){if(window.$ === jQuery){window.$ = _$;}if(deep && window.jQuery === jQuery){window.jQuery = _jQuery;}return jQuery;}; // Expose jQuery and $ identifiers, even in AMD\n\t// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)\n\t// and CommonJS for browser emulators (#13566)\n\tif(typeof noGlobal === strundefined){window.jQuery = window.$ = jQuery;}return jQuery;}); // Otherwise append directly\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t__webpack_require__(3);\n\t\n\t// consistent webrtc api across browsers\n\t\n\tvar _eventemitter2 = __webpack_require__(4);\n\t\n\tvar _eventemitter22 = _interopRequireDefault(_eventemitter2);\n\t\n\tvar _getUserMedia = __webpack_require__(5);\n\t\n\tvar _getUserMedia2 = _interopRequireDefault(_getUserMedia);\n\t\n\tvar Call = (function (_EventEmitter) {\n\t    _inherits(Call, _EventEmitter);\n\t\n\t    function Call(video, audio) {\n\t        var _this = this;\n\t\n\t        _classCallCheck(this, Call);\n\t\n\t        _get(Object.getPrototypeOf(Call.prototype), 'constructor', this).call(this);\n\t        var that = this;\n\t\n\t        this._audio = !!audio;\n\t        this._video = !!video;\n\t        this._pc = new RTCPeerConnection();\n\t        this._initiator = false;\n\t        this._pUserMedia = undefined;\n\t        this._iceCandidates = [];\n\t        this._pIceCandidates = new Promise(function (resolve, reject) {\n\t            _this._pc.onicecandidate = function (e) {\n\t                if (e.candidate) that._iceCandidates.push(e.candidate);\n\t                if (that._pc.iceGatheringState === \"complete\") {\n\t                    that._pc.onicecandidate = undefined;\n\t                    resolve(that._iceCandidates);\n\t                }\n\t            };\n\t        });\n\t\n\t        this._pc.onaddstream = function (data) {\n\t            that.emit('stream.add.remote', data.stream);\n\t        };\n\t    }\n\t\n\t    _createClass(Call, [{\n\t        key: 'offer',\n\t        value: function offer() {\n\t            var _this2 = this;\n\t\n\t            this._pUserMedia = this._pUserMedia || (0, _getUserMedia2['default'])(this._video, this._audio);\n\t            return this._pUserMedia.then(function (userMedia) {\n\t                _this2._pc.addStream(userMedia);\n\t                _this2.emit('stream.add.local', userMedia);\n\t                return _this2._createOffer().then(function (offer) {\n\t                    return _this2._setLocalDescription(offer).then(function () {\n\t                        return _this2._pIceCandidates.then(function (candidates) {\n\t                            _this2._initiator = true;\n\t                            return { offer: offer, candidates: candidates };\n\t                        });\n\t                    });\n\t                });\n\t            });\n\t        }\n\t    }, {\n\t        key: 'acknowledge',\n\t        value: function acknowledge(offeranswer, remoteCandidates) {\n\t            var _this3 = this;\n\t\n\t            return this._setRemoteDescription(offeranswer).then(function () {\n\t                return Promise.all(remoteCandidates.map(function (c) {\n\t                    return _this3._addRemoteIceCandidate(c);\n\t                }));\n\t            }).then(function () {\n\t                return undefined;\n\t            });\n\t        }\n\t    }, {\n\t        key: 'answer',\n\t        value: function answer(offer, remoteCandidates) {\n\t            var _this4 = this;\n\t\n\t            this._pUserMedia = this._pUserMedia || (0, _getUserMedia2['default'])(this._video, this._audio);\n\t            return this._pUserMedia.then(function (userMedia) {\n\t                _this4._pc.addStream(userMedia);\n\t                _this4.emit('stream.add.local', userMedia);\n\t                return _this4.acknowledge(offer, remoteCandidates).then(function () {\n\t                    return _this4._createAnswer().then(function (answer) {\n\t                        return _this4._setLocalDescription(answer).then(function () {\n\t                            return _this4._pIceCandidates.then(function (candidates) {\n\t                                return { answer: answer, candidates: candidates };\n\t                            });\n\t                        });\n\t                    });\n\t                });\n\t            });\n\t        }\n\t    }, {\n\t        key: '_createOffer',\n\t        value: function _createOffer() {\n\t            return this._pc.createOffer();\n\t        }\n\t    }, {\n\t        key: '_createAnswer',\n\t        value: function _createAnswer() {\n\t            return this._pc.createAnswer();\n\t        }\n\t    }, {\n\t        key: '_setLocalDescription',\n\t        value: function _setLocalDescription(offeranswer) {\n\t            return this._pc.setLocalDescription(new RTCSessionDescription(offeranswer));\n\t        }\n\t    }, {\n\t        key: '_setRemoteDescription',\n\t        value: function _setRemoteDescription(offeranswer) {\n\t            return this._pc.setRemoteDescription(new RTCSessionDescription(offeranswer));\n\t        }\n\t    }, {\n\t        key: '_addRemoteIceCandidate',\n\t        value: function _addRemoteIceCandidate(candidate) {\n\t            return this._pc.addIceCandidate(new RTCIceCandidate(candidate));\n\t        }\n\t    }]);\n\t\n\t    return Call;\n\t})(_eventemitter22['default']);\n\t\n\texports['default'] = Call;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*\n\t *  Copyright (c) 2014 The WebRTC project authors. All Rights Reserved.\n\t *\n\t *  Use of this source code is governed by a BSD-style license\n\t *  that can be found in the LICENSE file in the root of the source\n\t *  tree.\n\t */\n\t\n\t/* More information about these options at jshint.com/docs/options */\n\t/* jshint browser: true, camelcase: true, curly: true, devel: true,\n\t   eqeqeq: true, forin: false, globalstrict: true, node: true,\n\t   quotmark: single, undef: true, unused: strict */\n\t/* global mozRTCIceCandidate, mozRTCPeerConnection, Promise,\n\tmozRTCSessionDescription, webkitRTCPeerConnection, MediaStreamTrack */\n\t/* exported trace,requestUserMedia */\n\t\n\t'use strict';\n\t\n\tvar getUserMedia = null;\n\tvar attachMediaStream = null;\n\tvar reattachMediaStream = null;\n\tvar webrtcDetectedBrowser = null;\n\tvar webrtcDetectedVersion = null;\n\tvar webrtcMinimumVersion = null;\n\tvar webrtcUtils = {\n\t  log: function log() {\n\t    // suppress console.log output when being included as a module.\n\t    if (true) {\n\t      return;\n\t    }\n\t    console.log.apply(console, arguments);\n\t  }\n\t};\n\t\n\tfunction trace(text) {\n\t  // This function is used for logging.\n\t  if (text[text.length - 1] === '\\n') {\n\t    text = text.substring(0, text.length - 1);\n\t  }\n\t  if (window.performance) {\n\t    var now = (window.performance.now() / 1000).toFixed(3);\n\t    webrtcUtils.log(now + ': ' + text);\n\t  } else {\n\t    webrtcUtils.log(text);\n\t  }\n\t}\n\t\n\tif (typeof window === 'object') {\n\t  if (window.HTMLMediaElement && !('srcObject' in window.HTMLMediaElement.prototype)) {\n\t    // Shim the srcObject property, once, when HTMLMediaElement is found.\n\t    Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n\t      get: function get() {\n\t        // If prefixed srcObject property exists, return it.\n\t        // Otherwise use the shimmed property, _srcObject\n\t        return 'mozSrcObject' in this ? this.mozSrcObject : this._srcObject;\n\t      },\n\t      set: function set(stream) {\n\t        if ('mozSrcObject' in this) {\n\t          this.mozSrcObject = stream;\n\t        } else {\n\t          // Use _srcObject as a private property for this shim\n\t          this._srcObject = stream;\n\t          // TODO: revokeObjectUrl(this.src) when !stream to release resources?\n\t          this.src = URL.createObjectURL(stream);\n\t        }\n\t      }\n\t    });\n\t  }\n\t  // Proxy existing globals\n\t  getUserMedia = window.navigator && window.navigator.getUserMedia;\n\t}\n\t\n\t// Attach a media stream to an element.\n\tattachMediaStream = function (element, stream) {\n\t  element.srcObject = stream;\n\t};\n\t\n\treattachMediaStream = function (to, from) {\n\t  to.srcObject = from.srcObject;\n\t};\n\t\n\tif (typeof window === 'undefined' || !window.navigator) {\n\t  webrtcUtils.log('This does not appear to be a browser');\n\t  webrtcDetectedBrowser = 'not a browser';\n\t} else if (navigator.mozGetUserMedia && window.mozRTCPeerConnection) {\n\t  webrtcUtils.log('This appears to be Firefox');\n\t\n\t  webrtcDetectedBrowser = 'firefox';\n\t\n\t  // the detected firefox version.\n\t  webrtcDetectedVersion = parseInt(navigator.userAgent.match(/Firefox\\/([0-9]+)\\./)[1], 10);\n\t\n\t  // the minimum firefox version still supported by adapter.\n\t  webrtcMinimumVersion = 31;\n\t\n\t  // The RTCPeerConnection object.\n\t  window.RTCPeerConnection = function (pcConfig, pcConstraints) {\n\t    if (webrtcDetectedVersion < 38) {\n\t      // .urls is not supported in FF < 38.\n\t      // create RTCIceServers with a single url.\n\t      if (pcConfig && pcConfig.iceServers) {\n\t        var newIceServers = [];\n\t        for (var i = 0; i < pcConfig.iceServers.length; i++) {\n\t          var server = pcConfig.iceServers[i];\n\t          if (server.hasOwnProperty('urls')) {\n\t            for (var j = 0; j < server.urls.length; j++) {\n\t              var newServer = {\n\t                url: server.urls[j]\n\t              };\n\t              if (server.urls[j].indexOf('turn') === 0) {\n\t                newServer.username = server.username;\n\t                newServer.credential = server.credential;\n\t              }\n\t              newIceServers.push(newServer);\n\t            }\n\t          } else {\n\t            newIceServers.push(pcConfig.iceServers[i]);\n\t          }\n\t        }\n\t        pcConfig.iceServers = newIceServers;\n\t      }\n\t    }\n\t    return new mozRTCPeerConnection(pcConfig, pcConstraints); // jscs:ignore requireCapitalizedConstructors\n\t  };\n\t\n\t  // The RTCSessionDescription object.\n\t  if (!window.RTCSessionDescription) {\n\t    window.RTCSessionDescription = mozRTCSessionDescription;\n\t  }\n\t\n\t  // The RTCIceCandidate object.\n\t  if (!window.RTCIceCandidate) {\n\t    window.RTCIceCandidate = mozRTCIceCandidate;\n\t  }\n\t\n\t  // getUserMedia constraints shim.\n\t  getUserMedia = function (constraints, onSuccess, onError) {\n\t    var constraintsToFF37 = function constraintsToFF37(c) {\n\t      if (typeof c !== 'object' || c.require) {\n\t        return c;\n\t      }\n\t      var require = [];\n\t      Object.keys(c).forEach(function (key) {\n\t        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n\t          return;\n\t        }\n\t        var r = c[key] = typeof c[key] === 'object' ? c[key] : { ideal: c[key] };\n\t        if (r.min !== undefined || r.max !== undefined || r.exact !== undefined) {\n\t          require.push(key);\n\t        }\n\t        if (r.exact !== undefined) {\n\t          if (typeof r.exact === 'number') {\n\t            r.min = r.max = r.exact;\n\t          } else {\n\t            c[key] = r.exact;\n\t          }\n\t          delete r.exact;\n\t        }\n\t        if (r.ideal !== undefined) {\n\t          c.advanced = c.advanced || [];\n\t          var oc = {};\n\t          if (typeof r.ideal === 'number') {\n\t            oc[key] = { min: r.ideal, max: r.ideal };\n\t          } else {\n\t            oc[key] = r.ideal;\n\t          }\n\t          c.advanced.push(oc);\n\t          delete r.ideal;\n\t          if (!Object.keys(r).length) {\n\t            delete c[key];\n\t          }\n\t        }\n\t      });\n\t      if (require.length) {\n\t        c.require = require;\n\t      }\n\t      return c;\n\t    };\n\t    if (webrtcDetectedVersion < 38) {\n\t      webrtcUtils.log('spec: ' + JSON.stringify(constraints));\n\t      if (constraints.audio) {\n\t        constraints.audio = constraintsToFF37(constraints.audio);\n\t      }\n\t      if (constraints.video) {\n\t        constraints.video = constraintsToFF37(constraints.video);\n\t      }\n\t      webrtcUtils.log('ff37: ' + JSON.stringify(constraints));\n\t    }\n\t    return navigator.mozGetUserMedia(constraints, onSuccess, onError);\n\t  };\n\t\n\t  navigator.getUserMedia = getUserMedia;\n\t\n\t  // Shim for mediaDevices on older versions.\n\t  if (!navigator.mediaDevices) {\n\t    navigator.mediaDevices = { getUserMedia: requestUserMedia,\n\t      addEventListener: function addEventListener() {},\n\t      removeEventListener: function removeEventListener() {}\n\t    };\n\t  }\n\t  navigator.mediaDevices.enumerateDevices = navigator.mediaDevices.enumerateDevices || function () {\n\t    return new Promise(function (resolve) {\n\t      var infos = [{ kind: 'audioinput', deviceId: 'default', label: '', groupId: '' }, { kind: 'videoinput', deviceId: 'default', label: '', groupId: '' }];\n\t      resolve(infos);\n\t    });\n\t  };\n\t\n\t  if (webrtcDetectedVersion < 41) {\n\t    // Work around http://bugzil.la/1169665\n\t    var orgEnumerateDevices = navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n\t    navigator.mediaDevices.enumerateDevices = function () {\n\t      return orgEnumerateDevices().then(undefined, function (e) {\n\t        if (e.name === 'NotFoundError') {\n\t          return [];\n\t        }\n\t        throw e;\n\t      });\n\t    };\n\t  }\n\t} else if (navigator.webkitGetUserMedia && !!window.chrome) {\n\t  webrtcUtils.log('This appears to be Chrome');\n\t\n\t  webrtcDetectedBrowser = 'chrome';\n\t\n\t  // the detected chrome version.\n\t  webrtcDetectedVersion = parseInt(navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)[2], 10);\n\t\n\t  // the minimum chrome version still supported by adapter.\n\t  webrtcMinimumVersion = 38;\n\t\n\t  // The RTCPeerConnection object.\n\t  window.RTCPeerConnection = function (pcConfig, pcConstraints) {\n\t    // Translate iceTransportPolicy to iceTransports,\n\t    // see https://code.google.com/p/webrtc/issues/detail?id=4869\n\t    if (pcConfig && pcConfig.iceTransportPolicy) {\n\t      pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n\t    }\n\t\n\t    var pc = new webkitRTCPeerConnection(pcConfig, pcConstraints); // jscs:ignore requireCapitalizedConstructors\n\t    var origGetStats = pc.getStats.bind(pc);\n\t    pc.getStats = function (selector, successCallback, errorCallback) {\n\t      // jshint ignore: line\n\t      var self = this;\n\t      var args = arguments;\n\t\n\t      // If selector is a function then we are in the old style stats so just\n\t      // pass back the original getStats format to avoid breaking old users.\n\t      if (arguments.length > 0 && typeof selector === 'function') {\n\t        return origGetStats(selector, successCallback);\n\t      }\n\t\n\t      var fixChromeStats = function fixChromeStats(response) {\n\t        var standardReport = {};\n\t        var reports = response.result();\n\t        reports.forEach(function (report) {\n\t          var standardStats = {\n\t            id: report.id,\n\t            timestamp: report.timestamp,\n\t            type: report.type\n\t          };\n\t          report.names().forEach(function (name) {\n\t            standardStats[name] = report.stat(name);\n\t          });\n\t          standardReport[standardStats.id] = standardStats;\n\t        });\n\t\n\t        return standardReport;\n\t      };\n\t\n\t      if (arguments.length >= 2) {\n\t        var successCallbackWrapper = function successCallbackWrapper(response) {\n\t          args[1](fixChromeStats(response));\n\t        };\n\t\n\t        return origGetStats.apply(this, [successCallbackWrapper, arguments[0]]);\n\t      }\n\t\n\t      // promise-support\n\t      return new Promise(function (resolve, reject) {\n\t        if (args.length === 1 && selector === null) {\n\t          origGetStats.apply(self, [function (response) {\n\t            resolve.apply(null, [fixChromeStats(response)]);\n\t          }, reject]);\n\t        } else {\n\t          origGetStats.apply(self, [resolve, reject]);\n\t        }\n\t      });\n\t    };\n\t\n\t    return pc;\n\t  };\n\t\n\t  // add promise support\n\t  ['createOffer', 'createAnswer'].forEach(function (method) {\n\t    var nativeMethod = webkitRTCPeerConnection.prototype[method];\n\t    webkitRTCPeerConnection.prototype[method] = function () {\n\t      var self = this;\n\t      if (arguments.length < 1 || arguments.length === 1 && typeof arguments[0] === 'object') {\n\t        var opts = arguments.length === 1 ? arguments[0] : undefined;\n\t        return new Promise(function (resolve, reject) {\n\t          nativeMethod.apply(self, [resolve, reject, opts]);\n\t        });\n\t      } else {\n\t        return nativeMethod.apply(this, arguments);\n\t      }\n\t    };\n\t  });\n\t\n\t  ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n\t    var nativeMethod = webkitRTCPeerConnection.prototype[method];\n\t    webkitRTCPeerConnection.prototype[method] = function () {\n\t      var args = arguments;\n\t      var self = this;\n\t      return new Promise(function (resolve, reject) {\n\t        nativeMethod.apply(self, [args[0], function () {\n\t          resolve();\n\t          if (args.length >= 2) {\n\t            args[1].apply(null, []);\n\t          }\n\t        }, function (err) {\n\t          reject(err);\n\t          if (args.length >= 3) {\n\t            args[2].apply(null, [err]);\n\t          }\n\t        }]);\n\t      });\n\t    };\n\t  });\n\t\n\t  // getUserMedia constraints shim.\n\t  var constraintsToChrome = function constraintsToChrome(c) {\n\t    if (typeof c !== 'object' || c.mandatory || c.optional) {\n\t      return c;\n\t    }\n\t    var cc = {};\n\t    Object.keys(c).forEach(function (key) {\n\t      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n\t        return;\n\t      }\n\t      var r = typeof c[key] === 'object' ? c[key] : { ideal: c[key] };\n\t      if (r.exact !== undefined && typeof r.exact === 'number') {\n\t        r.min = r.max = r.exact;\n\t      }\n\t      var oldname = function oldname(prefix, name) {\n\t        if (prefix) {\n\t          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n\t        }\n\t        return name === 'deviceId' ? 'sourceId' : name;\n\t      };\n\t      if (r.ideal !== undefined) {\n\t        cc.optional = cc.optional || [];\n\t        var oc = {};\n\t        if (typeof r.ideal === 'number') {\n\t          oc[oldname('min', key)] = r.ideal;\n\t          cc.optional.push(oc);\n\t          oc = {};\n\t          oc[oldname('max', key)] = r.ideal;\n\t          cc.optional.push(oc);\n\t        } else {\n\t          oc[oldname('', key)] = r.ideal;\n\t          cc.optional.push(oc);\n\t        }\n\t      }\n\t      if (r.exact !== undefined && typeof r.exact !== 'number') {\n\t        cc.mandatory = cc.mandatory || {};\n\t        cc.mandatory[oldname('', key)] = r.exact;\n\t      } else {\n\t        ['min', 'max'].forEach(function (mix) {\n\t          if (r[mix] !== undefined) {\n\t            cc.mandatory = cc.mandatory || {};\n\t            cc.mandatory[oldname(mix, key)] = r[mix];\n\t          }\n\t        });\n\t      }\n\t    });\n\t    if (c.advanced) {\n\t      cc.optional = (cc.optional || []).concat(c.advanced);\n\t    }\n\t    return cc;\n\t  };\n\t\n\t  getUserMedia = function (constraints, onSuccess, onError) {\n\t    if (constraints.audio) {\n\t      constraints.audio = constraintsToChrome(constraints.audio);\n\t    }\n\t    if (constraints.video) {\n\t      constraints.video = constraintsToChrome(constraints.video);\n\t    }\n\t    webrtcUtils.log('chrome: ' + JSON.stringify(constraints));\n\t    return navigator.webkitGetUserMedia(constraints, onSuccess, onError);\n\t  };\n\t  navigator.getUserMedia = getUserMedia;\n\t\n\t  if (!navigator.mediaDevices) {\n\t    navigator.mediaDevices = { getUserMedia: requestUserMedia,\n\t      enumerateDevices: function enumerateDevices() {\n\t        return new Promise(function (resolve) {\n\t          var kinds = { audio: 'audioinput', video: 'videoinput' };\n\t          return MediaStreamTrack.getSources(function (devices) {\n\t            resolve(devices.map(function (device) {\n\t              return { label: device.label,\n\t                kind: kinds[device.kind],\n\t                deviceId: device.id,\n\t                groupId: '' };\n\t            }));\n\t          });\n\t        });\n\t      } };\n\t  }\n\t\n\t  // A shim for getUserMedia method on the mediaDevices object.\n\t  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n\t  if (!navigator.mediaDevices.getUserMedia) {\n\t    navigator.mediaDevices.getUserMedia = function (constraints) {\n\t      return requestUserMedia(constraints);\n\t    };\n\t  } else {\n\t    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n\t    // function which returns a Promise, it does not accept spec-style\n\t    // constraints.\n\t    var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n\t    navigator.mediaDevices.getUserMedia = function (c) {\n\t      webrtcUtils.log('spec:   ' + JSON.stringify(c)); // whitespace for alignment\n\t      c.audio = constraintsToChrome(c.audio);\n\t      c.video = constraintsToChrome(c.video);\n\t      webrtcUtils.log('chrome: ' + JSON.stringify(c));\n\t      return origGetUserMedia(c);\n\t    };\n\t  }\n\t\n\t  // Dummy devicechange event methods.\n\t  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n\t  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n\t    navigator.mediaDevices.addEventListener = function () {\n\t      webrtcUtils.log('Dummy mediaDevices.addEventListener called.');\n\t    };\n\t  }\n\t  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n\t    navigator.mediaDevices.removeEventListener = function () {\n\t      webrtcUtils.log('Dummy mediaDevices.removeEventListener called.');\n\t    };\n\t  }\n\t\n\t  // Attach a media stream to an element.\n\t  attachMediaStream = function (element, stream) {\n\t    if (webrtcDetectedVersion >= 43) {\n\t      element.srcObject = stream;\n\t    } else if (typeof element.src !== 'undefined') {\n\t      element.src = URL.createObjectURL(stream);\n\t    } else {\n\t      webrtcUtils.log('Error attaching stream to element.');\n\t    }\n\t  };\n\t  reattachMediaStream = function (to, from) {\n\t    if (webrtcDetectedVersion >= 43) {\n\t      to.srcObject = from.srcObject;\n\t    } else {\n\t      to.src = from.src;\n\t    }\n\t  };\n\t} else if (navigator.mediaDevices && navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n\t  webrtcUtils.log('This appears to be Edge');\n\t  webrtcDetectedBrowser = 'edge';\n\t\n\t  webrtcDetectedVersion = parseInt(navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)[2], 10);\n\t\n\t  // the minimum version still supported by adapter.\n\t  webrtcMinimumVersion = 12;\n\t} else {\n\t  webrtcUtils.log('Browser does not appear to be WebRTC-capable');\n\t}\n\t\n\t// Returns the result of getUserMedia as a Promise.\n\tfunction requestUserMedia(constraints) {\n\t  return new Promise(function (resolve, reject) {\n\t    getUserMedia(constraints, resolve, reject);\n\t  });\n\t}\n\t\n\tvar webrtcTesting = {};\n\ttry {\n\t  Object.defineProperty(webrtcTesting, 'version', {\n\t    set: function set(version) {\n\t      webrtcDetectedVersion = version;\n\t    }\n\t  });\n\t} catch (e) {}\n\t\n\tif (true) {\n\t  var RTCPeerConnection;\n\t  if (typeof window !== 'undefined') {\n\t    RTCPeerConnection = window.RTCPeerConnection;\n\t  }\n\t  module.exports = {\n\t    RTCPeerConnection: RTCPeerConnection,\n\t    getUserMedia: getUserMedia,\n\t    attachMediaStream: attachMediaStream,\n\t    reattachMediaStream: reattachMediaStream,\n\t    webrtcDetectedBrowser: webrtcDetectedBrowser,\n\t    webrtcDetectedVersion: webrtcDetectedVersion,\n\t    webrtcMinimumVersion: webrtcMinimumVersion,\n\t    webrtcTesting: webrtcTesting\n\t    //requestUserMedia: not exposed on purpose.\n\t    //trace: not exposed on purpose.\n\t  };\n\t} else if (typeof require === 'function' && typeof define === 'function') {\n\t    // Expose objects and functions when RequireJS is doing the loading.\n\t    define([], function () {\n\t      return {\n\t        RTCPeerConnection: window.RTCPeerConnection,\n\t        getUserMedia: getUserMedia,\n\t        attachMediaStream: attachMediaStream,\n\t        reattachMediaStream: reattachMediaStream,\n\t        webrtcDetectedBrowser: webrtcDetectedBrowser,\n\t        webrtcDetectedVersion: webrtcDetectedVersion,\n\t        webrtcMinimumVersion: webrtcMinimumVersion,\n\t        webrtcTesting: webrtcTesting\n\t        //requestUserMedia: not exposed on purpose.\n\t        //trace: not exposed on purpose.\n\t      };\n\t    });\n\t  }\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/*!\n\t * EventEmitter2\n\t * https://github.com/hij1nx/EventEmitter2\n\t *\n\t * Copyright (c) 2013 hij1nx\n\t * Licensed under the MIT license.\n\t */\n\t'use strict';\n\t\n\t;!(function (undefined) {\n\t\n\t  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\n\t    return Object.prototype.toString.call(obj) === \"[object Array]\";\n\t  };\n\t  var defaultMaxListeners = 10;\n\t\n\t  function init() {\n\t    this._events = {};\n\t    if (this._conf) {\n\t      configure.call(this, this._conf);\n\t    }\n\t  }\n\t\n\t  function configure(conf) {\n\t    if (conf) {\n\t\n\t      this._conf = conf;\n\t\n\t      conf.delimiter && (this.delimiter = conf.delimiter);\n\t      conf.maxListeners && (this._events.maxListeners = conf.maxListeners);\n\t      conf.wildcard && (this.wildcard = conf.wildcard);\n\t      conf.newListener && (this.newListener = conf.newListener);\n\t\n\t      if (this.wildcard) {\n\t        this.listenerTree = {};\n\t      }\n\t    }\n\t  }\n\t\n\t  function EventEmitter(conf) {\n\t    this._events = {};\n\t    this.newListener = false;\n\t    configure.call(this, conf);\n\t  }\n\t\n\t  //\n\t  // Attention, function return type now is array, always !\n\t  // It has zero elements if no any matches found and one or more\n\t  // elements (leafs) if there are matches\n\t  //\n\t  function searchListenerTree(handlers, type, tree, i) {\n\t    if (!tree) {\n\t      return [];\n\t    }\n\t    var listeners = [],\n\t        leaf,\n\t        len,\n\t        branch,\n\t        xTree,\n\t        xxTree,\n\t        isolatedBranch,\n\t        endReached,\n\t        typeLength = type.length,\n\t        currentType = type[i],\n\t        nextType = type[i + 1];\n\t    if (i === typeLength && tree._listeners) {\n\t      //\n\t      // If at the end of the event(s) list and the tree has listeners\n\t      // invoke those listeners.\n\t      //\n\t      if (typeof tree._listeners === 'function') {\n\t        handlers && handlers.push(tree._listeners);\n\t        return [tree];\n\t      } else {\n\t        for (leaf = 0, len = tree._listeners.length; leaf < len; leaf++) {\n\t          handlers && handlers.push(tree._listeners[leaf]);\n\t        }\n\t        return [tree];\n\t      }\n\t    }\n\t\n\t    if (currentType === '*' || currentType === '**' || tree[currentType]) {\n\t      //\n\t      // If the event emitted is '*' at this part\n\t      // or there is a concrete match at this patch\n\t      //\n\t      if (currentType === '*') {\n\t        for (branch in tree) {\n\t          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\n\t            listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i + 1));\n\t          }\n\t        }\n\t        return listeners;\n\t      } else if (currentType === '**') {\n\t        endReached = i + 1 === typeLength || i + 2 === typeLength && nextType === '*';\n\t        if (endReached && tree._listeners) {\n\t          // The next element has a _listeners, add it to the handlers.\n\t          listeners = listeners.concat(searchListenerTree(handlers, type, tree, typeLength));\n\t        }\n\t\n\t        for (branch in tree) {\n\t          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\n\t            if (branch === '*' || branch === '**') {\n\t              if (tree[branch]._listeners && !endReached) {\n\t                listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], typeLength));\n\t              }\n\t              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\n\t            } else if (branch === nextType) {\n\t              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i + 2));\n\t            } else {\n\t              // No match on this one, shift into the tree but not in the type array.\n\t              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\n\t            }\n\t          }\n\t        }\n\t        return listeners;\n\t      }\n\t\n\t      listeners = listeners.concat(searchListenerTree(handlers, type, tree[currentType], i + 1));\n\t    }\n\t\n\t    xTree = tree['*'];\n\t    if (xTree) {\n\t      //\n\t      // If the listener tree will allow any match for this part,\n\t      // then recursively explore all branches of the tree\n\t      //\n\t      searchListenerTree(handlers, type, xTree, i + 1);\n\t    }\n\t\n\t    xxTree = tree['**'];\n\t    if (xxTree) {\n\t      if (i < typeLength) {\n\t        if (xxTree._listeners) {\n\t          // If we have a listener on a '**', it will catch all, so add its handler.\n\t          searchListenerTree(handlers, type, xxTree, typeLength);\n\t        }\n\t\n\t        // Build arrays of matching next branches and others.\n\t        for (branch in xxTree) {\n\t          if (branch !== '_listeners' && xxTree.hasOwnProperty(branch)) {\n\t            if (branch === nextType) {\n\t              // We know the next element will match, so jump twice.\n\t              searchListenerTree(handlers, type, xxTree[branch], i + 2);\n\t            } else if (branch === currentType) {\n\t              // Current node matches, move into the tree.\n\t              searchListenerTree(handlers, type, xxTree[branch], i + 1);\n\t            } else {\n\t              isolatedBranch = {};\n\t              isolatedBranch[branch] = xxTree[branch];\n\t              searchListenerTree(handlers, type, { '**': isolatedBranch }, i + 1);\n\t            }\n\t          }\n\t        }\n\t      } else if (xxTree._listeners) {\n\t        // We have reached the end and still on a '**'\n\t        searchListenerTree(handlers, type, xxTree, typeLength);\n\t      } else if (xxTree['*'] && xxTree['*']._listeners) {\n\t        searchListenerTree(handlers, type, xxTree['*'], typeLength);\n\t      }\n\t    }\n\t\n\t    return listeners;\n\t  }\n\t\n\t  function growListenerTree(type, listener) {\n\t\n\t    type = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n\t\n\t    //\n\t    // Looks for two consecutive '**', if so, don't add the event at all.\n\t    //\n\t    for (var i = 0, len = type.length; i + 1 < len; i++) {\n\t      if (type[i] === '**' && type[i + 1] === '**') {\n\t        return;\n\t      }\n\t    }\n\t\n\t    var tree = this.listenerTree;\n\t    var name = type.shift();\n\t\n\t    while (name) {\n\t\n\t      if (!tree[name]) {\n\t        tree[name] = {};\n\t      }\n\t\n\t      tree = tree[name];\n\t\n\t      if (type.length === 0) {\n\t\n\t        if (!tree._listeners) {\n\t          tree._listeners = listener;\n\t        } else if (typeof tree._listeners === 'function') {\n\t          tree._listeners = [tree._listeners, listener];\n\t        } else if (isArray(tree._listeners)) {\n\t\n\t          tree._listeners.push(listener);\n\t\n\t          if (!tree._listeners.warned) {\n\t\n\t            var m = defaultMaxListeners;\n\t\n\t            if (typeof this._events.maxListeners !== 'undefined') {\n\t              m = this._events.maxListeners;\n\t            }\n\t\n\t            if (m > 0 && tree._listeners.length > m) {\n\t\n\t              tree._listeners.warned = true;\n\t              console.error('(node) warning: possible EventEmitter memory ' + 'leak detected. %d listeners added. ' + 'Use emitter.setMaxListeners() to increase limit.', tree._listeners.length);\n\t              console.trace();\n\t            }\n\t          }\n\t        }\n\t        return true;\n\t      }\n\t      name = type.shift();\n\t    }\n\t    return true;\n\t  }\n\t\n\t  // By default EventEmitters will print a warning if more than\n\t  // 10 listeners are added to it. This is a useful default which\n\t  // helps finding memory leaks.\n\t  //\n\t  // Obviously not all Emitters should be limited to 10. This function allows\n\t  // that to be increased. Set to zero for unlimited.\n\t\n\t  EventEmitter.prototype.delimiter = '.';\n\t\n\t  EventEmitter.prototype.setMaxListeners = function (n) {\n\t    this._events || init.call(this);\n\t    this._events.maxListeners = n;\n\t    if (!this._conf) this._conf = {};\n\t    this._conf.maxListeners = n;\n\t  };\n\t\n\t  EventEmitter.prototype.event = '';\n\t\n\t  EventEmitter.prototype.once = function (event, fn) {\n\t    this.many(event, 1, fn);\n\t    return this;\n\t  };\n\t\n\t  EventEmitter.prototype.many = function (event, ttl, fn) {\n\t    var self = this;\n\t\n\t    if (typeof fn !== 'function') {\n\t      throw new Error('many only accepts instances of Function');\n\t    }\n\t\n\t    function listener() {\n\t      if (--ttl === 0) {\n\t        self.off(event, listener);\n\t      }\n\t      fn.apply(this, arguments);\n\t    }\n\t\n\t    listener._origin = fn;\n\t\n\t    this.on(event, listener);\n\t\n\t    return self;\n\t  };\n\t\n\t  EventEmitter.prototype.emit = function () {\n\t\n\t    this._events || init.call(this);\n\t\n\t    var type = arguments[0];\n\t\n\t    if (type === 'newListener' && !this.newListener) {\n\t      if (!this._events.newListener) {\n\t        return false;\n\t      }\n\t    }\n\t\n\t    // Loop through the *_all* functions and invoke them.\n\t    if (this._all) {\n\t      var l = arguments.length;\n\t      var args = new Array(l - 1);\n\t      for (var i = 1; i < l; i++) args[i - 1] = arguments[i];\n\t      for (i = 0, l = this._all.length; i < l; i++) {\n\t        this.event = type;\n\t        this._all[i].apply(this, args);\n\t      }\n\t    }\n\t\n\t    // If there is no 'error' event listener then throw.\n\t    if (type === 'error') {\n\t\n\t      if (!this._all && !this._events.error && !(this.wildcard && this.listenerTree.error)) {\n\t\n\t        if (arguments[1] instanceof Error) {\n\t          throw arguments[1]; // Unhandled 'error' event\n\t        } else {\n\t            throw new Error(\"Uncaught, unspecified 'error' event.\");\n\t          }\n\t        return false;\n\t      }\n\t    }\n\t\n\t    var handler;\n\t\n\t    if (this.wildcard) {\n\t      handler = [];\n\t      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n\t      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\n\t    } else {\n\t      handler = this._events[type];\n\t    }\n\t\n\t    if (typeof handler === 'function') {\n\t      this.event = type;\n\t      if (arguments.length === 1) {\n\t        handler.call(this);\n\t      } else if (arguments.length > 1) switch (arguments.length) {\n\t        case 2:\n\t          handler.call(this, arguments[1]);\n\t          break;\n\t        case 3:\n\t          handler.call(this, arguments[1], arguments[2]);\n\t          break;\n\t        // slower\n\t        default:\n\t          var l = arguments.length;\n\t          var args = new Array(l - 1);\n\t          for (var i = 1; i < l; i++) args[i - 1] = arguments[i];\n\t          handler.apply(this, args);\n\t      }\n\t      return true;\n\t    } else if (handler) {\n\t      var l = arguments.length;\n\t      var args = new Array(l - 1);\n\t      for (var i = 1; i < l; i++) args[i - 1] = arguments[i];\n\t\n\t      var listeners = handler.slice();\n\t      for (var i = 0, l = listeners.length; i < l; i++) {\n\t        this.event = type;\n\t        listeners[i].apply(this, args);\n\t      }\n\t      return listeners.length > 0 || !!this._all;\n\t    } else {\n\t      return !!this._all;\n\t    }\n\t  };\n\t\n\t  EventEmitter.prototype.on = function (type, listener) {\n\t\n\t    if (typeof type === 'function') {\n\t      this.onAny(type);\n\t      return this;\n\t    }\n\t\n\t    if (typeof listener !== 'function') {\n\t      throw new Error('on only accepts instances of Function');\n\t    }\n\t    this._events || init.call(this);\n\t\n\t    // To avoid recursion in the case that type == \"newListeners\"! Before\n\t    // adding it to the listeners, first emit \"newListeners\".\n\t    this.emit('newListener', type, listener);\n\t\n\t    if (this.wildcard) {\n\t      growListenerTree.call(this, type, listener);\n\t      return this;\n\t    }\n\t\n\t    if (!this._events[type]) {\n\t      // Optimize the case of one listener. Don't need the extra array object.\n\t      this._events[type] = listener;\n\t    } else if (typeof this._events[type] === 'function') {\n\t      // Adding the second element, need to change to array.\n\t      this._events[type] = [this._events[type], listener];\n\t    } else if (isArray(this._events[type])) {\n\t      // If we've already got an array, just append.\n\t      this._events[type].push(listener);\n\t\n\t      // Check for listener leak\n\t      if (!this._events[type].warned) {\n\t\n\t        var m = defaultMaxListeners;\n\t\n\t        if (typeof this._events.maxListeners !== 'undefined') {\n\t          m = this._events.maxListeners;\n\t        }\n\t\n\t        if (m > 0 && this._events[type].length > m) {\n\t\n\t          this._events[type].warned = true;\n\t          console.error('(node) warning: possible EventEmitter memory ' + 'leak detected. %d listeners added. ' + 'Use emitter.setMaxListeners() to increase limit.', this._events[type].length);\n\t          console.trace();\n\t        }\n\t      }\n\t    }\n\t    return this;\n\t  };\n\t\n\t  EventEmitter.prototype.onAny = function (fn) {\n\t\n\t    if (typeof fn !== 'function') {\n\t      throw new Error('onAny only accepts instances of Function');\n\t    }\n\t\n\t    if (!this._all) {\n\t      this._all = [];\n\t    }\n\t\n\t    // Add the function to the event listener collection.\n\t    this._all.push(fn);\n\t    return this;\n\t  };\n\t\n\t  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\t\n\t  EventEmitter.prototype.off = function (type, listener) {\n\t    if (typeof listener !== 'function') {\n\t      throw new Error('removeListener only takes instances of Function');\n\t    }\n\t\n\t    var handlers,\n\t        leafs = [];\n\t\n\t    if (this.wildcard) {\n\t      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n\t      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n\t    } else {\n\t      // does not use listeners(), so no side effect of creating _events[type]\n\t      if (!this._events[type]) return this;\n\t      handlers = this._events[type];\n\t      leafs.push({ _listeners: handlers });\n\t    }\n\t\n\t    for (var iLeaf = 0; iLeaf < leafs.length; iLeaf++) {\n\t      var leaf = leafs[iLeaf];\n\t      handlers = leaf._listeners;\n\t      if (isArray(handlers)) {\n\t\n\t        var position = -1;\n\t\n\t        for (var i = 0, length = handlers.length; i < length; i++) {\n\t          if (handlers[i] === listener || handlers[i].listener && handlers[i].listener === listener || handlers[i]._origin && handlers[i]._origin === listener) {\n\t            position = i;\n\t            break;\n\t          }\n\t        }\n\t\n\t        if (position < 0) {\n\t          continue;\n\t        }\n\t\n\t        if (this.wildcard) {\n\t          leaf._listeners.splice(position, 1);\n\t        } else {\n\t          this._events[type].splice(position, 1);\n\t        }\n\t\n\t        if (handlers.length === 0) {\n\t          if (this.wildcard) {\n\t            delete leaf._listeners;\n\t          } else {\n\t            delete this._events[type];\n\t          }\n\t        }\n\t        return this;\n\t      } else if (handlers === listener || handlers.listener && handlers.listener === listener || handlers._origin && handlers._origin === listener) {\n\t        if (this.wildcard) {\n\t          delete leaf._listeners;\n\t        } else {\n\t          delete this._events[type];\n\t        }\n\t      }\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  EventEmitter.prototype.offAny = function (fn) {\n\t    var i = 0,\n\t        l = 0,\n\t        fns;\n\t    if (fn && this._all && this._all.length > 0) {\n\t      fns = this._all;\n\t      for (i = 0, l = fns.length; i < l; i++) {\n\t        if (fn === fns[i]) {\n\t          fns.splice(i, 1);\n\t          return this;\n\t        }\n\t      }\n\t    } else {\n\t      this._all = [];\n\t    }\n\t    return this;\n\t  };\n\t\n\t  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\n\t\n\t  EventEmitter.prototype.removeAllListeners = function (type) {\n\t    if (arguments.length === 0) {\n\t      !this._events || init.call(this);\n\t      return this;\n\t    }\n\t\n\t    if (this.wildcard) {\n\t      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n\t      var leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n\t\n\t      for (var iLeaf = 0; iLeaf < leafs.length; iLeaf++) {\n\t        var leaf = leafs[iLeaf];\n\t        leaf._listeners = null;\n\t      }\n\t    } else {\n\t      if (!this._events[type]) return this;\n\t      this._events[type] = null;\n\t    }\n\t    return this;\n\t  };\n\t\n\t  EventEmitter.prototype.listeners = function (type) {\n\t    if (this.wildcard) {\n\t      var handlers = [];\n\t      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n\t      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\n\t      return handlers;\n\t    }\n\t\n\t    this._events || init.call(this);\n\t\n\t    if (!this._events[type]) this._events[type] = [];\n\t    if (!isArray(this._events[type])) {\n\t      this._events[type] = [this._events[type]];\n\t    }\n\t    return this._events[type];\n\t  };\n\t\n\t  EventEmitter.prototype.listenersAny = function () {\n\t\n\t    if (this._all) {\n\t      return this._all;\n\t    } else {\n\t      return [];\n\t    }\n\t  };\n\t\n\t  if (true) {\n\t    // AMD. Register as an anonymous module.\n\t    !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t      return EventEmitter;\n\t    }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports === 'object') {\n\t    // CommonJS\n\t    exports.EventEmitter2 = EventEmitter;\n\t  } else {\n\t    // Browser global.\n\t    window.EventEmitter2 = EventEmitter;\n\t  }\n\t})();\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\t__webpack_require__(3);\n\t\n\t// consistent webrtc api across browsers\n\t\n\tvar VID_WIDTH = 320;\n\tvar VID_HEIGHT = 240;\n\t\n\tvar gotCam = false,\n\t    gotMic = false,\n\t    media = null;\n\t\n\tfunction getUserMedia(v, a) {\n\t    return new Promise(function (resolve, reject) {\n\t        if ((!v || gotCam) && (!a || gotMic)) return resolve(media);\n\t        navigator.getUserMedia({\n\t            audio: a,\n\t            video: !v ? false : {\n\t                width: VID_WIDTH,\n\t                height: VID_HEIGHT\n\t            }\n\t        }, resolve, reject);\n\t    }).then(function (res) {\n\t        gotCam = gotCam || !!v;\n\t        gotMic = gotMic || !!a;\n\t        media = res;\n\t        return res;\n\t    });\n\t}\n\t\n\texports['default'] = getUserMedia;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _eventemitter2 = __webpack_require__(4);\n\t\n\tvar _eventemitter22 = _interopRequireDefault(_eventemitter2);\n\t\n\tvar _jquery = __webpack_require__(1);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _ractive = __webpack_require__(7);\n\t\n\tvar _ractive2 = _interopRequireDefault(_ractive);\n\t\n\tvar _ractiveIndexHtml = __webpack_require__(8);\n\t\n\tvar _ractiveIndexHtml2 = _interopRequireDefault(_ractiveIndexHtml);\n\t\n\t__webpack_require__(9);\n\t\n\tvar ManualSignalling = (function (_EventEmitter) {\n\t    _inherits(ManualSignalling, _EventEmitter);\n\t\n\t    function ManualSignalling() {\n\t        var _this = this;\n\t\n\t        _classCallCheck(this, ManualSignalling);\n\t\n\t        _get(Object.getPrototypeOf(ManualSignalling.prototype), 'constructor', this).call(this);\n\t        this._model = {\n\t            data: ''\n\t        };\n\t        this._comp = new _ractive2['default']({\n\t            template: _ractiveIndexHtml2['default'],\n\t            data: this._model,\n\t            makeOffer: function makeOffer() {\n\t                return _this.emit('make-offer');\n\t            },\n\t            gotAnswer: function gotAnswer() {\n\t                return _this.emit('got-answer', JSON.parse(_this._model.data));\n\t            },\n\t            gotOffer: function gotOffer() {\n\t                return _this.emit('got-offer', JSON.parse(_this._model.data));\n\t            }\n\t        });\n\t    }\n\t\n\t    _createClass(ManualSignalling, [{\n\t        key: 'getName',\n\t        value: function getName() {\n\t            return \"Manual\";\n\t        }\n\t    }, {\n\t        key: 'sendOffer',\n\t        value: function sendOffer(data) {\n\t            this._comp.set('data', JSON.stringify(data, null, 2));\n\t        }\n\t    }, {\n\t        key: 'sendAnswer',\n\t        value: function sendAnswer(data) {\n\t            this._comp.set('data', JSON.stringify(data, null, 2));\n\t        }\n\t    }, {\n\t        key: 'render',\n\t        value: function render($target) {\n\t            var _this2 = this;\n\t\n\t            return new Promise(function (resolve) {\n\t                _this2._comp.render($target);\n\t                resolve();\n\t            });\n\t        }\n\t    }]);\n\t\n\t    return ManualSignalling;\n\t})(_eventemitter22['default']);\n\t\n\texports['default'] = ManualSignalling;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*\n\t\tRactive.js v0.7.3\n\t\tSat Apr 25 2015 13:52:38 GMT-0400 (EDT) - commit da40f81c660ba2f09c45a09a9c20fdd34ee36d80\n\t\n\t\thttp://ractivejs.org\n\t\thttp://twitter.com/RactiveJS\n\t\n\t\tReleased under the MIT License.\n\t*/'use strict';(function(global,factory){ true?module.exports = factory():typeof define === 'function' && define.amd?define(factory):global.Ractive = factory();})(undefined,function(){'use strict';var TEMPLATE_VERSION=3;var defaultOptions={ // render placement:\n\tel:void 0,append:false, // template:\n\ttemplate:{v:TEMPLATE_VERSION,t:[]}, // parse:     // TODO static delimiters?\n\tpreserveWhitespace:false,sanitize:false,stripComments:true,delimiters:[\"{{\",\"}}\"],tripleDelimiters:[\"{{{\",\"}}}\"],interpolate:false, // data & binding:\n\tdata:{},computed:{},magic:false,modifyArrays:true,adapt:[],isolated:false,twoway:true,lazy:false, // transitions:\n\tnoIntro:false,transitionsEnabled:true,complete:void 0, // css:\n\tcss:null,noCssTransform:false};var config_defaults=defaultOptions; // These are a subset of the easing equations found at\n\t// https://raw.github.com/danro/easing-js - license info\n\t// follows:\n\t// --------------------------------------------------\n\t// easing.js v0.5.4\n\t// Generic set of easing functions with AMD support\n\t// https://github.com/danro/easing-js\n\t// This code may be freely distributed under the MIT license\n\t// http://danro.mit-license.org/\n\t// --------------------------------------------------\n\t// All functions adapted from Thomas Fuchs & Jeremy Kahn\n\t// Easing Equations (c) 2003 Robert Penner, BSD license\n\t// https://raw.github.com/danro/easing-js/master/LICENSE\n\t// --------------------------------------------------\n\t// In that library, the functions named easeIn, easeOut, and\n\t// easeInOut below are named easeInCubic, easeOutCubic, and\n\t// (you guessed it) easeInOutCubic.\n\t//\n\t// You can add additional easing functions to this list, and they\n\t// will be globally available.\n\tvar static_easing={linear:function linear(pos){return pos;},easeIn:function easeIn(pos){return Math.pow(pos,3);},easeOut:function easeOut(pos){return Math.pow(pos - 1,3) + 1;},easeInOut:function easeInOut(pos){if((pos /= 0.5) < 1){return 0.5 * Math.pow(pos,3);}return 0.5 * (Math.pow(pos - 2,3) + 2);}}; /*global console, navigator */var isClient,isJsdom,hasConsole,environment__magic,namespaces,svg,vendors;isClient = typeof document === \"object\";isJsdom = typeof navigator !== \"undefined\" && /jsDom/.test(navigator.appName);hasConsole = typeof console !== \"undefined\" && typeof console.warn === \"function\" && typeof console.warn.apply === \"function\";try{Object.defineProperty({},\"test\",{value:0});environment__magic = true;}catch(e) {environment__magic = false;}namespaces = {html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\",xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\"};if(typeof document === \"undefined\"){svg = false;}else {svg = document && document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\",\"1.1\");}vendors = [\"o\",\"ms\",\"moz\",\"webkit\"];var createElement,matches,dom__div,methodNames,unprefixed,prefixed,dom__i,j,makeFunction; // Test for SVG support\n\tif(!svg){createElement = function(type,ns){if(ns && ns !== namespaces.html){throw \"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information\";}return document.createElement(type);};}else {createElement = function(type,ns){if(!ns || ns === namespaces.html){return document.createElement(type);}return document.createElementNS(ns,type);};}function getElement(input){var output;if(!input || typeof input === \"boolean\"){return;}if(typeof window === \"undefined\" || !document || !input){return null;} // We already have a DOM node - no work to do. (Duck typing alert!)\n\tif(input.nodeType){return input;} // Get node from string\n\tif(typeof input === \"string\"){ // try ID first\n\toutput = document.getElementById(input); // then as selector, if possible\n\tif(!output && document.querySelector){output = document.querySelector(input);} // did it work?\n\tif(output && output.nodeType){return output;}} // If we've been given a collection (jQuery, Zepto etc), extract the first item\n\tif(input[0] && input[0].nodeType){return input[0];}return null;}if(!isClient){matches = null;}else {dom__div = createElement(\"div\");methodNames = [\"matches\",\"matchesSelector\"];makeFunction = function(methodName){return function(node,selector){return node[methodName](selector);};};dom__i = methodNames.length;while(dom__i-- && !matches) {unprefixed = methodNames[dom__i];if(dom__div[unprefixed]){matches = makeFunction(unprefixed);}else {j = vendors.length;while(j--) {prefixed = vendors[dom__i] + unprefixed.substr(0,1).toUpperCase() + unprefixed.substring(1);if(dom__div[prefixed]){matches = makeFunction(prefixed);break;}}}} // IE8...\n\tif(!matches){matches = function(node,selector){var nodes,parentNode,i;parentNode = node.parentNode;if(!parentNode){ // empty dummy <div>\n\tdom__div.innerHTML = \"\";parentNode = dom__div;node = node.cloneNode();dom__div.appendChild(node);}nodes = parentNode.querySelectorAll(selector);i = nodes.length;while(i--) {if(nodes[i] === node){return true;}}return false;};}}function detachNode(node){if(node && typeof node.parentNode !== \"unknown\" && node.parentNode){node.parentNode.removeChild(node);}return node;}function safeToStringValue(value){return value == null || !value.toString?\"\":value;}var legacy=null;var create,defineProperty,defineProperties;try{Object.defineProperty({},\"test\",{value:0});if(isClient){Object.defineProperty(document.createElement(\"div\"),\"test\",{value:0});}defineProperty = Object.defineProperty;}catch(err) { // Object.defineProperty doesn't exist, or we're in IE8 where you can\n\t// only use it with DOM objects (what were you smoking, MSFT?)\n\tdefineProperty = function(obj,prop,desc){obj[prop] = desc.value;};}try{try{Object.defineProperties({},{test:{value:0}});}catch(err) { // TODO how do we account for this? noMagic = true;\n\tthrow err;}if(isClient){Object.defineProperties(createElement(\"div\"),{test:{value:0}});}defineProperties = Object.defineProperties;}catch(err) {defineProperties = function(obj,props){var prop;for(prop in props) {if(props.hasOwnProperty(prop)){defineProperty(obj,prop,props[prop]);}}};}try{Object.create(null);create = Object.create;}catch(err) { // sigh\n\tcreate = (function(){var F=function F(){};return function(proto,props){var obj;if(proto === null){return {};}F.prototype = proto;obj = new F();if(props){Object.defineProperties(obj,props);}return obj;};})();}function utils_object__extend(target){for(var _len=arguments.length,sources=Array(_len > 1?_len - 1:0),_key=1;_key < _len;_key++) {sources[_key - 1] = arguments[_key];}var prop,source;while(source = sources.shift()) {for(prop in source) {if(hasOwn.call(source,prop)){target[prop] = source[prop];}}}return target;}function fillGaps(target){for(var _len=arguments.length,sources=Array(_len > 1?_len - 1:0),_key=1;_key < _len;_key++) {sources[_key - 1] = arguments[_key];}sources.forEach(function(s){for(var key in s) {if(s.hasOwnProperty(key) && !(key in target)){target[key] = s[key];}}});return target;}var hasOwn=Object.prototype.hasOwnProperty; // thanks, http://perfectionkills.com/instanceof-considered-harmful-or-how-to-write-a-robust-isarray/\n\tvar is__toString=Object.prototype.toString,arrayLikePattern=/^\\[object (?:Array|FileList)\\]$/;function isArray(thing){return is__toString.call(thing) === \"[object Array]\";}function isArrayLike(obj){return arrayLikePattern.test(is__toString.call(obj));}function isEqual(a,b){if(a === null && b === null){return true;}if(typeof a === \"object\" || typeof b === \"object\"){return false;}return a === b;}function is__isNumeric(thing){return !isNaN(parseFloat(thing)) && isFinite(thing);}function isObject(thing){return thing && is__toString.call(thing) === \"[object Object]\";}var noop=function noop(){}; /* global console */var alreadyWarned={},log,printWarning,welcome;if(hasConsole){(function(){var welcomeIntro=[\"%cRactive.js %c0.7.3 %cin debug mode, %cmore...\",\"color: rgb(114, 157, 52); font-weight: normal;\",\"color: rgb(85, 85, 85); font-weight: normal;\",\"color: rgb(85, 85, 85); font-weight: normal;\",\"color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;\"];var welcomeMessage=\"You're running Ractive 0.7.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\\n\\nTo disable debug mode, add this line at the start of your app:\\n  Ractive.DEBUG = false;\\n\\nTo disable debug mode when your app is minified, add this snippet:\\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\\n\\nGet help and support:\\n  http://docs.ractivejs.org\\n  http://stackoverflow.com/questions/tagged/ractivejs\\n  http://groups.google.com/forum/#!forum/ractive-js\\n  http://twitter.com/ractivejs\\n\\nFound a bug? Raise an issue:\\n  https://github.com/ractivejs/ractive/issues\\n\\n\";welcome = function(){var hasGroup=!!console.groupCollapsed;console[hasGroup?\"groupCollapsed\":\"log\"].apply(console,welcomeIntro);console.log(welcomeMessage);if(hasGroup){console.groupEnd(welcomeIntro);}welcome = noop;};printWarning = function(message,args){welcome(); // extract information about the instance this message pertains to, if applicable\n\tif(typeof args[args.length - 1] === \"object\"){var options=args.pop();var ractive=options?options.ractive:null;if(ractive){ // if this is an instance of a component that we know the name of, add\n\t// it to the message\n\tvar _name=undefined;if(ractive.component && (_name = ractive.component.name)){message = \"<\" + _name + \"> \" + message;}var node=undefined;if(node = options.node || ractive.fragment && ractive.fragment.rendered && ractive.find(\"*\")){args.push(node);}}}console.warn.apply(console,[\"%cRactive.js: %c\" + message,\"color: rgb(114, 157, 52);\",\"color: rgb(85, 85, 85);\"].concat(args));};log = function(){console.log.apply(console,arguments);};})();}else {printWarning = log = welcome = noop;}function format(message,args){return message.replace(/%s/g,function(){return args.shift();});}function fatal(message){for(var _len=arguments.length,args=Array(_len > 1?_len - 1:0),_key=1;_key < _len;_key++) {args[_key - 1] = arguments[_key];}message = format(message,args);throw new Error(message);}function logIfDebug(){if(_Ractive.DEBUG){log.apply(null,arguments);}}function warn(message){for(var _len=arguments.length,args=Array(_len > 1?_len - 1:0),_key=1;_key < _len;_key++) {args[_key - 1] = arguments[_key];}message = format(message,args);printWarning(message,args);}function warnOnce(message){for(var _len=arguments.length,args=Array(_len > 1?_len - 1:0),_key=1;_key < _len;_key++) {args[_key - 1] = arguments[_key];}message = format(message,args);if(alreadyWarned[message]){return;}alreadyWarned[message] = true;printWarning(message,args);}function warnIfDebug(){if(_Ractive.DEBUG){warn.apply(null,arguments);}}function warnOnceIfDebug(){if(_Ractive.DEBUG){warnOnce.apply(null,arguments);}} // Error messages that are used (or could be) in multiple places\n\tvar badArguments=\"Bad arguments\";var noRegistryFunctionReturn=\"A function was specified for \\\"%s\\\" %s, but no %s was returned\";var missingPlugin=function missingPlugin(name,type){return \"Missing \\\"\" + name + \"\\\" \" + type + \" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#\" + type + \"s\";};function findInViewHierarchy(registryName,ractive,name){var instance=findInstance(registryName,ractive,name);return instance?instance[registryName][name]:null;}function findInstance(registryName,ractive,name){while(ractive) {if(name in ractive[registryName]){return ractive;}if(ractive.isolated){return null;}ractive = ractive.parent;}}var interpolate=function interpolate(from,to,ractive,type){if(from === to){return snap(to);}if(type){var interpol=findInViewHierarchy(\"interpolators\",ractive,type);if(interpol){return interpol(from,to) || snap(to);}fatal(missingPlugin(type,\"interpolator\"));}return static_interpolators.number(from,to) || static_interpolators.array(from,to) || static_interpolators.object(from,to) || snap(to);};var shared_interpolate=interpolate;function snap(to){return function(){return to;};}var interpolators={number:function number(from,to){var delta;if(!is__isNumeric(from) || !is__isNumeric(to)){return null;}from = +from;to = +to;delta = to - from;if(!delta){return function(){return from;};}return function(t){return from + t * delta;};},array:function array(from,to){var intermediate,interpolators,len,i;if(!isArray(from) || !isArray(to)){return null;}intermediate = [];interpolators = [];i = len = Math.min(from.length,to.length);while(i--) {interpolators[i] = shared_interpolate(from[i],to[i]);} // surplus values - don't interpolate, but don't exclude them either\n\tfor(i = len;i < from.length;i += 1) {intermediate[i] = from[i];}for(i = len;i < to.length;i += 1) {intermediate[i] = to[i];}return function(t){var i=len;while(i--) {intermediate[i] = interpolators[i](t);}return intermediate;};},object:function object(from,to){var properties,len,interpolators,intermediate,prop;if(!isObject(from) || !isObject(to)){return null;}properties = [];intermediate = {};interpolators = {};for(prop in from) {if(hasOwn.call(from,prop)){if(hasOwn.call(to,prop)){properties.push(prop);interpolators[prop] = shared_interpolate(from[prop],to[prop]);}else {intermediate[prop] = from[prop];}}}for(prop in to) {if(hasOwn.call(to,prop) && !hasOwn.call(from,prop)){intermediate[prop] = to[prop];}}len = properties.length;return function(t){var i=len,prop;while(i--) {prop = properties[i];intermediate[prop] = interpolators[prop](t);}return intermediate;};}};var static_interpolators=interpolators; // This function takes a keypath such as 'foo.bar.baz', and returns\n\t// all the variants of that keypath that include a wildcard in place\n\t// of a key, such as 'foo.bar.*', 'foo.*.baz', 'foo.*.*' and so on.\n\t// These are then checked against the dependants map (ractive.viewmodel.depsMap)\n\t// to see if any pattern observers are downstream of one or more of\n\t// these wildcard keypaths (e.g. 'foo.bar.*.status')\n\tvar utils_getPotentialWildcardMatches=getPotentialWildcardMatches;var starMaps={};function getPotentialWildcardMatches(keypath){var keys,starMap,mapper,i,result,wildcardKeypath;keys = keypath.split(\".\");if(!(starMap = starMaps[keys.length])){starMap = getStarMap(keys.length);}result = [];mapper = function(star,i){return star?\"*\":keys[i];};i = starMap.length;while(i--) {wildcardKeypath = starMap[i].map(mapper).join(\".\");if(!result.hasOwnProperty(wildcardKeypath)){result.push(wildcardKeypath);result[wildcardKeypath] = true;}}return result;} // This function returns all the possible true/false combinations for\n\t// a given number - e.g. for two, the possible combinations are\n\t// [ true, true ], [ true, false ], [ false, true ], [ false, false ].\n\t// It does so by getting all the binary values between 0 and e.g. 11\n\tfunction getStarMap(num){var ones=\"\",max,binary,starMap,mapper,i,j,l,map;if(!starMaps[num]){starMap = [];while(ones.length < num) {ones += 1;}max = parseInt(ones,2);mapper = function(digit){return digit === \"1\";};for(i = 0;i <= max;i += 1) {binary = i.toString(2);while(binary.length < num) {binary = \"0\" + binary;}map = [];l = binary.length;for(j = 0;j < l;j++) {map.push(mapper(binary[j]));}starMap[i] = map;}starMaps[num] = starMap;}return starMaps[num];}var refPattern=/\\[\\s*(\\*|[0-9]|[1-9][0-9]+)\\s*\\]/g;var patternPattern=/\\*/;var keypathCache={};var Keypath=function Keypath(str){var keys=str.split(\".\");this.str = str;if(str[0] === \"@\"){this.isSpecial = true;this.value = decodeKeypath(str);}this.firstKey = keys[0];this.lastKey = keys.pop();this.isPattern = patternPattern.test(str);this.parent = str === \"\"?null:getKeypath(keys.join(\".\"));this.isRoot = !str;};Keypath.prototype = {equalsOrStartsWith:function equalsOrStartsWith(keypath){return keypath === this || this.startsWith(keypath);},join:function join(str){return getKeypath(this.isRoot?String(str):this.str + \".\" + str);},replace:function replace(oldKeypath,newKeypath){if(this === oldKeypath){return newKeypath;}if(this.startsWith(oldKeypath)){return newKeypath === null?newKeypath:getKeypath(this.str.replace(oldKeypath.str + \".\",newKeypath.str + \".\"));}},startsWith:function startsWith(keypath){if(!keypath){ // TODO under what circumstances does this happen?\n\treturn false;}return keypath && this.str.substr(0,keypath.str.length + 1) === keypath.str + \".\";},toString:function toString(){throw new Error(\"Bad coercion\");},valueOf:function valueOf(){throw new Error(\"Bad coercion\");},wildcardMatches:function wildcardMatches(){return this._wildcardMatches || (this._wildcardMatches = utils_getPotentialWildcardMatches(this.str));}};function assignNewKeypath(target,property,oldKeypath,newKeypath){var existingKeypath=target[property];if(existingKeypath && (existingKeypath.equalsOrStartsWith(newKeypath) || !existingKeypath.equalsOrStartsWith(oldKeypath))){return;}target[property] = existingKeypath?existingKeypath.replace(oldKeypath,newKeypath):newKeypath;return true;}function decodeKeypath(keypath){var value=keypath.slice(2);if(keypath[1] === \"i\"){return is__isNumeric(value)?+value:value;}else {return value;}}function getKeypath(str){if(str == null){return str;} // TODO it *may* be worth having two versions of this function - one where\n\t// keypathCache inherits from null, and one for IE8. Depends on how\n\t// much of an overhead hasOwnProperty is - probably negligible\n\tif(!keypathCache.hasOwnProperty(str)){keypathCache[str] = new Keypath(str);}return keypathCache[str];}function getMatchingKeypaths(ractive,keypath){var keys,key,matchingKeypaths;keys = keypath.str.split(\".\");matchingKeypaths = [rootKeypath];while(key = keys.shift()) {if(key === \"*\"){ // expand to find all valid child keypaths\n\tmatchingKeypaths = matchingKeypaths.reduce(expand,[]);}else {if(matchingKeypaths[0] === rootKeypath){ // first key\n\tmatchingKeypaths[0] = getKeypath(key);}else {matchingKeypaths = matchingKeypaths.map(concatenate(key));}}}return matchingKeypaths;function expand(matchingKeypaths,keypath){var wrapper,value,keys;if(keypath.isRoot){keys = [].concat(Object.keys(ractive.viewmodel.data),Object.keys(ractive.viewmodel.mappings),Object.keys(ractive.viewmodel.computations));}else {wrapper = ractive.viewmodel.wrapped[keypath.str];value = wrapper?wrapper.get():ractive.viewmodel.get(keypath);keys = value?Object.keys(value):null;}if(keys){keys.forEach(function(key){if(key !== \"_ractive\" || !isArray(value)){matchingKeypaths.push(keypath.join(key));}});}return matchingKeypaths;}}function concatenate(key){return function(keypath){return keypath.join(key);};}function normalise(ref){return ref?ref.replace(refPattern,\".$1\"):\"\";}var rootKeypath=getKeypath(\"\");var shared_add=add;var shared_add__errorMessage=\"Cannot add to a non-numeric value\";function add(root,keypath,d){if(typeof keypath !== \"string\" || !is__isNumeric(d)){throw new Error(\"Bad arguments\");}var value=undefined,changes=undefined;if(/\\*/.test(keypath)){changes = {};getMatchingKeypaths(root,getKeypath(normalise(keypath))).forEach(function(keypath){var value=root.viewmodel.get(keypath);if(!is__isNumeric(value)){throw new Error(shared_add__errorMessage);}changes[keypath.str] = value + d;});return root.set(changes);}value = root.get(keypath);if(!is__isNumeric(value)){throw new Error(shared_add__errorMessage);}return root.set(keypath,+value + d);}var prototype_add=Ractive$add;function Ractive$add(keypath,d){return shared_add(this,keypath,d === undefined?1:+d);}var requestAnimationFrame; // If window doesn't exist, we don't need requestAnimationFrame\n\tif(typeof window === \"undefined\"){requestAnimationFrame = null;}else { // https://gist.github.com/paulirish/1579671\n\t(function(vendors,lastTime,window){var x,setTimeout;if(window.requestAnimationFrame){return;}for(x = 0;x < vendors.length && !window.requestAnimationFrame;++x) {window.requestAnimationFrame = window[vendors[x] + \"RequestAnimationFrame\"];}if(!window.requestAnimationFrame){setTimeout = window.setTimeout;window.requestAnimationFrame = function(callback){var currTime,timeToCall,id;currTime = Date.now();timeToCall = Math.max(0,16 - (currTime - lastTime));id = setTimeout(function(){callback(currTime + timeToCall);},timeToCall);lastTime = currTime + timeToCall;return id;};}})(vendors,0,window);requestAnimationFrame = window.requestAnimationFrame;}var rAF=requestAnimationFrame;var getTime;if(typeof window !== \"undefined\" && window.performance && typeof window.performance.now === \"function\"){getTime = function(){return window.performance.now();};}else {getTime = function(){return Date.now();};}var utils_getTime=getTime;var deprecations={construct:{deprecated:\"beforeInit\",replacement:\"onconstruct\"},render:{deprecated:\"init\",message:\"The \\\"init\\\" method has been deprecated \" + \"and will likely be removed in a future release. \" + \"You can either use the \\\"oninit\\\" method which will fire \" + \"only once prior to, and regardless of, any eventual ractive \" + \"instance being rendered, or if you need to access the \" + \"rendered DOM, use \\\"onrender\\\" instead. \" + \"See http://docs.ractivejs.org/latest/migrating for more information.\"},complete:{deprecated:\"complete\",replacement:\"oncomplete\"}};function Hook(event){this.event = event;this.method = \"on\" + event;this.deprecate = deprecations[event];}Hook.prototype.fire = function(ractive,arg){function call(method){if(ractive[method]){arg?ractive[method](arg):ractive[method]();return true;}}call(this.method);if(!ractive[this.method] && this.deprecate && call(this.deprecate.deprecated)){if(this.deprecate.message){warnIfDebug(this.deprecate.message);}else {warnIfDebug(\"The method \\\"%s\\\" has been deprecated in favor of \\\"%s\\\" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.\",this.deprecate.deprecated,this.deprecate.replacement);}}arg?ractive.fire(this.event,arg):ractive.fire(this.event);};var hooks_Hook=Hook;function addToArray(array,value){var index=array.indexOf(value);if(index === -1){array.push(value);}}function arrayContains(array,value){for(var i=0,c=array.length;i < c;i++) {if(array[i] == value){return true;}}return false;}function arrayContentsMatch(a,b){var i;if(!isArray(a) || !isArray(b)){return false;}if(a.length !== b.length){return false;}i = a.length;while(i--) {if(a[i] !== b[i]){return false;}}return true;}function ensureArray(x){if(typeof x === \"string\"){return [x];}if(x === undefined){return [];}return x;}function lastItem(array){return array[array.length - 1];}function removeFromArray(array,member){var index=array.indexOf(member);if(index !== -1){array.splice(index,1);}}function toArray(arrayLike){var array=[],i=arrayLike.length;while(i--) {array[i] = arrayLike[i];}return array;}var _Promise,PENDING={},FULFILLED={},REJECTED={};if(typeof Promise === \"function\"){ // use native Promise\n\t_Promise = Promise;}else {_Promise = function(callback){var fulfilledHandlers=[],rejectedHandlers=[],state=PENDING,result,dispatchHandlers,makeResolver,fulfil,reject,promise;makeResolver = function(newState){return function(value){if(state !== PENDING){return;}result = value;state = newState;dispatchHandlers = makeDispatcher(state === FULFILLED?fulfilledHandlers:rejectedHandlers,result); // dispatch onFulfilled and onRejected handlers asynchronously\n\twait(dispatchHandlers);};};fulfil = makeResolver(FULFILLED);reject = makeResolver(REJECTED);try{callback(fulfil,reject);}catch(err) {reject(err);}promise = { // `then()` returns a Promise - 2.2.7\n\tthen:function then(onFulfilled,onRejected){var promise2=new _Promise(function(fulfil,reject){var processResolutionHandler=function processResolutionHandler(handler,handlers,forward){ // 2.2.1.1\n\tif(typeof handler === \"function\"){handlers.push(function(p1result){var x;try{x = handler(p1result);utils_Promise__resolve(promise2,x,fulfil,reject);}catch(err) {reject(err);}});}else { // Forward the result of promise1 to promise2, if resolution handlers\n\t// are not given\n\thandlers.push(forward);}}; // 2.2\n\tprocessResolutionHandler(onFulfilled,fulfilledHandlers,fulfil);processResolutionHandler(onRejected,rejectedHandlers,reject);if(state !== PENDING){ // If the promise has resolved already, dispatch the appropriate handlers asynchronously\n\twait(dispatchHandlers);}});return promise2;}};promise[\"catch\"] = function(onRejected){return this.then(null,onRejected);};return promise;};_Promise.all = function(promises){return new _Promise(function(fulfil,reject){var result=[],pending,i,processPromise;if(!promises.length){fulfil(result);return;}processPromise = function(promise,i){if(promise && typeof promise.then === \"function\"){promise.then(function(value){result[i] = value;--pending || fulfil(result);},reject);}else {result[i] = promise;--pending || fulfil(result);}};pending = i = promises.length;while(i--) {processPromise(promises[i],i);}});};_Promise.resolve = function(value){return new _Promise(function(fulfil){fulfil(value);});};_Promise.reject = function(reason){return new _Promise(function(fulfil,reject){reject(reason);});};}var utils_Promise=_Promise; // TODO use MutationObservers or something to simulate setImmediate\n\tfunction wait(callback){setTimeout(callback,0);}function makeDispatcher(handlers,result){return function(){var handler;while(handler = handlers.shift()) {handler(result);}};}function utils_Promise__resolve(promise,x,fulfil,reject){ // Promise Resolution Procedure\n\tvar then; // 2.3.1\n\tif(x === promise){throw new TypeError(\"A promise's fulfillment handler cannot return the same promise\");} // 2.3.2\n\tif(x instanceof _Promise){x.then(fulfil,reject);} // 2.3.3\n\telse if(x && (typeof x === \"object\" || typeof x === \"function\")){try{then = x.then; // 2.3.3.1\n\t}catch(e) {reject(e); // 2.3.3.2\n\treturn;} // 2.3.3.3\n\tif(typeof then === \"function\"){var called,resolvePromise,rejectPromise;resolvePromise = function(y){if(called){return;}called = true;utils_Promise__resolve(promise,y,fulfil,reject);};rejectPromise = function(r){if(called){return;}called = true;reject(r);};try{then.call(x,resolvePromise,rejectPromise);}catch(e) {if(!called){ // 2.3.3.3.4.1\n\treject(e); // 2.3.3.3.4.2\n\tcalled = true;return;}}}else {fulfil(x);}}else {fulfil(x);}}var getInnerContext=function getInnerContext(fragment){do {if(fragment.context !== undefined){return fragment.context;}}while(fragment = fragment.parent);return rootKeypath;};var shared_resolveRef=resolveRef;function resolveRef(ractive,ref,fragment){var keypath;ref = normalise(ref); // If a reference begins '~/', it's a top-level reference\n\tif(ref.substr(0,2) === \"~/\"){keypath = getKeypath(ref.substring(2));createMappingIfNecessary(ractive,keypath.firstKey,fragment);} // If a reference begins with '.', it's either a restricted reference or\n\t// an ancestor reference...\n\telse if(ref[0] === \".\"){keypath = resolveAncestorRef(getInnerContext(fragment),ref);if(keypath){createMappingIfNecessary(ractive,keypath.firstKey,fragment);}} // ...otherwise we need to figure out the keypath based on context\n\telse {keypath = resolveAmbiguousReference(ractive,getKeypath(ref),fragment);}return keypath;}function resolveAncestorRef(baseContext,ref){var contextKeys; // TODO...\n\tif(baseContext != undefined && typeof baseContext !== \"string\"){baseContext = baseContext.str;} // {{.}} means 'current context'\n\tif(ref === \".\")return getKeypath(baseContext);contextKeys = baseContext?baseContext.split(\".\"):[]; // ancestor references (starting \"../\") go up the tree\n\tif(ref.substr(0,3) === \"../\"){while(ref.substr(0,3) === \"../\") {if(!contextKeys.length){throw new Error(\"Could not resolve reference - too many \\\"../\\\" prefixes\");}contextKeys.pop();ref = ref.substring(3);}contextKeys.push(ref);return getKeypath(contextKeys.join(\".\"));} // not an ancestor reference - must be a restricted reference (prepended with \".\" or \"./\")\n\tif(!baseContext){return getKeypath(ref.replace(/^\\.\\/?/,\"\"));}return getKeypath(baseContext + ref.replace(/^\\.\\//,\".\"));}function resolveAmbiguousReference(ractive,ref,fragment,isParentLookup){var context,key,parentValue,hasContextChain,parentKeypath;if(ref.isRoot){return ref;}key = ref.firstKey;while(fragment) {context = fragment.context;fragment = fragment.parent;if(!context){continue;}hasContextChain = true;parentValue = ractive.viewmodel.get(context);if(parentValue && (typeof parentValue === \"object\" || typeof parentValue === \"function\") && key in parentValue){return context.join(ref.str);}} // Root/computed/mapped property?\n\tif(isRootProperty(ractive.viewmodel,key)){return ref;} // If this is an inline component, and it's not isolated, we\n\t// can try going up the scope chain\n\tif(ractive.parent && !ractive.isolated){hasContextChain = true;fragment = ractive.component.parentFragment;key = getKeypath(key);if(parentKeypath = resolveAmbiguousReference(ractive.parent,key,fragment,true)){ // We need to create an inter-component binding\n\tractive.viewmodel.map(key,{origin:ractive.parent.viewmodel,keypath:parentKeypath});return ref;}} // If there's no context chain, and the instance is either a) isolated or\n\t// b) an orphan, then we know that the keypath is identical to the reference\n\tif(!isParentLookup && !hasContextChain){ // the data object needs to have a property by this name,\n\t// to prevent future failed lookups\n\tractive.viewmodel.set(ref,undefined);return ref;}}function createMappingIfNecessary(ractive,key){var parentKeypath;if(!ractive.parent || ractive.isolated || isRootProperty(ractive.viewmodel,key)){return;}key = getKeypath(key);if(parentKeypath = resolveAmbiguousReference(ractive.parent,key,ractive.component.parentFragment,true)){ractive.viewmodel.map(key,{origin:ractive.parent.viewmodel,keypath:parentKeypath});}}function isRootProperty(viewmodel,key){ // special case for reference to root\n\treturn key === \"\" || key in viewmodel.data || key in viewmodel.computations || key in viewmodel.mappings;}function teardown(x){x.teardown();}function methodCallers__unbind(x){x.unbind();}function methodCallers__unrender(x){x.unrender();}function cancel(x){x.cancel();}var TransitionManager=function TransitionManager(callback,parent){this.callback = callback;this.parent = parent;this.intros = [];this.outros = [];this.children = [];this.totalChildren = this.outroChildren = 0;this.detachQueue = [];this.decoratorQueue = [];this.outrosComplete = false;if(parent){parent.addChild(this);}};TransitionManager.prototype = {addChild:function addChild(child){this.children.push(child);this.totalChildren += 1;this.outroChildren += 1;},decrementOutros:function decrementOutros(){this.outroChildren -= 1;check(this);},decrementTotal:function decrementTotal(){this.totalChildren -= 1;check(this);},add:function add(transition){var list=transition.isIntro?this.intros:this.outros;list.push(transition);},addDecorator:function addDecorator(decorator){this.decoratorQueue.push(decorator);},remove:function remove(transition){var list=transition.isIntro?this.intros:this.outros;removeFromArray(list,transition);check(this);},init:function init(){this.ready = true;check(this);},detachNodes:function detachNodes(){this.decoratorQueue.forEach(teardown);this.detachQueue.forEach(detach);this.children.forEach(_detachNodes);}};function detach(element){element.detach();}function _detachNodes(tm){tm.detachNodes();}function check(tm){if(!tm.ready || tm.outros.length || tm.outroChildren)return; // If all outros are complete, and we haven't already done this,\n\t// we notify the parent if there is one, otherwise\n\t// start detaching nodes\n\tif(!tm.outrosComplete){if(tm.parent){tm.parent.decrementOutros(tm);}else {tm.detachNodes();}tm.outrosComplete = true;} // Once everything is done, we can notify parent transition\n\t// manager and call the callback\n\tif(!tm.intros.length && !tm.totalChildren){if(typeof tm.callback === \"function\"){tm.callback();}if(tm.parent){tm.parent.decrementTotal();}}}var global_TransitionManager=TransitionManager;var batch,runloop,unresolved=[],changeHook=new hooks_Hook(\"change\");runloop = {start:function start(instance,returnPromise){var promise,fulfilPromise;if(returnPromise){promise = new utils_Promise(function(f){return fulfilPromise = f;});}batch = {previousBatch:batch,transitionManager:new global_TransitionManager(fulfilPromise,batch && batch.transitionManager),views:[],tasks:[],ractives:[],instance:instance};if(instance){batch.ractives.push(instance);}return promise;},end:function end(){flushChanges();batch.transitionManager.init();if(!batch.previousBatch && !!batch.instance)batch.instance.viewmodel.changes = [];batch = batch.previousBatch;},addRactive:function addRactive(ractive){if(batch){addToArray(batch.ractives,ractive);}},registerTransition:function registerTransition(transition){transition._manager = batch.transitionManager;batch.transitionManager.add(transition);},registerDecorator:function registerDecorator(decorator){batch.transitionManager.addDecorator(decorator);},addView:function addView(view){batch.views.push(view);},addUnresolved:function addUnresolved(thing){unresolved.push(thing);},removeUnresolved:function removeUnresolved(thing){removeFromArray(unresolved,thing);}, // synchronise node detachments with transition ends\n\tdetachWhenReady:function detachWhenReady(thing){batch.transitionManager.detachQueue.push(thing);},scheduleTask:function scheduleTask(task,postRender){var _batch;if(!batch){task();}else {_batch = batch;while(postRender && _batch.previousBatch) { // this can't happen until the DOM has been fully updated\n\t// otherwise in some situations (with components inside elements)\n\t// transitions and decorators will initialise prematurely\n\t_batch = _batch.previousBatch;}_batch.tasks.push(task);}}};var global_runloop=runloop;function flushChanges(){var _again=true;_function: while(_again) {i = thing = changeHash = undefined;_again = false;var i,thing,changeHash;while(batch.ractives.length) {thing = batch.ractives.pop();changeHash = thing.viewmodel.applyChanges();if(changeHash){changeHook.fire(thing,changeHash);}}attemptKeypathResolution(); // Now that changes have been fully propagated, we can update the DOM\n\t// and complete other tasks\n\tfor(i = 0;i < batch.views.length;i += 1) {batch.views[i].update();}batch.views.length = 0;for(i = 0;i < batch.tasks.length;i += 1) {batch.tasks[i]();}batch.tasks.length = 0; // If updating the view caused some model blowback - e.g. a triple\n\t// containing <option> elements caused the binding on the <select>\n\t// to update - then we start over\n\tif(batch.ractives.length){_again = true;continue _function;}}}function attemptKeypathResolution(){var i,item,keypath,resolved;i = unresolved.length; // see if we can resolve any unresolved references\n\twhile(i--) {item = unresolved[i];if(item.keypath){ // it resolved some other way. TODO how? two-way binding? Seems\n\t// weird that we'd still end up here\n\tunresolved.splice(i,1);continue; // avoid removing the wrong thing should the next condition be true\n\t}if(keypath = shared_resolveRef(item.root,item.ref,item.parentFragment)){(resolved || (resolved = [])).push({item:item,keypath:keypath});unresolved.splice(i,1);}}if(resolved){resolved.forEach(global_runloop__resolve);}}function global_runloop__resolve(resolved){resolved.item.resolve(resolved.keypath);}var queue=[];var animations={tick:function tick(){var i,animation,now;now = utils_getTime();global_runloop.start();for(i = 0;i < queue.length;i += 1) {animation = queue[i];if(!animation.tick(now)){ // animation is complete, remove it from the stack, and decrement i so we don't miss one\n\tqueue.splice(i--,1);}}global_runloop.end();if(queue.length){rAF(animations.tick);}else {animations.running = false;}},add:function add(animation){queue.push(animation);if(!animations.running){animations.running = true;rAF(animations.tick);}}, // TODO optimise this\n\tabort:function abort(keypath,root){var i=queue.length,animation;while(i--) {animation = queue[i];if(animation.root === root && animation.keypath === keypath){animation.stop();}}}};var shared_animations=animations;var Animation=function Animation(options){var key;this.startTime = Date.now(); // from and to\n\tfor(key in options) {if(options.hasOwnProperty(key)){this[key] = options[key];}}this.interpolator = shared_interpolate(this.from,this.to,this.root,this.interpolator);this.running = true;this.tick();};Animation.prototype = {tick:function tick(){var elapsed,t,value,timeNow,index,keypath;keypath = this.keypath;if(this.running){timeNow = Date.now();elapsed = timeNow - this.startTime;if(elapsed >= this.duration){if(keypath !== null){global_runloop.start(this.root);this.root.viewmodel.set(keypath,this.to);global_runloop.end();}if(this.step){this.step(1,this.to);}this.complete(this.to);index = this.root._animations.indexOf(this); // TODO investigate why this happens\n\tif(index === -1){warnIfDebug(\"Animation was not found\");}this.root._animations.splice(index,1);this.running = false;return false; // remove from the stack\n\t}t = this.easing?this.easing(elapsed / this.duration):elapsed / this.duration;if(keypath !== null){value = this.interpolator(t);global_runloop.start(this.root);this.root.viewmodel.set(keypath,value);global_runloop.end();}if(this.step){this.step(t,value);}return true; // keep in the stack\n\t}return false; // remove from the stack\n\t},stop:function stop(){var index;this.running = false;index = this.root._animations.indexOf(this); // TODO investigate why this happens\n\tif(index === -1){warnIfDebug(\"Animation was not found\");}this.root._animations.splice(index,1);}};var animate_Animation=Animation;var prototype_animate=Ractive$animate;var noAnimation={stop:noop};function Ractive$animate(keypath,to,options){var promise,fulfilPromise,k,animation,animations,easing,duration,step,complete,makeValueCollector,currentValues,collectValue,dummy,dummyOptions;promise = new utils_Promise(function(fulfil){return fulfilPromise = fulfil;}); // animate multiple keypaths\n\tif(typeof keypath === \"object\"){options = to || {};easing = options.easing;duration = options.duration;animations = []; // we don't want to pass the `step` and `complete` handlers, as they will\n\t// run for each animation! So instead we'll store the handlers and create\n\t// our own...\n\tstep = options.step;complete = options.complete;if(step || complete){currentValues = {};options.step = null;options.complete = null;makeValueCollector = function(keypath){return function(t,value){currentValues[keypath] = value;};};}for(k in keypath) {if(keypath.hasOwnProperty(k)){if(step || complete){collectValue = makeValueCollector(k);options = {easing:easing,duration:duration};if(step){options.step = collectValue;}}options.complete = complete?collectValue:noop;animations.push(animate(this,k,keypath[k],options));}} // Create a dummy animation, to facilitate step/complete\n\t// callbacks, and Promise fulfilment\n\tdummyOptions = {easing:easing,duration:duration};if(step){dummyOptions.step = function(t){return step(t,currentValues);};}if(complete){promise.then(function(t){return complete(t,currentValues);});}dummyOptions.complete = fulfilPromise;dummy = animate(this,null,null,dummyOptions);animations.push(dummy);promise.stop = function(){var animation;while(animation = animations.pop()) {animation.stop();}if(dummy){dummy.stop();}};return promise;} // animate a single keypath\n\toptions = options || {};if(options.complete){promise.then(options.complete);}options.complete = fulfilPromise;animation = animate(this,keypath,to,options);promise.stop = function(){return animation.stop();};return promise;}function animate(root,keypath,to,options){var easing,duration,animation,from;if(keypath){keypath = getKeypath(normalise(keypath));}if(keypath !== null){from = root.viewmodel.get(keypath);} // cancel any existing animation\n\t// TODO what about upstream/downstream keypaths?\n\tshared_animations.abort(keypath,root); // don't bother animating values that stay the same\n\tif(isEqual(from,to)){if(options.complete){options.complete(options.to);}return noAnimation;} // easing function\n\tif(options.easing){if(typeof options.easing === \"function\"){easing = options.easing;}else {easing = root.easing[options.easing];}if(typeof easing !== \"function\"){easing = null;}} // duration\n\tduration = options.duration === undefined?400:options.duration; // TODO store keys, use an internal set method\n\tanimation = new animate_Animation({keypath:keypath,from:from,to:to,root:root,duration:duration,easing:easing,interpolator:options.interpolator, // TODO wrap callbacks if necessary, to use instance as context\n\tstep:options.step,complete:options.complete});shared_animations.add(animation);root._animations.push(animation);return animation;}var prototype_detach=Ractive$detach;var prototype_detach__detachHook=new hooks_Hook(\"detach\");function Ractive$detach(){if(this.detached){return this.detached;}if(this.el){removeFromArray(this.el.__ractive_instances__,this);}this.detached = this.fragment.detach();prototype_detach__detachHook.fire(this);return this.detached;}var prototype_find=Ractive$find;function Ractive$find(selector){if(!this.el){return null;}return this.fragment.find(selector);}var test=Query$test;function Query$test(item,noDirty){var itemMatches;if(this._isComponentQuery){itemMatches = !this.selector || item.name === this.selector;}else {itemMatches = item.node?matches(item.node,this.selector):null;}if(itemMatches){this.push(item.node || item.instance);if(!noDirty){this._makeDirty();}return true;}}var makeQuery_cancel=function makeQuery_cancel(){var liveQueries,selector,index;liveQueries = this._root[this._isComponentQuery?\"liveComponentQueries\":\"liveQueries\"];selector = this.selector;index = liveQueries.indexOf(selector);if(index !== -1){liveQueries.splice(index,1);liveQueries[selector] = null;}};var sortByItemPosition=function sortByItemPosition(a,b){var ancestryA,ancestryB,oldestA,oldestB,mutualAncestor,indexA,indexB,fragments,fragmentA,fragmentB;ancestryA = getAncestry(a.component || a._ractive.proxy);ancestryB = getAncestry(b.component || b._ractive.proxy);oldestA = lastItem(ancestryA);oldestB = lastItem(ancestryB); // remove items from the end of both ancestries as long as they are identical\n\t// - the final one removed is the closest mutual ancestor\n\twhile(oldestA && oldestA === oldestB) {ancestryA.pop();ancestryB.pop();mutualAncestor = oldestA;oldestA = lastItem(ancestryA);oldestB = lastItem(ancestryB);} // now that we have the mutual ancestor, we can find which is earliest\n\toldestA = oldestA.component || oldestA;oldestB = oldestB.component || oldestB;fragmentA = oldestA.parentFragment;fragmentB = oldestB.parentFragment; // if both items share a parent fragment, our job is easy\n\tif(fragmentA === fragmentB){indexA = fragmentA.items.indexOf(oldestA);indexB = fragmentB.items.indexOf(oldestB); // if it's the same index, it means one contains the other,\n\t// so we see which has the longest ancestry\n\treturn indexA - indexB || ancestryA.length - ancestryB.length;} // if mutual ancestor is a section, we first test to see which section\n\t// fragment comes first\n\tif(fragments = mutualAncestor.fragments){indexA = fragments.indexOf(fragmentA);indexB = fragments.indexOf(fragmentB);return indexA - indexB || ancestryA.length - ancestryB.length;}throw new Error(\"An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!\");};function getParent(item){var parentFragment;if(parentFragment = item.parentFragment){return parentFragment.owner;}if(item.component && (parentFragment = item.component.parentFragment)){return parentFragment.owner;}}function getAncestry(item){var ancestry,ancestor;ancestry = [item];ancestor = getParent(item);while(ancestor) {ancestry.push(ancestor);ancestor = getParent(ancestor);}return ancestry;}var sortByDocumentPosition=function sortByDocumentPosition(node,otherNode){var bitmask;if(node.compareDocumentPosition){bitmask = node.compareDocumentPosition(otherNode);return bitmask & 2?1:-1;} // In old IE, we can piggy back on the mechanism for\n\t// comparing component positions\n\treturn sortByItemPosition(node,otherNode);};var sort=function sort(){this.sort(this._isComponentQuery?sortByItemPosition:sortByDocumentPosition);this._dirty = false;};var makeQuery_dirty=function makeQuery_dirty(){var _this=this;if(!this._dirty){this._dirty = true; // Once the DOM has been updated, ensure the query\n\t// is correctly ordered\n\tglobal_runloop.scheduleTask(function(){_this._sort();});}};var remove=function remove(nodeOrComponent){var index=this.indexOf(this._isComponentQuery?nodeOrComponent.instance:nodeOrComponent);if(index !== -1){this.splice(index,1);}};var _makeQuery=makeQuery;function makeQuery(ractive,selector,live,isComponentQuery){var query=[];defineProperties(query,{selector:{value:selector},live:{value:live},_isComponentQuery:{value:isComponentQuery},_test:{value:test}});if(!live){return query;}defineProperties(query,{cancel:{value:makeQuery_cancel},_root:{value:ractive},_sort:{value:sort},_makeDirty:{value:makeQuery_dirty},_remove:{value:remove},_dirty:{value:false,writable:true}});return query;}var prototype_findAll=Ractive$findAll;function Ractive$findAll(selector,options){var liveQueries,query;if(!this.el){return [];}options = options || {};liveQueries = this._liveQueries; // Shortcut: if we're maintaining a live query with this\n\t// selector, we don't need to traverse the parallel DOM\n\tif(query = liveQueries[selector]){ // Either return the exact same query, or (if not live) a snapshot\n\treturn options && options.live?query:query.slice();}query = _makeQuery(this,selector,!!options.live,false); // Add this to the list of live queries Ractive needs to maintain,\n\t// if applicable\n\tif(query.live){liveQueries.push(selector);liveQueries[\"_\" + selector] = query;}this.fragment.findAll(selector,query);return query;}var prototype_findAllComponents=Ractive$findAllComponents;function Ractive$findAllComponents(selector,options){var liveQueries,query;options = options || {};liveQueries = this._liveComponentQueries; // Shortcut: if we're maintaining a live query with this\n\t// selector, we don't need to traverse the parallel DOM\n\tif(query = liveQueries[selector]){ // Either return the exact same query, or (if not live) a snapshot\n\treturn options && options.live?query:query.slice();}query = _makeQuery(this,selector,!!options.live,true); // Add this to the list of live queries Ractive needs to maintain,\n\t// if applicable\n\tif(query.live){liveQueries.push(selector);liveQueries[\"_\" + selector] = query;}this.fragment.findAllComponents(selector,query);return query;}var prototype_findComponent=Ractive$findComponent;function Ractive$findComponent(selector){return this.fragment.findComponent(selector);}var findContainer=Ractive$findContainer;function Ractive$findContainer(selector){if(this.container){if(this.container.component && this.container.component.name === selector){return this.container;}else {return this.container.findContainer(selector);}}return null;}var findParent=Ractive$findParent;function Ractive$findParent(selector){if(this.parent){if(this.parent.component && this.parent.component.name === selector){return this.parent;}else {return this.parent.findParent(selector);}}return null;}var eventStack={enqueue:function enqueue(ractive,event){if(ractive.event){ractive._eventQueue = ractive._eventQueue || [];ractive._eventQueue.push(ractive.event);}ractive.event = event;},dequeue:function dequeue(ractive){if(ractive._eventQueue && ractive._eventQueue.length){ractive.event = ractive._eventQueue.pop();}else {delete ractive.event;}}};var shared_eventStack=eventStack;var shared_fireEvent=fireEvent;function fireEvent(ractive,eventName){var options=arguments[2] === undefined?{}:arguments[2];if(!eventName){return;}if(!options.event){options.event = {name:eventName, // until event not included as argument default\n\t_noArg:true};}else {options.event.name = eventName;}var eventNames=getKeypath(eventName).wildcardMatches();fireEventAs(ractive,eventNames,options.event,options.args,true);}function fireEventAs(ractive,eventNames,event,args){var initialFire=arguments[4] === undefined?false:arguments[4];var subscribers,i,bubble=true;shared_eventStack.enqueue(ractive,event);for(i = eventNames.length;i >= 0;i--) {subscribers = ractive._subs[eventNames[i]];if(subscribers){bubble = notifySubscribers(ractive,subscribers,event,args) && bubble;}}shared_eventStack.dequeue(ractive);if(ractive.parent && bubble){if(initialFire && ractive.component){var fullName=ractive.component.name + \".\" + eventNames[eventNames.length - 1];eventNames = getKeypath(fullName).wildcardMatches();if(event){event.component = ractive;}}fireEventAs(ractive.parent,eventNames,event,args);}}function notifySubscribers(ractive,subscribers,event,args){var originalEvent=null,stopEvent=false;if(event && !event._noArg){args = [event].concat(args);} // subscribers can be modified inflight, e.g. \"once\" functionality\n\t// so we need to copy to make sure everyone gets called\n\tsubscribers = subscribers.slice();for(var i=0,len=subscribers.length;i < len;i += 1) {if(subscribers[i].apply(ractive,args) === false){stopEvent = true;}}if(event && !event._noArg && stopEvent && (originalEvent = event.original)){originalEvent.preventDefault && originalEvent.preventDefault();originalEvent.stopPropagation && originalEvent.stopPropagation();}return !stopEvent;}var prototype_fire=Ractive$fire;function Ractive$fire(eventName){var options={args:Array.prototype.slice.call(arguments,1)};shared_fireEvent(this,eventName,options);}var prototype_get=Ractive$get;var options={capture:true, // top-level calls should be intercepted\n\tnoUnwrap:true, // wrapped values should NOT be unwrapped\n\tfullRootGet:true // root get should return mappings\n\t};function Ractive$get(keypath){var value;keypath = getKeypath(normalise(keypath));value = this.viewmodel.get(keypath,options); // Create inter-component binding, if necessary\n\tif(value === undefined && this.parent && !this.isolated){if(shared_resolveRef(this,keypath.str,this.component.parentFragment)){ // creates binding as side-effect, if appropriate\n\tvalue = this.viewmodel.get(keypath);}}return value;}var insert=Ractive$insert;var insertHook=new hooks_Hook(\"insert\");function Ractive$insert(target,anchor){if(!this.fragment.rendered){ // TODO create, and link to, documentation explaining this\n\tthrow new Error(\"The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.\");}target = getElement(target);anchor = getElement(anchor) || null;if(!target){throw new Error(\"You must specify a valid target to insert into\");}target.insertBefore(this.detach(),anchor);this.el = target;(target.__ractive_instances__ || (target.__ractive_instances__ = [])).push(this);this.detached = null;fireInsertHook(this);}function fireInsertHook(ractive){insertHook.fire(ractive);ractive.findAllComponents(\"*\").forEach(function(child){fireInsertHook(child.instance);});}var prototype_merge=Ractive$merge;function Ractive$merge(keypath,array,options){var currentArray,promise;keypath = getKeypath(normalise(keypath));currentArray = this.viewmodel.get(keypath); // If either the existing value or the new value isn't an\n\t// array, just do a regular set\n\tif(!isArray(currentArray) || !isArray(array)){return this.set(keypath,array,options && options.complete);} // Manage transitions\n\tpromise = global_runloop.start(this,true);this.viewmodel.merge(keypath,currentArray,array,options);global_runloop.end();return promise;}var Observer=function Observer(ractive,keypath,callback,options){this.root = ractive;this.keypath = keypath;this.callback = callback;this.defer = options.defer; // default to root as context, but allow it to be overridden\n\tthis.context = options && options.context?options.context:ractive;};Observer.prototype = {init:function init(immediate){this.value = this.root.get(this.keypath.str);if(immediate !== false){this.update();}else {this.oldValue = this.value;}},setValue:function setValue(value){var _this=this;if(!isEqual(value,this.value)){this.value = value;if(this.defer && this.ready){global_runloop.scheduleTask(function(){return _this.update();});}else {this.update();}}},update:function update(){ // Prevent infinite loops\n\tif(this.updating){return;}this.updating = true;this.callback.call(this.context,this.value,this.oldValue,this.keypath.str);this.oldValue = this.value;this.updating = false;}};var observe_Observer=Observer;var observe_getPattern=getPattern;function getPattern(ractive,pattern){var matchingKeypaths,values;matchingKeypaths = getMatchingKeypaths(ractive,pattern);values = {};matchingKeypaths.forEach(function(keypath){values[keypath.str] = ractive.get(keypath.str);});return values;}var PatternObserver,slice=Array.prototype.slice;PatternObserver = function(ractive,keypath,callback,options){this.root = ractive;this.callback = callback;this.defer = options.defer;this.keypath = keypath;this.regex = new RegExp(\"^\" + keypath.str.replace(/\\./g,\"\\\\.\").replace(/\\*/g,\"([^\\\\.]+)\") + \"$\");this.values = {};if(this.defer){this.proxies = [];} // default to root as context, but allow it to be overridden\n\tthis.context = options && options.context?options.context:ractive;};PatternObserver.prototype = {init:function init(immediate){var values,keypath;values = observe_getPattern(this.root,this.keypath);if(immediate !== false){for(keypath in values) {if(values.hasOwnProperty(keypath)){this.update(getKeypath(keypath));}}}else {this.values = values;}},update:function update(keypath){var _this=this;var values;if(keypath.isPattern){values = observe_getPattern(this.root,keypath);for(keypath in values) {if(values.hasOwnProperty(keypath)){this.update(getKeypath(keypath));}}return;} // special case - array mutation should not trigger `array.*`\n\t// pattern observer with `array.length`\n\tif(this.root.viewmodel.implicitChanges[keypath.str]){return;}if(this.defer && this.ready){global_runloop.scheduleTask(function(){return _this.getProxy(keypath).update();});return;}this.reallyUpdate(keypath);},reallyUpdate:function reallyUpdate(keypath){var keypathStr,value,keys,args;keypathStr = keypath.str;value = this.root.viewmodel.get(keypath); // Prevent infinite loops\n\tif(this.updating){this.values[keypathStr] = value;return;}this.updating = true;if(!isEqual(value,this.values[keypathStr]) || !this.ready){keys = slice.call(this.regex.exec(keypathStr),1);args = [value,this.values[keypathStr],keypathStr].concat(keys);this.values[keypathStr] = value;this.callback.apply(this.context,args);}this.updating = false;},getProxy:function getProxy(keypath){var _this=this;if(!this.proxies[keypath.str]){this.proxies[keypath.str] = {update:function update(){return _this.reallyUpdate(keypath);}};}return this.proxies[keypath.str];}};var observe_PatternObserver=PatternObserver;var observe_getObserverFacade=getObserverFacade;var emptyObject={};function getObserverFacade(ractive,keypath,callback,options){var observer,isPatternObserver,cancelled;keypath = getKeypath(normalise(keypath));options = options || emptyObject; // pattern observers are treated differently\n\tif(keypath.isPattern){observer = new observe_PatternObserver(ractive,keypath,callback,options);ractive.viewmodel.patternObservers.push(observer);isPatternObserver = true;}else {observer = new observe_Observer(ractive,keypath,callback,options);}observer.init(options.init);ractive.viewmodel.register(keypath,observer,isPatternObserver?\"patternObservers\":\"observers\"); // This flag allows observers to initialise even with undefined values\n\tobserver.ready = true;var facade={cancel:function cancel(){var index;if(cancelled){return;}if(isPatternObserver){index = ractive.viewmodel.patternObservers.indexOf(observer);ractive.viewmodel.patternObservers.splice(index,1);ractive.viewmodel.unregister(keypath,observer,\"patternObservers\");}else {ractive.viewmodel.unregister(keypath,observer,\"observers\");}cancelled = true;}};ractive._observers.push(facade);return facade;}var observe=Ractive$observe;function Ractive$observe(keypath,callback,options){var observers,map,keypaths,i; // Allow a map of keypaths to handlers\n\tif(isObject(keypath)){options = callback;map = keypath;observers = [];for(keypath in map) {if(map.hasOwnProperty(keypath)){callback = map[keypath];observers.push(this.observe(keypath,callback,options));}}return {cancel:function cancel(){while(observers.length) {observers.pop().cancel();}}};} // Allow `ractive.observe( callback )` - i.e. observe entire model\n\tif(typeof keypath === \"function\"){options = callback;callback = keypath;keypath = \"\";return observe_getObserverFacade(this,keypath,callback,options);}keypaths = keypath.split(\" \"); // Single keypath\n\tif(keypaths.length === 1){return observe_getObserverFacade(this,keypath,callback,options);} // Multiple space-separated keypaths\n\tobservers = [];i = keypaths.length;while(i--) {keypath = keypaths[i];if(keypath){observers.push(observe_getObserverFacade(this,keypath,callback,options));}}return {cancel:function cancel(){while(observers.length) {observers.pop().cancel();}}};}var observeOnce=Ractive$observeOnce;function Ractive$observeOnce(property,callback,options){var observer=this.observe(property,function(){callback.apply(this,arguments);observer.cancel();},{init:false,defer:options && options.defer});return observer;}var shared_trim=function shared_trim(str){return str.trim();};var notEmptyString=function notEmptyString(str){return str !== \"\";};var off=Ractive$off;function Ractive$off(eventName,callback){var _this=this;var eventNames; // if no arguments specified, remove all callbacks\n\tif(!eventName){ // TODO use this code instead, once the following issue has been resolved\n\t// in PhantomJS (tests are unpassable otherwise!)\n\t// https://github.com/ariya/phantomjs/issues/11856\n\t// defineProperty( this, '_subs', { value: create( null ), configurable: true });\n\tfor(eventName in this._subs) {delete this._subs[eventName];}}else { // Handle multiple space-separated event names\n\teventNames = eventName.split(\" \").map(shared_trim).filter(notEmptyString);eventNames.forEach(function(eventName){var subscribers,index; // If we have subscribers for this event...\n\tif(subscribers = _this._subs[eventName]){ // ...if a callback was specified, only remove that\n\tif(callback){index = subscribers.indexOf(callback);if(index !== -1){subscribers.splice(index,1);}} // ...otherwise remove all callbacks\n\telse {_this._subs[eventName] = [];}}});}return this;}var on=Ractive$on;function Ractive$on(eventName,callback){var _this=this;var listeners,n,eventNames; // allow mutliple listeners to be bound in one go\n\tif(typeof eventName === \"object\"){listeners = [];for(n in eventName) {if(eventName.hasOwnProperty(n)){listeners.push(this.on(n,eventName[n]));}}return {cancel:function cancel(){var listener;while(listener = listeners.pop()) {listener.cancel();}}};} // Handle multiple space-separated event names\n\teventNames = eventName.split(\" \").map(shared_trim).filter(notEmptyString);eventNames.forEach(function(eventName){(_this._subs[eventName] || (_this._subs[eventName] = [])).push(callback);});return {cancel:function cancel(){return _this.off(eventName,callback);}};}var once=Ractive$once;function Ractive$once(eventName,handler){var listener=this.on(eventName,function(){handler.apply(this,arguments);listener.cancel();}); // so we can still do listener.cancel() manually\n\treturn listener;} // This function takes an array, the name of a mutator method, and the\n\t// arguments to call that mutator method with, and returns an array that\n\t// maps the old indices to their new indices.\n\t// So if you had something like this...\n\t//\n\t//     array = [ 'a', 'b', 'c', 'd' ];\n\t//     array.push( 'e' );\n\t//\n\t// ...you'd get `[ 0, 1, 2, 3 ]` - in other words, none of the old indices\n\t// have changed. If you then did this...\n\t//\n\t//     array.unshift( 'z' );\n\t//\n\t// ...the indices would be `[ 1, 2, 3, 4, 5 ]` - every item has been moved\n\t// one higher to make room for the 'z'. If you removed an item, the new index\n\t// would be -1...\n\t//\n\t//     array.splice( 2, 2 );\n\t//\n\t// ...this would result in [ 0, 1, -1, -1, 2, 3 ].\n\t//\n\t// This information is used to enable fast, non-destructive shuffling of list\n\t// sections when you do e.g. `ractive.splice( 'items', 2, 2 );\n\tvar shared_getNewIndices=getNewIndices;function getNewIndices(array,methodName,args){var spliceArguments,len,newIndices=[],removeStart,removeEnd,balance,i;spliceArguments = getSpliceEquivalent(array,methodName,args);if(!spliceArguments){return null; // TODO support reverse and sort?\n\t}len = array.length;balance = spliceArguments.length - 2 - spliceArguments[1];removeStart = Math.min(len,spliceArguments[0]);removeEnd = removeStart + spliceArguments[1];for(i = 0;i < removeStart;i += 1) {newIndices.push(i);}for(;i < removeEnd;i += 1) {newIndices.push(-1);}for(;i < len;i += 1) {newIndices.push(i + balance);} // there is a net shift for the rest of the array starting with index + balance\n\tif(balance !== 0){newIndices.touchedFrom = spliceArguments[0];}else {newIndices.touchedFrom = array.length;}return newIndices;} // The pop, push, shift an unshift methods can all be represented\n\t// as an equivalent splice\n\tfunction getSpliceEquivalent(array,methodName,args){switch(methodName){case \"splice\":if(args[0] !== undefined && args[0] < 0){args[0] = array.length + Math.max(args[0],-array.length);}while(args.length < 2) {args.push(0);} // ensure we only remove elements that exist\n\targs[1] = Math.min(args[1],array.length - args[0]);return args;case \"sort\":case \"reverse\":return null;case \"pop\":if(array.length){return [array.length - 1,1];}return [0,0];case \"push\":return [array.length,0].concat(args);case \"shift\":return [0,array.length?1:0];case \"unshift\":return [0,0].concat(args);}}var arrayProto=Array.prototype;var makeArrayMethod=function makeArrayMethod(methodName){return function(keypath){for(var _len=arguments.length,args=Array(_len > 1?_len - 1:0),_key=1;_key < _len;_key++) {args[_key - 1] = arguments[_key];}var array,newIndices=[],len,promise,result;keypath = getKeypath(normalise(keypath));array = this.viewmodel.get(keypath);len = array.length;if(!isArray(array)){throw new Error(\"Called ractive.\" + methodName + \"('\" + keypath.str + \"'), but '\" + keypath.str + \"' does not refer to an array\");}newIndices = shared_getNewIndices(array,methodName,args);result = arrayProto[methodName].apply(array,args);promise = global_runloop.start(this,true).then(function(){return result;});if(!!newIndices){this.viewmodel.smartUpdate(keypath,array,newIndices);}else {this.viewmodel.mark(keypath);}global_runloop.end();return promise;};};var pop=makeArrayMethod(\"pop\");var push=makeArrayMethod(\"push\");var css,update,styleElement,head,styleSheet,inDom,global_css__prefix=\"/* Ractive.js component styles */\\n\",styles=[],dirty=false;if(!isClient){ // TODO handle encapsulated CSS in server-rendered HTML!\n\tcss = {add:noop,apply:noop};}else {styleElement = document.createElement(\"style\");styleElement.type = \"text/css\";head = document.getElementsByTagName(\"head\")[0];inDom = false; // Internet Exploder won't let you use styleSheet.innerHTML - we have to\n\t// use styleSheet.cssText instead\n\tstyleSheet = styleElement.styleSheet;update = function(){var css=global_css__prefix + styles.map(function(s){return \"\\n/* {\" + s.id + \"} */\\n\" + s.styles;}).join(\"\\n\");if(styleSheet){styleSheet.cssText = css;}else {styleElement.innerHTML = css;}if(!inDom){head.appendChild(styleElement);inDom = true;}};css = {add:function add(s){styles.push(s);dirty = true;},apply:function apply(){if(dirty){update();dirty = false;}}};}var global_css=css;var prototype_render=Ractive$render;var renderHook=new hooks_Hook(\"render\"),completeHook=new hooks_Hook(\"complete\");function Ractive$render(target,anchor){var _this=this;var promise,instances,transitionsEnabled; // if `noIntro` is `true`, temporarily disable transitions\n\ttransitionsEnabled = this.transitionsEnabled;if(this.noIntro){this.transitionsEnabled = false;}promise = global_runloop.start(this,true);global_runloop.scheduleTask(function(){return renderHook.fire(_this);},true);if(this.fragment.rendered){throw new Error(\"You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first\");}target = getElement(target) || this.el;anchor = getElement(anchor) || this.anchor;this.el = target;this.anchor = anchor;if(!this.append && target){ // Teardown any existing instances *before* trying to set up the new one -\n\t// avoids certain weird bugs\n\tvar others=target.__ractive_instances__;if(others && others.length){removeOtherInstances(others);} // make sure we are the only occupants\n\ttarget.innerHTML = \"\"; // TODO is this quicker than removeChild? Initial research inconclusive\n\t}if(this.cssId){ // ensure encapsulated CSS is up-to-date\n\tglobal_css.apply();}if(target){if(!(instances = target.__ractive_instances__)){target.__ractive_instances__ = [this];}else {instances.push(this);}if(anchor){target.insertBefore(this.fragment.render(),anchor);}else {target.appendChild(this.fragment.render());}}global_runloop.end();this.transitionsEnabled = transitionsEnabled;return promise.then(function(){return completeHook.fire(_this);});}function removeOtherInstances(others){others.splice(0,others.length).forEach(teardown);}var adaptConfigurator={extend:function extend(Parent,proto,options){proto.adapt = custom_adapt__combine(proto.adapt,ensureArray(options.adapt));},init:function init(){}};var custom_adapt=adaptConfigurator;function custom_adapt__combine(a,b){var c=a.slice(),i=b.length;while(i--) {if(! ~c.indexOf(b[i])){c.push(b[i]);}}return c;}var transform=transformCss;var selectorsPattern=/(?:^|\\})?\\s*([^\\{\\}]+)\\s*\\{/g,commentsPattern=/\\/\\*.*?\\*\\//g,selectorUnitPattern=/((?:(?:\\[[^\\]+]\\])|(?:[^\\s\\+\\>\\~:]))+)((?::[^\\s\\+\\>\\~\\(]+(?:\\([^\\)]+\\))?)?\\s*[\\s\\+\\>\\~]?)\\s*/g,mediaQueryPattern=/^@media/,dataRvcGuidPattern=/\\[data-ractive-css~=\"\\{[a-z0-9-]+\\}\"]/g;function transformCss(css,id){var transformed,dataAttr,addGuid;dataAttr = \"[data-ractive-css~=\\\"{\" + id + \"}\\\"]\";addGuid = function(selector){var selectorUnits,match,unit,base,prepended,appended,i,transformed=[];selectorUnits = [];while(match = selectorUnitPattern.exec(selector)) {selectorUnits.push({str:match[0],base:match[1],modifiers:match[2]});} // For each simple selector within the selector, we need to create a version\n\t// that a) combines with the id, and b) is inside the id\n\tbase = selectorUnits.map(extractString);i = selectorUnits.length;while(i--) {appended = base.slice(); // Pseudo-selectors should go after the attribute selector\n\tunit = selectorUnits[i];appended[i] = unit.base + dataAttr + unit.modifiers || \"\";prepended = base.slice();prepended[i] = dataAttr + \" \" + prepended[i];transformed.push(appended.join(\" \"),prepended.join(\" \"));}return transformed.join(\", \");};if(dataRvcGuidPattern.test(css)){transformed = css.replace(dataRvcGuidPattern,dataAttr);}else {transformed = css.replace(commentsPattern,\"\").replace(selectorsPattern,function(match,$1){var selectors,transformed; // don't transform media queries!\n\tif(mediaQueryPattern.test($1))return match;selectors = $1.split(\",\").map(trim);transformed = selectors.map(addGuid).join(\", \") + \" \";return match.replace($1,transformed);});}return transformed;}function trim(str){if(str.trim){return str.trim();}return str.replace(/^\\s+/,\"\").replace(/\\s+$/,\"\");}function extractString(unit){return unit.str;}var css_css__uid=1;var cssConfigurator={name:\"css\",extend:function extend(Parent,proto,options){if(options.css){var id=css_css__uid++;var styles=options.noCssTransform?options.css:transform(options.css,id);proto.cssId = id;global_css.add({id:id,styles:styles});}},init:function init(){}};var css_css=cssConfigurator;function validate(data){ // Warn if userOptions.data is a non-POJO\n\tif(data && data.constructor !== Object){if(typeof data === \"function\"){}else if(typeof data !== \"object\"){fatal(\"data option must be an object or a function, `\" + data + \"` is not valid\");}else {warnIfDebug(\"If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged\");}}}var dataConfigurator={name:\"data\",extend:function extend(Parent,proto,options){var key=undefined,value=undefined; // check for non-primitives, which could cause mutation-related bugs\n\tif(options.data && isObject(options.data)){for(key in options.data) {value = options.data[key];if(value && typeof value === \"object\"){if(isObject(value) || isArray(value)){warnIfDebug(\"Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\\n\\n  // this...\\n  data: function () {\\n    return {\\n      myObject: {}\\n    };\\n  })\\n\\n  // instead of this:\\n  data: {\\n    myObject: {}\\n  }\");}}}}proto.data = custom_data__combine(proto.data,options.data);},init:function init(Parent,ractive,options){var result=custom_data__combine(Parent.prototype.data,options.data);if(typeof result === \"function\"){result = result.call(ractive);}return result || {};},reset:function reset(ractive){var result=this.init(ractive.constructor,ractive,ractive.viewmodel);ractive.viewmodel.reset(result);return true;}};var custom_data=dataConfigurator;function custom_data__combine(parentValue,childValue){validate(childValue);var parentIsFn=typeof parentValue === \"function\";var childIsFn=typeof childValue === \"function\"; // Very important, otherwise child instance can become\n\t// the default data object on Ractive or a component.\n\t// then ractive.set() ends up setting on the prototype!\n\tif(!childValue && !parentIsFn){childValue = {};} // Fast path, where we just need to copy properties from\n\t// parent to child\n\tif(!parentIsFn && !childIsFn){return fromProperties(childValue,parentValue);}return function(){var child=childIsFn?callDataFunction(childValue,this):childValue;var parent=parentIsFn?callDataFunction(parentValue,this):parentValue;return fromProperties(child,parent);};}function callDataFunction(fn,context){var data=fn.call(context);if(!data)return;if(typeof data !== \"object\"){fatal(\"Data function must return an object\");}if(data.constructor !== Object){warnOnceIfDebug(\"Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged\");}return data;}function fromProperties(primary,secondary){if(primary && secondary){for(var key in secondary) {if(!(key in primary)){primary[key] = secondary[key];}}return primary;}return primary || secondary;} // TODO do we need to support this in the new Ractive() case?\n\tvar Parser,ParseError,parse_Parser__leadingWhitespace=/^\\s+/;ParseError = function(message){this.name = \"ParseError\";this.message = message;try{throw new Error(message);}catch(e) {this.stack = e.stack;}};ParseError.prototype = Error.prototype;Parser = function(str,options){var items,item,lineStart=0;this.str = str;this.options = options || {};this.pos = 0;this.lines = this.str.split(\"\\n\");this.lineEnds = this.lines.map(function(line){var lineEnd=lineStart + line.length + 1; // +1 for the newline\n\tlineStart = lineEnd;return lineEnd;},0); // Custom init logic\n\tif(this.init)this.init(str,options);items = [];while(this.pos < this.str.length && (item = this.read())) {items.push(item);}this.leftover = this.remaining();this.result = this.postProcess?this.postProcess(items,options):items;};Parser.prototype = {read:function read(converters){var pos,i,len,item;if(!converters)converters = this.converters;pos = this.pos;len = converters.length;for(i = 0;i < len;i += 1) {this.pos = pos; // reset for each attempt\n\tif(item = converters[i](this)){return item;}}return null;},getLinePos:function getLinePos(char){var lineNum=0,lineStart=0,columnNum;while(char >= this.lineEnds[lineNum]) {lineStart = this.lineEnds[lineNum];lineNum += 1;}columnNum = char - lineStart;return [lineNum + 1,columnNum + 1,char]; // line/col should be one-based, not zero-based!\n\t},error:function error(message){var pos=this.getLinePos(this.pos);var lineNum=pos[0];var columnNum=pos[1];var line=this.lines[pos[0] - 1];var numTabs=0;var annotation=line.replace(/\\t/g,function(match,char){if(char < pos[1]){numTabs += 1;}return \"  \";}) + \"\\n\" + new Array(pos[1] + numTabs).join(\" \") + \"^----\";var error=new ParseError(\"\" + message + \" at line \" + lineNum + \" character \" + columnNum + \":\\n\" + annotation);error.line = pos[0];error.character = pos[1];error.shortMessage = message;throw error;},matchString:function matchString(string){if(this.str.substr(this.pos,string.length) === string){this.pos += string.length;return string;}},matchPattern:function matchPattern(pattern){var match;if(match = pattern.exec(this.remaining())){this.pos += match[0].length;return match[1] || match[0];}},allowWhitespace:function allowWhitespace(){this.matchPattern(parse_Parser__leadingWhitespace);},remaining:function remaining(){return this.str.substring(this.pos);},nextChar:function nextChar(){return this.str.charAt(this.pos);}};Parser.extend = function(proto){var Parent=this,Child,key;Child = function(str,options){Parser.call(this,str,options);};Child.prototype = create(Parent.prototype);for(key in proto) {if(hasOwn.call(proto,key)){Child.prototype[key] = proto[key];}}Child.extend = Parser.extend;return Child;};var parse_Parser=Parser;var TEXT=1;var INTERPOLATOR=2;var TRIPLE=3;var SECTION=4;var INVERTED=5;var CLOSING=6;var ELEMENT=7;var PARTIAL=8;var COMMENT=9;var DELIMCHANGE=10;var ATTRIBUTE=13;var CLOSING_TAG=14;var COMPONENT=15;var YIELDER=16;var INLINE_PARTIAL=17;var DOCTYPE=18;var NUMBER_LITERAL=20;var STRING_LITERAL=21;var ARRAY_LITERAL=22;var OBJECT_LITERAL=23;var BOOLEAN_LITERAL=24;var REGEXP_LITERAL=25;var GLOBAL=26;var KEY_VALUE_PAIR=27;var REFERENCE=30;var REFINEMENT=31;var MEMBER=32;var PREFIX_OPERATOR=33;var BRACKETED=34;var CONDITIONAL=35;var INFIX_OPERATOR=36;var INVOCATION=40;var SECTION_IF=50;var SECTION_UNLESS=51;var SECTION_EACH=52;var SECTION_WITH=53;var SECTION_IF_WITH=54;var ELSE=60;var ELSEIF=61;var mustache_readDelimiterChange=readDelimiterChange;var delimiterChangePattern=/^[^\\s=]+/,whitespacePattern=/^\\s+/;function readDelimiterChange(parser){var start,opening,closing;if(!parser.matchString(\"=\")){return null;}start = parser.pos; // allow whitespace before new opening delimiter\n\tparser.allowWhitespace();opening = parser.matchPattern(delimiterChangePattern);if(!opening){parser.pos = start;return null;} // allow whitespace (in fact, it's necessary...)\n\tif(!parser.matchPattern(whitespacePattern)){return null;}closing = parser.matchPattern(delimiterChangePattern);if(!closing){parser.pos = start;return null;} // allow whitespace before closing '='\n\tparser.allowWhitespace();if(!parser.matchString(\"=\")){parser.pos = start;return null;}return [opening,closing];}var readRegexpLiteral=readRegexpLiteral__readNumberLiteral;var regexpPattern=/^(\\/(?:[^\\n\\r\\u2028\\u2029/\\\\[]|\\\\.|\\[(?:[^\\n\\r\\u2028\\u2029\\]\\\\]|\\\\.)*])+\\/(?:([gimuy])(?![a-z]*\\2))*(?![a-zA-Z_$0-9]))/;function readRegexpLiteral__readNumberLiteral(parser){var result;if(result = parser.matchPattern(regexpPattern)){return {t:REGEXP_LITERAL,v:result};}return null;}var converters_readMustache=readMustache;var delimiterChangeToken={t:DELIMCHANGE,exclude:true};function readMustache(parser){var mustache,i; // If we're inside a <script> or <style> tag, and we're not\n\t// interpolating, bug out\n\tif(parser.interpolate[parser.inside] === false){return null;}for(i = 0;i < parser.tags.length;i += 1) {if(mustache = readMustacheOfType(parser,parser.tags[i])){return mustache;}}}function readMustacheOfType(parser,tag){var start,mustache,reader,i;start = parser.pos;if(parser.matchString(\"\\\\\" + tag.open)){if(start === 0 || parser.str[start - 1] !== \"\\\\\"){return tag.open;}}else if(!parser.matchString(tag.open)){return null;} // delimiter change?\n\tif(mustache = mustache_readDelimiterChange(parser)){ // find closing delimiter or abort...\n\tif(!parser.matchString(tag.close)){return null;} // ...then make the switch\n\ttag.open = mustache[0];tag.close = mustache[1];parser.sortMustacheTags();return delimiterChangeToken;}parser.allowWhitespace(); // illegal section closer\n\tif(parser.matchString(\"/\")){parser.pos -= 1;var rewind=parser.pos;if(!readRegexpLiteral(parser)){parser.pos = rewind - tag.close.length;parser.error(\"Attempted to close a section that wasn't open\");}else {parser.pos = rewind;}}for(i = 0;i < tag.readers.length;i += 1) {reader = tag.readers[i];if(mustache = reader(parser,tag)){if(tag.isStatic){mustache.s = true; // TODO make this `1` instead - more compact\n\t}if(parser.includeLinePositions){mustache.p = parser.getLinePos(start);}return mustache;}}parser.pos = start;return null;}var expectedExpression=\"Expected a JavaScript expression\";var expectedParen=\"Expected closing paren\";var literal_readNumberLiteral=literal_readNumberLiteral__readNumberLiteral;var literal_readNumberLiteral__numberPattern=/^(?:[+-]?)0*(?:(?:(?:[1-9]\\d*)?\\.\\d+)|(?:(?:0|[1-9]\\d*)\\.)|(?:0|[1-9]\\d*))(?:[eE][+-]?\\d+)?/;function literal_readNumberLiteral__readNumberLiteral(parser){var result;if(result = parser.matchPattern(literal_readNumberLiteral__numberPattern)){return {t:NUMBER_LITERAL,v:result};}return null;}var literal_readBooleanLiteral=readBooleanLiteral;function readBooleanLiteral(parser){var remaining=parser.remaining();if(remaining.substr(0,4) === \"true\"){parser.pos += 4;return {t:BOOLEAN_LITERAL,v:\"true\"};}if(remaining.substr(0,5) === \"false\"){parser.pos += 5;return {t:BOOLEAN_LITERAL,v:\"false\"};}return null;}var stringMiddlePattern,escapeSequencePattern,lineContinuationPattern; // Match one or more characters until: \", ', \\, or EOL/EOF.\n\t// EOL/EOF is written as (?!.) (meaning there's no non-newline char next).\n\tstringMiddlePattern = /^(?=.)[^\"'\\\\]+?(?:(?!.)|(?=[\"'\\\\]))/; // Match one escape sequence, including the backslash.\n\tescapeSequencePattern = /^\\\\(?:['\"\\\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/; // Match one ES5 line continuation (backslash + line terminator).\n\tlineContinuationPattern = /^\\\\(?:\\r\\n|[\\u000A\\u000D\\u2028\\u2029])/; // Helper for defining getDoubleQuotedString and getSingleQuotedString.\n\tvar makeQuotedStringMatcher=function makeQuotedStringMatcher(okQuote){return function(parser){var start,literal,done,next;start = parser.pos;literal = \"\\\"\";done = false;while(!done) {next = parser.matchPattern(stringMiddlePattern) || parser.matchPattern(escapeSequencePattern) || parser.matchString(okQuote);if(next){if(next === \"\\\"\"){literal += \"\\\\\\\"\";}else if(next === \"\\\\'\"){literal += \"'\";}else {literal += next;}}else {next = parser.matchPattern(lineContinuationPattern);if(next){ // convert \\(newline-like) into a \\u escape, which is allowed in JSON\n\tliteral += '\\\\u' + (\"000\" + next.charCodeAt(1).toString(16)).slice(-4);}else {done = true;}}}literal += \"\\\"\"; // use JSON.parse to interpret escapes\n\treturn JSON.parse(literal);};};var getSingleQuotedString=makeQuotedStringMatcher(\"\\\"\");var getDoubleQuotedString=makeQuotedStringMatcher(\"'\");var readStringLiteral=function readStringLiteral(parser){var start,string;start = parser.pos;if(parser.matchString(\"\\\"\")){string = getDoubleQuotedString(parser);if(!parser.matchString(\"\\\"\")){parser.pos = start;return null;}return {t:STRING_LITERAL,v:string};}if(parser.matchString(\"'\")){string = getSingleQuotedString(parser);if(!parser.matchString(\"'\")){parser.pos = start;return null;}return {t:STRING_LITERAL,v:string};}return null;};var patterns__name=/^[a-zA-Z_$][a-zA-Z_$0-9]*/; // http://mathiasbynens.be/notes/javascript-properties\n\t// can be any name, string literal, or number literal\n\tvar shared_readKey=readKey;var identifier=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function readKey(parser){var token;if(token = readStringLiteral(parser)){return identifier.test(token.v)?token.v:\"\\\"\" + token.v.replace(/\"/g,\"\\\\\\\"\") + \"\\\"\";}if(token = literal_readNumberLiteral(parser)){return token.v;}if(token = parser.matchPattern(patterns__name)){return token;}}var keyValuePair=readKeyValuePair;function readKeyValuePair(parser){var start,key,value;start = parser.pos; // allow whitespace between '{' and key\n\tparser.allowWhitespace();key = shared_readKey(parser);if(key === null){parser.pos = start;return null;} // allow whitespace between key and ':'\n\tparser.allowWhitespace(); // next character must be ':'\n\tif(!parser.matchString(\":\")){parser.pos = start;return null;} // allow whitespace between ':' and value\n\tparser.allowWhitespace(); // next expression must be a, well... expression\n\tvalue = converters_readExpression(parser);if(value === null){parser.pos = start;return null;}return {t:KEY_VALUE_PAIR,k:key,v:value};}var objectLiteral_keyValuePairs=readKeyValuePairs;function readKeyValuePairs(parser){var start,pairs,pair,keyValuePairs;start = parser.pos;pair = keyValuePair(parser);if(pair === null){return null;}pairs = [pair];if(parser.matchString(\",\")){keyValuePairs = readKeyValuePairs(parser);if(!keyValuePairs){parser.pos = start;return null;}return pairs.concat(keyValuePairs);}return pairs;}var readObjectLiteral=function readObjectLiteral(parser){var start,keyValuePairs;start = parser.pos; // allow whitespace\n\tparser.allowWhitespace();if(!parser.matchString(\"{\")){parser.pos = start;return null;}keyValuePairs = objectLiteral_keyValuePairs(parser); // allow whitespace between final value and '}'\n\tparser.allowWhitespace();if(!parser.matchString(\"}\")){parser.pos = start;return null;}return {t:OBJECT_LITERAL,m:keyValuePairs};};var shared_readExpressionList=readExpressionList;function readExpressionList(parser){var start,expressions,expr,next;start = parser.pos;parser.allowWhitespace();expr = converters_readExpression(parser);if(expr === null){return null;}expressions = [expr]; // allow whitespace between expression and ','\n\tparser.allowWhitespace();if(parser.matchString(\",\")){next = readExpressionList(parser);if(next === null){parser.error(expectedExpression);}next.forEach(append);}function append(expression){expressions.push(expression);}return expressions;}var readArrayLiteral=function readArrayLiteral(parser){var start,expressionList;start = parser.pos; // allow whitespace before '['\n\tparser.allowWhitespace();if(!parser.matchString(\"[\")){parser.pos = start;return null;}expressionList = shared_readExpressionList(parser);if(!parser.matchString(\"]\")){parser.pos = start;return null;}return {t:ARRAY_LITERAL,m:expressionList};};var primary_readLiteral=readLiteral;function readLiteral(parser){return literal_readNumberLiteral(parser) || literal_readBooleanLiteral(parser) || readStringLiteral(parser) || readObjectLiteral(parser) || readArrayLiteral(parser) || readRegexpLiteral(parser);}var primary_readReference=readReference;var prefixPattern=/^(?:~\\/|(?:\\.\\.\\/)+|\\.\\/(?:\\.\\.\\/)*|\\.)/,globals,keywords; // if a reference is a browser global, we don't deference it later, so it needs special treatment\n\tglobals = /^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\\b/; // keywords are not valid references, with the exception of `this`\n\tkeywords = /^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var legalReference=/^[a-zA-Z$_0-9]+(?:(?:\\.[a-zA-Z$_0-9]+)|(?:\\[[0-9]+\\]))*/;var relaxedName=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/;function readReference(parser){var startPos,prefix,name,global,reference,lastDotIndex;startPos = parser.pos;name = parser.matchPattern(/^@(?:keypath|index|key)/);if(!name){prefix = parser.matchPattern(prefixPattern) || \"\";name = !prefix && parser.relaxedNames && parser.matchPattern(relaxedName) || parser.matchPattern(legalReference);if(!name && prefix === \".\"){prefix = \"\";name = \".\";}}if(!name){return null;} // bug out if it's a keyword (exception for ancestor/restricted refs - see https://github.com/ractivejs/ractive/issues/1497)\n\tif(!prefix && !parser.relaxedNames && keywords.test(name)){parser.pos = startPos;return null;} // if this is a browser global, stop here\n\tif(!prefix && globals.test(name)){global = globals.exec(name)[0];parser.pos = startPos + global.length;return {t:GLOBAL,v:global};}reference = (prefix || \"\") + normalise(name);if(parser.matchString(\"(\")){ // if this is a method invocation (as opposed to a function) we need\n\t// to strip the method name from the reference combo, else the context\n\t// will be wrong\n\tlastDotIndex = reference.lastIndexOf(\".\");if(lastDotIndex !== -1){reference = reference.substr(0,lastDotIndex);parser.pos = startPos + reference.length;}else {parser.pos -= 1;}}return {t:REFERENCE,n:reference.replace(/^this\\./,\"./\").replace(/^this$/,\".\")};}var primary_readBracketedExpression=readBracketedExpression;function readBracketedExpression(parser){var start,expr;start = parser.pos;if(!parser.matchString(\"(\")){return null;}parser.allowWhitespace();expr = converters_readExpression(parser);if(!expr){parser.error(expectedExpression);}parser.allowWhitespace();if(!parser.matchString(\")\")){parser.error(expectedParen);}return {t:BRACKETED,x:expr};}var readPrimary=function readPrimary(parser){return primary_readLiteral(parser) || primary_readReference(parser) || primary_readBracketedExpression(parser);};var shared_readRefinement=readRefinement;function readRefinement(parser){var start,name,expr;start = parser.pos;parser.allowWhitespace(); // \".\" name\n\tif(parser.matchString(\".\")){parser.allowWhitespace();if(name = parser.matchPattern(patterns__name)){return {t:REFINEMENT,n:name};}parser.error(\"Expected a property name\");} // \"[\" expression \"]\"\n\tif(parser.matchString(\"[\")){parser.allowWhitespace();expr = converters_readExpression(parser);if(!expr){parser.error(expectedExpression);}parser.allowWhitespace();if(!parser.matchString(\"]\")){parser.error(\"Expected ']'\");}return {t:REFINEMENT,x:expr};}return null;}var readMemberOrInvocation=function readMemberOrInvocation(parser){var current,expression,refinement,expressionList;expression = readPrimary(parser);if(!expression){return null;}while(expression) {current = parser.pos;if(refinement = shared_readRefinement(parser)){expression = {t:MEMBER,x:expression,r:refinement};}else if(parser.matchString(\"(\")){parser.allowWhitespace();expressionList = shared_readExpressionList(parser);parser.allowWhitespace();if(!parser.matchString(\")\")){parser.error(expectedParen);}expression = {t:INVOCATION,x:expression};if(expressionList){expression.o = expressionList;}}else {break;}}return expression;};var readTypeOf,makePrefixSequenceMatcher;makePrefixSequenceMatcher = function(symbol,fallthrough){return function(parser){var expression;if(expression = fallthrough(parser)){return expression;}if(!parser.matchString(symbol)){return null;}parser.allowWhitespace();expression = converters_readExpression(parser);if(!expression){parser.error(expectedExpression);}return {s:symbol,o:expression,t:PREFIX_OPERATOR};};}; // create all prefix sequence matchers, return readTypeOf\n\t(function(){var i,len,matcher,prefixOperators,fallthrough;prefixOperators = \"! ~ + - typeof\".split(\" \");fallthrough = readMemberOrInvocation;for(i = 0,len = prefixOperators.length;i < len;i += 1) {matcher = makePrefixSequenceMatcher(prefixOperators[i],fallthrough);fallthrough = matcher;} // typeof operator is higher precedence than multiplication, so provides the\n\t// fallthrough for the multiplication sequence matcher we're about to create\n\t// (we're skipping void and delete)\n\treadTypeOf = fallthrough;})();var readTypeof=readTypeOf;var readLogicalOr,makeInfixSequenceMatcher;makeInfixSequenceMatcher = function(symbol,fallthrough){return function(parser){var start,left,right;left = fallthrough(parser);if(!left){return null;} // Loop to handle left-recursion in a case like `a * b * c` and produce\n\t// left association, i.e. `(a * b) * c`.  The matcher can't call itself\n\t// to parse `left` because that would be infinite regress.\n\twhile(true) {start = parser.pos;parser.allowWhitespace();if(!parser.matchString(symbol)){parser.pos = start;return left;} // special case - in operator must not be followed by [a-zA-Z_$0-9]\n\tif(symbol === \"in\" && /[a-zA-Z_$0-9]/.test(parser.remaining().charAt(0))){parser.pos = start;return left;}parser.allowWhitespace(); // right operand must also consist of only higher-precedence operators\n\tright = fallthrough(parser);if(!right){parser.pos = start;return left;}left = {t:INFIX_OPERATOR,s:symbol,o:[left,right]}; // Loop back around.  If we don't see another occurrence of the symbol,\n\t// we'll return left.\n\t}};}; // create all infix sequence matchers, and return readLogicalOr\n\t(function(){var i,len,matcher,infixOperators,fallthrough; // All the infix operators on order of precedence (source: https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)\n\t// Each sequence matcher will initially fall through to its higher precedence\n\t// neighbour, and only attempt to match if one of the higher precedence operators\n\t// (or, ultimately, a literal, reference, or bracketed expression) already matched\n\tinfixOperators = \"* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||\".split(\" \"); // A typeof operator is higher precedence than multiplication\n\tfallthrough = readTypeof;for(i = 0,len = infixOperators.length;i < len;i += 1) {matcher = makeInfixSequenceMatcher(infixOperators[i],fallthrough);fallthrough = matcher;} // Logical OR is the fallthrough for the conditional matcher\n\treadLogicalOr = fallthrough;})();var expressions_readLogicalOr=readLogicalOr; // The conditional operator is the lowest precedence operator, so we start here\n\tvar readConditional=getConditional;function getConditional(parser){var start,expression,ifTrue,ifFalse;expression = expressions_readLogicalOr(parser);if(!expression){return null;}start = parser.pos;parser.allowWhitespace();if(!parser.matchString(\"?\")){parser.pos = start;return expression;}parser.allowWhitespace();ifTrue = converters_readExpression(parser);if(!ifTrue){parser.error(expectedExpression);}parser.allowWhitespace();if(!parser.matchString(\":\")){parser.error(\"Expected \\\":\\\"\");}parser.allowWhitespace();ifFalse = converters_readExpression(parser);if(!ifFalse){parser.error(expectedExpression);}return {t:CONDITIONAL,o:[expression,ifTrue,ifFalse]};}var converters_readExpression=readExpression;function readExpression(parser){ // The conditional operator is the lowest precedence operator (except yield,\n\t// assignment operators, and commas, none of which are supported), so we\n\t// start there. If it doesn't match, it 'falls through' to progressively\n\t// higher precedence operators, until it eventually matches (or fails to\n\t// match) a 'primary' - a literal or a reference. This way, the abstract syntax\n\t// tree has everything in its proper place, i.e. 2 + 3 * 4 === 14, not 20.\n\treturn readConditional(parser);}var utils_flattenExpression=flattenExpression;function flattenExpression(expression){var refs;extractRefs(expression,refs = []);return {r:refs,s:stringify(expression)};function stringify(node){switch(node.t){case BOOLEAN_LITERAL:case GLOBAL:case NUMBER_LITERAL:case REGEXP_LITERAL:return node.v;case STRING_LITERAL:return JSON.stringify(String(node.v));case ARRAY_LITERAL:return \"[\" + (node.m?node.m.map(stringify).join(\",\"):\"\") + \"]\";case OBJECT_LITERAL:return \"{\" + (node.m?node.m.map(stringify).join(\",\"):\"\") + \"}\";case KEY_VALUE_PAIR:return node.k + \":\" + stringify(node.v);case PREFIX_OPERATOR:return (node.s === \"typeof\"?\"typeof \":node.s) + stringify(node.o);case INFIX_OPERATOR:return stringify(node.o[0]) + (node.s.substr(0,2) === \"in\"?\" \" + node.s + \" \":node.s) + stringify(node.o[1]);case INVOCATION:return stringify(node.x) + \"(\" + (node.o?node.o.map(stringify).join(\",\"):\"\") + \")\";case BRACKETED:return \"(\" + stringify(node.x) + \")\";case MEMBER:return stringify(node.x) + stringify(node.r);case REFINEMENT:return node.n?\".\" + node.n:\"[\" + stringify(node.x) + \"]\";case CONDITIONAL:return stringify(node.o[0]) + \"?\" + stringify(node.o[1]) + \":\" + stringify(node.o[2]);case REFERENCE:return \"_\" + refs.indexOf(node.n);default:throw new Error(\"Expected legal JavaScript\");}}} // TODO maybe refactor this?\n\tfunction extractRefs(node,refs){var i,list;if(node.t === REFERENCE){if(refs.indexOf(node.n) === -1){refs.unshift(node.n);}}list = node.o || node.m;if(list){if(isObject(list)){extractRefs(list,refs);}else {i = list.length;while(i--) {extractRefs(list[i],refs);}}}if(node.x){extractRefs(node.x,refs);}if(node.r){extractRefs(node.r,refs);}if(node.v){extractRefs(node.v,refs);}}var utils_refineExpression=refineExpression;var arrayMemberPattern=/^[0-9][1-9]*$/;function refineExpression(expression,mustache){var referenceExpression;if(expression){while(expression.t === BRACKETED && expression.x) {expression = expression.x;} // special case - integers should be treated as array members references,\n\t// rather than as expressions in their own right\n\tif(expression.t === REFERENCE){mustache.r = expression.n;}else {if(expression.t === NUMBER_LITERAL && arrayMemberPattern.test(expression.v)){mustache.r = expression.v;}else if(referenceExpression = getReferenceExpression(expression)){mustache.rx = referenceExpression;}else {mustache.x = utils_flattenExpression(expression);}}return mustache;}} // TODO refactor this! it's bewildering\n\tfunction getReferenceExpression(expression){var members=[],refinement;while(expression.t === MEMBER && expression.r.t === REFINEMENT) {refinement = expression.r;if(refinement.x){if(refinement.x.t === REFERENCE){members.unshift(refinement.x);}else {members.unshift(utils_flattenExpression(refinement.x));}}else {members.unshift(refinement.n);}expression = expression.x;}if(expression.t !== REFERENCE){return null;}return {r:expression.n,m:members};}var mustache_readTriple=readTriple;function readTriple(parser,tag){var expression=converters_readExpression(parser),triple;if(!expression){return null;}if(!parser.matchString(tag.close)){parser.error(\"Expected closing delimiter '\" + tag.close + \"'\");}triple = {t:TRIPLE};utils_refineExpression(expression,triple); // TODO handle this differently - it's mysterious\n\treturn triple;}var mustache_readUnescaped=readUnescaped;function readUnescaped(parser,tag){var expression,triple;if(!parser.matchString(\"&\")){return null;}parser.allowWhitespace();expression = converters_readExpression(parser);if(!expression){return null;}if(!parser.matchString(tag.close)){parser.error(\"Expected closing delimiter '\" + tag.close + \"'\");}triple = {t:TRIPLE};utils_refineExpression(expression,triple); // TODO handle this differently - it's mysterious\n\treturn triple;}var mustache_readPartial=readPartial;function readPartial(parser,tag){var start,nameStart,expression,context,partial;start = parser.pos;if(!parser.matchString(\">\")){return null;}parser.allowWhitespace();nameStart = parser.pos; // Partial names can include hyphens, so we can't use readExpression\n\t// blindly. Instead, we use the `relaxedNames` flag to indicate that\n\t// `foo-bar` should be read as a single name, rather than 'subtract\n\t// bar from foo'\n\tparser.relaxedNames = true;expression = converters_readExpression(parser);parser.relaxedNames = false;parser.allowWhitespace();context = converters_readExpression(parser);parser.allowWhitespace();if(!expression){return null;}partial = {t:PARTIAL};utils_refineExpression(expression,partial); // TODO...\n\tparser.allowWhitespace(); // if we have another expression - e.g. `{{>foo bar}}` - then\n\t// we turn it into `{{#with bar}}{{>foo}}{{/with}}`\n\tif(context){partial = {t:SECTION,n:SECTION_WITH,f:[partial]};utils_refineExpression(context,partial);}if(!parser.matchString(tag.close)){parser.error(\"Expected closing delimiter '\" + tag.close + \"'\");}return partial;}var readMustacheComment=readComment;function readComment(parser,tag){var index;if(!parser.matchString(\"!\")){return null;}index = parser.remaining().indexOf(tag.close);if(index !== -1){parser.pos += index + tag.close.length;return {t:COMMENT};}}var converters_readExpressionOrReference=readExpressionOrReference;function readExpressionOrReference(parser,expectedFollowers){var start,expression,i;start = parser.pos;expression = converters_readExpression(parser);if(!expression){return null;}for(i = 0;i < expectedFollowers.length;i += 1) {if(parser.remaining().substr(0,expectedFollowers[i].length) === expectedFollowers[i]){return expression;}}parser.pos = start;return primary_readReference(parser);}var mustache_readInterpolator=readInterpolator;function readInterpolator(parser,tag){var start,expression,interpolator,err;start = parser.pos; // TODO would be good for perf if we could do away with the try-catch\n\ttry{expression = converters_readExpressionOrReference(parser,[tag.close]);}catch(e) {err = e;}if(!expression){if(parser.str.charAt(start) === \"!\"){ // special case - comment\n\tparser.pos = start;return null;}if(err){throw err;}}if(!parser.matchString(tag.close)){parser.error(\"Expected closing delimiter '\" + tag.close + \"' after reference\");if(!expression){ // special case - comment\n\tif(parser.nextChar() === \"!\"){return null;}parser.error(\"Expected expression or legal reference\");}}interpolator = {t:INTERPOLATOR};utils_refineExpression(expression,interpolator); // TODO handle this differently - it's mysterious\n\treturn interpolator;}var mustache_readYielder=readYielder;var yieldPattern=/^yield\\s*/;function readYielder(parser,tag){var start,name,yielder;if(!parser.matchPattern(yieldPattern)){return null;}start = parser.pos;name = parser.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\\-]*/);parser.allowWhitespace();if(!parser.matchString(tag.close)){parser.error(\"expected legal partial name\");}yielder = {t:YIELDER};if(name){yielder.n = name;}return yielder;}var section_readClosing=readClosing;function readClosing(parser,tag){var start,remaining,index,closing;start = parser.pos;if(!parser.matchString(tag.open)){return null;}parser.allowWhitespace();if(!parser.matchString(\"/\")){parser.pos = start;return null;}parser.allowWhitespace();remaining = parser.remaining();index = remaining.indexOf(tag.close);if(index !== -1){closing = {t:CLOSING,r:remaining.substr(0,index).split(\" \")[0]};parser.pos += index;if(!parser.matchString(tag.close)){parser.error(\"Expected closing delimiter '\" + tag.close + \"'\");}return closing;}parser.pos = start;return null;}var section_readElse=section_readElse__readElse;var section_readElse__elsePattern=/^\\s*else\\s*/;function section_readElse__readElse(parser,tag){var start=parser.pos;if(!parser.matchString(tag.open)){return null;}if(!parser.matchPattern(section_readElse__elsePattern)){parser.pos = start;return null;}if(!parser.matchString(tag.close)){parser.error(\"Expected closing delimiter '\" + tag.close + \"'\");}return {t:ELSE};}var readElseIf=readElseIf__readElse;var readElseIf__elsePattern=/^\\s*elseif\\s+/;function readElseIf__readElse(parser,tag){var start=parser.pos,expression;if(!parser.matchString(tag.open)){return null;}if(!parser.matchPattern(readElseIf__elsePattern)){parser.pos = start;return null;}expression = converters_readExpression(parser);if(!parser.matchString(tag.close)){parser.error(\"Expected closing delimiter '\" + tag.close + \"'\");}return {t:ELSEIF,x:expression};}var handlebarsBlockCodes={each:SECTION_EACH,\"if\":SECTION_IF,\"if-with\":SECTION_IF_WITH,\"with\":SECTION_WITH,unless:SECTION_UNLESS};var mustache_readSection=readSection;var indexRefPattern=/^\\s*:\\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,keyIndexRefPattern=/^\\s*,\\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,handlebarsBlockPattern=new RegExp(\"^(\" + Object.keys(handlebarsBlockCodes).join(\"|\") + \")\\\\b\");function readSection(parser,tag){var start,expression,section,child,children,hasElse,block,unlessBlock,conditions,closed,i,expectedClose;start = parser.pos;if(parser.matchString(\"^\")){section = {t:SECTION,f:[],n:SECTION_UNLESS};}else if(parser.matchString(\"#\")){section = {t:SECTION,f:[]};if(parser.matchString(\"partial\")){parser.pos = start - parser.standardDelimiters[0].length;parser.error(\"Partial definitions can only be at the top level of the template, or immediately inside components\");}if(block = parser.matchPattern(handlebarsBlockPattern)){expectedClose = block;section.n = handlebarsBlockCodes[block];}}else {return null;}parser.allowWhitespace();expression = converters_readExpression(parser);if(!expression){parser.error(\"Expected expression\");} // optional index and key references\n\tif(i = parser.matchPattern(indexRefPattern)){var extra=undefined;if(extra = parser.matchPattern(keyIndexRefPattern)){section.i = i + \",\" + extra;}else {section.i = i;}}parser.allowWhitespace();if(!parser.matchString(tag.close)){parser.error(\"Expected closing delimiter '\" + tag.close + \"'\");}parser.sectionDepth += 1;children = section.f;conditions = [];do {if(child = section_readClosing(parser,tag)){if(expectedClose && child.r !== expectedClose){parser.error(\"Expected \" + tag.open + \"/\" + expectedClose + \"\" + tag.close);}parser.sectionDepth -= 1;closed = true;}else if(child = readElseIf(parser,tag)){if(section.n === SECTION_UNLESS){parser.error(\"{{else}} not allowed in {{#unless}}\");}if(hasElse){parser.error(\"illegal {{elseif...}} after {{else}}\");}if(!unlessBlock){unlessBlock = createUnlessBlock(expression,section.n);}unlessBlock.f.push({t:SECTION,n:SECTION_IF,x:utils_flattenExpression(mustache_readSection__combine(conditions.concat(child.x))),f:children = []});conditions.push(invert(child.x));}else if(child = section_readElse(parser,tag)){if(section.n === SECTION_UNLESS){parser.error(\"{{else}} not allowed in {{#unless}}\");}if(hasElse){parser.error(\"there can only be one {{else}} block, at the end of a section\");}hasElse = true; // use an unless block if there's no elseif\n\tif(!unlessBlock){unlessBlock = createUnlessBlock(expression,section.n);children = unlessBlock.f;}else {unlessBlock.f.push({t:SECTION,n:SECTION_IF,x:utils_flattenExpression(mustache_readSection__combine(conditions)),f:children = []});}}else {child = parser.read(READERS);if(!child){break;}children.push(child);}}while(!closed);if(unlessBlock){ // special case - `with` should become `if-with` (TODO is this right?\n\t// seems to me that `with` ought to behave consistently, regardless\n\t// of the presence/absence of `else`. In other words should always\n\t// be `if-with`\n\tif(section.n === SECTION_WITH){section.n = SECTION_IF_WITH;}section.l = unlessBlock;}utils_refineExpression(expression,section); // TODO if a section is empty it should be discarded. Don't do\n\t// that here though - we need to clean everything up first, as\n\t// it may contain removeable whitespace. As a temporary measure,\n\t// to pass the existing tests, remove empty `f` arrays\n\tif(!section.f.length){delete section.f;}return section;}function createUnlessBlock(expression,sectionType){var unlessBlock;if(sectionType === SECTION_WITH){ // special case - a `{{#with foo}}` section will render if `foo` is\n\t// truthy, so the `{{else}}` section needs to render if `foo` is falsy,\n\t// rather than adhering to the normal `{{#unless foo}}` logic (which\n\t// treats empty arrays/objects as falsy)\n\tunlessBlock = {t:SECTION,n:SECTION_IF,f:[]};utils_refineExpression(invert(expression),unlessBlock);}else {unlessBlock = {t:SECTION,n:SECTION_UNLESS,f:[]};utils_refineExpression(expression,unlessBlock);}return unlessBlock;}function invert(expression){if(expression.t === PREFIX_OPERATOR && expression.s === \"!\"){return expression.o;}return {t:PREFIX_OPERATOR,s:\"!\",o:parensIfNecessary(expression)};}function mustache_readSection__combine(expressions){if(expressions.length === 1){return expressions[0];}return {t:INFIX_OPERATOR,s:\"&&\",o:[parensIfNecessary(expressions[0]),parensIfNecessary(mustache_readSection__combine(expressions.slice(1)))]};}function parensIfNecessary(expression){ // TODO only wrap if necessary\n\treturn {t:BRACKETED,x:expression};}var converters_readHtmlComment=readHtmlComment;var OPEN_COMMENT=\"<!--\",CLOSE_COMMENT=\"-->\";function readHtmlComment(parser){var start,content,remaining,endIndex,comment;start = parser.pos;if(!parser.matchString(OPEN_COMMENT)){return null;}remaining = parser.remaining();endIndex = remaining.indexOf(CLOSE_COMMENT);if(endIndex === -1){parser.error(\"Illegal HTML - expected closing comment sequence ('-->')\");}content = remaining.substr(0,endIndex);parser.pos += endIndex + 3;comment = {t:COMMENT,c:content};if(parser.includeLinePositions){comment.p = parser.getLinePos(start);}return comment;}var booleanAttributes,voidElementNames,htmlEntities,controlCharacters,entityPattern,lessThan,greaterThan,amp; // https://github.com/kangax/html-minifier/issues/63#issuecomment-37763316\n\tbooleanAttributes = /^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i;voidElementNames = /^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;htmlEntities = {quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};controlCharacters = [8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376];entityPattern = new RegExp(\"&(#?(?:x[\\\\w\\\\d]+|\\\\d+|\" + Object.keys(htmlEntities).join(\"|\") + \"));?\",\"g\");function decodeCharacterReferences(html){return html.replace(entityPattern,function(match,entity){var code; // Handle named entities\n\tif(entity[0] !== \"#\"){code = htmlEntities[entity];}else if(entity[1] === \"x\"){code = parseInt(entity.substring(2),16);}else {code = parseInt(entity.substring(1),10);}if(!code){return match;}return String.fromCharCode(validateCode(code));});} // some code points are verboten. If we were inserting HTML, the browser would replace the illegal\n\t// code points with alternatives in some cases - since we're bypassing that mechanism, we need\n\t// to replace them ourselves\n\t//\n\t// Source: http://en.wikipedia.org/wiki/Character_encodings_in_HTML#Illegal_characters\n\tfunction validateCode(code){if(!code){return 65533;} // line feed becomes generic whitespace\n\tif(code === 10){return 32;} // ASCII range. (Why someone would use HTML entities for ASCII characters I don't know, but...)\n\tif(code < 128){return code;} // code points 128-159 are dealt with leniently by browsers, but they're incorrect. We need\n\t// to correct the mistake or we'll end up with missing  signs and so on\n\tif(code <= 159){return controlCharacters[code - 128];} // basic multilingual plane\n\tif(code < 55296){return code;} // UTF-16 surrogate halves\n\tif(code <= 57343){return 65533;} // rest of the basic multilingual plane\n\tif(code <= 65535){return code;}return 65533;}lessThan = /</g;greaterThan = />/g;amp = /&/g;function escapeHtml(str){return str.replace(amp,\"&amp;\").replace(lessThan,\"&lt;\").replace(greaterThan,\"&gt;\");}var leadingLinebreak=/^\\s*\\r?\\n/,trailingLinebreak=/\\r?\\n\\s*$/;var stripStandalones=function stripStandalones(items){var i,current,backOne,backTwo,lastSectionItem;for(i = 1;i < items.length;i += 1) {current = items[i];backOne = items[i - 1];backTwo = items[i - 2]; // if we're at the end of a [text][comment][text] sequence...\n\tif(isString(current) && isComment(backOne) && isString(backTwo)){ // ... and the comment is a standalone (i.e. line breaks either side)...\n\tif(trailingLinebreak.test(backTwo) && leadingLinebreak.test(current)){ // ... then we want to remove the whitespace after the first line break\n\titems[i - 2] = backTwo.replace(trailingLinebreak,\"\\n\"); // and the leading line break of the second text token\n\titems[i] = current.replace(leadingLinebreak,\"\");}} // if the current item is a section, and it is preceded by a linebreak, and\n\t// its first item is a linebreak...\n\tif(isSection(current) && isString(backOne)){if(trailingLinebreak.test(backOne) && isString(current.f[0]) && leadingLinebreak.test(current.f[0])){items[i - 1] = backOne.replace(trailingLinebreak,\"\\n\");current.f[0] = current.f[0].replace(leadingLinebreak,\"\");}} // if the last item was a section, and it is followed by a linebreak, and\n\t// its last item is a linebreak...\n\tif(isString(current) && isSection(backOne)){lastSectionItem = lastItem(backOne.f);if(isString(lastSectionItem) && trailingLinebreak.test(lastSectionItem) && leadingLinebreak.test(current)){backOne.f[backOne.f.length - 1] = lastSectionItem.replace(trailingLinebreak,\"\\n\");items[i] = current.replace(leadingLinebreak,\"\");}}}return items;};function isString(item){return typeof item === \"string\";}function isComment(item){return item.t === COMMENT || item.t === DELIMCHANGE;}function isSection(item){return (item.t === SECTION || item.t === INVERTED) && item.f;}var trimWhitespace=function trimWhitespace(items,leadingPattern,trailingPattern){var item;if(leadingPattern){item = items[0];if(typeof item === \"string\"){item = item.replace(leadingPattern,\"\");if(!item){items.shift();}else {items[0] = item;}}}if(trailingPattern){item = lastItem(items);if(typeof item === \"string\"){item = item.replace(trailingPattern,\"\");if(!item){items.pop();}else {items[items.length - 1] = item;}}}};var utils_cleanup=cleanup;var contiguousWhitespace=/[ \\t\\f\\r\\n]+/g;var preserveWhitespaceElements=/^(?:pre|script|style|textarea)$/i;var utils_cleanup__leadingWhitespace=/^[ \\t\\f\\r\\n]+/;var trailingWhitespace=/[ \\t\\f\\r\\n]+$/;var leadingNewLine=/^(?:\\r\\n|\\r|\\n)/;var trailingNewLine=/(?:\\r\\n|\\r|\\n)$/;function cleanup(items,stripComments,preserveWhitespace,removeLeadingWhitespace,removeTrailingWhitespace){var i,item,previousItem,nextItem,preserveWhitespaceInsideFragment,removeLeadingWhitespaceInsideFragment,removeTrailingWhitespaceInsideFragment,key; // First pass - remove standalones and comments etc\n\tstripStandalones(items);i = items.length;while(i--) {item = items[i]; // Remove delimiter changes, unsafe elements etc\n\tif(item.exclude){items.splice(i,1);} // Remove comments, unless we want to keep them\n\telse if(stripComments && item.t === COMMENT){items.splice(i,1);}} // If necessary, remove leading and trailing whitespace\n\ttrimWhitespace(items,removeLeadingWhitespace?utils_cleanup__leadingWhitespace:null,removeTrailingWhitespace?trailingWhitespace:null);i = items.length;while(i--) {item = items[i]; // Recurse\n\tif(item.f){var isPreserveWhitespaceElement=item.t === ELEMENT && preserveWhitespaceElements.test(item.e);preserveWhitespaceInsideFragment = preserveWhitespace || isPreserveWhitespaceElement;if(!preserveWhitespace && isPreserveWhitespaceElement){trimWhitespace(item.f,leadingNewLine,trailingNewLine);}if(!preserveWhitespaceInsideFragment){previousItem = items[i - 1];nextItem = items[i + 1]; // if the previous item was a text item with trailing whitespace,\n\t// remove leading whitespace inside the fragment\n\tif(!previousItem || typeof previousItem === \"string\" && trailingWhitespace.test(previousItem)){removeLeadingWhitespaceInsideFragment = true;} // and vice versa\n\tif(!nextItem || typeof nextItem === \"string\" && utils_cleanup__leadingWhitespace.test(nextItem)){removeTrailingWhitespaceInsideFragment = true;}}cleanup(item.f,stripComments,preserveWhitespaceInsideFragment,removeLeadingWhitespaceInsideFragment,removeTrailingWhitespaceInsideFragment);} // Split if-else blocks into two (an if, and an unless)\n\tif(item.l){cleanup(item.l.f,stripComments,preserveWhitespace,removeLeadingWhitespaceInsideFragment,removeTrailingWhitespaceInsideFragment);items.splice(i + 1,0,item.l);delete item.l; // TODO would be nice if there was a way around this\n\t} // Clean up element attributes\n\tif(item.a){for(key in item.a) {if(item.a.hasOwnProperty(key) && typeof item.a[key] !== \"string\"){cleanup(item.a[key],stripComments,preserveWhitespace,removeLeadingWhitespaceInsideFragment,removeTrailingWhitespaceInsideFragment);}}} // Clean up conditional attributes\n\tif(item.m){cleanup(item.m,stripComments,preserveWhitespace,removeLeadingWhitespaceInsideFragment,removeTrailingWhitespaceInsideFragment);} // Clean up event handlers\n\tif(item.v){for(key in item.v) {if(item.v.hasOwnProperty(key)){ // clean up names\n\tif(isArray(item.v[key].n)){cleanup(item.v[key].n,stripComments,preserveWhitespace,removeLeadingWhitespaceInsideFragment,removeTrailingWhitespaceInsideFragment);} // clean up params\n\tif(isArray(item.v[key].d)){cleanup(item.v[key].d,stripComments,preserveWhitespace,removeLeadingWhitespaceInsideFragment,removeTrailingWhitespaceInsideFragment);}}}}} // final pass - fuse text nodes together\n\ti = items.length;while(i--) {if(typeof items[i] === \"string\"){if(typeof items[i + 1] === \"string\"){items[i] = items[i] + items[i + 1];items.splice(i + 1,1);}if(!preserveWhitespace){items[i] = items[i].replace(contiguousWhitespace,\" \");}if(items[i] === \"\"){items.splice(i,1);}}}}var element_readClosingTag=readClosingTag;var closingTagPattern=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\\-]*)\\s*\\>/;function readClosingTag(parser){var start,tag;start = parser.pos; // are we looking at a closing tag?\n\tif(!parser.matchString(\"</\")){return null;}if(tag = parser.matchPattern(closingTagPattern)){if(parser.inside && tag !== parser.inside){parser.pos = start;return null;}return {t:CLOSING_TAG,e:tag};} // We have an illegal closing tag, report it\n\tparser.pos -= 2;parser.error(\"Illegal closing tag\");}var getLowestIndex=function getLowestIndex(haystack,needles){var i,index,lowest;i = needles.length;while(i--) {index = haystack.indexOf(needles[i]); // short circuit\n\tif(!index){return 0;}if(index === -1){continue;}if(!lowest || index < lowest){lowest = index;}}return lowest || -1;};var element_readAttribute=readAttribute;var attributeNamePattern=/^[^\\s\"'>\\/=]+/,unquotedAttributeValueTextPattern=/^[^\\s\"'=<>`]+/;function readAttribute(parser){var attr,name,value;parser.allowWhitespace();name = parser.matchPattern(attributeNamePattern);if(!name){return null;}attr = {name:name};value = readAttributeValue(parser);if(value != null){ // not null/undefined\n\tattr.value = value;}return attr;}function readAttributeValue(parser){var start,valueStart,startDepth,value;start = parser.pos; // next character must be `=`, `/`, `>` or whitespace\n\tif(!/[=\\/>\\s]/.test(parser.nextChar())){parser.error(\"Expected `=`, `/`, `>` or whitespace\");}parser.allowWhitespace();if(!parser.matchString(\"=\")){parser.pos = start;return null;}parser.allowWhitespace();valueStart = parser.pos;startDepth = parser.sectionDepth;value = readQuotedAttributeValue(parser,\"'\") || readQuotedAttributeValue(parser,\"\\\"\") || readUnquotedAttributeValue(parser);if(value === null){parser.error(\"Expected valid attribute value\");}if(parser.sectionDepth !== startDepth){parser.pos = valueStart;parser.error(\"An attribute value must contain as many opening section tags as closing section tags\");}if(!value.length){return \"\";}if(value.length === 1 && typeof value[0] === \"string\"){return decodeCharacterReferences(value[0]);}return value;}function readUnquotedAttributeValueToken(parser){var start,text,haystack,needles,index;start = parser.pos;text = parser.matchPattern(unquotedAttributeValueTextPattern);if(!text){return null;}haystack = text;needles = parser.tags.map(function(t){return t.open;}); // TODO refactor... we do this in readText.js as well\n\tif((index = getLowestIndex(haystack,needles)) !== -1){text = text.substr(0,index);parser.pos = start + text.length;}return text;}function readUnquotedAttributeValue(parser){var tokens,token;parser.inAttribute = true;tokens = [];token = converters_readMustache(parser) || readUnquotedAttributeValueToken(parser);while(token !== null) {tokens.push(token);token = converters_readMustache(parser) || readUnquotedAttributeValueToken(parser);}if(!tokens.length){return null;}parser.inAttribute = false;return tokens;}function readQuotedAttributeValue(parser,quoteMark){var start,tokens,token;start = parser.pos;if(!parser.matchString(quoteMark)){return null;}parser.inAttribute = quoteMark;tokens = [];token = converters_readMustache(parser) || readQuotedStringToken(parser,quoteMark);while(token !== null) {tokens.push(token);token = converters_readMustache(parser) || readQuotedStringToken(parser,quoteMark);}if(!parser.matchString(quoteMark)){parser.pos = start;return null;}parser.inAttribute = false;return tokens;}function readQuotedStringToken(parser,quoteMark){var start,index,haystack,needles;start = parser.pos;haystack = parser.remaining();needles = parser.tags.map(function(t){return t.open;}); // TODO refactor... we do this in readText.js as well\n\tneedles.push(quoteMark);index = getLowestIndex(haystack,needles);if(index === -1){parser.error(\"Quoted attribute value must have a closing quote\");}if(!index){return null;}parser.pos += index;return haystack.substr(0,index);}var JsonParser,specials,specialsPattern,parseJSON__numberPattern,placeholderPattern,placeholderAtStartPattern,onlyWhitespace;specials = {\"true\":true,\"false\":false,undefined:undefined,\"null\":null};specialsPattern = new RegExp(\"^(?:\" + Object.keys(specials).join(\"|\") + \")\");parseJSON__numberPattern = /^(?:[+-]?)(?:(?:(?:0|[1-9]\\d*)?\\.\\d+)|(?:(?:0|[1-9]\\d*)\\.)|(?:0|[1-9]\\d*))(?:[eE][+-]?\\d+)?/;placeholderPattern = /\\$\\{([^\\}]+)\\}/g;placeholderAtStartPattern = /^\\$\\{([^\\}]+)\\}/;onlyWhitespace = /^\\s*$/;JsonParser = parse_Parser.extend({init:function init(str,options){this.values = options.values;this.allowWhitespace();},postProcess:function postProcess(result){if(result.length !== 1 || !onlyWhitespace.test(this.leftover)){return null;}return {value:result[0].v};},converters:[function getPlaceholder(parser){var placeholder;if(!parser.values){return null;}placeholder = parser.matchPattern(placeholderAtStartPattern);if(placeholder && parser.values.hasOwnProperty(placeholder)){return {v:parser.values[placeholder]};}},function getSpecial(parser){var special;if(special = parser.matchPattern(specialsPattern)){return {v:specials[special]};}},function getNumber(parser){var number;if(number = parser.matchPattern(parseJSON__numberPattern)){return {v:+number};}},function getString(parser){var stringLiteral=readStringLiteral(parser),values;if(stringLiteral && (values = parser.values)){return {v:stringLiteral.v.replace(placeholderPattern,function(match,$1){return $1 in values?values[$1]:$1;})};}return stringLiteral;},function getObject(parser){var result,pair;if(!parser.matchString(\"{\")){return null;}result = {};parser.allowWhitespace();if(parser.matchString(\"}\")){return {v:result};}while(pair = getKeyValuePair(parser)) {result[pair.key] = pair.value;parser.allowWhitespace();if(parser.matchString(\"}\")){return {v:result};}if(!parser.matchString(\",\")){return null;}}return null;},function getArray(parser){var result,valueToken;if(!parser.matchString(\"[\")){return null;}result = [];parser.allowWhitespace();if(parser.matchString(\"]\")){return {v:result};}while(valueToken = parser.read()) {result.push(valueToken.v);parser.allowWhitespace();if(parser.matchString(\"]\")){return {v:result};}if(!parser.matchString(\",\")){return null;}parser.allowWhitespace();}return null;}]});function getKeyValuePair(parser){var key,valueToken,pair;parser.allowWhitespace();key = shared_readKey(parser);if(!key){return null;}pair = {key:key};parser.allowWhitespace();if(!parser.matchString(\":\")){return null;}parser.allowWhitespace();valueToken = parser.read();if(!valueToken){return null;}pair.value = valueToken.v;return pair;}var parseJSON=function parseJSON(str,values){var parser=new JsonParser(str,{values:values});return parser.result;}; // TODO clean this up, it's shocking\n\tvar element_processDirective=processDirective;var methodCallPattern=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\\(/,methodCallExcessPattern=/\\)\\s*$/,ExpressionParser;ExpressionParser = parse_Parser.extend({converters:[converters_readExpression]});function processDirective(tokens,parentParser){var result,match,parser,args,token,colonIndex,directiveName,directiveArgs,parsed;if(typeof tokens === \"string\"){if(match = methodCallPattern.exec(tokens)){var end=tokens.lastIndexOf(\")\"); // check for invalid method calls\n\tif(!methodCallExcessPattern.test(tokens)){parentParser.error(\"Invalid input after method call expression '\" + tokens.slice(end + 1) + \"'\");}result = {m:match[1]};args = \"[\" + tokens.slice(result.m.length + 1,end) + \"]\";parser = new ExpressionParser(args);result.a = utils_flattenExpression(parser.result[0]);return result;}if(tokens.indexOf(\":\") === -1){return tokens.trim();}tokens = [tokens];}result = {};directiveName = [];directiveArgs = [];if(tokens){while(tokens.length) {token = tokens.shift();if(typeof token === \"string\"){colonIndex = token.indexOf(\":\");if(colonIndex === -1){directiveName.push(token);}else { // is the colon the first character?\n\tif(colonIndex){ // no\n\tdirectiveName.push(token.substr(0,colonIndex));} // if there is anything after the colon in this token, treat\n\t// it as the first token of the directiveArgs fragment\n\tif(token.length > colonIndex + 1){directiveArgs[0] = token.substring(colonIndex + 1);}break;}}else {directiveName.push(token);}}directiveArgs = directiveArgs.concat(tokens);}if(!directiveName.length){result = \"\";}else if(directiveArgs.length || typeof directiveName !== \"string\"){result = { // TODO is this really necessary? just use the array\n\tn:directiveName.length === 1 && typeof directiveName[0] === \"string\"?directiveName[0]:directiveName};if(directiveArgs.length === 1 && typeof directiveArgs[0] === \"string\"){parsed = parseJSON(\"[\" + directiveArgs[0] + \"]\");result.a = parsed?parsed.value:directiveArgs[0].trim();}else {result.d = directiveArgs;}}else {result = directiveName;}return result;}var tagNamePattern=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\\-]*/,validTagNameFollower=/^[\\s\\n\\/>]/,onPattern=/^on/,proxyEventPattern=/^on-([a-zA-Z\\\\*\\\\.$_][a-zA-Z\\\\*\\\\.$_0-9\\-]+)$/,reservedEventNames=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,directives={\"intro-outro\":\"t0\",intro:\"t1\",outro:\"t2\",decorator:\"o\"},exclude={exclude:true},disallowedContents; // based on http://developers.whatwg.org/syntax.html#syntax-tag-omission\n\tdisallowedContents = {li:[\"li\"],dt:[\"dt\",\"dd\"],dd:[\"dt\",\"dd\"],p:\"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul\".split(\" \"),rt:[\"rt\",\"rp\"],rp:[\"rt\",\"rp\"],optgroup:[\"optgroup\"],option:[\"option\",\"optgroup\"],thead:[\"tbody\",\"tfoot\"],tbody:[\"tbody\",\"tfoot\"],tfoot:[\"tbody\"],tr:[\"tr\",\"tbody\"],td:[\"td\",\"th\",\"tr\"],th:[\"td\",\"th\",\"tr\"]};var converters_readElement=readElement;function readElement(parser){var start,element,directiveName,match,addProxyEvent,attribute,directive,selfClosing,children,partials,hasPartials,child,closed,pos,remaining,closingTag;start = parser.pos;if(parser.inside || parser.inAttribute){return null;}if(!parser.matchString(\"<\")){return null;} // if this is a closing tag, abort straight away\n\tif(parser.nextChar() === \"/\"){return null;}element = {};if(parser.includeLinePositions){element.p = parser.getLinePos(start);}if(parser.matchString(\"!\")){element.t = DOCTYPE;if(!parser.matchPattern(/^doctype/i)){parser.error(\"Expected DOCTYPE declaration\");}element.a = parser.matchPattern(/^(.+?)>/);return element;}element.t = ELEMENT; // element name\n\telement.e = parser.matchPattern(tagNamePattern);if(!element.e){return null;} // next character must be whitespace, closing solidus or '>'\n\tif(!validTagNameFollower.test(parser.nextChar())){parser.error(\"Illegal tag name\");}addProxyEvent = function(name,directive){var directiveName=directive.n || directive;if(reservedEventNames.test(directiveName)){parser.pos -= directiveName.length;parser.error(\"Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)\");}element.v[name] = directive;};parser.allowWhitespace(); // directives and attributes\n\twhile(attribute = converters_readMustache(parser) || element_readAttribute(parser)) { // regular attributes\n\tif(attribute.name){ // intro, outro, decorator\n\tif(directiveName = directives[attribute.name]){element[directiveName] = element_processDirective(attribute.value,parser);} // on-click etc\n\telse if(match = proxyEventPattern.exec(attribute.name)){if(!element.v)element.v = {};directive = element_processDirective(attribute.value,parser);addProxyEvent(match[1],directive);}else {if(!parser.sanitizeEventAttributes || !onPattern.test(attribute.name)){if(!element.a)element.a = {};element.a[attribute.name] = attribute.value || (attribute.value === \"\"?\"\":0);}}} // {{#if foo}}class='foo'{{/if}}\n\telse {if(!element.m)element.m = [];element.m.push(attribute);}parser.allowWhitespace();} // allow whitespace before closing solidus\n\tparser.allowWhitespace(); // self-closing solidus?\n\tif(parser.matchString(\"/\")){selfClosing = true;} // closing angle bracket\n\tif(!parser.matchString(\">\")){return null;}var lowerCaseName=element.e.toLowerCase();var preserveWhitespace=parser.preserveWhitespace;if(!selfClosing && !voidElementNames.test(element.e)){parser.elementStack.push(lowerCaseName); // Special case - if we open a script element, further tags should\n\t// be ignored unless they're a closing script element\n\tif(lowerCaseName === \"script\" || lowerCaseName === \"style\"){parser.inside = lowerCaseName;}children = [];partials = create(null);do {pos = parser.pos;remaining = parser.remaining(); // if for example we're in an <li> element, and we see another\n\t// <li> tag, close the first so they become siblings\n\tif(!canContain(lowerCaseName,remaining)){closed = true;} // closing tag\n\telse if(closingTag = element_readClosingTag(parser)){closed = true;var closingTagName=closingTag.e.toLowerCase(); // if this *isn't* the closing tag for the current element...\n\tif(closingTagName !== lowerCaseName){ // rewind parser\n\tparser.pos = pos; // if it doesn't close a parent tag, error\n\tif(! ~parser.elementStack.indexOf(closingTagName)){var errorMessage=\"Unexpected closing tag\"; // add additional help for void elements, since component names\n\t// might clash with them\n\tif(voidElementNames.test(closingTagName)){errorMessage += \" (<\" + closingTagName + \"> is a void element - it cannot contain children)\";}parser.error(errorMessage);}}} // implicit close by closing section tag. TODO clean this up\n\telse if(child = section_readClosing(parser,{open:parser.standardDelimiters[0],close:parser.standardDelimiters[1]})){closed = true;parser.pos = pos;}else {if(child = parser.read(PARTIAL_READERS)){if(partials[child.n]){parser.pos = pos;parser.error(\"Duplicate partial definition\");}utils_cleanup(child.f,parser.stripComments,preserveWhitespace,!preserveWhitespace,!preserveWhitespace);partials[child.n] = child.f;hasPartials = true;}else {if(child = parser.read(READERS)){children.push(child);}else {closed = true;}}}}while(!closed);if(children.length){element.f = children;}if(hasPartials){element.p = partials;}parser.elementStack.pop();}parser.inside = null;if(parser.sanitizeElements && parser.sanitizeElements.indexOf(lowerCaseName) !== -1){return exclude;}return element;}function canContain(name,remaining){var match,disallowed;match = /^<([a-zA-Z][a-zA-Z0-9]*)/.exec(remaining);disallowed = disallowedContents[name];if(!match || !disallowed){return true;}return ! ~disallowed.indexOf(match[1].toLowerCase());}var converters_readText=readText;function readText(parser){var index,remaining,disallowed,barrier;remaining = parser.remaining();barrier = parser.inside?\"</\" + parser.inside:\"<\";if(parser.inside && !parser.interpolate[parser.inside]){index = remaining.indexOf(barrier);}else {disallowed = parser.tags.map(function(t){return t.open;});disallowed = disallowed.concat(parser.tags.map(function(t){return \"\\\\\" + t.open;})); // http://developers.whatwg.org/syntax.html#syntax-attributes\n\tif(parser.inAttribute === true){ // we're inside an unquoted attribute value\n\tdisallowed.push(\"\\\"\",\"'\",\"=\",\"<\",\">\",\"`\");}else if(parser.inAttribute){ // quoted attribute value\n\tdisallowed.push(parser.inAttribute);}else {disallowed.push(barrier);}index = getLowestIndex(remaining,disallowed);}if(!index){return null;}if(index === -1){index = remaining.length;}parser.pos += index;return parser.inside?remaining.substr(0,index):decodeCharacterReferences(remaining.substr(0,index));}var utils_escapeRegExp=escapeRegExp;var utils_escapeRegExp__pattern=/[-/\\\\^$*+?.()|[\\]{}]/g;function escapeRegExp(str){return str.replace(utils_escapeRegExp__pattern,\"\\\\$&\");}var converters_readPartialDefinitionComment=readPartialDefinitionComment;var startPattern=/^<!--\\s*/,namePattern=/s*>\\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\\s*/,finishPattern=/\\s*-->/,child;function readPartialDefinitionComment(parser){var firstPos=parser.pos,open=parser.standardDelimiters[0],close=parser.standardDelimiters[1],content=undefined,closed=undefined;if(!parser.matchPattern(startPattern) || !parser.matchString(open)){parser.pos = firstPos;return null;}var name=parser.matchPattern(namePattern);warnOnceIfDebug(\"Inline partial comments are deprecated.\\nUse this...\\n  {{#partial \" + name + \"}} ... {{/partial}}\\n\\n...instead of this:\\n  <!-- {{>\" + name + \"}} --> ... <!-- {{/\" + name + \"}} -->'\"); // make sure the rest of the comment is in the correct place\n\tif(!parser.matchString(close) || !parser.matchPattern(finishPattern)){parser.pos = firstPos;return null;}content = [];var endPattern=new RegExp(\"^<!--\\\\s*\" + utils_escapeRegExp(open) + \"\\\\s*\\\\/\\\\s*\" + name + \"\\\\s*\" + utils_escapeRegExp(close) + \"\\\\s*-->\");do {if(parser.matchPattern(endPattern)){closed = true;}else {child = parser.read(READERS);if(!child){parser.error(\"expected closing comment ('<!-- \" + open + \"/\" + name + \"\" + close + \" -->')\");}content.push(child);}}while(!closed);return {t:INLINE_PARTIAL,f:content,n:name};}var converters_readPartialDefinitionSection=readPartialDefinitionSection;var partialDefinitionSectionPattern=/^#\\s*partial\\s+/;function readPartialDefinitionSection(parser){var start,name,content,child,closed;start = parser.pos;var delimiters=parser.standardDelimiters;if(!parser.matchString(delimiters[0])){return null;}if(!parser.matchPattern(partialDefinitionSectionPattern)){parser.pos = start;return null;}name = parser.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\\-]*/);if(!name){parser.error(\"expected legal partial name\");}if(!parser.matchString(delimiters[1])){parser.error(\"Expected closing delimiter '\" + delimiters[1] + \"'\");}content = [];do { // TODO clean this up\n\tif(child = section_readClosing(parser,{open:parser.standardDelimiters[0],close:parser.standardDelimiters[1]})){if(!child.r === \"partial\"){parser.error(\"Expected \" + delimiters[0] + \"/partial\" + delimiters[1]);}closed = true;}else {child = parser.read(READERS);if(!child){parser.error(\"Expected \" + delimiters[0] + \"/partial\" + delimiters[1]);}content.push(child);}}while(!closed);return {t:INLINE_PARTIAL,n:name,f:content};}var converters_readTemplate=readTemplate;function readTemplate(parser){var fragment=[];var partials=create(null);var hasPartials=false;var preserveWhitespace=parser.preserveWhitespace;while(parser.pos < parser.str.length) {var pos=parser.pos,item=undefined,partial=undefined;if(partial = parser.read(PARTIAL_READERS)){if(partials[partial.n]){parser.pos = pos;parser.error(\"Duplicated partial definition\");}utils_cleanup(partial.f,parser.stripComments,preserveWhitespace,!preserveWhitespace,!preserveWhitespace);partials[partial.n] = partial.f;hasPartials = true;}else if(item = parser.read(READERS)){fragment.push(item);}else {parser.error(\"Unexpected template content\");}}var result={v:TEMPLATE_VERSION,t:fragment};if(hasPartials){result.p = partials;}return result;}var _parse=parse;var STANDARD_READERS=[mustache_readPartial,mustache_readUnescaped,mustache_readSection,mustache_readYielder,mustache_readInterpolator,readMustacheComment];var TRIPLE_READERS=[mustache_readTriple];var STATIC_READERS=[mustache_readUnescaped,mustache_readSection,mustache_readInterpolator]; // TODO does it make sense to have a static section?\n\tvar StandardParser=undefined;function parse(template,options){return new StandardParser(template,options || {}).result;}var READERS=[converters_readMustache,converters_readHtmlComment,converters_readElement,converters_readText];var PARTIAL_READERS=[converters_readPartialDefinitionComment,converters_readPartialDefinitionSection];StandardParser = parse_Parser.extend({init:function init(str,options){var tripleDelimiters=options.tripleDelimiters || [\"{{{\",\"}}}\"],staticDelimiters=options.staticDelimiters || [\"[[\",\"]]\"],staticTripleDelimiters=options.staticTripleDelimiters || [\"[[[\",\"]]]\"];this.standardDelimiters = options.delimiters || [\"{{\",\"}}\"];this.tags = [{isStatic:false,isTriple:false,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:STANDARD_READERS},{isStatic:false,isTriple:true,open:tripleDelimiters[0],close:tripleDelimiters[1],readers:TRIPLE_READERS},{isStatic:true,isTriple:false,open:staticDelimiters[0],close:staticDelimiters[1],readers:STATIC_READERS},{isStatic:true,isTriple:true,open:staticTripleDelimiters[0],close:staticTripleDelimiters[1],readers:TRIPLE_READERS}];this.sortMustacheTags();this.sectionDepth = 0;this.elementStack = [];this.interpolate = {script:!options.interpolate || options.interpolate.script !== false,style:!options.interpolate || options.interpolate.style !== false};if(options.sanitize === true){options.sanitize = { // blacklist from https://code.google.com/p/google-caja/source/browse/trunk/src/com/google/caja/lang/html/html4-elements-whitelist.json\n\telements:\"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title\".split(\" \"),eventAttributes:true};}this.stripComments = options.stripComments !== false;this.preserveWhitespace = options.preserveWhitespace;this.sanitizeElements = options.sanitize && options.sanitize.elements;this.sanitizeEventAttributes = options.sanitize && options.sanitize.eventAttributes;this.includeLinePositions = options.includeLinePositions;},postProcess:function postProcess(result){ // special case - empty string\n\tif(!result.length){return {t:[],v:TEMPLATE_VERSION};}if(this.sectionDepth > 0){this.error(\"A section was left open\");}utils_cleanup(result[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace);return result[0];},converters:[converters_readTemplate],sortMustacheTags:function sortMustacheTags(){ // Sort in order of descending opening delimiter length (longer first),\n\t// to protect against opening delimiters being substrings of each other\n\tthis.tags.sort(function(a,b){return b.open.length - a.open.length;});}});var parseOptions=[\"preserveWhitespace\",\"sanitize\",\"stripComments\",\"delimiters\",\"tripleDelimiters\",\"interpolate\"];var parser={fromId:fromId,isHashedId:isHashedId,isParsed:isParsed,getParseOptions:getParseOptions,createHelper:template_parser__createHelper,parse:doParse};function template_parser__createHelper(parseOptions){var helper=create(parser);helper.parse = function(template,options){return doParse(template,options || parseOptions);};return helper;}function doParse(template,parseOptions){if(!_parse){throw new Error(\"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser\");}return _parse(template,parseOptions || this.options);}function fromId(id,options){var template;if(!isClient){if(options && options.noThrow){return;}throw new Error(\"Cannot retrieve template #\" + id + \" as Ractive is not running in a browser.\");}if(isHashedId(id)){id = id.substring(1);}if(!(template = document.getElementById(id))){if(options && options.noThrow){return;}throw new Error(\"Could not find template element with id #\" + id);}if(template.tagName.toUpperCase() !== \"SCRIPT\"){if(options && options.noThrow){return;}throw new Error(\"Template element with id #\" + id + \", must be a <script> element\");}return \"textContent\" in template?template.textContent:template.innerHTML;}function isHashedId(id){return id && id[0] === \"#\";}function isParsed(template){return !(typeof template === \"string\");}function getParseOptions(ractive){ // Could be Ractive or a Component\n\tif(ractive.defaults){ractive = ractive.defaults;}return parseOptions.reduce(function(val,key){val[key] = ractive[key];return val;},{});}var template_parser=parser;var templateConfigurator={name:\"template\",extend:function extend(Parent,proto,options){var template; // only assign if exists\n\tif(\"template\" in options){template = options.template;if(typeof template === \"function\"){proto.template = template;}else {proto.template = parseIfString(template,proto);}}},init:function init(Parent,ractive,options){var template,fn; // TODO because of prototypal inheritance, we might just be able to use\n\t// ractive.template, and not bother passing through the Parent object.\n\t// At present that breaks the test mocks' expectations\n\ttemplate = \"template\" in options?options.template:Parent.prototype.template;if(typeof template === \"function\"){fn = template;template = getDynamicTemplate(ractive,fn);ractive._config.template = {fn:fn,result:template};}template = parseIfString(template,ractive); // TODO the naming of this is confusing - ractive.template refers to [...],\n\t// but Component.prototype.template refers to {v:1,t:[],p:[]}...\n\t// it's unnecessary, because the developer never needs to access\n\t// ractive.template\n\tractive.template = template.t;if(template.p){extendPartials(ractive.partials,template.p);}},reset:function reset(ractive){var result=resetValue(ractive),parsed;if(result){parsed = parseIfString(result,ractive);ractive.template = parsed.t;extendPartials(ractive.partials,parsed.p,true);return true;}}};function resetValue(ractive){var initial=ractive._config.template,result; // If this isn't a dynamic template, there's nothing to do\n\tif(!initial || !initial.fn){return;}result = getDynamicTemplate(ractive,initial.fn); // TODO deep equality check to prevent unnecessary re-rendering\n\t// in the case of already-parsed templates\n\tif(result !== initial.result){initial.result = result;result = parseIfString(result,ractive);return result;}}function getDynamicTemplate(ractive,fn){var helper=template_template__createHelper(template_parser.getParseOptions(ractive));return fn.call(ractive,helper);}function template_template__createHelper(parseOptions){var helper=create(template_parser);helper.parse = function(template,options){return template_parser.parse(template,options || parseOptions);};return helper;}function parseIfString(template,ractive){if(typeof template === \"string\"){ // ID of an element containing the template?\n\tif(template[0] === \"#\"){template = template_parser.fromId(template);}template = _parse(template,template_parser.getParseOptions(ractive));} // Check that the template even exists\n\telse if(template == undefined){throw new Error(\"The template cannot be \" + template + \".\");} // Check the parsed template has a version at all\n\telse if(typeof template.v !== \"number\"){throw new Error(\"The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.\");} // Check we're using the correct version\n\telse if(template.v !== TEMPLATE_VERSION){throw new Error(\"Mismatched template version (expected \" + TEMPLATE_VERSION + \", got \" + template.v + \") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app\");}return template;}function extendPartials(existingPartials,newPartials,overwrite){if(!newPartials)return; // TODO there's an ambiguity here - we need to overwrite in the `reset()`\n\t// case, but not initially...\n\tfor(var key in newPartials) {if(overwrite || !existingPartials.hasOwnProperty(key)){existingPartials[key] = newPartials[key];}}}var template_template=templateConfigurator;var config_registries__registryNames,Registry,registries;config_registries__registryNames = [\"adaptors\",\"components\",\"computed\",\"decorators\",\"easing\",\"events\",\"interpolators\",\"partials\",\"transitions\"];Registry = function(name,useDefaults){this.name = name;this.useDefaults = useDefaults;};Registry.prototype = {constructor:Registry,extend:function extend(Parent,proto,options){this.configure(this.useDefaults?Parent.defaults:Parent,this.useDefaults?proto:proto.constructor,options);},init:function init(){},configure:function configure(Parent,target,options){var name=this.name,option=options[name],registry;registry = create(Parent[name]);for(var key in option) {registry[key] = option[key];}target[name] = registry;},reset:function reset(ractive){var registry=ractive[this.name];var changed=false;Object.keys(registry).forEach(function(key){var item=registry[key];if(item._fn){if(item._fn.isOwner){registry[key] = item._fn;}else {delete registry[key];}changed = true;}});return changed;}};registries = config_registries__registryNames.map(function(name){return new Registry(name,name === \"computed\");});var config_registries=registries; /*this.configure(\n\t  \tthis.useDefaults ? Parent.defaults : Parent,\n\t  \tractive,\n\t  \toptions );*/var wrapPrototype=wrap;function wrap(parent,name,method){if(!/_super/.test(method)){return method;}var wrapper=function wrapSuper(){var superMethod=getSuperMethod(wrapper._parent,name),hasSuper=(\"_super\" in this),oldSuper=this._super,result;this._super = superMethod;result = method.apply(this,arguments);if(hasSuper){this._super = oldSuper;}else {delete this._super;}return result;};wrapper._parent = parent;wrapper._method = method;return wrapper;}function getSuperMethod(parent,name){var value,method;if(name in parent){value = parent[name];if(typeof value === \"function\"){method = value;}else {method = function returnValue(){return value;};}}else {method = noop;}return method;}var config_deprecate=deprecate;function getMessage(deprecated,correct,isError){return \"options.\" + deprecated + \" has been deprecated in favour of options.\" + correct + \".\" + (isError?\" You cannot specify both options, please use options.\" + correct + \".\":\"\");}function deprecateOption(options,deprecatedOption,correct){if(deprecatedOption in options){if(!(correct in options)){warnIfDebug(getMessage(deprecatedOption,correct));options[correct] = options[deprecatedOption];}else {throw new Error(getMessage(deprecatedOption,correct,true));}}}function deprecate(options){deprecateOption(options,\"beforeInit\",\"onconstruct\");deprecateOption(options,\"init\",\"onrender\");deprecateOption(options,\"complete\",\"oncomplete\");deprecateOption(options,\"eventDefinitions\",\"events\"); // Using extend with Component instead of options,\n\t// like Human.extend( Spider ) means adaptors as a registry\n\t// gets copied to options. So we have to check if actually an array\n\tif(isArray(options.adaptors)){deprecateOption(options,\"adaptors\",\"adapt\");}}var config,order,defaultKeys,custom,isBlacklisted,isStandardKey;custom = {adapt:custom_adapt,css:css_css,data:custom_data,template:template_template};defaultKeys = Object.keys(config_defaults);isStandardKey = makeObj(defaultKeys.filter(function(key){return !custom[key];})); // blacklisted keys that we don't double extend\n\tisBlacklisted = makeObj(defaultKeys.concat(config_registries.map(function(r){return r.name;})));order = [].concat(defaultKeys.filter(function(key){return !config_registries[key] && !custom[key];}),config_registries,custom.data,custom.template,custom.css);config = {extend:function extend(Parent,proto,options){return configure(\"extend\",Parent,proto,options);},init:function init(Parent,ractive,options){return configure(\"init\",Parent,ractive,options);},reset:function reset(ractive){return order.filter(function(c){return c.reset && c.reset(ractive);}).map(function(c){return c.name;});}, // this defines the order. TODO this isn't used anywhere in the codebase,\n\t// only in the test suite - should get rid of it\n\torder:order};function configure(method,Parent,target,options){config_deprecate(options);for(var key in options) {if(isStandardKey.hasOwnProperty(key)){var value=options[key]; // warn the developer if they passed a function and ignore its value\n\t// NOTE: we allow some functions on \"el\" because we duck type element lists\n\t// and some libraries or ef'ed-up virtual browsers (phantomJS) return a\n\t// function object as the result of querySelector methods\n\tif(key !== \"el\" && typeof value === \"function\"){warnIfDebug(\"\" + key + \" is a Ractive option that does not expect a function and will be ignored\",method === \"init\"?target:null);}else {target[key] = value;}}}config_registries.forEach(function(registry){registry[method](Parent,target,options);});custom_adapt[method](Parent,target,options);template_template[method](Parent,target,options);css_css[method](Parent,target,options);extendOtherMethods(Parent.prototype,target,options);}function extendOtherMethods(parent,target,options){for(var key in options) {if(!isBlacklisted[key] && options.hasOwnProperty(key)){var member=options[key]; // if this is a method that overwrites a method, wrap it:\n\tif(typeof member === \"function\"){member = wrapPrototype(parent,key,member);}target[key] = member;}}}function makeObj(array){var obj={};array.forEach(function(x){return obj[x] = true;});return obj;}var config_config=config;var prototype_bubble=Fragment$bubble;function Fragment$bubble(){this.dirtyValue = this.dirtyArgs = true;if(this.bound && typeof this.owner.bubble === \"function\"){this.owner.bubble();}}var Fragment_prototype_detach=Fragment$detach;function Fragment$detach(){var docFrag;if(this.items.length === 1){return this.items[0].detach();}docFrag = document.createDocumentFragment();this.items.forEach(function(item){var node=item.detach(); // TODO The if {...} wasn't previously required - it is now, because we're\n\t// forcibly detaching everything to reorder sections after an update. That's\n\t// a non-ideal brute force approach, implemented to get all the tests to pass\n\t// - as soon as it's replaced with something more elegant, this should\n\t// revert to `docFrag.appendChild( item.detach() )`\n\tif(node){docFrag.appendChild(node);}});return docFrag;}var Fragment_prototype_find=Fragment$find;function Fragment$find(selector){var i,len,item,queryResult;if(this.items){len = this.items.length;for(i = 0;i < len;i += 1) {item = this.items[i];if(item.find && (queryResult = item.find(selector))){return queryResult;}}return null;}}var Fragment_prototype_findAll=Fragment$findAll;function Fragment$findAll(selector,query){var i,len,item;if(this.items){len = this.items.length;for(i = 0;i < len;i += 1) {item = this.items[i];if(item.findAll){item.findAll(selector,query);}}}return query;}var Fragment_prototype_findAllComponents=Fragment$findAllComponents;function Fragment$findAllComponents(selector,query){var i,len,item;if(this.items){len = this.items.length;for(i = 0;i < len;i += 1) {item = this.items[i];if(item.findAllComponents){item.findAllComponents(selector,query);}}}return query;}var Fragment_prototype_findComponent=Fragment$findComponent;function Fragment$findComponent(selector){var len,i,item,queryResult;if(this.items){len = this.items.length;for(i = 0;i < len;i += 1) {item = this.items[i];if(item.findComponent && (queryResult = item.findComponent(selector))){return queryResult;}}return null;}}var prototype_findNextNode=Fragment$findNextNode;function Fragment$findNextNode(item){var index=item.index,node;if(this.items[index + 1]){node = this.items[index + 1].firstNode();} // if this is the root fragment, and there are no more items,\n\t// it means we're at the end...\n\telse if(this.owner === this.root){if(!this.owner.component){ // TODO but something else could have been appended to\n\t// this.root.el, no?\n\tnode = null;} // ...unless this is a component\n\telse {node = this.owner.component.findNextNode();}}else {node = this.owner.findNextNode(this);}return node;}var prototype_firstNode=Fragment$firstNode;function Fragment$firstNode(){if(this.items && this.items[0]){return this.items[0].firstNode();}return null;}var shared_processItems=processItems;function processItems(items,values,guid,counter){counter = counter || 0;return items.map(function(item){var placeholderId,wrapped,value;if(item.text){return item.text;}if(item.fragments){return item.fragments.map(function(fragment){return processItems(fragment.items,values,guid,counter);}).join(\"\");}placeholderId = guid + \"-\" + counter++;if(item.keypath && (wrapped = item.root.viewmodel.wrapped[item.keypath.str])){value = wrapped.value;}else {value = item.getValue();}values[placeholderId] = value;return \"${\" + placeholderId + \"}\";}).join(\"\");}var getArgsList=Fragment$getArgsList;function Fragment$getArgsList(){var values,source,parsed,result;if(this.dirtyArgs){source = shared_processItems(this.items,values = {},this.root._guid);parsed = parseJSON(\"[\" + source + \"]\",values);if(!parsed){result = [this.toString()];}else {result = parsed.value;}this.argsList = result;this.dirtyArgs = false;}return this.argsList;}var getNode=Fragment$getNode;function Fragment$getNode(){var fragment=this;do {if(fragment.pElement){return fragment.pElement.node;}}while(fragment = fragment.parent);return this.root.detached || this.root.el;}var prototype_getValue=Fragment$getValue;function Fragment$getValue(){var values,source,parsed,result;if(this.dirtyValue){source = shared_processItems(this.items,values = {},this.root._guid);parsed = parseJSON(source,values);if(!parsed){result = this.toString();}else {result = parsed.value;}this.value = result;this.dirtyValue = false;}return this.value;}var shared_detach=function shared_detach(){return detachNode(this.node);};var Text=function Text(options){this.type = TEXT;this.text = options.template;};Text.prototype = {detach:shared_detach,firstNode:function firstNode(){return this.node;},render:function render(){if(!this.node){this.node = document.createTextNode(this.text);}return this.node;},toString:function toString(escape){return escape?escapeHtml(this.text):this.text;},unrender:function unrender(shouldDestroy){if(shouldDestroy){return this.detach();}}};var items_Text=Text;var shared_unbind=shared_unbind__unbind;function shared_unbind__unbind(){if(this.registered){ // this was registered as a dependant\n\tthis.root.viewmodel.unregister(this.keypath,this);}if(this.resolver){this.resolver.unbind();}}var Mustache_getValue=Mustache$getValue;function Mustache$getValue(){return this.value;}var ReferenceResolver=function ReferenceResolver(owner,ref,callback){var keypath;this.ref = ref;this.resolved = false;this.root = owner.root;this.parentFragment = owner.parentFragment;this.callback = callback;keypath = shared_resolveRef(owner.root,ref,owner.parentFragment);if(keypath != undefined){this.resolve(keypath);}else {global_runloop.addUnresolved(this);}};ReferenceResolver.prototype = {resolve:function resolve(keypath){if(this.keypath && !keypath){ // it was resolved, and now it's not. Can happen if e.g. `bar` in\n\t// `{{foo[bar]}}` becomes undefined\n\tglobal_runloop.addUnresolved(this);}this.resolved = true;this.keypath = keypath;this.callback(keypath);},forceResolution:function forceResolution(){this.resolve(getKeypath(this.ref));},rebind:function rebind(oldKeypath,newKeypath){var keypath;if(this.keypath != undefined){keypath = this.keypath.replace(oldKeypath,newKeypath); // was a new keypath created?\n\tif(keypath !== undefined){ // resolve it\n\tthis.resolve(keypath);}}},unbind:function unbind(){if(!this.resolved){global_runloop.removeUnresolved(this);}}};var Resolvers_ReferenceResolver=ReferenceResolver;var SpecialResolver=function SpecialResolver(owner,ref,callback){this.parentFragment = owner.parentFragment;this.ref = ref;this.callback = callback;this.rebind();};var props={\"@keypath\":{prefix:\"c\",prop:[\"context\"]},\"@index\":{prefix:\"i\",prop:[\"index\"]},\"@key\":{prefix:\"k\",prop:[\"key\",\"index\"]}};function getProp(target,prop){var value;for(var i=0;i < prop.prop.length;i++) {if((value = target[prop.prop[i]]) !== undefined){return value;}}}SpecialResolver.prototype = {rebind:function rebind(){var ref=this.ref,fragment=this.parentFragment,prop=props[ref],value;if(!prop){throw new Error(\"Unknown special reference \\\"\" + ref + \"\\\" - valid references are @index, @key and @keypath\");} // have we already found the nearest parent?\n\tif(this.cached){return this.callback(getKeypath(\"@\" + prop.prefix + getProp(this.cached,prop)));} // special case for indices, which may cross component boundaries\n\tif(prop.prop.indexOf(\"index\") !== -1 || prop.prop.indexOf(\"key\") !== -1){while(fragment) {if(fragment.owner.currentSubtype === SECTION_EACH && (value = getProp(fragment,prop)) !== undefined){this.cached = fragment;fragment.registerIndexRef(this);return this.callback(getKeypath(\"@\" + prop.prefix + value));} // watch for component boundaries\n\tif(!fragment.parent && fragment.owner && fragment.owner.component && fragment.owner.component.parentFragment && !fragment.owner.component.instance.isolated){fragment = fragment.owner.component.parentFragment;}else {fragment = fragment.parent;}}}else {while(fragment) {if((value = getProp(fragment,prop)) !== undefined){return this.callback(getKeypath(\"@\" + prop.prefix + value.str));}fragment = fragment.parent;}}},unbind:function unbind(){if(this.cached){this.cached.unregisterIndexRef(this);}}};var Resolvers_SpecialResolver=SpecialResolver;var IndexResolver=function IndexResolver(owner,ref,callback){this.parentFragment = owner.parentFragment;this.ref = ref;this.callback = callback;ref.ref.fragment.registerIndexRef(this);this.rebind();};IndexResolver.prototype = {rebind:function rebind(){var index,ref=this.ref.ref;if(ref.ref.t === \"k\"){index = \"k\" + ref.fragment.key;}else {index = \"i\" + ref.fragment.index;}if(index !== undefined){this.callback(getKeypath(\"@\" + index));}},unbind:function unbind(){this.ref.ref.fragment.unregisterIndexRef(this);}};var Resolvers_IndexResolver=IndexResolver;var Resolvers_findIndexRefs=findIndexRefs;function findIndexRefs(fragment,refName){var result={},refs,fragRefs,ref,i,owner,hit=false;if(!refName){result.refs = refs = {};}while(fragment) {if((owner = fragment.owner) && (fragRefs = owner.indexRefs)){ // we're looking for a particular ref, and it's here\n\tif(refName && (ref = owner.getIndexRef(refName))){result.ref = {fragment:fragment,ref:ref};return result;} // we're collecting refs up-tree\n\telse if(!refName){for(i in fragRefs) {ref = fragRefs[i]; // don't overwrite existing refs - they should shadow parents\n\tif(!refs[ref.n]){hit = true;refs[ref.n] = {fragment:fragment,ref:ref};}}}} // watch for component boundaries\n\tif(!fragment.parent && fragment.owner && fragment.owner.component && fragment.owner.component.parentFragment && !fragment.owner.component.instance.isolated){result.componentBoundary = true;fragment = fragment.owner.component.parentFragment;}else {fragment = fragment.parent;}}if(!hit){return undefined;}else {return result;}}findIndexRefs.resolve = function resolve(indices){var refs={},k,ref;for(k in indices.refs) {ref = indices.refs[k];refs[ref.ref.n] = ref.ref.t === \"k\"?ref.fragment.key:ref.fragment.index;}return refs;};var Resolvers_createReferenceResolver=createReferenceResolver;function createReferenceResolver(owner,ref,callback){var indexRef;if(ref.charAt(0) === \"@\"){return new Resolvers_SpecialResolver(owner,ref,callback);}if(indexRef = Resolvers_findIndexRefs(owner.parentFragment,ref)){return new Resolvers_IndexResolver(owner,indexRef,callback);}return new Resolvers_ReferenceResolver(owner,ref,callback);}var shared_getFunctionFromString=getFunctionFromString;var cache={};function getFunctionFromString(str,i){var fn,args;if(cache[str]){return cache[str];}args = [];while(i--) {args[i] = \"_\" + i;}fn = new Function(args.join(\",\"),\"return(\" + str + \")\");cache[str] = fn;return fn;}var ExpressionResolver,Resolvers_ExpressionResolver__bind=Function.prototype.bind;ExpressionResolver = function(owner,parentFragment,expression,callback){var _this=this;var ractive;ractive = owner.root;this.root = ractive;this.parentFragment = parentFragment;this.callback = callback;this.owner = owner;this.str = expression.s;this.keypaths = []; // Create resolvers for each reference\n\tthis.pending = expression.r.length;this.refResolvers = expression.r.map(function(ref,i){return Resolvers_createReferenceResolver(_this,ref,function(keypath){_this.resolve(i,keypath);});});this.ready = true;this.bubble();};ExpressionResolver.prototype = {bubble:function bubble(){if(!this.ready){return;}this.uniqueString = getUniqueString(this.str,this.keypaths);this.keypath = createExpressionKeypath(this.uniqueString);this.createEvaluator();this.callback(this.keypath);},unbind:function unbind(){var resolver;while(resolver = this.refResolvers.pop()) {resolver.unbind();}},resolve:function resolve(index,keypath){this.keypaths[index] = keypath;this.bubble();},createEvaluator:function createEvaluator(){var _this=this;var computation,valueGetters,signature,keypath,fn;keypath = this.keypath;computation = this.root.viewmodel.computations[keypath.str]; // only if it doesn't exist yet!\n\tif(!computation){fn = shared_getFunctionFromString(this.str,this.refResolvers.length);valueGetters = this.keypaths.map(function(keypath){var value;if(keypath === \"undefined\"){return function(){return undefined;};} // 'special' keypaths encode a value\n\tif(keypath.isSpecial){value = keypath.value;return function(){return value;};}return function(){var value=_this.root.viewmodel.get(keypath,{noUnwrap:true,fullRootGet:true});if(typeof value === \"function\"){value = wrapFunction(value,_this.root);}return value;};});signature = {deps:this.keypaths.filter(isValidDependency),getter:function getter(){var args=valueGetters.map(call);return fn.apply(null,args);}};computation = this.root.viewmodel.compute(keypath,signature);}else {this.root.viewmodel.mark(keypath);}},rebind:function rebind(oldKeypath,newKeypath){ // TODO only bubble once, no matter how many references are affected by the rebind\n\tthis.refResolvers.forEach(function(r){return r.rebind(oldKeypath,newKeypath);});}};var Resolvers_ExpressionResolver=ExpressionResolver;function call(value){return value.call();}function getUniqueString(str,keypaths){ // get string that is unique to this expression\n\treturn str.replace(/_([0-9]+)/g,function(match,$1){var keypath,value; // make sure we're not replacing a non-keypath _[0-9]\n\tif(+$1 >= keypaths.length){return \"_\" + $1;}keypath = keypaths[$1];if(keypath === undefined){return \"undefined\";}if(keypath.isSpecial){value = keypath.value;return typeof value === \"number\"?value:\"\\\"\" + value + \"\\\"\";}return keypath.str;});}function createExpressionKeypath(uniqueString){ // Sanitize by removing any periods or square brackets. Otherwise\n\t// we can't split the keypath into keys!\n\t// Remove asterisks too, since they mess with pattern observers\n\treturn getKeypath(\"${\" + uniqueString.replace(/[\\.\\[\\]]/g,\"-\").replace(/\\*/,\"#MUL#\") + \"}\");}function isValidDependency(keypath){return keypath !== undefined && keypath[0] !== \"@\";}function wrapFunction(fn,ractive){var wrapped,prop,key;if(fn.__ractive_nowrap){return fn;}prop = \"__ractive_\" + ractive._guid;wrapped = fn[prop];if(wrapped){return wrapped;}else if(/this/.test(fn.toString())){defineProperty(fn,prop,{value:Resolvers_ExpressionResolver__bind.call(fn,ractive),configurable:true}); // Add properties/methods to wrapped function\n\tfor(key in fn) {if(fn.hasOwnProperty(key)){fn[prop][key] = fn[key];}}ractive._boundFunctions.push({fn:fn,prop:prop});return fn[prop];}defineProperty(fn,\"__ractive_nowrap\",{value:fn});return fn.__ractive_nowrap;}var MemberResolver=function MemberResolver(template,resolver,parentFragment){var _this=this;this.resolver = resolver;this.root = resolver.root;this.parentFragment = parentFragment;this.viewmodel = resolver.root.viewmodel;if(typeof template === \"string\"){this.value = template;} // Simple reference?\n\telse if(template.t === REFERENCE){this.refResolver = Resolvers_createReferenceResolver(this,template.n,function(keypath){_this.resolve(keypath);});} // Otherwise we have an expression in its own right\n\telse {new Resolvers_ExpressionResolver(resolver,parentFragment,template,function(keypath){_this.resolve(keypath);});}};MemberResolver.prototype = {resolve:function resolve(keypath){if(this.keypath){this.viewmodel.unregister(this.keypath,this);}this.keypath = keypath;this.value = this.viewmodel.get(keypath);this.bind();this.resolver.bubble();},bind:function bind(){this.viewmodel.register(this.keypath,this);},rebind:function rebind(oldKeypath,newKeypath){if(this.refResolver){this.refResolver.rebind(oldKeypath,newKeypath);}},setValue:function setValue(value){this.value = value;this.resolver.bubble();},unbind:function unbind(){if(this.keypath){this.viewmodel.unregister(this.keypath,this);}if(this.refResolver){this.refResolver.unbind();}},forceResolution:function forceResolution(){if(this.refResolver){this.refResolver.forceResolution();}}};var ReferenceExpressionResolver_MemberResolver=MemberResolver;var ReferenceExpressionResolver=function ReferenceExpressionResolver(mustache,template,callback){var _this=this;var ractive,ref,keypath,parentFragment;this.parentFragment = parentFragment = mustache.parentFragment;this.root = ractive = mustache.root;this.mustache = mustache;this.ref = ref = template.r;this.callback = callback;this.unresolved = []; // Find base keypath\n\tif(keypath = shared_resolveRef(ractive,ref,parentFragment)){this.base = keypath;}else {this.baseResolver = new Resolvers_ReferenceResolver(this,ref,function(keypath){_this.base = keypath;_this.baseResolver = null;_this.bubble();});} // Find values for members, or mark them as unresolved\n\tthis.members = template.m.map(function(template){return new ReferenceExpressionResolver_MemberResolver(template,_this,parentFragment);});this.ready = true;this.bubble(); // trigger initial resolution if possible\n\t};ReferenceExpressionResolver.prototype = {getKeypath:function getKeypath(){var values=this.members.map(ReferenceExpressionResolver_ReferenceExpressionResolver__getValue);if(!values.every(isDefined) || this.baseResolver){return null;}return this.base.join(values.join(\".\"));},bubble:function bubble(){if(!this.ready || this.baseResolver){return;}this.callback(this.getKeypath());},unbind:function unbind(){this.members.forEach(methodCallers__unbind);},rebind:function rebind(oldKeypath,newKeypath){var changed;if(this.base){var newBase=this.base.replace(oldKeypath,newKeypath);if(newBase && newBase !== this.base){this.base = newBase;changed = true;}}this.members.forEach(function(members){if(members.rebind(oldKeypath,newKeypath)){changed = true;}});if(changed){this.bubble();}},forceResolution:function forceResolution(){if(this.baseResolver){this.base = getKeypath(this.ref);this.baseResolver.unbind();this.baseResolver = null;}this.members.forEach(_forceResolution);this.bubble();}};function ReferenceExpressionResolver_ReferenceExpressionResolver__getValue(member){return member.value;}function isDefined(value){return value != undefined;}function _forceResolution(member){member.forceResolution();}var ReferenceExpressionResolver_ReferenceExpressionResolver=ReferenceExpressionResolver;var Mustache_initialise=Mustache$init;function Mustache$init(mustache,options){var ref,parentFragment,template;parentFragment = options.parentFragment;template = options.template;mustache.root = parentFragment.root;mustache.parentFragment = parentFragment;mustache.pElement = parentFragment.pElement;mustache.template = options.template;mustache.index = options.index || 0;mustache.isStatic = options.template.s;mustache.type = options.template.t;mustache.registered = false; // if this is a simple mustache, with a reference, we just need to resolve\n\t// the reference to a keypath\n\tif(ref = template.r){mustache.resolver = Resolvers_createReferenceResolver(mustache,ref,resolve);} // if it's an expression, we have a bit more work to do\n\tif(options.template.x){mustache.resolver = new Resolvers_ExpressionResolver(mustache,parentFragment,options.template.x,resolveAndRebindChildren);}if(options.template.rx){mustache.resolver = new ReferenceExpressionResolver_ReferenceExpressionResolver(mustache,options.template.rx,resolveAndRebindChildren);} // Special case - inverted sections\n\tif(mustache.template.n === SECTION_UNLESS && !mustache.hasOwnProperty(\"value\")){mustache.setValue(undefined);}function resolve(keypath){mustache.resolve(keypath);}function resolveAndRebindChildren(newKeypath){var oldKeypath=mustache.keypath;if(newKeypath != oldKeypath){mustache.resolve(newKeypath);if(oldKeypath !== undefined){mustache.fragments && mustache.fragments.forEach(function(f){f.rebind(oldKeypath,newKeypath);});}}}}var Mustache_resolve=Mustache$resolve;function Mustache$resolve(keypath){var wasResolved,value,twowayBinding; // 'Special' keypaths, e.g. @foo or @7, encode a value\n\tif(keypath && keypath.isSpecial){this.keypath = keypath;this.setValue(keypath.value);return;} // If we resolved previously, we need to unregister\n\tif(this.registered){ // undefined or null\n\tthis.root.viewmodel.unregister(this.keypath,this);this.registered = false;wasResolved = true;}this.keypath = keypath; // If the new keypath exists, we need to register\n\t// with the viewmodel\n\tif(keypath != undefined){ // undefined or null\n\tvalue = this.root.viewmodel.get(keypath);this.root.viewmodel.register(keypath,this);this.registered = true;} // Either way we need to queue up a render (`value`\n\t// will be `undefined` if there's no keypath)\n\tthis.setValue(value); // Two-way bindings need to point to their new target keypath\n\tif(wasResolved && (twowayBinding = this.twowayBinding)){twowayBinding.rebound();}}var Mustache_rebind=Mustache$rebind;function Mustache$rebind(oldKeypath,newKeypath){ // Children first\n\tif(this.fragments){this.fragments.forEach(function(f){return f.rebind(oldKeypath,newKeypath);});} // Expression mustache?\n\tif(this.resolver){this.resolver.rebind(oldKeypath,newKeypath);}}var Mustache={getValue:Mustache_getValue,init:Mustache_initialise,resolve:Mustache_resolve,rebind:Mustache_rebind};var Interpolator=function Interpolator(options){this.type = INTERPOLATOR;Mustache.init(this,options);};Interpolator.prototype = {update:function update(){this.node.data = this.value == undefined?\"\":this.value;},resolve:Mustache.resolve,rebind:Mustache.rebind,detach:shared_detach,unbind:shared_unbind,render:function render(){if(!this.node){this.node = document.createTextNode(safeToStringValue(this.value));}return this.node;},unrender:function unrender(shouldDestroy){if(shouldDestroy){detachNode(this.node);}},getValue:Mustache.getValue, // TEMP\n\tsetValue:function setValue(value){var wrapper; // TODO is there a better way to approach this?\n\tif(this.keypath && (wrapper = this.root.viewmodel.wrapped[this.keypath.str])){value = wrapper.get();}if(!isEqual(value,this.value)){this.value = value;this.parentFragment.bubble();if(this.node){global_runloop.addView(this);}}},firstNode:function firstNode(){return this.node;},toString:function toString(escape){var string=\"\" + safeToStringValue(this.value);return escape?escapeHtml(string):string;}};var items_Interpolator=Interpolator;var Section_prototype_bubble=Section$bubble;function Section$bubble(){this.parentFragment.bubble();}var Section_prototype_detach=Section$detach;function Section$detach(){var docFrag;if(this.fragments.length === 1){return this.fragments[0].detach();}docFrag = document.createDocumentFragment();this.fragments.forEach(function(item){docFrag.appendChild(item.detach());});return docFrag;}var find=Section$find;function Section$find(selector){var i,len,queryResult;len = this.fragments.length;for(i = 0;i < len;i += 1) {if(queryResult = this.fragments[i].find(selector)){return queryResult;}}return null;}var findAll=Section$findAll;function Section$findAll(selector,query){var i,len;len = this.fragments.length;for(i = 0;i < len;i += 1) {this.fragments[i].findAll(selector,query);}}var findAllComponents=Section$findAllComponents;function Section$findAllComponents(selector,query){var i,len;len = this.fragments.length;for(i = 0;i < len;i += 1) {this.fragments[i].findAllComponents(selector,query);}}var findComponent=Section$findComponent;function Section$findComponent(selector){var i,len,queryResult;len = this.fragments.length;for(i = 0;i < len;i += 1) {if(queryResult = this.fragments[i].findComponent(selector)){return queryResult;}}return null;}var findNextNode=Section$findNextNode;function Section$findNextNode(fragment){if(this.fragments[fragment.index + 1]){return this.fragments[fragment.index + 1].firstNode();}return this.parentFragment.findNextNode(this);}var firstNode=Section$firstNode;function Section$firstNode(){var len,i,node;if(len = this.fragments.length){for(i = 0;i < len;i += 1) {if(node = this.fragments[i].firstNode()){return node;}}}return this.parentFragment.findNextNode(this);}var shuffle=Section$shuffle;function Section$shuffle(newIndices){var _this=this;var parentFragment,firstChange,i,newLength,reboundFragments,fragmentOptions,fragment; // short circuit any double-updates, and ensure that this isn't applied to\n\t// non-list sections\n\tif(this.shuffling || this.unbound || this.currentSubtype !== SECTION_EACH){return;}this.shuffling = true;global_runloop.scheduleTask(function(){return _this.shuffling = false;});parentFragment = this.parentFragment;reboundFragments = []; // TODO: need to update this\n\t// first, rebind existing fragments\n\tnewIndices.forEach(function(newIndex,oldIndex){var fragment,by,oldKeypath,newKeypath,deps;if(newIndex === oldIndex){reboundFragments[newIndex] = _this.fragments[oldIndex];return;}fragment = _this.fragments[oldIndex];if(firstChange === undefined){firstChange = oldIndex;} // does this fragment need to be torn down?\n\tif(newIndex === -1){_this.fragmentsToUnrender.push(fragment);fragment.unbind();return;} // Otherwise, it needs to be rebound to a new index\n\tby = newIndex - oldIndex;oldKeypath = _this.keypath.join(oldIndex);newKeypath = _this.keypath.join(newIndex);fragment.index = newIndex; // notify any registered index refs directly\n\tif(deps = fragment.registeredIndexRefs){deps.forEach(shuffle__blindRebind);}fragment.rebind(oldKeypath,newKeypath);reboundFragments[newIndex] = fragment;});newLength = this.root.viewmodel.get(this.keypath).length; // If nothing changed with the existing fragments, then we start adding\n\t// new fragments at the end...\n\tif(firstChange === undefined){ // ...unless there are no new fragments to add\n\tif(this.length === newLength){return;}firstChange = this.length;}this.length = this.fragments.length = newLength;if(this.rendered){global_runloop.addView(this);} // Prepare new fragment options\n\tfragmentOptions = {template:this.template.f,root:this.root,owner:this}; // Add as many new fragments as we need to, or add back existing\n\t// (detached) fragments\n\tfor(i = firstChange;i < newLength;i += 1) {fragment = reboundFragments[i];if(!fragment){this.fragmentsToCreate.push(i);}this.fragments[i] = fragment;}}function shuffle__blindRebind(dep){ // the keypath doesn't actually matter here as it won't have changed\n\tdep.rebind(\"\",\"\");}var prototype_rebind=function prototype_rebind(oldKeypath,newKeypath){Mustache.rebind.call(this,oldKeypath,newKeypath);};var Section_prototype_render=Section$render;function Section$render(){var _this=this;this.docFrag = document.createDocumentFragment();this.fragments.forEach(function(f){return _this.docFrag.appendChild(f.render());});this.renderedFragments = this.fragments.slice();this.fragmentsToRender = [];this.rendered = true;return this.docFrag;}var setValue=Section$setValue;function Section$setValue(value){var _this=this;var wrapper,fragmentOptions;if(this.updating){ // If a child of this section causes a re-evaluation - for example, an\n\t// expression refers to a function that mutates the array that this\n\t// section depends on - we'll end up with a double rendering bug (see\n\t// https://github.com/ractivejs/ractive/issues/748). This prevents it.\n\treturn;}this.updating = true; // with sections, we need to get the fake value if we have a wrapped object\n\tif(this.keypath && (wrapper = this.root.viewmodel.wrapped[this.keypath.str])){value = wrapper.get();} // If any fragments are awaiting creation after a splice,\n\t// this is the place to do it\n\tif(this.fragmentsToCreate.length){fragmentOptions = {template:this.template.f || [],root:this.root,pElement:this.pElement,owner:this};this.fragmentsToCreate.forEach(function(index){var fragment;fragmentOptions.context = _this.keypath.join(index);fragmentOptions.index = index;fragment = new virtualdom_Fragment(fragmentOptions);_this.fragmentsToRender.push(_this.fragments[index] = fragment);});this.fragmentsToCreate.length = 0;}else if(reevaluateSection(this,value)){this.bubble();if(this.rendered){global_runloop.addView(this);}}this.value = value;this.updating = false;}function changeCurrentSubtype(section,value,obj){if(value === SECTION_EACH){ // make sure ref type is up to date for key or value indices\n\tif(section.indexRefs && section.indexRefs[0]){var ref=section.indexRefs[0]; // when switching flavors, make sure the section gets updated\n\tif(obj && ref.t === \"i\" || !obj && ref.t === \"k\"){ // if switching from object to list, unbind all of the old fragments\n\tif(!obj){section.length = 0;section.fragmentsToUnrender = section.fragments.slice(0);section.fragmentsToUnrender.forEach(function(f){return f.unbind();});}}ref.t = obj?\"k\":\"i\";}}section.currentSubtype = value;}function reevaluateSection(section,value){var fragmentOptions={template:section.template.f || [],root:section.root,pElement:section.parentFragment.pElement,owner:section};section.hasContext = true; // If we already know the section type, great\n\t// TODO can this be optimised? i.e. pick an reevaluateSection function during init\n\t// and avoid doing this each time?\n\tif(section.subtype){switch(section.subtype){case SECTION_IF:section.hasContext = false;return reevaluateConditionalSection(section,value,false,fragmentOptions);case SECTION_UNLESS:section.hasContext = false;return reevaluateConditionalSection(section,value,true,fragmentOptions);case SECTION_WITH:return reevaluateContextSection(section,fragmentOptions);case SECTION_IF_WITH:return reevaluateConditionalContextSection(section,value,fragmentOptions);case SECTION_EACH:if(isObject(value)){changeCurrentSubtype(section,section.subtype,true);return reevaluateListObjectSection(section,value,fragmentOptions);} // Fallthrough - if it's a conditional or an array we need to continue\n\t}} // Otherwise we need to work out what sort of section we're dealing with\n\tsection.ordered = !!isArrayLike(value); // Ordered list section\n\tif(section.ordered){changeCurrentSubtype(section,SECTION_EACH,false);return reevaluateListSection(section,value,fragmentOptions);} // Unordered list, or context\n\tif(isObject(value) || typeof value === \"function\"){ // Index reference indicates section should be treated as a list\n\tif(section.template.i){changeCurrentSubtype(section,SECTION_EACH,true);return reevaluateListObjectSection(section,value,fragmentOptions);} // Otherwise, object provides context for contents\n\tchangeCurrentSubtype(section,SECTION_WITH,false);return reevaluateContextSection(section,fragmentOptions);} // Conditional section\n\tchangeCurrentSubtype(section,SECTION_IF,false);section.hasContext = false;return reevaluateConditionalSection(section,value,false,fragmentOptions);}function reevaluateListSection(section,value,fragmentOptions){var i,length,fragment;length = value.length;if(length === section.length){ // Nothing to do\n\treturn false;} // if the array is shorter than it was previously, remove items\n\tif(length < section.length){section.fragmentsToUnrender = section.fragments.splice(length,section.length - length);section.fragmentsToUnrender.forEach(methodCallers__unbind);} // otherwise...\n\telse {if(length > section.length){ // add any new ones\n\tfor(i = section.length;i < length;i += 1) { // append list item to context stack\n\tfragmentOptions.context = section.keypath.join(i);fragmentOptions.index = i;fragment = new virtualdom_Fragment(fragmentOptions);section.fragmentsToRender.push(section.fragments[i] = fragment);}}}section.length = length;return true;}function reevaluateListObjectSection(section,value,fragmentOptions){var id,i,hasKey,fragment,changed,deps;hasKey = section.hasKey || (section.hasKey = {}); // remove any fragments that should no longer exist\n\ti = section.fragments.length;while(i--) {fragment = section.fragments[i];if(!(fragment.key in value)){changed = true;fragment.unbind();section.fragmentsToUnrender.push(fragment);section.fragments.splice(i,1);hasKey[fragment.key] = false;}} // notify any dependents about changed indices\n\ti = section.fragments.length;while(i--) {fragment = section.fragments[i];if(fragment.index !== i){fragment.index = i;if(deps = fragment.registeredIndexRefs){deps.forEach(setValue__blindRebind);}}} // add any that haven't been created yet\n\ti = section.fragments.length;for(id in value) {if(!hasKey[id]){changed = true;fragmentOptions.context = section.keypath.join(id);fragmentOptions.key = id;fragmentOptions.index = i++;fragment = new virtualdom_Fragment(fragmentOptions);section.fragmentsToRender.push(fragment);section.fragments.push(fragment);hasKey[id] = true;}}section.length = section.fragments.length;return changed;}function reevaluateConditionalContextSection(section,value,fragmentOptions){if(value){return reevaluateContextSection(section,fragmentOptions);}else {return removeSectionFragments(section);}}function reevaluateContextSection(section,fragmentOptions){var fragment; // ...then if it isn't rendered, render it, adding section.keypath to the context stack\n\t// (if it is already rendered, then any children dependent on the context stack\n\t// will update themselves without any prompting)\n\tif(!section.length){ // append this section to the context stack\n\tfragmentOptions.context = section.keypath;fragmentOptions.index = 0;fragment = new virtualdom_Fragment(fragmentOptions);section.fragmentsToRender.push(section.fragments[0] = fragment);section.length = 1;return true;}}function reevaluateConditionalSection(section,value,inverted,fragmentOptions){var doRender,emptyArray,emptyObject,fragment,name;emptyArray = isArrayLike(value) && value.length === 0;emptyObject = false;if(!isArrayLike(value) && isObject(value)){emptyObject = true;for(name in value) {emptyObject = false;break;}}if(inverted){doRender = emptyArray || emptyObject || !value;}else {doRender = value && !emptyArray && !emptyObject;}if(doRender){if(!section.length){ // no change to context stack\n\tfragmentOptions.index = 0;fragment = new virtualdom_Fragment(fragmentOptions);section.fragmentsToRender.push(section.fragments[0] = fragment);section.length = 1;return true;}if(section.length > 1){section.fragmentsToUnrender = section.fragments.splice(1);section.fragmentsToUnrender.forEach(methodCallers__unbind);return true;}}else {return removeSectionFragments(section);}}function removeSectionFragments(section){if(section.length){section.fragmentsToUnrender = section.fragments.splice(0,section.fragments.length).filter(isRendered);section.fragmentsToUnrender.forEach(methodCallers__unbind);section.length = section.fragmentsToRender.length = 0;return true;}}function isRendered(fragment){return fragment.rendered;}function setValue__blindRebind(dep){ // the keypath doesn't actually matter here as it won't have changed\n\tdep.rebind(\"\",\"\");}var prototype_toString=Section$toString;function Section$toString(escape){var str,i,len;str = \"\";i = 0;len = this.length;for(i = 0;i < len;i += 1) {str += this.fragments[i].toString(escape);}return str;}var prototype_unbind=Section$unbind;function Section$unbind(){var _this=this;this.fragments.forEach(methodCallers__unbind);this.fragmentsToRender.forEach(function(f){return removeFromArray(_this.fragments,f);});this.fragmentsToRender = [];shared_unbind.call(this);this.length = 0;this.unbound = true;}var prototype_unrender=Section$unrender;function Section$unrender(shouldDestroy){this.fragments.forEach(shouldDestroy?unrenderAndDestroy:prototype_unrender__unrender);this.renderedFragments = [];this.rendered = false;}function unrenderAndDestroy(fragment){fragment.unrender(true);}function prototype_unrender__unrender(fragment){fragment.unrender(false);}var prototype_update=Section$update;function Section$update(){var fragment,renderIndex,renderedFragments,anchor,target,i,len; // `this.renderedFragments` is in the order of the previous render.\n\t// If fragments have shuffled about, this allows us to quickly\n\t// reinsert them in the correct place\n\trenderedFragments = this.renderedFragments; // Remove fragments that have been marked for destruction\n\twhile(fragment = this.fragmentsToUnrender.pop()) {fragment.unrender(true);renderedFragments.splice(renderedFragments.indexOf(fragment),1);} // Render new fragments (but don't insert them yet)\n\twhile(fragment = this.fragmentsToRender.shift()) {fragment.render();}if(this.rendered){target = this.parentFragment.getNode();}len = this.fragments.length;for(i = 0;i < len;i += 1) {fragment = this.fragments[i];renderIndex = renderedFragments.indexOf(fragment,i); // search from current index - it's guaranteed to be the same or higher\n\tif(renderIndex === i){ // already in the right place. insert accumulated nodes (if any) and carry on\n\tif(this.docFrag.childNodes.length){anchor = fragment.firstNode();target.insertBefore(this.docFrag,anchor);}continue;}this.docFrag.appendChild(fragment.detach()); // update renderedFragments\n\tif(renderIndex !== -1){renderedFragments.splice(renderIndex,1);}renderedFragments.splice(i,0,fragment);}if(this.rendered && this.docFrag.childNodes.length){anchor = this.parentFragment.findNextNode(this);target.insertBefore(this.docFrag,anchor);} // Save the rendering order for next time\n\tthis.renderedFragments = this.fragments.slice();}var Section=function Section(options){this.type = SECTION;this.subtype = this.currentSubtype = options.template.n;this.inverted = this.subtype === SECTION_UNLESS;this.pElement = options.pElement;this.fragments = [];this.fragmentsToCreate = [];this.fragmentsToRender = [];this.fragmentsToUnrender = [];if(options.template.i){this.indexRefs = options.template.i.split(\",\").map(function(k,i){return {n:k,t:i === 0?\"k\":\"i\"};});}this.renderedFragments = [];this.length = 0; // number of times this section is rendered\n\tMustache.init(this,options);};Section.prototype = {bubble:Section_prototype_bubble,detach:Section_prototype_detach,find:find,findAll:findAll,findAllComponents:findAllComponents,findComponent:findComponent,findNextNode:findNextNode,firstNode:firstNode,getIndexRef:function getIndexRef(name){if(this.indexRefs){var i=this.indexRefs.length;while(i--) {var ref=this.indexRefs[i];if(ref.n === name){return ref;}}}},getValue:Mustache.getValue,shuffle:shuffle,rebind:prototype_rebind,render:Section_prototype_render,resolve:Mustache.resolve,setValue:setValue,toString:prototype_toString,unbind:prototype_unbind,unrender:prototype_unrender,update:prototype_update};var _Section=Section;var Triple_prototype_detach=Triple$detach;function Triple$detach(){var len,i;if(this.docFrag){len = this.nodes.length;for(i = 0;i < len;i += 1) {this.docFrag.appendChild(this.nodes[i]);}return this.docFrag;}}var Triple_prototype_find=Triple$find;function Triple$find(selector){var i,len,node,queryResult;len = this.nodes.length;for(i = 0;i < len;i += 1) {node = this.nodes[i];if(node.nodeType !== 1){continue;}if(matches(node,selector)){return node;}if(queryResult = node.querySelector(selector)){return queryResult;}}return null;}var Triple_prototype_findAll=Triple$findAll;function Triple$findAll(selector,queryResult){var i,len,node,queryAllResult,numNodes,j;len = this.nodes.length;for(i = 0;i < len;i += 1) {node = this.nodes[i];if(node.nodeType !== 1){continue;}if(matches(node,selector)){queryResult.push(node);}if(queryAllResult = node.querySelectorAll(selector)){numNodes = queryAllResult.length;for(j = 0;j < numNodes;j += 1) {queryResult.push(queryAllResult[j]);}}}}var Triple_prototype_firstNode=Triple$firstNode;function Triple$firstNode(){if(this.rendered && this.nodes[0]){return this.nodes[0];}return this.parentFragment.findNextNode(this);}var elementCache={},ieBug,ieBlacklist;try{createElement(\"table\").innerHTML = \"foo\";}catch(err) {ieBug = true;ieBlacklist = {TABLE:[\"<table class=\\\"x\\\">\",\"</table>\"],THEAD:[\"<table><thead class=\\\"x\\\">\",\"</thead></table>\"],TBODY:[\"<table><tbody class=\\\"x\\\">\",\"</tbody></table>\"],TR:[\"<table><tr class=\\\"x\\\">\",\"</tr></table>\"],SELECT:[\"<select class=\\\"x\\\">\",\"</select>\"]};}var insertHtml=function insertHtml(html,node,docFrag){var container,nodes=[],wrapper,selectedOption,child,i; // render 0 and false\n\tif(html != null && html !== \"\"){if(ieBug && (wrapper = ieBlacklist[node.tagName])){container = element(\"DIV\");container.innerHTML = wrapper[0] + html + wrapper[1];container = container.querySelector(\".x\");if(container.tagName === \"SELECT\"){selectedOption = container.options[container.selectedIndex];}}else if(node.namespaceURI === namespaces.svg){container = element(\"DIV\");container.innerHTML = \"<svg class=\\\"x\\\">\" + html + \"</svg>\";container = container.querySelector(\".x\");}else {container = element(node.tagName);container.innerHTML = html;if(container.tagName === \"SELECT\"){selectedOption = container.options[container.selectedIndex];}}while(child = container.firstChild) {nodes.push(child);docFrag.appendChild(child);} // This is really annoying. Extracting <option> nodes from the\n\t// temporary container <select> causes the remaining ones to\n\t// become selected. So now we have to deselect them. IE8, you\n\t// amaze me. You really do\n\t// ...and now Chrome too\n\tif(node.tagName === \"SELECT\"){i = nodes.length;while(i--) {if(nodes[i] !== selectedOption){nodes[i].selected = false;}}}}return nodes;};function element(tagName){return elementCache[tagName] || (elementCache[tagName] = createElement(tagName));}var helpers_updateSelect=updateSelect;function updateSelect(parentElement){var selectedOptions,option,value;if(!parentElement || parentElement.name !== \"select\" || !parentElement.binding){return;}selectedOptions = toArray(parentElement.node.options).filter(isSelected); // If one of them had a `selected` attribute, we need to sync\n\t// the model to the view\n\tif(parentElement.getAttribute(\"multiple\")){value = selectedOptions.map(function(o){return o.value;});}else if(option = selectedOptions[0]){value = option.value;}if(value !== undefined){parentElement.binding.setValue(value);}parentElement.bubble();}function isSelected(option){return option.selected;}var Triple_prototype_render=Triple$render;function Triple$render(){if(this.rendered){throw new Error(\"Attempted to render an item that was already rendered\");}this.docFrag = document.createDocumentFragment();this.nodes = insertHtml(this.value,this.parentFragment.getNode(),this.docFrag); // Special case - we're inserting the contents of a <select>\n\thelpers_updateSelect(this.pElement);this.rendered = true;return this.docFrag;}var prototype_setValue=Triple$setValue;function Triple$setValue(value){var wrapper; // TODO is there a better way to approach this?\n\tif(wrapper = this.root.viewmodel.wrapped[this.keypath.str]){value = wrapper.get();}if(value !== this.value){this.value = value;this.parentFragment.bubble();if(this.rendered){global_runloop.addView(this);}}}var Triple_prototype_toString=Triple$toString;function Triple$toString(){return this.value != undefined?decodeCharacterReferences(\"\" + this.value):\"\";}var Triple_prototype_unrender=Triple$unrender;function Triple$unrender(shouldDestroy){if(this.rendered && shouldDestroy){this.nodes.forEach(detachNode);this.rendered = false;} // TODO update live queries\n\t}var Triple_prototype_update=Triple$update;function Triple$update(){var node,parentNode;if(!this.rendered){return;} // Remove existing nodes\n\twhile(this.nodes && this.nodes.length) {node = this.nodes.pop();node.parentNode.removeChild(node);} // Insert new nodes\n\tparentNode = this.parentFragment.getNode();this.nodes = insertHtml(this.value,parentNode,this.docFrag);parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)); // Special case - we're inserting the contents of a <select>\n\thelpers_updateSelect(this.pElement);}var Triple=function Triple(options){this.type = TRIPLE;Mustache.init(this,options);};Triple.prototype = {detach:Triple_prototype_detach,find:Triple_prototype_find,findAll:Triple_prototype_findAll,firstNode:Triple_prototype_firstNode,getValue:Mustache.getValue,rebind:Mustache.rebind,render:Triple_prototype_render,resolve:Mustache.resolve,setValue:prototype_setValue,toString:Triple_prototype_toString,unbind:shared_unbind,unrender:Triple_prototype_unrender,update:Triple_prototype_update};var _Triple=Triple;var Element_prototype_bubble=function Element_prototype_bubble(){this.parentFragment.bubble();};var Element_prototype_detach=Element$detach;function Element$detach(){var node=this.node,parentNode;if(node){ // need to check for parent node - DOM may have been altered\n\t// by something other than Ractive! e.g. jQuery UI...\n\tif(parentNode = node.parentNode){parentNode.removeChild(node);}return node;}}var Element_prototype_find=function Element_prototype_find(selector){if(!this.node){ // this element hasn't been rendered yet\n\treturn null;}if(matches(this.node,selector)){return this.node;}if(this.fragment && this.fragment.find){return this.fragment.find(selector);}};var Element_prototype_findAll=function Element_prototype_findAll(selector,query){ // Add this node to the query, if applicable, and register the\n\t// query on this element\n\tif(query._test(this,true) && query.live){(this.liveQueries || (this.liveQueries = [])).push(query);}if(this.fragment){this.fragment.findAll(selector,query);}};var Element_prototype_findAllComponents=function Element_prototype_findAllComponents(selector,query){if(this.fragment){this.fragment.findAllComponents(selector,query);}};var Element_prototype_findComponent=function Element_prototype_findComponent(selector){if(this.fragment){return this.fragment.findComponent(selector);}};var Element_prototype_findNextNode=Element$findNextNode;function Element$findNextNode(){return null;}var Element_prototype_firstNode=Element$firstNode;function Element$firstNode(){return this.node;}var getAttribute=Element$getAttribute;function Element$getAttribute(name){if(!this.attributes || !this.attributes[name]){return;}return this.attributes[name].value;}var truthy=/^true|on|yes|1$/i;var processBindingAttributes__isNumeric=/^[0-9]+$/;var processBindingAttributes=function processBindingAttributes(element,template){var val,attrs,attributes;attributes = template.a || {};attrs = {}; // attributes that are present but don't have a value (=)\n\t// will be set to the number 0, which we condider to be true\n\t// the string '0', however is false\n\tval = attributes.twoway;if(val !== undefined){attrs.twoway = val === 0 || truthy.test(val);}val = attributes.lazy;if(val !== undefined){ // check for timeout value\n\tif(val !== 0 && processBindingAttributes__isNumeric.test(val)){attrs.lazy = parseInt(val);}else {attrs.lazy = val === 0 || truthy.test(val);}}return attrs;};var Attribute_prototype_bubble=Attribute$bubble;function Attribute$bubble(){var value=this.useProperty || !this.rendered?this.fragment.getValue():this.fragment.toString(); // TODO this can register the attribute multiple times (see render test\n\t// 'Attribute with nested mustaches')\n\tif(!isEqual(value,this.value)){ // Need to clear old id from ractive.nodes\n\tif(this.name === \"id\" && this.value){delete this.root.nodes[this.value];}this.value = value;if(this.name === \"value\" && this.node){ // We need to store the value on the DOM like this so we\n\t// can retrieve it later without it being coerced to a string\n\tthis.node._ractive.value = value;}if(this.rendered){global_runloop.addView(this);}}}var svgCamelCaseElements,svgCamelCaseAttributes,createMap,map;svgCamelCaseElements = \"altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern\".split(\" \");svgCamelCaseAttributes = \"attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan\".split(\" \");createMap = function(items){var map={},i=items.length;while(i--) {map[items[i].toLowerCase()] = items[i];}return map;};map = createMap(svgCamelCaseElements.concat(svgCamelCaseAttributes));var enforceCase=function enforceCase(elementName){var lowerCaseElementName=elementName.toLowerCase();return map[lowerCaseElementName] || lowerCaseElementName;};var determineNameAndNamespace=function determineNameAndNamespace(attribute,name){var colonIndex,namespacePrefix; // are we dealing with a namespaced attribute, e.g. xlink:href?\n\tcolonIndex = name.indexOf(\":\");if(colonIndex !== -1){ // looks like we are, yes...\n\tnamespacePrefix = name.substr(0,colonIndex); // ...unless it's a namespace *declaration*, which we ignore (on the assumption\n\t// that only valid namespaces will be used)\n\tif(namespacePrefix !== \"xmlns\"){name = name.substring(colonIndex + 1);attribute.name = enforceCase(name);attribute.namespace = namespaces[namespacePrefix.toLowerCase()];attribute.namespacePrefix = namespacePrefix;if(!attribute.namespace){throw \"Unknown namespace (\\\"\" + namespacePrefix + \"\\\")\";}return;}} // SVG attribute names are case sensitive\n\tattribute.name = attribute.element.namespace !== namespaces.html?enforceCase(name):name;};var helpers_getInterpolator=getInterpolator;function getInterpolator(attribute){var items=attribute.fragment.items;if(items.length !== 1){return;}if(items[0].type === INTERPOLATOR){return items[0];}}var prototype_init=Attribute$init;function Attribute$init(options){this.type = ATTRIBUTE;this.element = options.element;this.root = options.root;determineNameAndNamespace(this,options.name);this.isBoolean = booleanAttributes.test(this.name); // if it's an empty attribute, or just a straight key-value pair, with no\n\t// mustache shenanigans, set the attribute accordingly and go home\n\tif(!options.value || typeof options.value === \"string\"){this.value = this.isBoolean?true:options.value || \"\";return;} // otherwise we need to do some work\n\t// share parentFragment with parent element\n\tthis.parentFragment = this.element.parentFragment;this.fragment = new virtualdom_Fragment({template:options.value,root:this.root,owner:this}); // TODO can we use this.fragment.toString() in some cases? It's quicker\n\tthis.value = this.fragment.getValue(); // Store a reference to this attribute's interpolator, if its fragment\n\t// takes the form `{{foo}}`. This is necessary for two-way binding and\n\t// for correctly rendering HTML later\n\tthis.interpolator = helpers_getInterpolator(this);this.isBindable = !!this.interpolator && !this.interpolator.isStatic; // mark as ready\n\tthis.ready = true;}var Attribute_prototype_rebind=Attribute$rebind;function Attribute$rebind(oldKeypath,newKeypath){if(this.fragment){this.fragment.rebind(oldKeypath,newKeypath);}}var Attribute_prototype_render=Attribute$render;var propertyNames={\"accept-charset\":\"acceptCharset\",accesskey:\"accessKey\",bgcolor:\"bgColor\",\"class\":\"className\",codebase:\"codeBase\",colspan:\"colSpan\",contenteditable:\"contentEditable\",datetime:\"dateTime\",dirname:\"dirName\",\"for\":\"htmlFor\",\"http-equiv\":\"httpEquiv\",ismap:\"isMap\",maxlength:\"maxLength\",novalidate:\"noValidate\",pubdate:\"pubDate\",readonly:\"readOnly\",rowspan:\"rowSpan\",tabindex:\"tabIndex\",usemap:\"useMap\"};function Attribute$render(node){var propertyName;this.node = node; // should we use direct property access, or setAttribute?\n\tif(!node.namespaceURI || node.namespaceURI === namespaces.html){propertyName = propertyNames[this.name] || this.name;if(node[propertyName] !== undefined){this.propertyName = propertyName;} // is attribute a boolean attribute or 'value'? If so we're better off doing e.g.\n\t// node.selected = true rather than node.setAttribute( 'selected', '' )\n\tif(this.isBoolean || this.isTwoway){this.useProperty = true;}if(propertyName === \"value\"){node._ractive.value = this.value;}}this.rendered = true;this.update();}var Attribute_prototype_toString=Attribute$toString;function Attribute$toString(){var _ref=this;var name=_ref.name;var namespacePrefix=_ref.namespacePrefix;var value=_ref.value;var interpolator=_ref.interpolator;var fragment=_ref.fragment; // Special case - select and textarea values (should not be stringified)\n\tif(name === \"value\" && (this.element.name === \"select\" || this.element.name === \"textarea\")){return;} // Special case - content editable\n\tif(name === \"value\" && this.element.getAttribute(\"contenteditable\") !== undefined){return;} // Special case - radio names\n\tif(name === \"name\" && this.element.name === \"input\" && interpolator){return \"name={{\" + (interpolator.keypath.str || interpolator.ref) + \"}}\";} // Boolean attributes\n\tif(this.isBoolean){return value?name:\"\";}if(fragment){ // special case - this catches undefined/null values (#1211)\n\tif(fragment.items.length === 1 && fragment.items[0].value == null){return \"\";}value = fragment.toString();}if(namespacePrefix){name = namespacePrefix + \":\" + name;}return value?name + \"=\\\"\" + Attribute_prototype_toString__escape(value) + \"\\\"\":name;}function Attribute_prototype_toString__escape(value){return value.replace(/&/g,\"&amp;\").replace(/\"/g,\"&quot;\").replace(/'/g,\"&#39;\");}var Attribute_prototype_unbind=Attribute$unbind;function Attribute$unbind(){ // ignore non-dynamic attributes\n\tif(this.fragment){this.fragment.unbind();}if(this.name === \"id\"){delete this.root.nodes[this.value];}}var updateSelectValue=Attribute$updateSelect;function Attribute$updateSelect(){var value=this.value,options,option,optionValue,i;if(!this.locked){this.node._ractive.value = value;options = this.node.options;i = options.length;while(i--) {option = options[i];optionValue = option._ractive?option._ractive.value:option.value; // options inserted via a triple don't have _ractive\n\tif(optionValue == value){ // double equals as we may be comparing numbers with strings\n\toption.selected = true;break;}}} // if we're still here, it means the new value didn't match any of the options...\n\t// TODO figure out what to do in this situation\n\t}var updateMultipleSelectValue=Attribute$updateMultipleSelect;function Attribute$updateMultipleSelect(){var value=this.value,options,i,option,optionValue;if(!isArray(value)){value = [value];}options = this.node.options;i = options.length;while(i--) {option = options[i];optionValue = option._ractive?option._ractive.value:option.value; // options inserted via a triple don't have _ractive\n\toption.selected = arrayContains(value,optionValue);}}var updateRadioName=Attribute$updateRadioName;function Attribute$updateRadioName(){var _ref=this;var node=_ref.node;var value=_ref.value;node.checked = value == node._ractive.value;}var updateRadioValue=Attribute$updateRadioValue;function Attribute$updateRadioValue(){var wasChecked,node=this.node,binding,bindings,i;wasChecked = node.checked;node.value = this.element.getAttribute(\"value\");node.checked = this.element.getAttribute(\"value\") === this.element.getAttribute(\"name\"); // This is a special case - if the input was checked, and the value\n\t// changed so that it's no longer checked, the twoway binding is\n\t// most likely out of date. To fix it we have to jump through some\n\t// hoops... this is a little kludgy but it works\n\tif(wasChecked && !node.checked && this.element.binding){bindings = this.element.binding.siblings;if(i = bindings.length){while(i--) {binding = bindings[i];if(!binding.element.node){ // this is the initial render, siblings are still rendering!\n\t// we'll come back later...\n\treturn;}if(binding.element.node.checked){global_runloop.addRactive(binding.root);return binding.handleChange();}}this.root.viewmodel.set(binding.keypath,undefined);}}}var updateCheckboxName=Attribute$updateCheckboxName;function Attribute$updateCheckboxName(){var _ref=this;var element=_ref.element;var node=_ref.node;var value=_ref.value;var binding=element.binding;var valueAttribute;var i;valueAttribute = element.getAttribute(\"value\");if(!isArray(value)){binding.isChecked = node.checked = value == valueAttribute;}else {i = value.length;while(i--) {if(valueAttribute == value[i]){binding.isChecked = node.checked = true;return;}}binding.isChecked = node.checked = false;}}var updateClassName=Attribute$updateClassName;function Attribute$updateClassName(){this.node.className = safeToStringValue(this.value);}var updateIdAttribute=Attribute$updateIdAttribute;function Attribute$updateIdAttribute(){var _ref=this;var node=_ref.node;var value=_ref.value;this.root.nodes[value] = node;node.id = value;}var updateIEStyleAttribute=Attribute$updateIEStyleAttribute;function Attribute$updateIEStyleAttribute(){var node,value;node = this.node;value = this.value;if(value === undefined){value = \"\";}node.style.setAttribute(\"cssText\",value);}var updateContentEditableValue=Attribute$updateContentEditableValue;function Attribute$updateContentEditableValue(){var value=this.value;if(value === undefined){value = \"\";}if(!this.locked){this.node.innerHTML = value;}}var updateValue=Attribute$updateValue;function Attribute$updateValue(){var _ref=this;var node=_ref.node;var value=_ref.value; // store actual value, so it doesn't get coerced to a string\n\tnode._ractive.value = value; // with two-way binding, only update if the change wasn't initiated by the user\n\t// otherwise the cursor will often be sent to the wrong place\n\tif(!this.locked){node.value = value == undefined?\"\":value;}}var updateBoolean=Attribute$updateBooleanAttribute;function Attribute$updateBooleanAttribute(){ // with two-way binding, only update if the change wasn't initiated by the user\n\t// otherwise the cursor will often be sent to the wrong place\n\tif(!this.locked){this.node[this.propertyName] = this.value;}}var updateEverythingElse=Attribute$updateEverythingElse;function Attribute$updateEverythingElse(){var _ref=this;var node=_ref.node;var namespace=_ref.namespace;var name=_ref.name;var value=_ref.value;var fragment=_ref.fragment;if(namespace){node.setAttributeNS(namespace,name,(fragment || value).toString());}else if(!this.isBoolean){if(value == null){node.removeAttribute(name);}else {node.setAttribute(name,(fragment || value).toString());}} // Boolean attributes - truthy becomes '', falsy means 'remove attribute'\n\telse {if(value){node.setAttribute(name,\"\");}else {node.removeAttribute(name);}}} // There are a few special cases when it comes to updating attributes. For this reason,\n\t// the prototype .update() method points to this method, which waits until the\n\t// attribute has finished initialising, then replaces the prototype method with a more\n\t// suitable one. That way, we save ourselves doing a bunch of tests on each call\n\tvar Attribute_prototype_update=Attribute$update;function Attribute$update(){var _ref=this;var name=_ref.name;var element=_ref.element;var node=_ref.node;var type;var updateMethod;if(name === \"id\"){updateMethod = updateIdAttribute;}else if(name === \"value\"){ // special case - selects\n\tif(element.name === \"select\" && name === \"value\"){updateMethod = element.getAttribute(\"multiple\")?updateMultipleSelectValue:updateSelectValue;}else if(element.name === \"textarea\"){updateMethod = updateValue;} // special case - contenteditable\n\telse if(element.getAttribute(\"contenteditable\") != null){updateMethod = updateContentEditableValue;} // special case - <input>\n\telse if(element.name === \"input\"){type = element.getAttribute(\"type\"); // type='file' value='{{fileList}}'>\n\tif(type === \"file\"){updateMethod = noop; // read-only\n\t} // type='radio' name='{{twoway}}'\n\telse if(type === \"radio\" && element.binding && element.binding.name === \"name\"){updateMethod = updateRadioValue;}else {updateMethod = updateValue;}}} // special case - <input type='radio' name='{{twoway}}' value='foo'>\n\telse if(this.isTwoway && name === \"name\"){if(node.type === \"radio\"){updateMethod = updateRadioName;}else if(node.type === \"checkbox\"){updateMethod = updateCheckboxName;}} // special case - style attributes in Internet Exploder\n\telse if(name === \"style\" && node.style.setAttribute){updateMethod = updateIEStyleAttribute;} // special case - class names. IE fucks things up, again\n\telse if(name === \"class\" && (!node.namespaceURI || node.namespaceURI === namespaces.html)){updateMethod = updateClassName;}else if(this.useProperty){updateMethod = updateBoolean;}if(!updateMethod){updateMethod = updateEverythingElse;}this.update = updateMethod;this.update();}var Attribute=function Attribute(options){this.init(options);};Attribute.prototype = {bubble:Attribute_prototype_bubble,init:prototype_init,rebind:Attribute_prototype_rebind,render:Attribute_prototype_render,toString:Attribute_prototype_toString,unbind:Attribute_prototype_unbind,update:Attribute_prototype_update};var _Attribute=Attribute;var createAttributes=function createAttributes(element,attributes){var name,attribute,result=[];for(name in attributes) { // skip binding attributes\n\tif(name === \"twoway\" || name === \"lazy\"){continue;}if(attributes.hasOwnProperty(name)){attribute = new _Attribute({element:element,name:name,value:attributes[name],root:element.root});result[name] = attribute;if(name !== \"value\"){result.push(attribute);}}} // value attribute goes last. This is because it\n\t// may get clamped on render otherwise, e.g. in\n\t// `<input type='range' value='999' min='0' max='1000'>`\n\t// since default max is 100\n\tif(attribute = result.value){result.push(attribute);}return result;};var _ConditionalAttribute__div;if(typeof document !== \"undefined\"){_ConditionalAttribute__div = createElement(\"div\");}var ConditionalAttribute=function ConditionalAttribute(element,template){this.element = element;this.root = element.root;this.parentFragment = element.parentFragment;this.attributes = [];this.fragment = new virtualdom_Fragment({root:element.root,owner:this,template:[template]});};ConditionalAttribute.prototype = {bubble:function bubble(){if(this.node){this.update();}this.element.bubble();},rebind:function rebind(oldKeypath,newKeypath){this.fragment.rebind(oldKeypath,newKeypath);},render:function render(node){this.node = node;this.isSvg = node.namespaceURI === namespaces.svg;this.update();},unbind:function unbind(){this.fragment.unbind();},update:function update(){var _this=this;var str,attrs;str = this.fragment.toString();attrs = parseAttributes(str,this.isSvg); // any attributes that previously existed but no longer do\n\t// must be removed\n\tthis.attributes.filter(function(a){return notIn(attrs,a);}).forEach(function(a){_this.node.removeAttribute(a.name);});attrs.forEach(function(a){_this.node.setAttribute(a.name,a.value);});this.attributes = attrs;},toString:function toString(){return this.fragment.toString();}};var _ConditionalAttribute=ConditionalAttribute;function parseAttributes(str,isSvg){var tag=isSvg?\"svg\":\"div\";_ConditionalAttribute__div.innerHTML = \"<\" + tag + \" \" + str + \"></\" + tag + \">\";return toArray(_ConditionalAttribute__div.childNodes[0].attributes);}function notIn(haystack,needle){var i=haystack.length;while(i--) {if(haystack[i].name === needle.name){return false;}}return true;}var createConditionalAttributes=function createConditionalAttributes(element,attributes){if(!attributes){return [];}return attributes.map(function(a){return new _ConditionalAttribute(element,a);});};var Binding=function Binding(element){var interpolator,keypath,value,parentForm;this.element = element;this.root = element.root;this.attribute = element.attributes[this.name || \"value\"];interpolator = this.attribute.interpolator;interpolator.twowayBinding = this;if(keypath = interpolator.keypath){if(keypath.str.slice(-1) === \"}\"){warnOnceIfDebug(\"Two-way binding does not work with expressions (`%s` on <%s>)\",interpolator.resolver.uniqueString,element.name,{ractive:this.root});return false;}if(keypath.isSpecial){warnOnceIfDebug(\"Two-way binding does not work with %s\",interpolator.resolver.ref,{ractive:this.root});return false;}}else { // A mustache may be *ambiguous*. Let's say we were given\n\t// `value=\"{{bar}}\"`. If the context was `foo`, and `foo.bar`\n\t// *wasn't* `undefined`, the keypath would be `foo.bar`.\n\t// Then, any user input would result in `foo.bar` being updated.\n\t//\n\t// If, however, `foo.bar` *was* undefined, and so was `bar`, we would be\n\t// left with an unresolved partial keypath - so we are forced to make an\n\t// assumption. That assumption is that the input in question should\n\t// be forced to resolve to `bar`, and any user input would affect `bar`\n\t// and not `foo.bar`.\n\t//\n\t// Did that make any sense? No? Oh. Sorry. Well the moral of the story is\n\t// be explicit when using two-way data-binding about what keypath you're\n\t// updating. Using it in lists is probably a recipe for confusion...\n\tvar ref=interpolator.template.r?\"'\" + interpolator.template.r + \"' reference\":\"expression\";warnIfDebug(\"The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity\",ref,{ractive:this.root});interpolator.resolver.forceResolution();keypath = interpolator.keypath;}this.attribute.isTwoway = true;this.keypath = keypath; // initialise value, if it's undefined\n\tvalue = this.root.viewmodel.get(keypath);if(value === undefined && this.getInitialValue){value = this.getInitialValue();if(value !== undefined){this.root.viewmodel.set(keypath,value);}}if(parentForm = findParentForm(element)){this.resetValue = value;parentForm.formBindings.push(this);}};Binding.prototype = {handleChange:function handleChange(){var _this=this;global_runloop.start(this.root);this.attribute.locked = true;this.root.viewmodel.set(this.keypath,this.getValue());global_runloop.scheduleTask(function(){return _this.attribute.locked = false;});global_runloop.end();},rebound:function rebound(){var bindings,oldKeypath,newKeypath;oldKeypath = this.keypath;newKeypath = this.attribute.interpolator.keypath; // The attribute this binding is linked to has already done the work\n\tif(oldKeypath === newKeypath){return;}removeFromArray(this.root._twowayBindings[oldKeypath.str],this);this.keypath = newKeypath;bindings = this.root._twowayBindings[newKeypath.str] || (this.root._twowayBindings[newKeypath.str] = []);bindings.push(this);},unbind:function unbind(){}};Binding.extend = function(properties){var Parent=this,SpecialisedBinding;SpecialisedBinding = function(element){Binding.call(this,element);if(this.init){this.init();}};SpecialisedBinding.prototype = create(Parent.prototype);utils_object__extend(SpecialisedBinding.prototype,properties);SpecialisedBinding.extend = Binding.extend;return SpecialisedBinding;};var Binding_Binding=Binding;function findParentForm(element){while(element = element.parent) {if(element.name === \"form\"){return element;}}} // this is called when the element is unbound.\n\t// Specialised bindings can override it\n\t// This is the handler for DOM events that would lead to a change in the model\n\t// (i.e. change, sometimes, input, and occasionally click and keyup)\n\tvar handleDomEvent=handleChange;function handleChange(){this._ractive.binding.handleChange();}var GenericBinding;GenericBinding = Binding_Binding.extend({getInitialValue:function getInitialValue(){return \"\";},getValue:function getValue(){return this.element.node.value;},render:function render(){var node=this.element.node,lazy,timeout=false;this.rendered = true; // any lazy setting for this element overrides the root\n\t// if the value is a number, it's a timeout\n\tlazy = this.root.lazy;if(this.element.lazy === true){lazy = true;}else if(this.element.lazy === false){lazy = false;}else if(is__isNumeric(this.element.lazy)){lazy = false;timeout = +this.element.lazy;}else if(is__isNumeric(lazy || \"\")){timeout = +lazy;lazy = false; // make sure the timeout is available to the handler\n\tthis.element.lazy = timeout;}this.handler = timeout?handleDelay:handleDomEvent;node.addEventListener(\"change\",handleDomEvent,false);if(!lazy){node.addEventListener(\"input\",this.handler,false);if(node.attachEvent){node.addEventListener(\"keyup\",this.handler,false);}}node.addEventListener(\"blur\",handleBlur,false);},unrender:function unrender(){var node=this.element.node;this.rendered = false;node.removeEventListener(\"change\",handleDomEvent,false);node.removeEventListener(\"input\",this.handler,false);node.removeEventListener(\"keyup\",this.handler,false);node.removeEventListener(\"blur\",handleBlur,false);}});var Binding_GenericBinding=GenericBinding;function handleBlur(){var value;handleDomEvent.call(this);value = this._ractive.root.viewmodel.get(this._ractive.binding.keypath);this.value = value == undefined?\"\":value;}function handleDelay(){var binding=this._ractive.binding,el=this;if(!!binding._timeout)clearTimeout(binding._timeout);binding._timeout = setTimeout(function(){if(binding.rendered)handleDomEvent.call(el);binding._timeout = undefined;},binding.element.lazy);}var ContentEditableBinding=Binding_GenericBinding.extend({getInitialValue:function getInitialValue(){return this.element.fragment?this.element.fragment.toString():\"\";},getValue:function getValue(){return this.element.node.innerHTML;}});var Binding_ContentEditableBinding=ContentEditableBinding;var shared_getSiblings=getSiblings;var sets={};function getSiblings(id,group,keypath){var hash=id + group + keypath;return sets[hash] || (sets[hash] = []);}var RadioBinding=Binding_Binding.extend({name:\"checked\",init:function init(){this.siblings = shared_getSiblings(this.root._guid,\"radio\",this.element.getAttribute(\"name\"));this.siblings.push(this);},render:function render(){var node=this.element.node;node.addEventListener(\"change\",handleDomEvent,false);if(node.attachEvent){node.addEventListener(\"click\",handleDomEvent,false);}},unrender:function unrender(){var node=this.element.node;node.removeEventListener(\"change\",handleDomEvent,false);node.removeEventListener(\"click\",handleDomEvent,false);},handleChange:function handleChange(){global_runloop.start(this.root);this.siblings.forEach(function(binding){binding.root.viewmodel.set(binding.keypath,binding.getValue());});global_runloop.end();},getValue:function getValue(){return this.element.node.checked;},unbind:function unbind(){removeFromArray(this.siblings,this);}});var Binding_RadioBinding=RadioBinding;var RadioNameBinding=Binding_Binding.extend({name:\"name\",init:function init(){this.siblings = shared_getSiblings(this.root._guid,\"radioname\",this.keypath.str);this.siblings.push(this);this.radioName = true; // so that ractive.updateModel() knows what to do with this\n\t},getInitialValue:function getInitialValue(){if(this.element.getAttribute(\"checked\")){return this.element.getAttribute(\"value\");}},render:function render(){var node=this.element.node;node.name = \"{{\" + this.keypath.str + \"}}\";node.checked = this.root.viewmodel.get(this.keypath) == this.element.getAttribute(\"value\");node.addEventListener(\"change\",handleDomEvent,false);if(node.attachEvent){node.addEventListener(\"click\",handleDomEvent,false);}},unrender:function unrender(){var node=this.element.node;node.removeEventListener(\"change\",handleDomEvent,false);node.removeEventListener(\"click\",handleDomEvent,false);},getValue:function getValue(){var node=this.element.node;return node._ractive?node._ractive.value:node.value;},handleChange:function handleChange(){ // If this <input> is the one that's checked, then the value of its\n\t// `name` keypath gets set to its value\n\tif(this.element.node.checked){Binding_Binding.prototype.handleChange.call(this);}},rebound:function rebound(oldKeypath,newKeypath){var node;Binding_Binding.prototype.rebound.call(this,oldKeypath,newKeypath);if(node = this.element.node){node.name = \"{{\" + this.keypath.str + \"}}\";}},unbind:function unbind(){removeFromArray(this.siblings,this);}});var Binding_RadioNameBinding=RadioNameBinding;var CheckboxNameBinding=Binding_Binding.extend({name:\"name\",getInitialValue:function getInitialValue(){ // This only gets called once per group (of inputs that\n\t// share a name), because it only gets called if there\n\t// isn't an initial value. By the same token, we can make\n\t// a note of that fact that there was no initial value,\n\t// and populate it using any `checked` attributes that\n\t// exist (which users should avoid, but which we should\n\t// support anyway to avoid breaking expectations)\n\tthis.noInitialValue = true;return [];},init:function init(){var existingValue,bindingValue;this.checkboxName = true; // so that ractive.updateModel() knows what to do with this\n\t// Each input has a reference to an array containing it and its\n\t// siblings, as two-way binding depends on being able to ascertain\n\t// the status of all inputs within the group\n\tthis.siblings = shared_getSiblings(this.root._guid,\"checkboxes\",this.keypath.str);this.siblings.push(this);if(this.noInitialValue){this.siblings.noInitialValue = true;} // If no initial value was set, and this input is checked, we\n\t// update the model\n\tif(this.siblings.noInitialValue && this.element.getAttribute(\"checked\")){existingValue = this.root.viewmodel.get(this.keypath);bindingValue = this.element.getAttribute(\"value\");existingValue.push(bindingValue);}},unbind:function unbind(){removeFromArray(this.siblings,this);},render:function render(){var node=this.element.node,existingValue,bindingValue;existingValue = this.root.viewmodel.get(this.keypath);bindingValue = this.element.getAttribute(\"value\");if(isArray(existingValue)){this.isChecked = arrayContains(existingValue,bindingValue);}else {this.isChecked = existingValue == bindingValue;}node.name = \"{{\" + this.keypath.str + \"}}\";node.checked = this.isChecked;node.addEventListener(\"change\",handleDomEvent,false); // in case of IE emergency, bind to click event as well\n\tif(node.attachEvent){node.addEventListener(\"click\",handleDomEvent,false);}},unrender:function unrender(){var node=this.element.node;node.removeEventListener(\"change\",handleDomEvent,false);node.removeEventListener(\"click\",handleDomEvent,false);},changed:function changed(){var wasChecked=!!this.isChecked;this.isChecked = this.element.node.checked;return this.isChecked === wasChecked;},handleChange:function handleChange(){this.isChecked = this.element.node.checked;Binding_Binding.prototype.handleChange.call(this);},getValue:function getValue(){return this.siblings.filter(isChecked).map(Binding_CheckboxNameBinding__getValue);}});function isChecked(binding){return binding.isChecked;}function Binding_CheckboxNameBinding__getValue(binding){return binding.element.getAttribute(\"value\");}var Binding_CheckboxNameBinding=CheckboxNameBinding;var CheckboxBinding=Binding_Binding.extend({name:\"checked\",render:function render(){var node=this.element.node;node.addEventListener(\"change\",handleDomEvent,false);if(node.attachEvent){node.addEventListener(\"click\",handleDomEvent,false);}},unrender:function unrender(){var node=this.element.node;node.removeEventListener(\"change\",handleDomEvent,false);node.removeEventListener(\"click\",handleDomEvent,false);},getValue:function getValue(){return this.element.node.checked;}});var Binding_CheckboxBinding=CheckboxBinding;var SelectBinding=Binding_Binding.extend({getInitialValue:function getInitialValue(){var options=this.element.options,len,i,value,optionWasSelected;if(this.element.getAttribute(\"value\") !== undefined){return;}i = len = options.length;if(!len){return;} // take the final selected option...\n\twhile(i--) {if(options[i].getAttribute(\"selected\")){value = options[i].getAttribute(\"value\");optionWasSelected = true;break;}} // or the first non-disabled option, if none are selected\n\tif(!optionWasSelected){while(++i < len) {if(!options[i].getAttribute(\"disabled\")){value = options[i].getAttribute(\"value\");break;}}} // This is an optimisation (aka hack) that allows us to forgo some\n\t// other more expensive work\n\tif(value !== undefined){this.element.attributes.value.value = value;}return value;},render:function render(){this.element.node.addEventListener(\"change\",handleDomEvent,false);},unrender:function unrender(){this.element.node.removeEventListener(\"change\",handleDomEvent,false);}, // TODO this method is an anomaly... is it necessary?\n\tsetValue:function setValue(value){this.root.viewmodel.set(this.keypath,value);},getValue:function getValue(){var options,i,len,option,optionValue;options = this.element.node.options;len = options.length;for(i = 0;i < len;i += 1) {option = options[i];if(options[i].selected){optionValue = option._ractive?option._ractive.value:option.value;return optionValue;}}},forceUpdate:function forceUpdate(){var _this=this;var value=this.getValue();if(value !== undefined){this.attribute.locked = true;global_runloop.scheduleTask(function(){return _this.attribute.locked = false;});this.root.viewmodel.set(this.keypath,value);}}});var Binding_SelectBinding=SelectBinding;var MultipleSelectBinding=Binding_SelectBinding.extend({getInitialValue:function getInitialValue(){return this.element.options.filter(function(option){return option.getAttribute(\"selected\");}).map(function(option){return option.getAttribute(\"value\");});},render:function render(){var valueFromModel;this.element.node.addEventListener(\"change\",handleDomEvent,false);valueFromModel = this.root.viewmodel.get(this.keypath);if(valueFromModel === undefined){ // get value from DOM, if possible\n\tthis.handleChange();}},unrender:function unrender(){this.element.node.removeEventListener(\"change\",handleDomEvent,false);},setValue:function setValue(){throw new Error(\"TODO not implemented yet\");},getValue:function getValue(){var selectedValues,options,i,len,option,optionValue;selectedValues = [];options = this.element.node.options;len = options.length;for(i = 0;i < len;i += 1) {option = options[i];if(option.selected){optionValue = option._ractive?option._ractive.value:option.value;selectedValues.push(optionValue);}}return selectedValues;},handleChange:function handleChange(){var attribute,previousValue,value;attribute = this.attribute;previousValue = attribute.value;value = this.getValue();if(previousValue === undefined || !arrayContentsMatch(value,previousValue)){Binding_SelectBinding.prototype.handleChange.call(this);}return this;},forceUpdate:function forceUpdate(){var _this=this;var value=this.getValue();if(value !== undefined){this.attribute.locked = true;global_runloop.scheduleTask(function(){return _this.attribute.locked = false;});this.root.viewmodel.set(this.keypath,value);}},updateModel:function updateModel(){if(this.attribute.value === undefined || !this.attribute.value.length){this.root.viewmodel.set(this.keypath,this.initialValue);}}});var Binding_MultipleSelectBinding=MultipleSelectBinding;var FileListBinding=Binding_Binding.extend({render:function render(){this.element.node.addEventListener(\"change\",handleDomEvent,false);},unrender:function unrender(){this.element.node.removeEventListener(\"change\",handleDomEvent,false);},getValue:function getValue(){return this.element.node.files;}});var Binding_FileListBinding=FileListBinding;var NumericBinding=Binding_GenericBinding.extend({getInitialValue:function getInitialValue(){return undefined;},getValue:function getValue(){var value=parseFloat(this.element.node.value);return isNaN(value)?undefined:value;}});var init_createTwowayBinding=createTwowayBinding;function createTwowayBinding(element){var attributes=element.attributes,type,Binding,bindName,bindChecked,binding; // if this is a late binding, and there's already one, it\n\t// needs to be torn down\n\tif(element.binding){element.binding.teardown();element.binding = null;} // contenteditable\n\tif( // if the contenteditable attribute is true or is bindable and may thus become true\n\t(element.getAttribute(\"contenteditable\") || !!attributes.contenteditable && isBindable(attributes.contenteditable)) && isBindable(attributes.value)){Binding = Binding_ContentEditableBinding;} // <input>\n\telse if(element.name === \"input\"){type = element.getAttribute(\"type\");if(type === \"radio\" || type === \"checkbox\"){bindName = isBindable(attributes.name);bindChecked = isBindable(attributes.checked); // we can either bind the name attribute, or the checked attribute - not both\n\tif(bindName && bindChecked){warnIfDebug(\"A radio input can have two-way binding on its name attribute, or its checked attribute - not both\",{ractive:element.root});}if(bindName){Binding = type === \"radio\"?Binding_RadioNameBinding:Binding_CheckboxNameBinding;}else if(bindChecked){Binding = type === \"radio\"?Binding_RadioBinding:Binding_CheckboxBinding;}}else if(type === \"file\" && isBindable(attributes.value)){Binding = Binding_FileListBinding;}else if(isBindable(attributes.value)){Binding = type === \"number\" || type === \"range\"?NumericBinding:Binding_GenericBinding;}} // <select>\n\telse if(element.name === \"select\" && isBindable(attributes.value)){Binding = element.getAttribute(\"multiple\")?Binding_MultipleSelectBinding:Binding_SelectBinding;} // <textarea>\n\telse if(element.name === \"textarea\" && isBindable(attributes.value)){Binding = Binding_GenericBinding;}if(Binding && (binding = new Binding(element)) && binding.keypath){return binding;}}function isBindable(attribute){return attribute && attribute.isBindable;} // and this element also has a value attribute to bind\n\tvar EventHandler_prototype_bubble=EventHandler$bubble;function EventHandler$bubble(){var hasAction=this.getAction();if(hasAction && !this.hasListener){this.listen();}else if(!hasAction && this.hasListener){this.unrender();}} // This function may be overwritten, if the event directive\n\t// includes parameters\n\tvar EventHandler_prototype_fire=EventHandler$fire;function EventHandler$fire(event){shared_fireEvent(this.root,this.getAction(),{event:event});}var getAction=EventHandler$getAction;function EventHandler$getAction(){return this.action.toString().trim();}var EventHandler_prototype_init=EventHandler$init;var eventPattern=/^event(?:\\.(.+))?/;function EventHandler$init(element,name,template){var _this=this;var action,refs,ractive;this.element = element;this.root = element.root;this.parentFragment = element.parentFragment;this.name = name;if(name.indexOf(\"*\") !== -1){fatal(\"Only component proxy-events may contain \\\"*\\\" wildcards, <%s on-%s=\\\"...\\\"/> is not valid\",element.name,name);this.invalid = true;}if(template.m){refs = template.a.r; // This is a method call\n\tthis.method = template.m;this.keypaths = [];this.fn = shared_getFunctionFromString(template.a.s,refs.length);this.parentFragment = element.parentFragment;ractive = this.root; // Create resolvers for each reference\n\tthis.refResolvers = [];refs.forEach(function(ref,i){var match=undefined; // special case - the `event` object\n\tif(match = eventPattern.exec(ref)){_this.keypaths[i] = {eventObject:true,refinements:match[1]?match[1].split(\".\"):[]};}else {_this.refResolvers.push(Resolvers_createReferenceResolver(_this,ref,function(keypath){return _this.resolve(i,keypath);}));}});this.fire = fireMethodCall;}else { // Get action ('foo' in 'on-click='foo')\n\taction = template.n || template;if(typeof action !== \"string\"){action = new virtualdom_Fragment({template:action,root:this.root,owner:this});}this.action = action; // Get parameters\n\tif(template.d){this.dynamicParams = new virtualdom_Fragment({template:template.d,root:this.root,owner:this.element});this.fire = fireEventWithDynamicParams;}else if(template.a){this.params = template.a;this.fire = fireEventWithParams;}}}function fireMethodCall(event){var ractive,values,args;ractive = this.root;if(typeof ractive[this.method] !== \"function\"){throw new Error(\"Attempted to call a non-existent method (\\\"\" + this.method + \"\\\")\");}values = this.keypaths.map(function(keypath){var value,len,i;if(keypath === undefined){ // not yet resolved\n\treturn undefined;} // TODO the refinements stuff would be better handled at parse time\n\tif(keypath.eventObject){value = event;if(len = keypath.refinements.length){for(i = 0;i < len;i += 1) {value = value[keypath.refinements[i]];}}}else {value = ractive.viewmodel.get(keypath);}return value;});shared_eventStack.enqueue(ractive,event);args = this.fn.apply(null,values);ractive[this.method].apply(ractive,args);shared_eventStack.dequeue(ractive);}function fireEventWithParams(event){shared_fireEvent(this.root,this.getAction(),{event:event,args:this.params});}function fireEventWithDynamicParams(event){var args=this.dynamicParams.getArgsList(); // need to strip [] from ends if a string!\n\tif(typeof args === \"string\"){args = args.substr(1,args.length - 2);}shared_fireEvent(this.root,this.getAction(),{event:event,args:args});}var shared_genericHandler=genericHandler;function genericHandler(event){var storage,handler,indices,index={};storage = this._ractive;handler = storage.events[event.type];if(indices = Resolvers_findIndexRefs(handler.element.parentFragment)){index = Resolvers_findIndexRefs.resolve(indices);}handler.fire({node:this,original:event,index:index,keypath:storage.keypath.str,context:storage.root.viewmodel.get(storage.keypath)});}var listen=EventHandler$listen;var customHandlers={},touchEvents={touchstart:true,touchmove:true,touchend:true,touchcancel:true, //not w3c, but supported in some browsers\n\ttouchleave:true};function EventHandler$listen(){var definition,name=this.name;if(this.invalid){return;}if(definition = findInViewHierarchy(\"events\",this.root,name)){this.custom = definition(this.node,getCustomHandler(name));}else { // Looks like we're dealing with a standard DOM event... but let's check\n\tif(!(\"on\" + name in this.node) && !(window && \"on\" + name in window) && !isJsdom){ // okay to use touch events if this browser doesn't support them\n\tif(!touchEvents[name]){warnOnceIfDebug(missingPlugin(name,\"event\"),{node:this.node});}return;}this.node.addEventListener(name,shared_genericHandler,false);}this.hasListener = true;}function getCustomHandler(name){if(!customHandlers[name]){customHandlers[name] = function(event){var storage=event.node._ractive;event.index = storage.index;event.keypath = storage.keypath.str;event.context = storage.root.viewmodel.get(storage.keypath);storage.events[name].fire(event);};}return customHandlers[name];}var EventHandler_prototype_rebind=EventHandler$rebind;function EventHandler$rebind(oldKeypath,newKeypath){var fragment;if(this.method){fragment = this.element.parentFragment;this.refResolvers.forEach(rebind);return;}if(typeof this.action !== \"string\"){rebind(this.action);}if(this.dynamicParams){rebind(this.dynamicParams);}function rebind(thing){thing && thing.rebind(oldKeypath,newKeypath);}}var EventHandler_prototype_render=EventHandler$render;function EventHandler$render(){this.node = this.element.node; // store this on the node itself, so it can be retrieved by a\n\t// universal handler\n\tthis.node._ractive.events[this.name] = this;if(this.method || this.getAction()){this.listen();}}var prototype_resolve=EventHandler$resolve;function EventHandler$resolve(index,keypath){this.keypaths[index] = keypath;}var EventHandler_prototype_unbind=EventHandler$unbind;function EventHandler$unbind(){if(this.method){this.refResolvers.forEach(methodCallers__unbind);return;} // Tear down dynamic name\n\tif(typeof this.action !== \"string\"){this.action.unbind();} // Tear down dynamic parameters\n\tif(this.dynamicParams){this.dynamicParams.unbind();}}var EventHandler_prototype_unrender=EventHandler$unrender;function EventHandler$unrender(){if(this.custom){this.custom.teardown();}else {this.node.removeEventListener(this.name,shared_genericHandler,false);}this.hasListener = false;}var EventHandler=function EventHandler(element,name,template){this.init(element,name,template);};EventHandler.prototype = {bubble:EventHandler_prototype_bubble,fire:EventHandler_prototype_fire,getAction:getAction,init:EventHandler_prototype_init,listen:listen,rebind:EventHandler_prototype_rebind,render:EventHandler_prototype_render,resolve:prototype_resolve,unbind:EventHandler_prototype_unbind,unrender:EventHandler_prototype_unrender};var _EventHandler=EventHandler;var createEventHandlers=function createEventHandlers(element,template){var i,name,names,handler,result=[];for(name in template) {if(template.hasOwnProperty(name)){names = name.split(\"-\");i = names.length;while(i--) {handler = new _EventHandler(element,names[i],template[name]);result.push(handler);}}}return result;};var Decorator=function Decorator(element,template){var self=this,ractive,name,fragment;this.element = element;this.root = ractive = element.root;name = template.n || template;if(typeof name !== \"string\"){fragment = new virtualdom_Fragment({template:name,root:ractive,owner:element});name = fragment.toString();fragment.unbind();if(name === \"\"){ // empty string okay, just no decorator\n\treturn;}}if(template.a){this.params = template.a;}else if(template.d){this.fragment = new virtualdom_Fragment({template:template.d,root:ractive,owner:element});this.params = this.fragment.getArgsList();this.fragment.bubble = function(){this.dirtyArgs = this.dirtyValue = true;self.params = this.getArgsList();if(self.ready){self.update();}};}this.fn = findInViewHierarchy(\"decorators\",ractive,name);if(!this.fn){fatal(missingPlugin(name,\"decorator\"));}};Decorator.prototype = {init:function init(){var node,result,args;node = this.element.node;if(this.params){args = [node].concat(this.params);result = this.fn.apply(this.root,args);}else {result = this.fn.call(this.root,node);}if(!result || !result.teardown){throw new Error(\"Decorator definition must return an object with a teardown method\");} // TODO does this make sense?\n\tthis.actual = result;this.ready = true;},update:function update(){if(this.actual.update){this.actual.update.apply(this.root,this.params);}else {this.actual.teardown(true);this.init();}},rebind:function rebind(oldKeypath,newKeypath){if(this.fragment){this.fragment.rebind(oldKeypath,newKeypath);}},teardown:function teardown(updating){this.torndown = true;if(this.ready){this.actual.teardown();}if(!updating && this.fragment){this.fragment.unbind();}}};var _Decorator=Decorator;function select__bubble(){var _this=this;if(!this.dirty){this.dirty = true;global_runloop.scheduleTask(function(){sync(_this);_this.dirty = false;});}this.parentFragment.bubble(); // default behaviour\n\t}function sync(selectElement){var selectNode,selectValue,isMultiple,options,optionWasSelected;selectNode = selectElement.node;if(!selectNode){return;}options = toArray(selectNode.options);selectValue = selectElement.getAttribute(\"value\");isMultiple = selectElement.getAttribute(\"multiple\"); // If the <select> has a specified value, that should override\n\t// these options\n\tif(selectValue !== undefined){options.forEach(function(o){var optionValue,shouldSelect;optionValue = o._ractive?o._ractive.value:o.value;shouldSelect = isMultiple?valueContains(selectValue,optionValue):selectValue == optionValue;if(shouldSelect){optionWasSelected = true;}o.selected = shouldSelect;});if(!optionWasSelected){if(options[0]){options[0].selected = true;}if(selectElement.binding){selectElement.binding.forceUpdate();}}} // Otherwise the value should be initialised according to which\n\t// <option> element is selected, if twoway binding is in effect\n\telse if(selectElement.binding){selectElement.binding.forceUpdate();}}function valueContains(selectValue,optionValue){var i=selectValue.length;while(i--) {if(selectValue[i] == optionValue){return true;}}}function special_option__init(option,template){option.select = findParentSelect(option.parent); // we might be inside a <datalist> element\n\tif(!option.select){return;}option.select.options.push(option); // If the value attribute is missing, use the element's content\n\tif(!template.a){template.a = {};} // ...as long as it isn't disabled\n\tif(template.a.value === undefined && !template.a.hasOwnProperty(\"disabled\")){template.a.value = template.f;} // If there is a `selected` attribute, but the <select>\n\t// already has a value, delete it\n\tif(\"selected\" in template.a && option.select.getAttribute(\"value\") !== undefined){delete template.a.selected;}}function special_option__unbind(option){if(option.select){removeFromArray(option.select.options,option);}}function findParentSelect(element){if(!element){return;}do {if(element.name === \"select\"){return element;}}while(element = element.parent);}var Element_prototype_init=Element$init;function Element$init(options){var parentFragment,template,ractive,binding,bindings,twoway,bindingAttrs;this.type = ELEMENT; // stuff we'll need later\n\tparentFragment = this.parentFragment = options.parentFragment;template = this.template = options.template;this.parent = options.pElement || parentFragment.pElement;this.root = ractive = parentFragment.root;this.index = options.index;this.key = options.key;this.name = enforceCase(template.e); // Special case - <option> elements\n\tif(this.name === \"option\"){special_option__init(this,template);} // Special case - <select> elements\n\tif(this.name === \"select\"){this.options = [];this.bubble = select__bubble; // TODO this is a kludge\n\t} // Special case - <form> elements\n\tif(this.name === \"form\"){this.formBindings = [];} // handle binding attributes first (twoway, lazy)\n\tbindingAttrs = processBindingAttributes(this,template); // create attributes\n\tthis.attributes = createAttributes(this,template.a);this.conditionalAttributes = createConditionalAttributes(this,template.m); // append children, if there are any\n\tif(template.f){this.fragment = new virtualdom_Fragment({template:template.f,root:ractive,owner:this,pElement:this,cssIds:null});} // the element setting should override the ractive setting\n\ttwoway = ractive.twoway;if(bindingAttrs.twoway === false)twoway = false;else if(bindingAttrs.twoway === true)twoway = true;this.twoway = twoway;this.lazy = bindingAttrs.lazy; // create twoway binding\n\tif(twoway && (binding = init_createTwowayBinding(this,template.a))){this.binding = binding; // register this with the root, so that we can do ractive.updateModel()\n\tbindings = this.root._twowayBindings[binding.keypath.str] || (this.root._twowayBindings[binding.keypath.str] = []);bindings.push(binding);} // create event proxies\n\tif(template.v){this.eventHandlers = createEventHandlers(this,template.v);} // create decorator\n\tif(template.o){this.decorator = new _Decorator(this,template.o);} // create transitions\n\tthis.intro = template.t0 || template.t1;this.outro = template.t0 || template.t2;}var Element_prototype_rebind=Element$rebind;function Element$rebind(oldKeypath,newKeypath){var i,storage,liveQueries,ractive;if(this.attributes){this.attributes.forEach(rebind);}if(this.conditionalAttributes){this.conditionalAttributes.forEach(rebind);}if(this.eventHandlers){this.eventHandlers.forEach(rebind);}if(this.decorator){rebind(this.decorator);} // rebind children\n\tif(this.fragment){rebind(this.fragment);} // Update live queries, if necessary\n\tif(liveQueries = this.liveQueries){ractive = this.root;i = liveQueries.length;while(i--) {liveQueries[i]._makeDirty();}}if(this.node && (storage = this.node._ractive)){ // adjust keypath if needed\n\tassignNewKeypath(storage,\"keypath\",oldKeypath,newKeypath);}function rebind(thing){thing.rebind(oldKeypath,newKeypath);}}function special_img__render(img){var loadHandler; // if this is an <img>, and we're in a crap browser, we may need to prevent it\n\t// from overriding width and height when it loads the src\n\tif(img.attributes.width || img.attributes.height){img.node.addEventListener(\"load\",loadHandler = function(){var width=img.getAttribute(\"width\"),height=img.getAttribute(\"height\");if(width !== undefined){img.node.setAttribute(\"width\",width);}if(height !== undefined){img.node.setAttribute(\"height\",height);}img.node.removeEventListener(\"load\",loadHandler,false);},false);}}function form__render(element){element.node.addEventListener(\"reset\",handleReset,false);}function form__unrender(element){element.node.removeEventListener(\"reset\",handleReset,false);}function handleReset(){var element=this._ractive.proxy;global_runloop.start();element.formBindings.forEach(updateModel);global_runloop.end();}function updateModel(binding){binding.root.viewmodel.set(binding.keypath,binding.resetValue);}var Transition_prototype_init=Transition$init;function Transition$init(element,template,isIntro){var ractive,name,fragment;this.element = element;this.root = ractive = element.root;this.isIntro = isIntro;name = template.n || template;if(typeof name !== \"string\"){fragment = new virtualdom_Fragment({template:name,root:ractive,owner:element});name = fragment.toString();fragment.unbind();if(name === \"\"){ // empty string okay, just no transition\n\treturn;}}this.name = name;if(template.a){this.params = template.a;}else if(template.d){ // TODO is there a way to interpret dynamic arguments without all the\n\t// 'dependency thrashing'?\n\tfragment = new virtualdom_Fragment({template:template.d,root:ractive,owner:element});this.params = fragment.getArgsList();fragment.unbind();}this._fn = findInViewHierarchy(\"transitions\",ractive,name);if(!this._fn){warnOnceIfDebug(missingPlugin(name,\"transition\"),{ractive:this.root});}}var camelCase=function camelCase(hyphenatedStr){return hyphenatedStr.replace(/-([a-zA-Z])/g,function(match,$1){return $1.toUpperCase();});};var helpers_prefix__prefix,prefixCache,helpers_prefix__testStyle;if(!isClient){helpers_prefix__prefix = null;}else {prefixCache = {};helpers_prefix__testStyle = createElement(\"div\").style;helpers_prefix__prefix = function(prop){var i,vendor,capped;prop = camelCase(prop);if(!prefixCache[prop]){if(helpers_prefix__testStyle[prop] !== undefined){prefixCache[prop] = prop;}else { // test vendors...\n\tcapped = prop.charAt(0).toUpperCase() + prop.substring(1);i = vendors.length;while(i--) {vendor = vendors[i];if(helpers_prefix__testStyle[vendor + capped] !== undefined){prefixCache[prop] = vendor + capped;break;}}}}return prefixCache[prop];};}var helpers_prefix=helpers_prefix__prefix;var getStyle,prototype_getStyle__getComputedStyle;if(!isClient){getStyle = null;}else {prototype_getStyle__getComputedStyle = window.getComputedStyle || legacy.getComputedStyle;getStyle = function(props){var computedStyle,styles,i,prop,value;computedStyle = prototype_getStyle__getComputedStyle(this.node);if(typeof props === \"string\"){value = computedStyle[helpers_prefix(props)];if(value === \"0px\"){value = 0;}return value;}if(!isArray(props)){throw new Error(\"Transition$getStyle must be passed a string, or an array of strings representing CSS properties\");}styles = {};i = props.length;while(i--) {prop = props[i];value = computedStyle[helpers_prefix(prop)];if(value === \"0px\"){value = 0;}styles[prop] = value;}return styles;};}var prototype_getStyle=getStyle;var setStyle=function setStyle(style,value){var prop;if(typeof style === \"string\"){this.node.style[helpers_prefix(style)] = value;}else {for(prop in style) {if(style.hasOwnProperty(prop)){this.node.style[helpers_prefix(prop)] = style[prop];}}}return this;};var Ticker=function Ticker(options){var easing;this.duration = options.duration;this.step = options.step;this.complete = options.complete; // easing\n\tif(typeof options.easing === \"string\"){easing = options.root.easing[options.easing];if(!easing){warnOnceIfDebug(missingPlugin(options.easing,\"easing\"));easing = linear;}}else if(typeof options.easing === \"function\"){easing = options.easing;}else {easing = linear;}this.easing = easing;this.start = utils_getTime();this.end = this.start + this.duration;this.running = true;shared_animations.add(this);};Ticker.prototype = {tick:function tick(now){var elapsed,eased;if(!this.running){return false;}if(now > this.end){if(this.step){this.step(1);}if(this.complete){this.complete(1);}return false;}elapsed = now - this.start;eased = this.easing(elapsed / this.duration);if(this.step){this.step(eased);}return true;},stop:function stop(){if(this.abort){this.abort();}this.running = false;}};var shared_Ticker=Ticker;function linear(t){return t;}var unprefixPattern=new RegExp(\"^-(?:\" + vendors.join(\"|\") + \")-\");var unprefix=function unprefix(prop){return prop.replace(unprefixPattern,\"\");};var vendorPattern=new RegExp(\"^(?:\" + vendors.join(\"|\") + \")([A-Z])\");var hyphenate=function hyphenate(str){var hyphenated;if(!str){return \"\"; // edge case\n\t}if(vendorPattern.test(str)){str = \"-\" + str;}hyphenated = str.replace(/[A-Z]/g,function(match){return \"-\" + match.toLowerCase();});return hyphenated;};var createTransitions,animateStyle_createTransitions__testStyle,TRANSITION,TRANSITIONEND,CSS_TRANSITIONS_ENABLED,TRANSITION_DURATION,TRANSITION_PROPERTY,TRANSITION_TIMING_FUNCTION,canUseCssTransitions={},cannotUseCssTransitions={};if(!isClient){createTransitions = null;}else {animateStyle_createTransitions__testStyle = createElement(\"div\").style; // determine some facts about our environment\n\t(function(){if(animateStyle_createTransitions__testStyle.transition !== undefined){TRANSITION = \"transition\";TRANSITIONEND = \"transitionend\";CSS_TRANSITIONS_ENABLED = true;}else if(animateStyle_createTransitions__testStyle.webkitTransition !== undefined){TRANSITION = \"webkitTransition\";TRANSITIONEND = \"webkitTransitionEnd\";CSS_TRANSITIONS_ENABLED = true;}else {CSS_TRANSITIONS_ENABLED = false;}})();if(TRANSITION){TRANSITION_DURATION = TRANSITION + \"Duration\";TRANSITION_PROPERTY = TRANSITION + \"Property\";TRANSITION_TIMING_FUNCTION = TRANSITION + \"TimingFunction\";}createTransitions = function(t,to,options,changedProperties,resolve){ // Wait a beat (otherwise the target styles will be applied immediately)\n\t// TODO use a fastdom-style mechanism?\n\tsetTimeout(function(){var hashPrefix,jsTransitionsComplete,cssTransitionsComplete,checkComplete,transitionEndHandler;checkComplete = function(){if(jsTransitionsComplete && cssTransitionsComplete){ // will changes to events and fire have an unexpected consequence here?\n\tt.root.fire(t.name + \":end\",t.node,t.isIntro);resolve();}}; // this is used to keep track of which elements can use CSS to animate\n\t// which properties\n\thashPrefix = (t.node.namespaceURI || \"\") + t.node.tagName;t.node.style[TRANSITION_PROPERTY] = changedProperties.map(helpers_prefix).map(hyphenate).join(\",\");t.node.style[TRANSITION_TIMING_FUNCTION] = hyphenate(options.easing || \"linear\");t.node.style[TRANSITION_DURATION] = options.duration / 1000 + \"s\";transitionEndHandler = function(event){var index;index = changedProperties.indexOf(camelCase(unprefix(event.propertyName)));if(index !== -1){changedProperties.splice(index,1);}if(changedProperties.length){ // still transitioning...\n\treturn;}t.node.removeEventListener(TRANSITIONEND,transitionEndHandler,false);cssTransitionsComplete = true;checkComplete();};t.node.addEventListener(TRANSITIONEND,transitionEndHandler,false);setTimeout(function(){var i=changedProperties.length,hash,originalValue,index,propertiesToTransitionInJs=[],prop,suffix;while(i--) {prop = changedProperties[i];hash = hashPrefix + prop;if(CSS_TRANSITIONS_ENABLED && !cannotUseCssTransitions[hash]){t.node.style[helpers_prefix(prop)] = to[prop]; // If we're not sure if CSS transitions are supported for\n\t// this tag/property combo, find out now\n\tif(!canUseCssTransitions[hash]){originalValue = t.getStyle(prop); // if this property is transitionable in this browser,\n\t// the current style will be different from the target style\n\tcanUseCssTransitions[hash] = t.getStyle(prop) != to[prop];cannotUseCssTransitions[hash] = !canUseCssTransitions[hash]; // Reset, if we're going to use timers after all\n\tif(cannotUseCssTransitions[hash]){t.node.style[helpers_prefix(prop)] = originalValue;}}}if(!CSS_TRANSITIONS_ENABLED || cannotUseCssTransitions[hash]){ // we need to fall back to timer-based stuff\n\tif(originalValue === undefined){originalValue = t.getStyle(prop);} // need to remove this from changedProperties, otherwise transitionEndHandler\n\t// will get confused\n\tindex = changedProperties.indexOf(prop);if(index === -1){warnIfDebug(\"Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!\",{node:t.node});}else {changedProperties.splice(index,1);} // TODO Determine whether this property is animatable at all\n\tsuffix = /[^\\d]*$/.exec(to[prop])[0]; // ...then kick off a timer-based transition\n\tpropertiesToTransitionInJs.push({name:helpers_prefix(prop),interpolator:shared_interpolate(parseFloat(originalValue),parseFloat(to[prop])),suffix:suffix});}} // javascript transitions\n\tif(propertiesToTransitionInJs.length){new shared_Ticker({root:t.root,duration:options.duration,easing:camelCase(options.easing || \"\"),step:function step(pos){var prop,i;i = propertiesToTransitionInJs.length;while(i--) {prop = propertiesToTransitionInJs[i];t.node.style[prop.name] = prop.interpolator(pos) + prop.suffix;}},complete:function complete(){jsTransitionsComplete = true;checkComplete();}});}else {jsTransitionsComplete = true;}if(!changedProperties.length){ // We need to cancel the transitionEndHandler, and deal with\n\t// the fact that it will never fire\n\tt.node.removeEventListener(TRANSITIONEND,transitionEndHandler,false);cssTransitionsComplete = true;checkComplete();}},0);},options.delay || 0);};}var animateStyle_createTransitions=createTransitions;var hidden,vendor,animateStyle_visibility__prefix,animateStyle_visibility__i,visibility;if(typeof document !== \"undefined\"){hidden = \"hidden\";visibility = {};if(hidden in document){animateStyle_visibility__prefix = \"\";}else {animateStyle_visibility__i = vendors.length;while(animateStyle_visibility__i--) {vendor = vendors[animateStyle_visibility__i];hidden = vendor + \"Hidden\";if(hidden in document){animateStyle_visibility__prefix = vendor;}}}if(animateStyle_visibility__prefix !== undefined){document.addEventListener(animateStyle_visibility__prefix + \"visibilitychange\",onChange); // initialise\n\tonChange();}else { // gah, we're in an old browser\n\tif(\"onfocusout\" in document){document.addEventListener(\"focusout\",onHide);document.addEventListener(\"focusin\",onShow);}else {window.addEventListener(\"pagehide\",onHide);window.addEventListener(\"blur\",onHide);window.addEventListener(\"pageshow\",onShow);window.addEventListener(\"focus\",onShow);}visibility.hidden = false; // until proven otherwise. Not ideal but hey\n\t}}function onChange(){visibility.hidden = document[hidden];}function onHide(){visibility.hidden = true;}function onShow(){visibility.hidden = false;}var animateStyle_visibility=visibility;var animateStyle,_animateStyle__getComputedStyle,resolved;if(!isClient){animateStyle = null;}else {_animateStyle__getComputedStyle = window.getComputedStyle || legacy.getComputedStyle;animateStyle = function(style,value,options){var _this=this;var to;if(arguments.length === 4){throw new Error(\"t.animateStyle() returns a promise - use .then() instead of passing a callback\");} // Special case - page isn't visible. Don't animate anything, because\n\t// that way you'll never get CSS transitionend events\n\tif(animateStyle_visibility.hidden){this.setStyle(style,value);return resolved || (resolved = utils_Promise.resolve());}if(typeof style === \"string\"){to = {};to[style] = value;}else {to = style; // shuffle arguments\n\toptions = value;} // As of 0.3.9, transition authors should supply an `option` object with\n\t// `duration` and `easing` properties (and optional `delay`), plus a\n\t// callback function that gets called after the animation completes\n\t// TODO remove this check in a future version\n\tif(!options){warnOnceIfDebug(\"The \\\"%s\\\" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340\",this.name);options = this;}var promise=new utils_Promise(function(resolve){var propertyNames,changedProperties,computedStyle,current,from,i,prop; // Edge case - if duration is zero, set style synchronously and complete\n\tif(!options.duration){_this.setStyle(to);resolve();return;} // Get a list of the properties we're animating\n\tpropertyNames = Object.keys(to);changedProperties = []; // Store the current styles\n\tcomputedStyle = _animateStyle__getComputedStyle(_this.node);from = {};i = propertyNames.length;while(i--) {prop = propertyNames[i];current = computedStyle[helpers_prefix(prop)];if(current === \"0px\"){current = 0;} // we need to know if we're actually changing anything\n\tif(current != to[prop]){ // use != instead of !==, so we can compare strings with numbers\n\tchangedProperties.push(prop); // make the computed style explicit, so we can animate where\n\t// e.g. height='auto'\n\t_this.node.style[helpers_prefix(prop)] = current;}} // If we're not actually changing anything, the transitionend event\n\t// will never fire! So we complete early\n\tif(!changedProperties.length){resolve();return;}animateStyle_createTransitions(_this,to,options,changedProperties,resolve);});return promise;};}var _animateStyle=animateStyle;var processParams=function processParams(params,defaults){if(typeof params === \"number\"){params = {duration:params};}else if(typeof params === \"string\"){if(params === \"slow\"){params = {duration:600};}else if(params === \"fast\"){params = {duration:200};}else {params = {duration:400};}}else if(!params){params = {};}return fillGaps({},params,defaults);};var prototype_start=Transition$start;function Transition$start(){var _this=this;var node,originalStyle,completed;node = this.node = this.element.node;originalStyle = node.getAttribute(\"style\"); // create t.complete() - we don't want this on the prototype,\n\t// because we don't want `this` silliness when passing it as\n\t// an argument\n\tthis.complete = function(noReset){if(completed){return;}if(!noReset && _this.isIntro){resetStyle(node,originalStyle);}node._ractive.transition = null;_this._manager.remove(_this);completed = true;}; // If the transition function doesn't exist, abort\n\tif(!this._fn){this.complete();return;}this._fn.apply(this.root,[this].concat(this.params));}function resetStyle(node,style){if(style){node.setAttribute(\"style\",style);}else { // Next line is necessary, to remove empty style attribute!\n\t// See http://stackoverflow.com/a/7167553\n\tnode.getAttribute(\"style\");node.removeAttribute(\"style\");}}var Transition=function Transition(owner,template,isIntro){this.init(owner,template,isIntro);};Transition.prototype = {init:Transition_prototype_init,start:prototype_start,getStyle:prototype_getStyle,setStyle:setStyle,animateStyle:_animateStyle,processParams:processParams};var _Transition=Transition;var Element_prototype_render=Element$render;var updateCss,updateScript;updateCss = function(){var node=this.node,content=this.fragment.toString(false); // IE8 has no styleSheet unless there's a type text/css\n\tif(window && window.appearsToBeIELessEqual8){node.type = \"text/css\";}if(node.styleSheet){node.styleSheet.cssText = content;}else {while(node.hasChildNodes()) {node.removeChild(node.firstChild);}node.appendChild(document.createTextNode(content));}};updateScript = function(){if(!this.node.type || this.node.type === \"text/javascript\"){warnIfDebug(\"Script tag was updated. This does not cause the code to be re-evaluated!\",{ractive:this.root}); // As it happens, we ARE in a position to re-evaluate the code if we wanted\n\t// to - we could eval() it, or insert it into a fresh (temporary) script tag.\n\t// But this would be a terrible idea with unpredictable results, so let's not.\n\t}this.node.text = this.fragment.toString(false);};function Element$render(){var _this=this;var root=this.root,namespace,node,transition;namespace = getNamespace(this);node = this.node = createElement(this.name,namespace); // Is this a top-level node of a component? If so, we may need to add\n\t// a data-ractive-css attribute, for CSS encapsulation\n\tif(this.parentFragment.cssIds){this.node.setAttribute(\"data-ractive-css\",this.parentFragment.cssIds.map(function(x){return \"{\" + x + \"}\";}).join(\" \"));} // Add _ractive property to the node - we use this object to store stuff\n\t// related to proxy events, two-way bindings etc\n\tdefineProperty(this.node,\"_ractive\",{value:{proxy:this,keypath:getInnerContext(this.parentFragment),events:create(null),root:root}}); // Render attributes\n\tthis.attributes.forEach(function(a){return a.render(node);});this.conditionalAttributes.forEach(function(a){return a.render(node);}); // Render children\n\tif(this.fragment){ // Special case - <script> element\n\tif(this.name === \"script\"){this.bubble = updateScript;this.node.text = this.fragment.toString(false); // bypass warning initially\n\tthis.fragment.unrender = noop; // TODO this is a kludge\n\t} // Special case - <style> element\n\telse if(this.name === \"style\"){this.bubble = updateCss;this.bubble();this.fragment.unrender = noop;} // Special case - contenteditable\n\telse if(this.binding && this.getAttribute(\"contenteditable\")){this.fragment.unrender = noop;}else {this.node.appendChild(this.fragment.render());}} // deal with two-way bindings\n\tif(this.binding){this.binding.render();this.node._ractive.binding = this.binding;} // Add proxy event handlers\n\tif(this.eventHandlers){this.eventHandlers.forEach(function(h){return h.render();});}if(this.name === \"option\"){processOption(this);} // Special cases\n\tif(this.name === \"img\"){ // if this is an <img>, and we're in a crap browser, we may\n\t// need to prevent it from overriding width and height when\n\t// it loads the src\n\tspecial_img__render(this);}else if(this.name === \"form\"){ // forms need to keep track of their bindings, in case of reset\n\tform__render(this);}else if(this.name === \"input\" || this.name === \"textarea\"){ // inputs and textareas should store their initial value as\n\t// `defaultValue` in case of reset\n\tthis.node.defaultValue = this.node.value;}else if(this.name === \"option\"){ // similarly for option nodes\n\tthis.node.defaultSelected = this.node.selected;} // apply decorator(s)\n\tif(this.decorator && this.decorator.fn){global_runloop.scheduleTask(function(){if(!_this.decorator.torndown){_this.decorator.init();}},true);} // trigger intro transition\n\tif(root.transitionsEnabled && this.intro){transition = new _Transition(this,this.intro,true);global_runloop.registerTransition(transition);global_runloop.scheduleTask(function(){return transition.start();},true);this.transition = transition;}if(this.node.autofocus){ // Special case. Some browsers (*cough* Firefix *cough*) have a problem\n\t// with dynamically-generated elements having autofocus, and they won't\n\t// allow you to programmatically focus the element until it's in the DOM\n\tglobal_runloop.scheduleTask(function(){return _this.node.focus();},true);}updateLiveQueries(this);return this.node;}function getNamespace(element){var namespace,xmlns,parent; // Use specified namespace...\n\tif(xmlns = element.getAttribute(\"xmlns\")){namespace = xmlns;} // ...or SVG namespace, if this is an <svg> element\n\telse if(element.name === \"svg\"){namespace = namespaces.svg;}else if(parent = element.parent){ // ...or HTML, if the parent is a <foreignObject>\n\tif(parent.name === \"foreignObject\"){namespace = namespaces.html;} // ...or inherit from the parent node\n\telse {namespace = parent.node.namespaceURI;}}else {namespace = element.root.el.namespaceURI;}return namespace;}function processOption(option){var optionValue,selectValue,i;if(!option.select){return;}selectValue = option.select.getAttribute(\"value\");if(selectValue === undefined){return;}optionValue = option.getAttribute(\"value\");if(option.select.node.multiple && isArray(selectValue)){i = selectValue.length;while(i--) {if(optionValue == selectValue[i]){option.node.selected = true;break;}}}else {option.node.selected = optionValue == selectValue;}}function updateLiveQueries(element){var instance,liveQueries,i,selector,query; // Does this need to be added to any live queries?\n\tinstance = element.root;do {liveQueries = instance._liveQueries;i = liveQueries.length;while(i--) {selector = liveQueries[i];query = liveQueries[\"_\" + selector];if(query._test(element)){ // keep register of applicable selectors, for when we teardown\n\t(element.liveQueries || (element.liveQueries = [])).push(query);}}}while(instance = instance.parent);}var Element_prototype_toString=function Element_prototype_toString(){var str,escape;if(this.template.y){ // DOCTYPE declaration\n\treturn \"<!DOCTYPE\" + this.template.dd + \">\";}str = \"<\" + this.template.e;str += this.attributes.map(stringifyAttribute).join(\"\") + this.conditionalAttributes.map(stringifyAttribute).join(\"\"); // Special case - selected options\n\tif(this.name === \"option\" && optionIsSelected(this)){str += \" selected\";} // Special case - two-way radio name bindings\n\tif(this.name === \"input\" && inputIsCheckedRadio(this)){str += \" checked\";}str += \">\"; // Special case - textarea\n\tif(this.name === \"textarea\" && this.getAttribute(\"value\") !== undefined){str += escapeHtml(this.getAttribute(\"value\"));} // Special case - contenteditable\n\telse if(this.getAttribute(\"contenteditable\") !== undefined){str += this.getAttribute(\"value\") || \"\";}if(this.fragment){escape = this.name !== \"script\" && this.name !== \"style\";str += this.fragment.toString(escape);} // add a closing tag if this isn't a void element\n\tif(!voidElementNames.test(this.template.e)){str += \"</\" + this.template.e + \">\";}return str;};function optionIsSelected(element){var optionValue,selectValue,i;optionValue = element.getAttribute(\"value\");if(optionValue === undefined || !element.select){return false;}selectValue = element.select.getAttribute(\"value\");if(selectValue == optionValue){return true;}if(element.select.getAttribute(\"multiple\") && isArray(selectValue)){i = selectValue.length;while(i--) {if(selectValue[i] == optionValue){return true;}}}}function inputIsCheckedRadio(element){var attributes,typeAttribute,valueAttribute,nameAttribute;attributes = element.attributes;typeAttribute = attributes.type;valueAttribute = attributes.value;nameAttribute = attributes.name;if(!typeAttribute || typeAttribute.value !== \"radio\" || !valueAttribute || !nameAttribute.interpolator){return;}if(valueAttribute.value === nameAttribute.interpolator.value){return true;}}function stringifyAttribute(attribute){var str=attribute.toString();return str?\" \" + str:\"\";}var Element_prototype_unbind=Element$unbind;function Element$unbind(){if(this.fragment){this.fragment.unbind();}if(this.binding){this.binding.unbind();}if(this.eventHandlers){this.eventHandlers.forEach(methodCallers__unbind);} // Special case - <option>\n\tif(this.name === \"option\"){special_option__unbind(this);}this.attributes.forEach(methodCallers__unbind);this.conditionalAttributes.forEach(methodCallers__unbind);}var Element_prototype_unrender=Element$unrender;function Element$unrender(shouldDestroy){var binding,bindings,transition;if(transition = this.transition){transition.complete();} // Detach as soon as we can\n\tif(this.name === \"option\"){ // <option> elements detach immediately, so that\n\t// their parent <select> element syncs correctly, and\n\t// since option elements can't have transitions anyway\n\tthis.detach();}else if(shouldDestroy){global_runloop.detachWhenReady(this);} // Children first. that way, any transitions on child elements will be\n\t// handled by the current transitionManager\n\tif(this.fragment){this.fragment.unrender(false);}if(binding = this.binding){this.binding.unrender();this.node._ractive.binding = null;bindings = this.root._twowayBindings[binding.keypath.str];bindings.splice(bindings.indexOf(binding),1);} // Remove event handlers\n\tif(this.eventHandlers){this.eventHandlers.forEach(methodCallers__unrender);}if(this.decorator){global_runloop.registerDecorator(this.decorator);} // trigger outro transition if necessary\n\tif(this.root.transitionsEnabled && this.outro){transition = new _Transition(this,this.outro,false);global_runloop.registerTransition(transition);global_runloop.scheduleTask(function(){return transition.start();});} // Remove this node from any live queries\n\tif(this.liveQueries){removeFromLiveQueries(this);}if(this.name === \"form\"){form__unrender(this);}}function removeFromLiveQueries(element){var query,selector,i;i = element.liveQueries.length;while(i--) {query = element.liveQueries[i];selector = query.selector;query._remove(element.node);}}var Element=function Element(options){this.init(options);};Element.prototype = {bubble:Element_prototype_bubble,detach:Element_prototype_detach,find:Element_prototype_find,findAll:Element_prototype_findAll,findAllComponents:Element_prototype_findAllComponents,findComponent:Element_prototype_findComponent,findNextNode:Element_prototype_findNextNode,firstNode:Element_prototype_firstNode,getAttribute:getAttribute,init:Element_prototype_init,rebind:Element_prototype_rebind,render:Element_prototype_render,toString:Element_prototype_toString,unbind:Element_prototype_unbind,unrender:Element_prototype_unrender};var _Element=Element;var deIndent__empty=/^\\s*$/,deIndent__leadingWhitespace=/^\\s*/;var deIndent=function deIndent(str){var lines,firstLine,lastLine,minIndent;lines = str.split(\"\\n\"); // remove first and last line, if they only contain whitespace\n\tfirstLine = lines[0];if(firstLine !== undefined && deIndent__empty.test(firstLine)){lines.shift();}lastLine = lastItem(lines);if(lastLine !== undefined && deIndent__empty.test(lastLine)){lines.pop();}minIndent = lines.reduce(reducer,null);if(minIndent){str = lines.map(function(line){return line.replace(minIndent,\"\");}).join(\"\\n\");}return str;};function reducer(previous,line){var lineIndent=deIndent__leadingWhitespace.exec(line)[0];if(previous === null || lineIndent.length < previous.length){return lineIndent;}return previous;}var Partial_getPartialTemplate=getPartialTemplate;function getPartialTemplate(ractive,name,parentFragment){var partial; // If the partial in instance or view heirarchy instances, great\n\tif(partial = getPartialFromRegistry(ractive,name,parentFragment || {})){return partial;} // Does it exist on the page as a script tag?\n\tpartial = template_parser.fromId(name,{noThrow:true});if(partial){ // is this necessary?\n\tpartial = deIndent(partial); // parse and register to this ractive instance\n\tvar parsed=template_parser.parse(partial,template_parser.getParseOptions(ractive)); // register (and return main partial if there are others in the template)\n\treturn ractive.partials[name] = parsed.t;}}function getPartialFromRegistry(ractive,name,parentFragment){var fn=undefined,partial=findParentPartial(name,parentFragment.owner); // if there was an instance up-hierarchy, cool\n\tif(partial)return partial; // find first instance in the ractive or view hierarchy that has this partial\n\tvar instance=findInstance(\"partials\",ractive,name);if(!instance){return;}partial = instance.partials[name]; // partial is a function?\n\tif(typeof partial === \"function\"){fn = partial.bind(instance);fn.isOwner = instance.partials.hasOwnProperty(name);partial = fn.call(ractive,template_parser);}if(!partial && partial !== \"\"){warnIfDebug(noRegistryFunctionReturn,name,\"partial\",\"partial\",{ractive:ractive});return;} // If this was added manually to the registry,\n\t// but hasn't been parsed, parse it now\n\tif(!template_parser.isParsed(partial)){ // use the parseOptions of the ractive instance on which it was found\n\tvar parsed=template_parser.parse(partial,template_parser.getParseOptions(instance)); // Partials cannot contain nested partials!\n\t// TODO add a test for this\n\tif(parsed.p){warnIfDebug(\"Partials ({{>%s}}) cannot contain nested inline partials\",name,{ractive:ractive});} // if fn, use instance to store result, otherwise needs to go\n\t// in the correct point in prototype chain on instance or constructor\n\tvar target=fn?instance:findOwner(instance,name); // may be a template with partials, which need to be registered and main template extracted\n\ttarget.partials[name] = partial = parsed.t;} // store for reset\n\tif(fn){partial._fn = fn;}return partial.v?partial.t:partial;}function findOwner(ractive,key){return ractive.partials.hasOwnProperty(key)?ractive:findConstructor(ractive.constructor,key);}function findConstructor(_x,_x2){var _again2=true;_function2: while(_again2) {var constructor=_x,key=_x2;_again2 = false;if(!constructor){return;}if(constructor.partials.hasOwnProperty(key)){return constructor;}else {_x = constructor._Parent;_x2 = key;_again2 = true;continue _function2;}}}function findParentPartial(_x3,_x4){var _again3=true;_function3: while(_again3) {var name=_x3,parent=_x4;_again3 = false;if(parent){if(parent.template && parent.template.p && parent.template.p[name]){return parent.template.p[name];}else if(parent.parentFragment && parent.parentFragment.owner){_x3 = name;_x4 = parent.parentFragment.owner;_again3 = true;continue _function3;}}}}var applyIndent=function applyIndent(string,indent){var indented;if(!indent){return string;}indented = string.split(\"\\n\").map(function(line,notFirstLine){return notFirstLine?indent + line:line;}).join(\"\\n\");return indented;};var missingPartialMessage=\"Could not find template for partial \\\"%s\\\"\";var Partial=function Partial(options){var parentFragment,template;parentFragment = this.parentFragment = options.parentFragment;this.root = parentFragment.root;this.type = PARTIAL;this.index = options.index;this.name = options.template.r;this.rendered = false;this.fragment = this.fragmentToRender = this.fragmentToUnrender = null;Mustache.init(this,options); // If this didn't resolve, it most likely means we have a named partial\n\t// (i.e. `{{>foo}}` means 'use the foo partial', not 'use the partial\n\t// whose name is the value of `foo`')\n\tif(!this.keypath){if(template = Partial_getPartialTemplate(this.root,this.name,parentFragment)){shared_unbind.call(this); // prevent any further changes\n\tthis.isNamed = true;this.setTemplate(template);}else {warnOnceIfDebug(missingPartialMessage,this.name);}}};Partial.prototype = {bubble:function bubble(){this.parentFragment.bubble();},detach:function detach(){return this.fragment.detach();},find:function find(selector){return this.fragment.find(selector);},findAll:function findAll(selector,query){return this.fragment.findAll(selector,query);},findComponent:function findComponent(selector){return this.fragment.findComponent(selector);},findAllComponents:function findAllComponents(selector,query){return this.fragment.findAllComponents(selector,query);},firstNode:function firstNode(){return this.fragment.firstNode();},findNextNode:function findNextNode(){return this.parentFragment.findNextNode(this);},getPartialName:function getPartialName(){if(this.isNamed && this.name)return this.name;else if(this.value === undefined)return this.name;else return this.value;},getValue:function getValue(){return this.fragment.getValue();},rebind:function rebind(oldKeypath,newKeypath){ // named partials aren't bound, so don't rebind\n\tif(!this.isNamed){Mustache_rebind.call(this,oldKeypath,newKeypath);}if(this.fragment){this.fragment.rebind(oldKeypath,newKeypath);}},render:function render(){this.docFrag = document.createDocumentFragment();this.update();this.rendered = true;return this.docFrag;},resolve:Mustache.resolve,setValue:function setValue(value){var template;if(value !== undefined && value === this.value){ // nothing has changed, so no work to be done\n\treturn;}if(value !== undefined){template = Partial_getPartialTemplate(this.root,\"\" + value,this.parentFragment);} // we may be here if we have a partial like `{{>foo}}` and `foo` is the\n\t// name of both a data property (whose value ISN'T the name of a partial)\n\t// and a partial. In those cases, this becomes a named partial\n\tif(!template && this.name && (template = Partial_getPartialTemplate(this.root,this.name,this.parentFragment))){shared_unbind.call(this);this.isNamed = true;}if(!template){warnOnceIfDebug(missingPartialMessage,this.name,{ractive:this.root});}this.value = value;this.setTemplate(template || []);this.bubble();if(this.rendered){global_runloop.addView(this);}},setTemplate:function setTemplate(template){if(this.fragment){this.fragment.unbind();if(this.rendered){this.fragmentToUnrender = this.fragment;}}this.fragment = new virtualdom_Fragment({template:template,root:this.root,owner:this,pElement:this.parentFragment.pElement});this.fragmentToRender = this.fragment;},toString:function toString(_toString){var string,previousItem,lastLine,match;string = this.fragment.toString(_toString);previousItem = this.parentFragment.items[this.index - 1];if(!previousItem || previousItem.type !== TEXT){return string;}lastLine = previousItem.text.split(\"\\n\").pop();if(match = /^\\s+$/.exec(lastLine)){return applyIndent(string,match[0]);}return string;},unbind:function unbind(){if(!this.isNamed){ // dynamic partial - need to unbind self\n\tshared_unbind.call(this);}if(this.fragment){this.fragment.unbind();}},unrender:function unrender(shouldDestroy){if(this.rendered){if(this.fragment){this.fragment.unrender(shouldDestroy);}this.rendered = false;}},update:function update(){var target,anchor;if(this.fragmentToUnrender){this.fragmentToUnrender.unrender(true);this.fragmentToUnrender = null;}if(this.fragmentToRender){this.docFrag.appendChild(this.fragmentToRender.render());this.fragmentToRender = null;}if(this.rendered){target = this.parentFragment.getNode();anchor = this.parentFragment.findNextNode(this);target.insertBefore(this.docFrag,anchor);}}};var _Partial=Partial; // finds the component constructor in the registry or view hierarchy registries\n\tvar Component_getComponent=getComponent;function getComponent(ractive,name){var Component,instance=findInstance(\"components\",ractive,name);if(instance){Component = instance.components[name]; // best test we have for not Ractive.extend\n\tif(!Component._Parent){ // function option, execute and store for reset\n\tvar fn=Component.bind(instance);fn.isOwner = instance.components.hasOwnProperty(name);Component = fn();if(!Component){warnIfDebug(noRegistryFunctionReturn,name,\"component\",\"component\",{ractive:ractive});return;}if(typeof Component === \"string\"){ // allow string lookup\n\tComponent = getComponent(ractive,Component);}Component._fn = fn;instance.components[name] = Component;}}return Component;}var Component_prototype_detach=Component$detach;var Component_prototype_detach__detachHook=new hooks_Hook(\"detach\");function Component$detach(){var detached=this.instance.fragment.detach();Component_prototype_detach__detachHook.fire(this.instance);return detached;}var Component_prototype_find=Component$find;function Component$find(selector){return this.instance.fragment.find(selector);}var Component_prototype_findAll=Component$findAll;function Component$findAll(selector,query){return this.instance.fragment.findAll(selector,query);}var Component_prototype_findAllComponents=Component$findAllComponents;function Component$findAllComponents(selector,query){query._test(this,true);if(this.instance.fragment){this.instance.fragment.findAllComponents(selector,query);}}var Component_prototype_findComponent=Component$findComponent;function Component$findComponent(selector){if(!selector || selector === this.name){return this.instance;}if(this.instance.fragment){return this.instance.fragment.findComponent(selector);}return null;}var Component_prototype_findNextNode=Component$findNextNode;function Component$findNextNode(){return this.parentFragment.findNextNode(this);}var Component_prototype_firstNode=Component$firstNode;function Component$firstNode(){if(this.rendered){return this.instance.fragment.firstNode();}return null;}var processWrapper=function processWrapper(wrapper,array,methodName,newIndices){var root=wrapper.root;var keypath=wrapper.keypath;if(!!newIndices){root.viewmodel.smartUpdate(keypath,array,newIndices);}else { // If this is a sort or reverse, we just do root.set()...\n\t// TODO use merge logic?\n\troot.viewmodel.mark(keypath);}};var patchedArrayProto=[],mutatorMethods=[\"pop\",\"push\",\"reverse\",\"shift\",\"sort\",\"splice\",\"unshift\"],testObj,patchArrayMethods,unpatchArrayMethods;mutatorMethods.forEach(function(methodName){var method=function method(){for(var _len=arguments.length,args=Array(_len),_key=0;_key < _len;_key++) {args[_key] = arguments[_key];}var newIndices,result,wrapper,i;newIndices = shared_getNewIndices(this,methodName,args); // apply the underlying method\n\tresult = Array.prototype[methodName].apply(this,arguments); // trigger changes\n\tglobal_runloop.start();this._ractive.setting = true;i = this._ractive.wrappers.length;while(i--) {wrapper = this._ractive.wrappers[i];global_runloop.addRactive(wrapper.root);processWrapper(wrapper,this,methodName,newIndices);}global_runloop.end();this._ractive.setting = false;return result;};defineProperty(patchedArrayProto,methodName,{value:method});}); // can we use prototype chain injection?\n\t// http://perfectionkills.com/how-ecmascript-5-still-does-not-allow-to-subclass-an-array/#wrappers_prototype_chain_injection\n\ttestObj = {};if(testObj.__proto__){ // yes, we can\n\tpatchArrayMethods = function(array){array.__proto__ = patchedArrayProto;};unpatchArrayMethods = function(array){array.__proto__ = Array.prototype;};}else { // no, we can't\n\tpatchArrayMethods = function(array){var i,methodName;i = mutatorMethods.length;while(i--) {methodName = mutatorMethods[i];defineProperty(array,methodName,{value:patchedArrayProto[methodName],configurable:true});}};unpatchArrayMethods = function(array){var i;i = mutatorMethods.length;while(i--) {delete array[mutatorMethods[i]];}};}patchArrayMethods.unpatch = unpatchArrayMethods;var patch=patchArrayMethods;var arrayAdaptor, // helpers\n\tArrayWrapper,array_index__errorMessage;arrayAdaptor = {filter:function filter(object){ // wrap the array if a) b) it's an array, and b) either it hasn't been wrapped already,\n\t// or the array didn't trigger the get() itself\n\treturn isArray(object) && (!object._ractive || !object._ractive.setting);},wrap:function wrap(ractive,array,keypath){return new ArrayWrapper(ractive,array,keypath);}};ArrayWrapper = function(ractive,array,keypath){this.root = ractive;this.value = array;this.keypath = getKeypath(keypath); // if this array hasn't already been ractified, ractify it\n\tif(!array._ractive){ // define a non-enumerable _ractive property to store the wrappers\n\tdefineProperty(array,\"_ractive\",{value:{wrappers:[],instances:[],setting:false},configurable:true});patch(array);} // store the ractive instance, so we can handle transitions later\n\tif(!array._ractive.instances[ractive._guid]){array._ractive.instances[ractive._guid] = 0;array._ractive.instances.push(ractive);}array._ractive.instances[ractive._guid] += 1;array._ractive.wrappers.push(this);};ArrayWrapper.prototype = {get:function get(){return this.value;},teardown:function teardown(){var array,storage,wrappers,instances,index;array = this.value;storage = array._ractive;wrappers = storage.wrappers;instances = storage.instances; // if teardown() was invoked because we're clearing the cache as a result of\n\t// a change that the array itself triggered, we can save ourselves the teardown\n\t// and immediate setup\n\tif(storage.setting){return false; // so that we don't remove it from this.root.viewmodel.wrapped\n\t}index = wrappers.indexOf(this);if(index === -1){throw new Error(array_index__errorMessage);}wrappers.splice(index,1); // if nothing else depends on this array, we can revert it to its\n\t// natural state\n\tif(!wrappers.length){delete array._ractive;patch.unpatch(this.value);}else { // remove ractive instance if possible\n\tinstances[this.root._guid] -= 1;if(!instances[this.root._guid]){index = instances.indexOf(this.root);if(index === -1){throw new Error(array_index__errorMessage);}instances.splice(index,1);}}}};array_index__errorMessage = \"Something went wrong in a rather interesting way\";var array_index=arrayAdaptor;var numeric=/^\\s*[0-9]+\\s*$/;var createBranch=function createBranch(key){return numeric.test(key)?[]:{};};var magicAdaptor,MagicWrapper;try{Object.defineProperty({},\"test\",{value:0});magicAdaptor = {filter:function filter(object,keypath,ractive){var parentWrapper,parentValue;if(!keypath){return false;}keypath = getKeypath(keypath); // If the parent value is a wrapper, other than a magic wrapper,\n\t// we shouldn't wrap this property\n\tif((parentWrapper = ractive.viewmodel.wrapped[keypath.parent.str]) && !parentWrapper.magic){return false;}parentValue = ractive.viewmodel.get(keypath.parent); // if parentValue is an array that doesn't include this member,\n\t// we should return false otherwise lengths will get messed up\n\tif(isArray(parentValue) && /^[0-9]+$/.test(keypath.lastKey)){return false;}return parentValue && (typeof parentValue === \"object\" || typeof parentValue === \"function\");},wrap:function wrap(ractive,property,keypath){return new MagicWrapper(ractive,property,keypath);}};MagicWrapper = function(ractive,value,keypath){var objKeypath,template,siblings;keypath = getKeypath(keypath);this.magic = true;this.ractive = ractive;this.keypath = keypath;this.value = value;this.prop = keypath.lastKey;objKeypath = keypath.parent;this.obj = objKeypath.isRoot?ractive.viewmodel.data:ractive.viewmodel.get(objKeypath);template = this.originalDescriptor = Object.getOwnPropertyDescriptor(this.obj,this.prop); // Has this property already been wrapped?\n\tif(template && template.set && (siblings = template.set._ractiveWrappers)){ // Yes. Register this wrapper to this property, if it hasn't been already\n\tif(siblings.indexOf(this) === -1){siblings.push(this);}return; // already wrapped\n\t} // No, it hasn't been wrapped\n\tcreateAccessors(this,value,template);};MagicWrapper.prototype = {get:function get(){return this.value;},reset:function reset(value){if(this.updating){return;}this.updating = true;this.obj[this.prop] = value; // trigger set() accessor\n\tglobal_runloop.addRactive(this.ractive);this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:true});this.updating = false;return true;},set:function set(key,value){if(this.updating){return;}if(!this.obj[this.prop]){this.updating = true;this.obj[this.prop] = createBranch(key);this.updating = false;}this.obj[this.prop][key] = value;},teardown:function teardown(){var template,set,value,wrappers,index; // If this method was called because the cache was being cleared as a\n\t// result of a set()/update() call made by this wrapper, we return false\n\t// so that it doesn't get torn down\n\tif(this.updating){return false;}template = Object.getOwnPropertyDescriptor(this.obj,this.prop);set = template && template.set;if(!set){ // most likely, this was an array member that was spliced out\n\treturn;}wrappers = set._ractiveWrappers;index = wrappers.indexOf(this);if(index !== -1){wrappers.splice(index,1);} // Last one out, turn off the lights\n\tif(!wrappers.length){value = this.obj[this.prop];Object.defineProperty(this.obj,this.prop,this.originalDescriptor || {writable:true,enumerable:true,configurable:true});this.obj[this.prop] = value;}}};}catch(err) {magicAdaptor = false; // no magic in this browser\n\t}var adaptors_magic=magicAdaptor;function createAccessors(originalWrapper,value,template){var object,property,oldGet,oldSet,get,set;object = originalWrapper.obj;property = originalWrapper.prop; // Is this template configurable?\n\tif(template && !template.configurable){ // Special case - array length\n\tif(property === \"length\"){return;}throw new Error(\"Cannot use magic mode with property \\\"\" + property + \"\\\" - object is not configurable\");} // Time to wrap this property\n\tif(template){oldGet = template.get;oldSet = template.set;}get = oldGet || function(){return value;};set = function(v){if(oldSet){oldSet(v);}value = oldGet?oldGet():v;set._ractiveWrappers.forEach(updateWrapper);};function updateWrapper(wrapper){var keypath,ractive;wrapper.value = value;if(wrapper.updating){return;}ractive = wrapper.ractive;keypath = wrapper.keypath;wrapper.updating = true;global_runloop.start(ractive);ractive.viewmodel.mark(keypath);global_runloop.end();wrapper.updating = false;} // Create an array of wrappers, in case other keypaths/ractives depend on this property.\n\t// Handily, we can store them as a property of the set function. Yay JavaScript.\n\tset._ractiveWrappers = [originalWrapper];Object.defineProperty(object,property,{get:get,set:set,enumerable:true,configurable:true});}var magicArrayAdaptor,MagicArrayWrapper;if(adaptors_magic){magicArrayAdaptor = {filter:function filter(object,keypath,ractive){return adaptors_magic.filter(object,keypath,ractive) && array_index.filter(object);},wrap:function wrap(ractive,array,keypath){return new MagicArrayWrapper(ractive,array,keypath);}};MagicArrayWrapper = function(ractive,array,keypath){this.value = array;this.magic = true;this.magicWrapper = adaptors_magic.wrap(ractive,array,keypath);this.arrayWrapper = array_index.wrap(ractive,array,keypath);};MagicArrayWrapper.prototype = {get:function get(){return this.value;},teardown:function teardown(){this.arrayWrapper.teardown();this.magicWrapper.teardown();},reset:function reset(value){return this.magicWrapper.reset(value);}};}var magicArray=magicArrayAdaptor;var prototype_adapt=Viewmodel$adapt;var prefixers={};function Viewmodel$adapt(keypath,value){var len,i,adaptor,wrapped;if(!this.adaptors)return; // Do we have an adaptor for this value?\n\tlen = this.adaptors.length;for(i = 0;i < len;i += 1) {adaptor = this.adaptors[i];if(adaptor.filter(value,keypath,this.ractive)){wrapped = this.wrapped[keypath] = adaptor.wrap(this.ractive,value,keypath,getPrefixer(keypath));wrapped.value = value;return;}}}function prefixKeypath(obj,prefix){var prefixed={},key;if(!prefix){return obj;}prefix += \".\";for(key in obj) {if(obj.hasOwnProperty(key)){prefixed[prefix + key] = obj[key];}}return prefixed;}function getPrefixer(rootKeypath){var rootDot;if(!prefixers[rootKeypath]){rootDot = rootKeypath?rootKeypath + \".\":\"\";prefixers[rootKeypath] = function(relativeKeypath,value){var obj;if(typeof relativeKeypath === \"string\"){obj = {};obj[rootDot + relativeKeypath] = value;return obj;}if(typeof relativeKeypath === \"object\"){ // 'relativeKeypath' is in fact a hash, not a keypath\n\treturn rootDot?prefixKeypath(relativeKeypath,rootKeypath):relativeKeypath;}};}return prefixers[rootKeypath];} // TEMP\n\tvar helpers_getUpstreamChanges=getUpstreamChanges;function getUpstreamChanges(changes){var upstreamChanges=[rootKeypath],i,keypath;i = changes.length;while(i--) {keypath = changes[i].parent;while(keypath && !keypath.isRoot) {if(changes.indexOf(keypath) === -1){addToArray(upstreamChanges,keypath);}keypath = keypath.parent;}}return upstreamChanges;}var applyChanges_notifyPatternObservers=notifyPatternObservers;function notifyPatternObservers(viewmodel,keypath,onlyDirect){var potentialWildcardMatches;updateMatchingPatternObservers(viewmodel,keypath);if(onlyDirect){return;}potentialWildcardMatches = keypath.wildcardMatches();potentialWildcardMatches.forEach(function(upstreamPattern){cascade(viewmodel,upstreamPattern,keypath);});}function cascade(viewmodel,upstreamPattern,keypath){var group,map,actualChildKeypath; // TODO should be one or the other\n\tupstreamPattern = upstreamPattern.str || upstreamPattern;group = viewmodel.depsMap.patternObservers;map = group && group[upstreamPattern];if(!map){return;}map.forEach(function(childKeypath){actualChildKeypath = keypath.join(childKeypath.lastKey); // 'foo.bar.baz'\n\tupdateMatchingPatternObservers(viewmodel,actualChildKeypath);cascade(viewmodel,childKeypath,actualChildKeypath);});}function updateMatchingPatternObservers(viewmodel,keypath){viewmodel.patternObservers.forEach(function(observer){if(observer.regex.test(keypath.str)){observer.update(keypath);}});}var applyChanges=Viewmodel$applyChanges;function Viewmodel$applyChanges(){var _this=this;var self=this,changes,upstreamChanges,hash={},bindings;changes = this.changes;if(!changes.length){ // TODO we end up here on initial render. Perhaps we shouldn't?\n\treturn;}function invalidateComputation(computation){var key=computation.key;if(computation.viewmodel === self){self.clearCache(key.str);computation.invalidate();changes.push(key);cascade(key);}else {computation.viewmodel.mark(key);}}function cascade(keypath){var map,computations;if(self.noCascade.hasOwnProperty(keypath.str)){return;}if(computations = self.deps.computed[keypath.str]){computations.forEach(invalidateComputation);}if(map = self.depsMap.computed[keypath.str]){map.forEach(cascade);}}changes.slice().forEach(cascade);upstreamChanges = helpers_getUpstreamChanges(changes);upstreamChanges.forEach(function(keypath){var computations; // make sure we haven't already been down this particular keypath in this turn\n\tif(changes.indexOf(keypath) === -1 && (computations = self.deps.computed[keypath.str])){computations.forEach(invalidateComputation);}});this.changes = []; // Pattern observers are a weird special case\n\tif(this.patternObservers.length){upstreamChanges.forEach(function(keypath){return applyChanges_notifyPatternObservers(_this,keypath,true);});changes.forEach(function(keypath){return applyChanges_notifyPatternObservers(_this,keypath);});}if(this.deps.observers){upstreamChanges.forEach(function(keypath){return notifyUpstreamDependants(_this,null,keypath,\"observers\");});notifyAllDependants(this,changes,\"observers\");}if(this.deps[\"default\"]){bindings = [];upstreamChanges.forEach(function(keypath){return notifyUpstreamDependants(_this,bindings,keypath,\"default\");});if(bindings.length){notifyBindings(this,bindings,changes);}notifyAllDependants(this,changes,\"default\");} // Return a hash of keypaths to updated values\n\tchanges.forEach(function(keypath){hash[keypath.str] = _this.get(keypath);});this.implicitChanges = {};this.noCascade = {};return hash;}function notifyUpstreamDependants(viewmodel,bindings,keypath,groupName){var dependants,value;if(dependants = findDependants(viewmodel,keypath,groupName)){value = viewmodel.get(keypath);dependants.forEach(function(d){ // don't \"set\" the parent value, refine it\n\t// i.e. not data = value, but data[foo] = fooValue\n\tif(bindings && d.refineValue){bindings.push(d);}else {d.setValue(value);}});}}function notifyBindings(viewmodel,bindings,changes){bindings.forEach(function(binding){var useSet=false,i=0,length=changes.length,refinements=[];while(i < length) {var keypath=changes[i];if(keypath === binding.keypath){useSet = true;break;}if(keypath.slice(0,binding.keypath.length) === binding.keypath){refinements.push(keypath);}i++;}if(useSet){binding.setValue(viewmodel.get(binding.keypath));}if(refinements.length){binding.refineValue(refinements);}});}function notifyAllDependants(viewmodel,keypaths,groupName){var queue=[];addKeypaths(keypaths);queue.forEach(dispatch);function addKeypaths(keypaths){keypaths.forEach(addKeypath);keypaths.forEach(cascade);}function addKeypath(keypath){var deps=findDependants(viewmodel,keypath,groupName);if(deps){queue.push({keypath:keypath,deps:deps});}}function cascade(keypath){var childDeps;if(childDeps = viewmodel.depsMap[groupName][keypath.str]){addKeypaths(childDeps);}}function dispatch(set){var value=viewmodel.get(set.keypath);set.deps.forEach(function(d){return d.setValue(value);});}}function findDependants(viewmodel,keypath,groupName){var group=viewmodel.deps[groupName];return group?group[keypath.str]:null;}var capture=Viewmodel$capture;function Viewmodel$capture(){this.captureGroups.push([]);}var clearCache=Viewmodel$clearCache;function Viewmodel$clearCache(keypath,keepExistingWrapper){var cacheMap,wrapper;if(!keepExistingWrapper){ // Is there a wrapped property at this keypath?\n\tif(wrapper = this.wrapped[keypath]){ // Did we unwrap it?\n\tif(wrapper.teardown() !== false){ // Is this right?\n\t// What's the meaning of returning false from teardown?\n\t// Could there be a GC ramification if this is a \"real\" ractive.teardown()?\n\tthis.wrapped[keypath] = null;}}}this.cache[keypath] = undefined;if(cacheMap = this.cacheMap[keypath]){while(cacheMap.length) {this.clearCache(cacheMap.pop());}}}var UnresolvedDependency=function UnresolvedDependency(computation,ref){this.computation = computation;this.viewmodel = computation.viewmodel;this.ref = ref; // TODO this seems like a red flag!\n\tthis.root = this.viewmodel.ractive;this.parentFragment = this.root.component && this.root.component.parentFragment;};UnresolvedDependency.prototype = {resolve:function resolve(keypath){this.computation.softDeps.push(keypath);this.computation.unresolvedDeps[keypath.str] = null;this.viewmodel.register(keypath,this.computation,\"computed\");}};var Computation_UnresolvedDependency=UnresolvedDependency;var Computation=function Computation(key,signature){this.key = key;this.getter = signature.getter;this.setter = signature.setter;this.hardDeps = signature.deps || [];this.softDeps = [];this.unresolvedDeps = {};this.depValues = {};this._dirty = this._firstRun = true;};Computation.prototype = {constructor:Computation,init:function init(viewmodel){var _this=this;var initial;this.viewmodel = viewmodel;this.bypass = true;initial = viewmodel.get(this.key);viewmodel.clearCache(this.key.str);this.bypass = false;if(this.setter && initial !== undefined){this.set(initial);}if(this.hardDeps){this.hardDeps.forEach(function(d){return viewmodel.register(d,_this,\"computed\");});}},invalidate:function invalidate(){this._dirty = true;},get:function get(){var _this=this;var newDeps,dependenciesChanged,dependencyValuesChanged=false;if(this.getting){ // prevent double-computation (e.g. caused by array mutation inside computation)\n\tvar msg=\"The \" + this.key.str + \" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`\";warnOnce(msg);return this.value;}this.getting = true;if(this._dirty){ // determine whether the inputs have changed, in case this depends on\n\t// other computed values\n\tif(this._firstRun || !this.hardDeps.length && !this.softDeps.length){dependencyValuesChanged = true;}else {[this.hardDeps,this.softDeps].forEach(function(deps){var keypath,value,i;if(dependencyValuesChanged){return;}i = deps.length;while(i--) {keypath = deps[i];value = _this.viewmodel.get(keypath);if(!isEqual(value,_this.depValues[keypath.str])){_this.depValues[keypath.str] = value;dependencyValuesChanged = true;return;}}});}if(dependencyValuesChanged){this.viewmodel.capture();try{this.value = this.getter();}catch(err) {warnIfDebug(\"Failed to compute \\\"%s\\\"\",this.key.str);logIfDebug(err.stack || err);this.value = void 0;}newDeps = this.viewmodel.release();dependenciesChanged = this.updateDependencies(newDeps);if(dependenciesChanged){[this.hardDeps,this.softDeps].forEach(function(deps){deps.forEach(function(keypath){_this.depValues[keypath.str] = _this.viewmodel.get(keypath);});});}}this._dirty = false;}this.getting = this._firstRun = false;return this.value;},set:function set(value){if(this.setting){this.value = value;return;}if(!this.setter){throw new Error(\"Computed properties without setters are read-only. (This may change in a future version of Ractive!)\");}this.setter(value);},updateDependencies:function updateDependencies(newDeps){var i,oldDeps,keypath,dependenciesChanged,unresolved;oldDeps = this.softDeps; // remove dependencies that are no longer used\n\ti = oldDeps.length;while(i--) {keypath = oldDeps[i];if(newDeps.indexOf(keypath) === -1){dependenciesChanged = true;this.viewmodel.unregister(keypath,this,\"computed\");}} // create references for any new dependencies\n\ti = newDeps.length;while(i--) {keypath = newDeps[i];if(oldDeps.indexOf(keypath) === -1 && (!this.hardDeps || this.hardDeps.indexOf(keypath) === -1)){dependenciesChanged = true; // if this keypath is currently unresolved, we need to mark\n\t// it as such. TODO this is a bit muddy...\n\tif(isUnresolved(this.viewmodel,keypath) && !this.unresolvedDeps[keypath.str]){unresolved = new Computation_UnresolvedDependency(this,keypath.str);newDeps.splice(i,1);this.unresolvedDeps[keypath.str] = unresolved;global_runloop.addUnresolved(unresolved);}else {this.viewmodel.register(keypath,this,\"computed\");}}}if(dependenciesChanged){this.softDeps = newDeps.slice();}return dependenciesChanged;}};function isUnresolved(viewmodel,keypath){var key=keypath.firstKey;return !(key in viewmodel.data) && !(key in viewmodel.computations) && !(key in viewmodel.mappings);}var Computation_Computation=Computation;var compute=Viewmodel$compute;function Viewmodel$compute(key,signature){var computation=new Computation_Computation(key,signature);if(this.ready){computation.init(this);}return this.computations[key.str] = computation;}var FAILED_LOOKUP={FAILED_LOOKUP:true};var viewmodel_prototype_get=Viewmodel$get;var viewmodel_prototype_get__empty={};function Viewmodel$get(keypath,options){var cache=this.cache,value,computation,wrapped,captureGroup,keypathStr=keypath.str,key;options = options || viewmodel_prototype_get__empty; // capture the keypath, if we're inside a computation\n\tif(options.capture && (captureGroup = lastItem(this.captureGroups))){if(! ~captureGroup.indexOf(keypath)){captureGroup.push(keypath);}}if(hasOwn.call(this.mappings,keypath.firstKey)){return this.mappings[keypath.firstKey].get(keypath,options);}if(keypath.isSpecial){return keypath.value;}if(cache[keypathStr] === undefined){ // Is this a computed property?\n\tif((computation = this.computations[keypathStr]) && !computation.bypass){value = computation.get();this.adapt(keypathStr,value);} // Is this a wrapped property?\n\telse if(wrapped = this.wrapped[keypathStr]){value = wrapped.value;} // Is it the root?\n\telse if(keypath.isRoot){this.adapt(\"\",this.data);value = this.data;} // No? Then we need to retrieve the value one key at a time\n\telse {value = retrieve(this,keypath);}cache[keypathStr] = value;}else {value = cache[keypathStr];}if(!options.noUnwrap && (wrapped = this.wrapped[keypathStr])){value = wrapped.get();}if(keypath.isRoot && options.fullRootGet){for(key in this.mappings) {value[key] = this.mappings[key].getValue();}}return value === FAILED_LOOKUP?void 0:value;}function retrieve(viewmodel,keypath){var parentValue,cacheMap,value,wrapped;parentValue = viewmodel.get(keypath.parent);if(wrapped = viewmodel.wrapped[keypath.parent.str]){parentValue = wrapped.get();}if(parentValue === null || parentValue === undefined){return;} // update cache map\n\tif(!(cacheMap = viewmodel.cacheMap[keypath.parent.str])){viewmodel.cacheMap[keypath.parent.str] = [keypath.str];}else {if(cacheMap.indexOf(keypath.str) === -1){cacheMap.push(keypath.str);}} // If this property doesn't exist, we return a sentinel value\n\t// so that we know to query parent scope (if such there be)\n\tif(typeof parentValue === \"object\" && !(keypath.lastKey in parentValue)){return viewmodel.cache[keypath.str] = FAILED_LOOKUP;}value = parentValue[keypath.lastKey]; // Do we have an adaptor for this value?\n\tviewmodel.adapt(keypath.str,value,false); // Update cache\n\tviewmodel.cache[keypath.str] = value;return value;}var viewmodel_prototype_init=Viewmodel$init;function Viewmodel$init(){var key;for(key in this.computations) {this.computations[key].init(this);}}var prototype_map=Viewmodel$map;function Viewmodel$map(key,options){var mapping=this.mappings[key.str] = new Mapping(key,options);mapping.initViewmodel(this);return mapping;}var Mapping=function Mapping(localKey,options){this.localKey = localKey;this.keypath = options.keypath;this.origin = options.origin;this.deps = [];this.unresolved = [];this.resolved = false;};Mapping.prototype = {forceResolution:function forceResolution(){ // TODO warn, as per #1692?\n\tthis.keypath = this.localKey;this.setup();},get:function get(keypath,options){if(!this.resolved){return undefined;}return this.origin.get(this.map(keypath),options);},getValue:function getValue(){if(!this.keypath){return undefined;}return this.origin.get(this.keypath);},initViewmodel:function initViewmodel(viewmodel){this.local = viewmodel;this.setup();},map:function map(keypath){if(typeof this.keypath === undefined){return this.localKey;}return keypath.replace(this.localKey,this.keypath);},register:function register(keypath,dependant,group){this.deps.push({keypath:keypath,dep:dependant,group:group});if(this.resolved){this.origin.register(this.map(keypath),dependant,group);}},resolve:function resolve(keypath){if(this.keypath !== undefined){this.unbind(true);}this.keypath = keypath;this.setup();},set:function set(keypath,value){if(!this.resolved){this.forceResolution();}this.origin.set(this.map(keypath),value);},setup:function setup(){var _this=this;if(this.keypath === undefined){return;}this.resolved = true; // accumulated dependants can now be registered\n\tif(this.deps.length){this.deps.forEach(function(d){var keypath=_this.map(d.keypath);_this.origin.register(keypath,d.dep,d.group); // TODO this is a bit of a red flag... all deps should be the same?\n\tif(d.dep.setValue){d.dep.setValue(_this.origin.get(keypath));}else if(d.dep.invalidate){d.dep.invalidate();}else {throw new Error(\"An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!\");}});this.origin.mark(this.keypath);}},setValue:function setValue(value){if(!this.keypath){throw new Error(\"Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!\");}this.origin.set(this.keypath,value);},unbind:function unbind(keepLocal){var _this=this;if(!keepLocal){delete this.local.mappings[this.localKey];}if(!this.resolved){return;}this.deps.forEach(function(d){_this.origin.unregister(_this.map(d.keypath),d.dep,d.group);});if(this.tracker){this.origin.unregister(this.keypath,this.tracker);}},unregister:function unregister(keypath,dependant,group){var deps,i;if(!this.resolved){return;}deps = this.deps;i = deps.length;while(i--) {if(deps[i].dep === dependant){deps.splice(i,1);break;}}this.origin.unregister(this.map(keypath),dependant,group);}};var mark=Viewmodel$mark;function Viewmodel$mark(keypath,options){var computation,keypathStr=keypath.str; // implicit changes (i.e. `foo.length` on `ractive.push('foo',42)`)\n\t// should not be picked up by pattern observers\n\tif(options){if(options.implicit){this.implicitChanges[keypathStr] = true;}if(options.noCascade){this.noCascade[keypathStr] = true;}}if(computation = this.computations[keypathStr]){computation.invalidate();}if(this.changes.indexOf(keypath) === -1){this.changes.push(keypath);} // pass on keepExistingWrapper, if we can\n\tvar keepExistingWrapper=options?options.keepExistingWrapper:false;this.clearCache(keypathStr,keepExistingWrapper);if(this.ready){this.onchange();}}var mapOldToNewIndex=function mapOldToNewIndex(oldArray,newArray){var usedIndices,firstUnusedIndex,newIndices,changed;usedIndices = {};firstUnusedIndex = 0;newIndices = oldArray.map(function(item,i){var index,start,len;start = firstUnusedIndex;len = newArray.length;do {index = newArray.indexOf(item,start);if(index === -1){changed = true;return -1;}start = index + 1;}while(usedIndices[index] && start < len); // keep track of the first unused index, so we don't search\n\t// the whole of newArray for each item in oldArray unnecessarily\n\tif(index === firstUnusedIndex){firstUnusedIndex += 1;}if(index !== i){changed = true;}usedIndices[index] = true;return index;});return newIndices;};var merge=Viewmodel$merge;var comparators={};function Viewmodel$merge(keypath,currentArray,array,options){var oldArray,newArray,comparator,newIndices;this.mark(keypath);if(options && options.compare){comparator = getComparatorFunction(options.compare);try{oldArray = currentArray.map(comparator);newArray = array.map(comparator);}catch(err) { // fallback to an identity check - worst case scenario we have\n\t// to do more DOM manipulation than we thought...\n\twarnIfDebug(\"merge(): \\\"%s\\\" comparison failed. Falling back to identity checking\",keypath);oldArray = currentArray;newArray = array;}}else {oldArray = currentArray;newArray = array;} // find new indices for members of oldArray\n\tnewIndices = mapOldToNewIndex(oldArray,newArray);this.smartUpdate(keypath,array,newIndices,currentArray.length !== array.length);}function stringify(item){return JSON.stringify(item);}function getComparatorFunction(comparator){ // If `compare` is `true`, we use JSON.stringify to compare\n\t// objects that are the same shape, but non-identical - i.e.\n\t// { foo: 'bar' } !== { foo: 'bar' }\n\tif(comparator === true){return stringify;}if(typeof comparator === \"string\"){if(!comparators[comparator]){comparators[comparator] = function(item){return item[comparator];};}return comparators[comparator];}if(typeof comparator === \"function\"){return comparator;}throw new Error(\"The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)\");}var register=Viewmodel$register;function Viewmodel$register(keypath,dependant){var group=arguments[2] === undefined?\"default\":arguments[2];var mapping,depsByKeypath,deps;if(dependant.isStatic){return; // TODO we should never get here if a dependant is static...\n\t}if(mapping = this.mappings[keypath.firstKey]){mapping.register(keypath,dependant,group);}else {depsByKeypath = this.deps[group] || (this.deps[group] = {});deps = depsByKeypath[keypath.str] || (depsByKeypath[keypath.str] = []);deps.push(dependant);if(!this.depsMap[group]){this.depsMap[group] = {};}if(!keypath.isRoot){register__updateDependantsMap(this,keypath,group);}}}function register__updateDependantsMap(viewmodel,keypath,group){var map,parent,keypathStr; // update dependants map\n\twhile(!keypath.isRoot) {map = viewmodel.depsMap[group];parent = map[keypath.parent.str] || (map[keypath.parent.str] = []);keypathStr = keypath.str; // TODO find an alternative to this nasty approach\n\tif(parent[\"_\" + keypathStr] === undefined){parent[\"_\" + keypathStr] = 0;parent.push(keypath);}parent[\"_\" + keypathStr] += 1;keypath = keypath.parent;}}var release=Viewmodel$release;function Viewmodel$release(){return this.captureGroups.pop();}var reset=Viewmodel$reset;function Viewmodel$reset(data){this.data = data;this.clearCache(\"\");}var prototype_set=Viewmodel$set;function Viewmodel$set(keypath,value){var options=arguments[2] === undefined?{}:arguments[2];var mapping,computation,wrapper,keepExistingWrapper; // unless data is being set for data tracking purposes\n\tif(!options.noMapping){ // If this data belongs to a different viewmodel,\n\t// pass the change along\n\tif(mapping = this.mappings[keypath.firstKey]){return mapping.set(keypath,value);}}computation = this.computations[keypath.str];if(computation){if(computation.setting){ // let the other computation set() handle things...\n\treturn;}computation.set(value);value = computation.get();}if(isEqual(this.cache[keypath.str],value)){return;}wrapper = this.wrapped[keypath.str]; // If we have a wrapper with a `reset()` method, we try and use it. If the\n\t// `reset()` method returns false, the wrapper should be torn down, and\n\t// (most likely) a new one should be created later\n\tif(wrapper && wrapper.reset){keepExistingWrapper = wrapper.reset(value) !== false;if(keepExistingWrapper){value = wrapper.get();}}if(!computation && !keepExistingWrapper){resolveSet(this,keypath,value);}if(!options.silent){this.mark(keypath);}else { // We're setting a parent of the original target keypath (i.e.\n\t// creating a fresh branch) - we need to clear the cache, but\n\t// not mark it as a change\n\tthis.clearCache(keypath.str);}}function resolveSet(viewmodel,keypath,value){var wrapper,parentValue,wrapperSet,valueSet;wrapperSet = function(){if(wrapper.set){wrapper.set(keypath.lastKey,value);}else {parentValue = wrapper.get();valueSet();}};valueSet = function(){if(!parentValue){parentValue = createBranch(keypath.lastKey);viewmodel.set(keypath.parent,parentValue,{silent:true});}parentValue[keypath.lastKey] = value;};wrapper = viewmodel.wrapped[keypath.parent.str];if(wrapper){wrapperSet();}else {parentValue = viewmodel.get(keypath.parent); // may have been wrapped via the above .get()\n\t// call on viewmodel if this is first access via .set()!\n\tif(wrapper = viewmodel.wrapped[keypath.parent.str]){wrapperSet();}else {valueSet();}}}var smartUpdate=Viewmodel$smartUpdate;var implicitOption={implicit:true},noCascadeOption={noCascade:true};function Viewmodel$smartUpdate(keypath,array,newIndices){var _this=this;var dependants,oldLength,i;oldLength = newIndices.length; // Indices that are being removed should be marked as dirty\n\tnewIndices.forEach(function(newIndex,oldIndex){if(newIndex === -1){_this.mark(keypath.join(oldIndex),noCascadeOption);}}); // Update the model\n\t// TODO allow existing array to be updated in place, rather than replaced?\n\tthis.set(keypath,array,{silent:true});if(dependants = this.deps[\"default\"][keypath.str]){dependants.filter(canShuffle).forEach(function(d){return d.shuffle(newIndices,array);});}if(oldLength !== array.length){this.mark(keypath.join(\"length\"),implicitOption);for(i = newIndices.touchedFrom;i < array.length;i += 1) {this.mark(keypath.join(i));} // don't allow removed indexes beyond end of new array to trigger recomputations\n\t// TODO is this still necessary, now that computations are lazy?\n\tfor(i = array.length;i < oldLength;i += 1) {this.mark(keypath.join(i),noCascadeOption);}}}function canShuffle(dependant){return typeof dependant.shuffle === \"function\";}var prototype_teardown=Viewmodel$teardown;function Viewmodel$teardown(){var _this=this;var unresolvedImplicitDependency; // Clear entire cache - this has the desired side-effect\n\t// of unwrapping adapted values (e.g. arrays)\n\tObject.keys(this.cache).forEach(function(keypath){return _this.clearCache(keypath);}); // Teardown any failed lookups - we don't need them to resolve any more\n\twhile(unresolvedImplicitDependency = this.unresolvedImplicitDependencies.pop()) {unresolvedImplicitDependency.teardown();}}var unregister=Viewmodel$unregister;function Viewmodel$unregister(keypath,dependant){var group=arguments[2] === undefined?\"default\":arguments[2];var mapping,deps,index;if(dependant.isStatic){return;}if(mapping = this.mappings[keypath.firstKey]){return mapping.unregister(keypath,dependant,group);}deps = this.deps[group][keypath.str];index = deps.indexOf(dependant);if(index === -1){throw new Error(\"Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks\");}deps.splice(index,1);if(keypath.isRoot){return;}unregister__updateDependantsMap(this,keypath,group);}function unregister__updateDependantsMap(viewmodel,keypath,group){var map,parent; // update dependants map\n\twhile(!keypath.isRoot) {map = viewmodel.depsMap[group];parent = map[keypath.parent.str];parent[\"_\" + keypath.str] -= 1;if(!parent[\"_\" + keypath.str]){ // remove from parent deps map\n\tremoveFromArray(parent,keypath);parent[\"_\" + keypath.str] = undefined;}keypath = keypath.parent;}}var Viewmodel=function Viewmodel(options){var adapt=options.adapt;var data=options.data;var ractive=options.ractive;var computed=options.computed;var mappings=options.mappings;var key;var mapping; // TODO is it possible to remove this reference?\n\tthis.ractive = ractive;this.adaptors = adapt;this.onchange = options.onchange;this.cache = {}; // we need to be able to use hasOwnProperty, so can't inherit from null\n\tthis.cacheMap = create(null);this.deps = {computed:create(null),\"default\":create(null)};this.depsMap = {computed:create(null),\"default\":create(null)};this.patternObservers = [];this.specials = create(null);this.wrapped = create(null);this.computations = create(null);this.captureGroups = [];this.unresolvedImplicitDependencies = [];this.changes = [];this.implicitChanges = {};this.noCascade = {};this.data = data; // set up explicit mappings\n\tthis.mappings = create(null);for(key in mappings) {this.map(getKeypath(key),mappings[key]);}if(data){ // if data exists locally, but is missing on the parent,\n\t// we transfer ownership to the parent\n\tfor(key in data) {if((mapping = this.mappings[key]) && mapping.getValue() === undefined){mapping.setValue(data[key]);}}}for(key in computed) {if(mappings && key in mappings){fatal(\"Cannot map to a computed property ('%s')\",key);}this.compute(getKeypath(key),computed[key]);}this.ready = true;};Viewmodel.prototype = {adapt:prototype_adapt,applyChanges:applyChanges,capture:capture,clearCache:clearCache,compute:compute,get:viewmodel_prototype_get,init:viewmodel_prototype_init,map:prototype_map,mark:mark,merge:merge,register:register,release:release,reset:reset,set:prototype_set,smartUpdate:smartUpdate,teardown:prototype_teardown,unregister:unregister};var viewmodel_Viewmodel=Viewmodel;function HookQueue(event){this.hook = new hooks_Hook(event);this.inProcess = {};this.queue = {};}HookQueue.prototype = {constructor:HookQueue,begin:function begin(ractive){this.inProcess[ractive._guid] = true;},end:function end(ractive){var parent=ractive.parent; // If this is *isn't* a child of a component that's in process,\n\t// it should call methods or fire at this point\n\tif(!parent || !this.inProcess[parent._guid]){fire(this,ractive);} // elsewise, handoff to parent to fire when ready\n\telse {getChildQueue(this.queue,parent).push(ractive);}delete this.inProcess[ractive._guid];}};function getChildQueue(queue,ractive){return queue[ractive._guid] || (queue[ractive._guid] = []);}function fire(hookQueue,ractive){var childQueue=getChildQueue(hookQueue.queue,ractive);hookQueue.hook.fire(ractive); // queue is \"live\" because components can end up being\n\t// added while hooks fire on parents that modify data values.\n\twhile(childQueue.length) {fire(hookQueue,childQueue.shift());}delete hookQueue.queue[ractive._guid];}var hooks_HookQueue=HookQueue;var helpers_getComputationSignatures=getComputationSignatures;var helpers_getComputationSignatures__pattern=/\\$\\{([^\\}]+)\\}/g;function getComputationSignatures(ractive,computed){var signatures={},key;for(key in computed) {signatures[key] = getComputationSignature(ractive,key,computed[key]);}return signatures;}function getComputationSignature(ractive,key,signature){var getter,setter;if(typeof signature === \"function\"){getter = helpers_getComputationSignatures__bind(signature,ractive);}if(typeof signature === \"string\"){getter = createFunctionFromString(ractive,signature);}if(typeof signature === \"object\"){if(typeof signature.get === \"string\"){getter = createFunctionFromString(ractive,signature.get);}else if(typeof signature.get === \"function\"){getter = helpers_getComputationSignatures__bind(signature.get,ractive);}else {fatal(\"`%s` computation must have a `get()` method\",key);}if(typeof signature.set === \"function\"){setter = helpers_getComputationSignatures__bind(signature.set,ractive);}}return {getter:getter,setter:setter};}function createFunctionFromString(ractive,str){var functionBody,hasThis,fn;functionBody = \"return (\" + str.replace(helpers_getComputationSignatures__pattern,function(match,keypath){hasThis = true;return \"__ractive.get(\\\"\" + keypath + \"\\\")\";}) + \");\";if(hasThis){functionBody = \"var __ractive = this; \" + functionBody;}fn = new Function(functionBody);return hasThis?fn.bind(ractive):fn;}function helpers_getComputationSignatures__bind(fn,context){return (/this/.test(fn.toString())?fn.bind(context):fn);}var constructHook=new hooks_Hook(\"construct\");var configHook=new hooks_Hook(\"config\");var initHook=new hooks_HookQueue(\"init\");var initialise__uid=0;var initialise__registryNames=[\"adaptors\",\"components\",\"decorators\",\"easing\",\"events\",\"interpolators\",\"partials\",\"transitions\"];var initialise=initialiseRactiveInstance;function initialiseRactiveInstance(ractive){var userOptions=arguments[1] === undefined?{}:arguments[1];var options=arguments[2] === undefined?{}:arguments[2];var el,viewmodel;if(_Ractive.DEBUG){welcome();}initialiseProperties(ractive,options); // TODO remove this, eventually\n\tdefineProperty(ractive,\"data\",{get:deprecateRactiveData}); // TODO don't allow `onconstruct` with `new Ractive()`, there's no need for it\n\tconstructHook.fire(ractive,userOptions); // Add registries\n\tinitialise__registryNames.forEach(function(name){ractive[name] = utils_object__extend(create(ractive.constructor[name] || null),userOptions[name]);}); // Create a viewmodel\n\tviewmodel = new viewmodel_Viewmodel({adapt:getAdaptors(ractive,ractive.adapt,userOptions),data:custom_data.init(ractive.constructor,ractive,userOptions),computed:helpers_getComputationSignatures(ractive,utils_object__extend(create(ractive.constructor.prototype.computed),userOptions.computed)),mappings:options.mappings,ractive:ractive,onchange:function onchange(){return global_runloop.addRactive(ractive);}});ractive.viewmodel = viewmodel; // This can't happen earlier, because computed properties may call `ractive.get()`, etc\n\tviewmodel.init(); // init config from Parent and options\n\tconfig_config.init(ractive.constructor,ractive,userOptions);configHook.fire(ractive);initHook.begin(ractive); // // If this is a component with a function `data` property, call the function\n\t// // with `ractive` as context (unless the child was also a function)\n\t// if ( typeof ractive.constructor.prototype.data === 'function' && typeof userOptions.data !== 'function' ) {\n\t// \tviewmodel.reset( ractive.constructor.prototype.data.call( ractive ) || fatal( '`data` functions must return a data object' ) );\n\t// }\n\t// Render virtual DOM\n\tif(ractive.template){var cssIds=undefined;if(options.cssIds || ractive.cssId){cssIds = options.cssIds?options.cssIds.slice():[];if(ractive.cssId){cssIds.push(ractive.cssId);}}ractive.fragment = new virtualdom_Fragment({template:ractive.template,root:ractive,owner:ractive, // saves doing `if ( this.parent ) { /*...*/ }` later on\n\tcssIds:cssIds});}initHook.end(ractive); // render automatically ( if `el` is specified )\n\tif(el = getElement(ractive.el)){var promise=ractive.render(el,ractive.append);if(_Ractive.DEBUG_PROMISES){promise[\"catch\"](function(err){warnOnceIfDebug(\"Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\\n  Ractive.DEBUG_PROMISES = false;\");warnIfDebug(\"An error happened during rendering\",{ractive:ractive});err.stack && logIfDebug(err.stack);throw err;});}}}function getAdaptors(ractive,protoAdapt,userOptions){var adapt,magic,modifyArrays;protoAdapt = protoAdapt.map(lookup);adapt = ensureArray(userOptions.adapt).map(lookup);adapt = initialise__combine(protoAdapt,adapt);magic = \"magic\" in userOptions?userOptions.magic:ractive.magic;modifyArrays = \"modifyArrays\" in userOptions?userOptions.modifyArrays:ractive.modifyArrays;if(magic){if(!environment__magic){throw new Error(\"Getters and setters (magic mode) are not supported in this browser\");}if(modifyArrays){adapt.push(magicArray);}adapt.push(adaptors_magic);}if(modifyArrays){adapt.push(array_index);}return adapt;function lookup(adaptor){if(typeof adaptor === \"string\"){adaptor = findInViewHierarchy(\"adaptors\",ractive,adaptor);if(!adaptor){fatal(missingPlugin(adaptor,\"adaptor\"));}}return adaptor;}}function initialise__combine(a,b){var c=a.slice(),i=b.length;while(i--) {if(! ~c.indexOf(b[i])){c.push(b[i]);}}return c;}function initialiseProperties(ractive,options){ // Generate a unique identifier, for places where you'd use a weak map if it\n\t// existed\n\tractive._guid = \"r-\" + initialise__uid++; // events\n\tractive._subs = create(null); // storage for item configuration from instantiation to reset,\n\t// like dynamic functions or original values\n\tractive._config = {}; // two-way bindings\n\tractive._twowayBindings = create(null); // animations (so we can stop any in progress at teardown)\n\tractive._animations = []; // nodes registry\n\tractive.nodes = {}; // live queries\n\tractive._liveQueries = [];ractive._liveComponentQueries = []; // bound data functions\n\tractive._boundFunctions = []; // observers\n\tractive._observers = []; // properties specific to inline components\n\tif(options.component){ractive.parent = options.parent;ractive.container = options.container || null;ractive.root = ractive.parent.root;ractive.component = options.component;options.component.instance = ractive; // for hackability, this could be an open option\n\t// for any ractive instance, but for now, just\n\t// for components and just for ractive...\n\tractive._inlinePartials = options.inlinePartials;}else {ractive.root = ractive;ractive.parent = ractive.container = null;}}function deprecateRactiveData(){throw new Error(\"Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead\");}function ComplexParameter(component,template,callback){this.parentFragment = component.parentFragment;this.callback = callback;this.fragment = new virtualdom_Fragment({template:template,root:component.root,owner:this});this.update();}var initialise_ComplexParameter=ComplexParameter;ComplexParameter.prototype = {bubble:function bubble(){if(!this.dirty){this.dirty = true;global_runloop.addView(this);}},update:function update(){this.callback(this.fragment.getValue());this.dirty = false;},rebind:function rebind(oldKeypath,newKeypath){this.fragment.rebind(oldKeypath,newKeypath);},unbind:function unbind(){this.fragment.unbind();}};var createInstance=function createInstance(component,Component,attributes,yieldTemplate,partials){var instance,parentFragment,ractive,fragment,container,inlinePartials={},data={},mappings={},ready,resolvers=[];parentFragment = component.parentFragment;ractive = component.root;partials = partials || {};utils_object__extend(inlinePartials,partials); // Make contents available as a {{>content}} partial\n\tpartials.content = yieldTemplate || []; // set a default partial for yields with no name\n\tinlinePartials[\"\"] = partials.content;if(Component.defaults.el){warnIfDebug(\"The <%s/> component has a default `el` property; it has been disregarded\",component.name);} // find container\n\tfragment = parentFragment;while(fragment) {if(fragment.owner.type === YIELDER){container = fragment.owner.container;break;}fragment = fragment.parent;} // each attribute represents either a) data or b) a mapping\n\tif(attributes){Object.keys(attributes).forEach(function(key){var attribute=attributes[key],parsed,resolver;if(typeof attribute === \"string\"){ // it's static data\n\tparsed = parseJSON(attribute);data[key] = parsed?parsed.value:attribute;}else if(attribute === 0){ // it had no '=', so we'll call it true\n\tdata[key] = true;}else if(isArray(attribute)){ // this represents dynamic data\n\tif(isSingleInterpolator(attribute)){mappings[key] = {origin:component.root.viewmodel,keypath:undefined};resolver = createResolver(component,attribute[0],function(keypath){if(keypath.isSpecial){if(ready){instance.set(key,keypath.value); // TODO use viewmodel?\n\t}else {data[key] = keypath.value; // TODO errr.... would be better if we didn't have to do this\n\tdelete mappings[key];}}else {if(ready){instance.viewmodel.mappings[key].resolve(keypath);}else { // resolved immediately\n\tmappings[key].keypath = keypath;}}});}else {resolver = new initialise_ComplexParameter(component,attribute,function(value){if(ready){instance.set(key,value); // TODO use viewmodel?\n\t}else {data[key] = value;}});}resolvers.push(resolver);}else {throw new Error(\"erm wut\");}});}instance = create(Component.prototype);initialise(instance,{el:null,append:true,data:data,partials:partials,magic:ractive.magic || Component.defaults.magic,modifyArrays:ractive.modifyArrays, // need to inherit runtime parent adaptors\n\tadapt:ractive.adapt},{parent:ractive,component:component,container:container,mappings:mappings,inlinePartials:inlinePartials,cssIds:parentFragment.cssIds});ready = true;component.resolvers = resolvers;return instance;};function createResolver(component,template,callback){var resolver;if(template.r){resolver = Resolvers_createReferenceResolver(component,template.r,callback);}else if(template.x){resolver = new Resolvers_ExpressionResolver(component,component.parentFragment,template.x,callback);}else if(template.rx){resolver = new ReferenceExpressionResolver_ReferenceExpressionResolver(component,template.rx,callback);}return resolver;}function isSingleInterpolator(template){return template.length === 1 && template[0].t === INTERPOLATOR;} // TODO how should event arguments be handled? e.g.\n\t// <widget on-foo='bar:1,2,3'/>\n\t// The event 'bar' will be fired on the parent instance\n\t// when 'foo' fires on the child, but the 1,2,3 arguments\n\t// will be lost\n\tvar initialise_propagateEvents=propagateEvents;function propagateEvents(component,eventsDescriptor){var eventName;for(eventName in eventsDescriptor) {if(eventsDescriptor.hasOwnProperty(eventName)){propagateEvent(component.instance,component.root,eventName,eventsDescriptor[eventName]);}}}function propagateEvent(childInstance,parentInstance,eventName,proxyEventName){if(typeof proxyEventName !== \"string\"){fatal(\"Components currently only support simple events - you cannot include arguments. Sorry!\");}childInstance.on(eventName,function(){var event,args; // semi-weak test, but what else? tag the event obj ._isEvent ?\n\tif(arguments.length && arguments[0] && arguments[0].node){event = Array.prototype.shift.call(arguments);}args = Array.prototype.slice.call(arguments);shared_fireEvent(parentInstance,proxyEventName,{event:event,args:args}); // cancel bubbling\n\treturn false;});}var initialise_updateLiveQueries=function initialise_updateLiveQueries(component){var ancestor,query; // If there's a live query for this component type, add it\n\tancestor = component.root;while(ancestor) {if(query = ancestor._liveComponentQueries[\"_\" + component.name]){query.push(component.instance);}ancestor = ancestor.parent;}};var Component_prototype_init=Component$init;function Component$init(options,Component){var parentFragment,root;if(!Component){throw new Error(\"Component \\\"\" + this.name + \"\\\" not found\");}parentFragment = this.parentFragment = options.parentFragment;root = parentFragment.root;this.root = root;this.type = COMPONENT;this.name = options.template.e;this.index = options.index;this.indexRefBindings = {};this.yielders = {};this.resolvers = [];createInstance(this,Component,options.template.a,options.template.f,options.template.p);initialise_propagateEvents(this,options.template.v); // intro, outro and decorator directives have no effect\n\tif(options.template.t0 || options.template.t1 || options.template.t2 || options.template.o){warnIfDebug(\"The \\\"intro\\\", \\\"outro\\\" and \\\"decorator\\\" directives have no effect on components\",{ractive:this.instance});}initialise_updateLiveQueries(this);}var Component_prototype_rebind=Component$rebind;function Component$rebind(oldKeypath,newKeypath){var query;this.resolvers.forEach(rebind);for(var k in this.yielders) {if(this.yielders[k][0]){rebind(this.yielders[k][0]);}}if(query = this.root._liveComponentQueries[\"_\" + this.name]){query._makeDirty();}function rebind(x){x.rebind(oldKeypath,newKeypath);}}var Component_prototype_render=Component$render;function Component$render(){var instance=this.instance;instance.render(this.parentFragment.getNode());this.rendered = true;return instance.fragment.detach();}var Component_prototype_toString=Component$toString;function Component$toString(){return this.instance.fragment.toString();}var Component_prototype_unbind=Component$unbind;var Component_prototype_unbind__teardownHook=new hooks_Hook(\"teardown\");function Component$unbind(){var instance=this.instance;this.resolvers.forEach(methodCallers__unbind);removeFromLiveComponentQueries(this);instance._observers.forEach(cancel); // teardown the instance\n\tinstance.fragment.unbind();instance.viewmodel.teardown();if(instance.fragment.rendered && instance.el.__ractive_instances__){removeFromArray(instance.el.__ractive_instances__,instance);}Component_prototype_unbind__teardownHook.fire(instance);}function removeFromLiveComponentQueries(component){var instance,query;instance = component.root;do {if(query = instance._liveComponentQueries[\"_\" + component.name]){query._remove(component);}}while(instance = instance.parent);}var Component_prototype_unrender=Component$unrender;function Component$unrender(shouldDestroy){this.shouldDestroy = shouldDestroy;this.instance.unrender();}var Component=function Component(options,Constructor){this.init(options,Constructor);};Component.prototype = {detach:Component_prototype_detach,find:Component_prototype_find,findAll:Component_prototype_findAll,findAllComponents:Component_prototype_findAllComponents,findComponent:Component_prototype_findComponent,findNextNode:Component_prototype_findNextNode,firstNode:Component_prototype_firstNode,init:Component_prototype_init,rebind:Component_prototype_rebind,render:Component_prototype_render,toString:Component_prototype_toString,unbind:Component_prototype_unbind,unrender:Component_prototype_unrender};var _Component=Component;var Comment=function Comment(options){this.type = COMMENT;this.value = options.template.c;};Comment.prototype = {detach:shared_detach,firstNode:function firstNode(){return this.node;},render:function render(){if(!this.node){this.node = document.createComment(this.value);}return this.node;},toString:function toString(){return \"<!--\" + this.value + \"-->\";},unrender:function unrender(shouldDestroy){if(shouldDestroy){this.node.parentNode.removeChild(this.node);}}};var items_Comment=Comment;var Yielder=function Yielder(options){var container,component;this.type = YIELDER;this.container = container = options.parentFragment.root;this.component = component = container.component;this.container = container;this.containerFragment = options.parentFragment;this.parentFragment = component.parentFragment;var name=this.name = options.template.n || \"\";var template=container._inlinePartials[name];if(!template){warnIfDebug(\"Could not find template for partial \\\"\" + name + \"\\\"\",{ractive:options.root});template = [];}this.fragment = new virtualdom_Fragment({owner:this,root:container.parent,template:template,pElement:this.containerFragment.pElement}); // even though only one yielder is allowed, we need to have an array of them\n\t// as it's possible to cause a yielder to be created before the last one\n\t// was destroyed in the same turn of the runloop\n\tif(!isArray(component.yielders[name])){component.yielders[name] = [this];}else {component.yielders[name].push(this);}global_runloop.scheduleTask(function(){if(component.yielders[name].length > 1){throw new Error(\"A component template can only have one {{yield\" + (name?\" \" + name:\"\") + \"}} declaration at a time\");}});};Yielder.prototype = {detach:function detach(){return this.fragment.detach();},find:function find(selector){return this.fragment.find(selector);},findAll:function findAll(selector,query){return this.fragment.findAll(selector,query);},findComponent:function findComponent(selector){return this.fragment.findComponent(selector);},findAllComponents:function findAllComponents(selector,query){return this.fragment.findAllComponents(selector,query);},findNextNode:function findNextNode(){return this.containerFragment.findNextNode(this);},firstNode:function firstNode(){return this.fragment.firstNode();},getValue:function getValue(options){return this.fragment.getValue(options);},render:function render(){return this.fragment.render();},unbind:function unbind(){this.fragment.unbind();},unrender:function unrender(shouldDestroy){this.fragment.unrender(shouldDestroy);removeFromArray(this.component.yielders[this.name],this);},rebind:function rebind(oldKeypath,newKeypath){this.fragment.rebind(oldKeypath,newKeypath);},toString:function toString(){return this.fragment.toString();}};var items_Yielder=Yielder;var Doctype=function Doctype(options){this.declaration = options.template.a;};Doctype.prototype = {init:noop,render:noop,unrender:noop,teardown:noop,toString:function toString(){return \"<!DOCTYPE\" + this.declaration + \">\";}};var items_Doctype=Doctype;var Fragment_prototype_init=Fragment$init;function Fragment$init(options){var _this=this;this.owner = options.owner; // The item that owns this fragment - an element, section, partial, or attribute\n\tthis.parent = this.owner.parentFragment; // inherited properties\n\tthis.root = options.root;this.pElement = options.pElement;this.context = options.context;this.index = options.index;this.key = options.key;this.registeredIndexRefs = []; // encapsulated styles should be inherited until they get applied by an element\n\tthis.cssIds = \"cssIds\" in options?options.cssIds:this.parent?this.parent.cssIds:null;this.items = options.template.map(function(template,i){return createItem({parentFragment:_this,pElement:options.pElement,template:template,index:i});});this.value = this.argsList = null;this.dirtyArgs = this.dirtyValue = true;this.bound = true;}function createItem(options){if(typeof options.template === \"string\"){return new items_Text(options);}switch(options.template.t){case YIELDER:return new items_Yielder(options);case INTERPOLATOR:return new items_Interpolator(options);case SECTION:return new _Section(options);case TRIPLE:return new _Triple(options);case ELEMENT:var constructor=undefined;if(constructor = Component_getComponent(options.parentFragment.root,options.template.e)){return new _Component(options,constructor);}return new _Element(options);case PARTIAL:return new _Partial(options);case COMMENT:return new items_Comment(options);case DOCTYPE:return new items_Doctype(options);default:throw new Error(\"Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!\");}}var Fragment_prototype_rebind=Fragment$rebind;function Fragment$rebind(oldKeypath,newKeypath){ // assign new context keypath if needed\n\tif(!this.owner || this.owner.hasContext){assignNewKeypath(this,\"context\",oldKeypath,newKeypath);}this.items.forEach(function(item){if(item.rebind){item.rebind(oldKeypath,newKeypath);}});}var Fragment_prototype_render=Fragment$render;function Fragment$render(){var result;if(this.items.length === 1){result = this.items[0].render();}else {result = document.createDocumentFragment();this.items.forEach(function(item){result.appendChild(item.render());});}this.rendered = true;return result;}var Fragment_prototype_toString=Fragment$toString;function Fragment$toString(escape){if(!this.items){return \"\";}return this.items.map(escape?toEscapedString:Fragment_prototype_toString__toString).join(\"\");}function Fragment_prototype_toString__toString(item){return item.toString();}function toEscapedString(item){return item.toString(true);}var Fragment_prototype_unbind=Fragment$unbind;function Fragment$unbind(){if(!this.bound){return;}this.items.forEach(unbindItem);this.bound = false;}function unbindItem(item){if(item.unbind){item.unbind();}}var Fragment_prototype_unrender=Fragment$unrender;function Fragment$unrender(shouldDestroy){if(!this.rendered){throw new Error(\"Attempted to unrender a fragment that was not rendered\");}this.items.forEach(function(i){return i.unrender(shouldDestroy);});this.rendered = false;}var Fragment=function Fragment(options){this.init(options);};Fragment.prototype = {bubble:prototype_bubble,detach:Fragment_prototype_detach,find:Fragment_prototype_find,findAll:Fragment_prototype_findAll,findAllComponents:Fragment_prototype_findAllComponents,findComponent:Fragment_prototype_findComponent,findNextNode:prototype_findNextNode,firstNode:prototype_firstNode,getArgsList:getArgsList,getNode:getNode,getValue:prototype_getValue,init:Fragment_prototype_init,rebind:Fragment_prototype_rebind,registerIndexRef:function registerIndexRef(idx){var idxs=this.registeredIndexRefs;if(idxs.indexOf(idx) === -1){idxs.push(idx);}},render:Fragment_prototype_render,toString:Fragment_prototype_toString,unbind:Fragment_prototype_unbind,unregisterIndexRef:function unregisterIndexRef(idx){var idxs=this.registeredIndexRefs;idxs.splice(idxs.indexOf(idx),1);},unrender:Fragment_prototype_unrender};var virtualdom_Fragment=Fragment;var prototype_reset=Ractive$reset;var shouldRerender=[\"template\",\"partials\",\"components\",\"decorators\",\"events\"],resetHook=new hooks_Hook(\"reset\");function Ractive$reset(data){var promise,wrapper,changes,i,rerender;data = data || {};if(typeof data !== \"object\"){throw new Error(\"The reset method takes either no arguments, or an object containing new data\");} // If the root object is wrapped, try and use the wrapper's reset value\n\tif((wrapper = this.viewmodel.wrapped[\"\"]) && wrapper.reset){if(wrapper.reset(data) === false){ // reset was rejected, we need to replace the object\n\tthis.viewmodel.reset(data);}}else {this.viewmodel.reset(data);} // reset config items and track if need to rerender\n\tchanges = config_config.reset(this);i = changes.length;while(i--) {if(shouldRerender.indexOf(changes[i]) > -1){rerender = true;break;}}if(rerender){var component=undefined;this.viewmodel.mark(rootKeypath); // Is this is a component, we need to set the `shouldDestroy`\n\t// flag, otherwise it will assume by default that a parent node\n\t// will be detached, and therefore it doesn't need to bother\n\t// detaching its own nodes\n\tif(component = this.component){component.shouldDestroy = true;}this.unrender();if(component){component.shouldDestroy = false;} // If the template changed, we need to destroy the parallel DOM\n\t// TODO if we're here, presumably it did?\n\tif(this.fragment.template !== this.template){this.fragment.unbind();this.fragment = new virtualdom_Fragment({template:this.template,root:this,owner:this});}promise = this.render(this.el,this.anchor);}else {promise = global_runloop.start(this,true);this.viewmodel.mark(rootKeypath);global_runloop.end();}resetHook.fire(this,data);return promise;}var resetPartial=function resetPartial(name,partial){var promise,collection=[];function collect(source,dest,ractive){ // if this is a component and it has its own partial, bail\n\tif(ractive && ractive.partials[name])return;source.forEach(function(item){ // queue to rerender if the item is a partial and the current name matches\n\tif(item.type === PARTIAL && item.getPartialName() === name){dest.push(item);} // if it has a fragment, process its items\n\tif(item.fragment){collect(item.fragment.items,dest,ractive);} // or if it has fragments\n\tif(isArray(item.fragments)){collect(item.fragments,dest,ractive);} // or if it is itself a fragment, process its items\n\telse if(isArray(item.items)){collect(item.items,dest,ractive);} // or if it is a component, step in and process its items\n\telse if(item.type === COMPONENT && item.instance){collect(item.instance.fragment.items,dest,item.instance);} // if the item is an element, process its attributes too\n\tif(item.type === ELEMENT){if(isArray(item.attributes)){collect(item.attributes,dest,ractive);}if(isArray(item.conditionalAttributes)){collect(item.conditionalAttributes,dest,ractive);}}});}collect(this.fragment.items,collection);this.partials[name] = partial;promise = global_runloop.start(this,true);collection.forEach(function(item){item.value = undefined;item.setValue(name);});global_runloop.end();return promise;}; // TODO should resetTemplate be asynchronous? i.e. should it be a case\n\t// of outro, update template, intro? I reckon probably not, since that\n\t// could be achieved with unrender-resetTemplate-render. Also, it should\n\t// conceptually be similar to resetPartial, which couldn't be async\n\tvar resetTemplate=Ractive$resetTemplate;function Ractive$resetTemplate(template){var transitionsEnabled,component;template_template.init(null,this,{template:template});transitionsEnabled = this.transitionsEnabled;this.transitionsEnabled = false; // Is this is a component, we need to set the `shouldDestroy`\n\t// flag, otherwise it will assume by default that a parent node\n\t// will be detached, and therefore it doesn't need to bother\n\t// detaching its own nodes\n\tif(component = this.component){component.shouldDestroy = true;}this.unrender();if(component){component.shouldDestroy = false;} // remove existing fragment and create new one\n\tthis.fragment.unbind();this.fragment = new virtualdom_Fragment({template:this.template,root:this,owner:this});this.render(this.el,this.anchor);this.transitionsEnabled = transitionsEnabled;}var reverse=makeArrayMethod(\"reverse\");var Ractive_prototype_set=Ractive$set;function Ractive$set(keypath,value){var map,promise;promise = global_runloop.start(this,true); // Set multiple keypaths in one go\n\tif(isObject(keypath)){map = keypath;for(keypath in map) {if(map.hasOwnProperty(keypath)){value = map[keypath];set(this,keypath,value);}}} // Set a single keypath\n\telse {set(this,keypath,value);}global_runloop.end();return promise;}function set(ractive,keypath,value){keypath = getKeypath(normalise(keypath));if(keypath.isPattern){getMatchingKeypaths(ractive,keypath).forEach(function(keypath){ractive.viewmodel.set(keypath,value);});}else {ractive.viewmodel.set(keypath,value);}}var shift=makeArrayMethod(\"shift\");var prototype_sort=makeArrayMethod(\"sort\");var splice=makeArrayMethod(\"splice\");var subtract=Ractive$subtract;function Ractive$subtract(keypath,d){return shared_add(this,keypath,d === undefined?-1:-d);} // Teardown. This goes through the root fragment and all its children, removing observers\n\t// and generally cleaning up after itself\n\tvar Ractive_prototype_teardown=Ractive$teardown;var Ractive_prototype_teardown__teardownHook=new hooks_Hook(\"teardown\");function Ractive$teardown(){var promise;this.fragment.unbind();this.viewmodel.teardown();this._observers.forEach(cancel);if(this.fragment.rendered && this.el.__ractive_instances__){removeFromArray(this.el.__ractive_instances__,this);}this.shouldDestroy = true;promise = this.fragment.rendered?this.unrender():utils_Promise.resolve();Ractive_prototype_teardown__teardownHook.fire(this);this._boundFunctions.forEach(deleteFunctionCopy);return promise;}function deleteFunctionCopy(bound){delete bound.fn[bound.prop];}var toggle=Ractive$toggle;function Ractive$toggle(keypath){var _this=this;if(typeof keypath !== \"string\"){throw new TypeError(badArguments);}var changes=undefined;if(/\\*/.test(keypath)){changes = {};getMatchingKeypaths(this,getKeypath(normalise(keypath))).forEach(function(keypath){changes[keypath.str] = !_this.viewmodel.get(keypath);});return this.set(changes);}return this.set(keypath,!this.get(keypath));}var toHTML=Ractive$toHTML;function Ractive$toHTML(){return this.fragment.toString(true);}var Ractive_prototype_unrender=Ractive$unrender;var unrenderHook=new hooks_Hook(\"unrender\");function Ractive$unrender(){var promise,shouldDestroy;if(!this.fragment.rendered){warnIfDebug(\"ractive.unrender() was called on a Ractive instance that was not rendered\");return utils_Promise.resolve();}promise = global_runloop.start(this,true); // If this is a component, and the component isn't marked for destruction,\n\t// don't detach nodes from the DOM unnecessarily\n\tshouldDestroy = !this.component || this.component.shouldDestroy || this.shouldDestroy; // Cancel any animations in progress\n\twhile(this._animations[0]) {this._animations[0].stop(); // it will remove itself from the index\n\t}this.fragment.unrender(shouldDestroy);removeFromArray(this.el.__ractive_instances__,this);unrenderHook.fire(this);global_runloop.end();return promise;}var unshift=makeArrayMethod(\"unshift\");var Ractive_prototype_update=Ractive$update;var updateHook=new hooks_Hook(\"update\");function Ractive$update(keypath){var promise;keypath = getKeypath(keypath) || rootKeypath;promise = global_runloop.start(this,true);this.viewmodel.mark(keypath);global_runloop.end();updateHook.fire(this,keypath);return promise;}var prototype_updateModel=Ractive$updateModel;function Ractive$updateModel(keypath,cascade){var values,key,bindings;if(typeof keypath === \"string\" && !cascade){bindings = this._twowayBindings[keypath];}else {bindings = [];for(key in this._twowayBindings) {if(!keypath || getKeypath(key).equalsOrStartsWith(keypath)){ // TODO is this right?\n\tbindings.push.apply(bindings,this._twowayBindings[key]);}}}values = consolidate(this,bindings);return this.set(values);}function consolidate(ractive,bindings){var values={},checkboxGroups=[];bindings.forEach(function(b){var oldValue,newValue; // special case - radio name bindings\n\tif(b.radioName && !b.element.node.checked){return;} // special case - checkbox name bindings come in groups, so\n\t// we want to get the value once at most\n\tif(b.checkboxName){if(!checkboxGroups[b.keypath.str] && !b.changed()){checkboxGroups.push(b.keypath);checkboxGroups[b.keypath.str] = b;}return;}oldValue = b.attribute.value;newValue = b.getValue();if(arrayContentsMatch(oldValue,newValue)){return;}if(!isEqual(oldValue,newValue)){values[b.keypath.str] = newValue;}}); // Handle groups of `<input type='checkbox' name='{{foo}}' ...>`\n\tif(checkboxGroups.length){checkboxGroups.forEach(function(keypath){var binding,oldValue,newValue;binding = checkboxGroups[keypath.str]; // one to represent the entire group\n\toldValue = binding.attribute.value;newValue = binding.getValue();if(!arrayContentsMatch(oldValue,newValue)){values[keypath.str] = newValue;}});}return values;}var prototype={add:prototype_add,animate:prototype_animate,detach:prototype_detach,find:prototype_find,findAll:prototype_findAll,findAllComponents:prototype_findAllComponents,findComponent:prototype_findComponent,findContainer:findContainer,findParent:findParent,fire:prototype_fire,get:prototype_get,insert:insert,merge:prototype_merge,observe:observe,observeOnce:observeOnce,off:off,on:on,once:once,pop:pop,push:push,render:prototype_render,reset:prototype_reset,resetPartial:resetPartial,resetTemplate:resetTemplate,reverse:reverse,set:Ractive_prototype_set,shift:shift,sort:prototype_sort,splice:splice,subtract:subtract,teardown:Ractive_prototype_teardown,toggle:toggle,toHTML:toHTML,toHtml:toHTML,unrender:Ractive_prototype_unrender,unshift:unshift,update:Ractive_prototype_update,updateModel:prototype_updateModel};var wrapMethod=function wrapMethod(method,superMethod,force){if(force || needsSuper(method,superMethod)){return function(){var hasSuper=(\"_super\" in this),_super=this._super,result;this._super = superMethod;result = method.apply(this,arguments);if(hasSuper){this._super = _super;}return result;};}else {return method;}};function needsSuper(method,superMethod){return typeof superMethod === \"function\" && /_super/.test(method);}var unwrapExtended=unwrap;function unwrap(Child){var options={};while(Child) {addRegistries(Child,options);addOtherOptions(Child,options);if(Child._Parent !== _Ractive){Child = Child._Parent;}else {Child = false;}}return options;}function addRegistries(Child,options){config_registries.forEach(function(r){addRegistry(r.useDefaults?Child.prototype:Child,options,r.name);});}function addRegistry(target,options,name){var registry,keys=Object.keys(target[name]);if(!keys.length){return;}if(!(registry = options[name])){registry = options[name] = {};}keys.filter(function(key){return !(key in registry);}).forEach(function(key){return registry[key] = target[name][key];});}function addOtherOptions(Child,options){Object.keys(Child.prototype).forEach(function(key){if(key === \"computed\"){return;}var value=Child.prototype[key];if(!(key in options)){options[key] = value._method?value._method:value;} // is it a wrapped function?\n\telse if(typeof options[key] === \"function\" && typeof value === \"function\" && options[key]._method){var result=undefined,needsSuper=value._method;if(needsSuper){value = value._method;} // rewrap bound directly to parent fn\n\tresult = wrapMethod(options[key]._method,value);if(needsSuper){result._method = result;}options[key] = result;}});}var _extend=_extend__extend;function _extend__extend(){for(var _len=arguments.length,options=Array(_len),_key=0;_key < _len;_key++) {options[_key] = arguments[_key];}if(!options.length){return extendOne(this);}else {return options.reduce(extendOne,this);}}function extendOne(Parent){var options=arguments[1] === undefined?{}:arguments[1];var Child,proto; // if we're extending with another Ractive instance...\n\t//\n\t//   var Human = Ractive.extend(...), Spider = Ractive.extend(...);\n\t//   var Spiderman = Human.extend( Spider );\n\t//\n\t// ...inherit prototype methods and default options as well\n\tif(options.prototype instanceof _Ractive){options = unwrapExtended(options);}Child = function(options){if(!(this instanceof Child))return new Child(options);initialise(this,options);};proto = create(Parent.prototype);proto.constructor = Child; // Static properties\n\tdefineProperties(Child,{ // alias prototype as defaults\n\tdefaults:{value:proto}, // extendable\n\textend:{value:_extend__extend,writable:true,configurable:true}, // Parent - for IE8, can't use Object.getPrototypeOf\n\t_Parent:{value:Parent}}); // extend configuration\n\tconfig_config.extend(Parent,proto,options);custom_data.extend(Parent,proto,options);if(options.computed){proto.computed = utils_object__extend(create(Parent.prototype.computed),options.computed);}Child.prototype = proto;return Child;}var getNodeInfo=function getNodeInfo(node){var info={},priv,indices;if(!node || !(priv = node._ractive)){return info;}info.ractive = priv.root;info.keypath = priv.keypath.str;info.index = {}; // find all index references and resolve them\n\tif(indices = Resolvers_findIndexRefs(priv.proxy.parentFragment)){info.index = Resolvers_findIndexRefs.resolve(indices);}return info;};var Ractive,properties; // Main Ractive required object\n\tRactive = function(options){if(!(this instanceof Ractive))return new Ractive(options);initialise(this,options);}; // Ractive properties\n\tproperties = { // debug flag\n\tDEBUG:{writable:true,value:true},DEBUG_PROMISES:{writable:true,value:true}, // static methods:\n\textend:{value:_extend},getNodeInfo:{value:getNodeInfo},parse:{value:_parse}, // Namespaced constructors\n\tPromise:{value:utils_Promise}, // support\n\tsvg:{value:svg},magic:{value:environment__magic}, // version\n\tVERSION:{value:\"0.7.3\"}, // Plugins\n\tadaptors:{writable:true,value:{}},components:{writable:true,value:{}},decorators:{writable:true,value:{}},easing:{writable:true,value:static_easing},events:{writable:true,value:{}},interpolators:{writable:true,value:static_interpolators},partials:{writable:true,value:{}},transitions:{writable:true,value:{}}}; // Ractive properties\n\tdefineProperties(Ractive,properties);Ractive.prototype = utils_object__extend(prototype,config_defaults);Ractive.prototype.constructor = Ractive; // alias prototype as defaults\n\tRactive.defaults = Ractive.prototype; // Ractive.js makes liberal use of things like Array.prototype.indexOf. In\n\t// older browsers, these are made available via a shim - here, we do a quick\n\t// pre-flight check to make sure that either a) we're not in a shit browser,\n\t// or b) we're using a Ractive-legacy.js build\n\tvar FUNCTION=\"function\";if(typeof Date.now !== FUNCTION || typeof String.prototype.trim !== FUNCTION || typeof Object.keys !== FUNCTION || typeof Array.prototype.indexOf !== FUNCTION || typeof Array.prototype.forEach !== FUNCTION || typeof Array.prototype.map !== FUNCTION || typeof Array.prototype.filter !== FUNCTION || typeof window !== \"undefined\" && typeof window.addEventListener !== FUNCTION){throw new Error(\"It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.\");}var _Ractive=Ractive;return _Ractive;}); //# sourceMappingURL=ractive.js.map\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tmodule.exports={\"v\":3,\"t\":[{\"t\":7,\"e\":\"div\",\"a\":{\"class\":\"manual-signalling-root\"},\"f\":[{\"t\":7,\"e\":\"textarea\",\"a\":{\"value\":[{\"t\":2,\"r\":\"data\"}]}},\" \",{\"t\":7,\"e\":\"button\",\"a\":{\"class\":\"offer-btn\"},\"v\":{\"click\":{\"m\":\"makeOffer\",\"a\":{\"r\":[],\"s\":\"[]\"}}},\"f\":[\"make offer\"]},\" \",{\"t\":7,\"e\":\"button\",\"a\":{\"class\":\"ack-btn\"},\"v\":{\"click\":{\"m\":\"gotAnswer\",\"a\":{\"r\":[],\"s\":\"[]\"}}},\"f\":[\"accept answer\"]},\" \",{\"t\":7,\"e\":\"button\",\"a\":{\"class\":\"answer-btn\"},\"v\":{\"click\":{\"m\":\"gotOffer\",\"a\":{\"r\":[],\"s\":\"[]\"}}},\"f\":[\"accept offer\"]}]}]};\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(10);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(12)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/less-loader/index.js!./index.less\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/less-loader/index.js!./index.less\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(11)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".manual-signalling-root textarea{width:100%;height:200px}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t/*\r\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\t\tAuthor Tobias Koppers @sokra\r\n\t*/\n\t// css base code, injected by the css-loader\n\t\"use strict\";\n\t\n\tmodule.exports = function () {\n\t\tvar list = [];\n\t\n\t\t// return the list of modules as css string\n\t\tlist.toString = function toString() {\n\t\t\tvar result = [];\n\t\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\t\tvar item = this[i];\n\t\t\t\tif (item[2]) {\n\t\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\n\t\t\t\t} else {\n\t\t\t\t\tresult.push(item[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result.join(\"\");\n\t\t};\n\t\n\t\t// import a list of modules into the list\n\t\tlist.i = function (modules, mediaQuery) {\n\t\t\tif (typeof modules === \"string\") modules = [[null, modules, \"\"]];\n\t\t\tvar alreadyImportedModules = {};\n\t\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\t\tvar id = this[i][0];\n\t\t\t\tif (typeof id === \"number\") alreadyImportedModules[id] = true;\n\t\t\t}\n\t\t\tfor (i = 0; i < modules.length; i++) {\n\t\t\t\tvar item = modules[i];\n\t\t\t\t// skip already imported module\n\t\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\t\tif (typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\t\tif (mediaQuery && !item[2]) {\n\t\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t\t} else if (mediaQuery) {\n\t\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t\t}\n\t\t\t\t\tlist.push(item);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn list;\n\t};\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*\r\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\t\tAuthor Tobias Koppers @sokra\r\n\t*/\r\n\tvar stylesInDom = {},\r\n\t\tmemoize = function(fn) {\r\n\t\t\tvar memo;\r\n\t\t\treturn function () {\r\n\t\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\t\treturn memo;\r\n\t\t\t};\r\n\t\t},\r\n\t\tisOldIE = memoize(function() {\r\n\t\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t\t}),\r\n\t\tgetHeadElement = memoize(function () {\r\n\t\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t\t}),\r\n\t\tsingletonElement = null,\r\n\t\tsingletonCounter = 0,\r\n\t\tstyleElementsInsertedAtTop = [];\r\n\t\r\n\tmodule.exports = function(list, options) {\r\n\t\tif(false) {\r\n\t\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t\t}\r\n\t\r\n\t\toptions = options || {};\r\n\t\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t\t// tags it will allow on a page\r\n\t\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\t\r\n\t\t// By default, add <style> tags to the bottom of <head>.\r\n\t\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\t\r\n\t\tvar styles = listToStyles(list);\r\n\t\taddStylesToDom(styles, options);\r\n\t\r\n\t\treturn function update(newList) {\r\n\t\t\tvar mayRemove = [];\r\n\t\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\t\tvar item = styles[i];\r\n\t\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\t\tdomStyle.refs--;\r\n\t\t\t\tmayRemove.push(domStyle);\r\n\t\t\t}\r\n\t\t\tif(newList) {\r\n\t\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\t\taddStylesToDom(newStyles, options);\r\n\t\t\t}\r\n\t\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tfunction addStylesToDom(styles, options) {\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tif(domStyle) {\r\n\t\t\t\tdomStyle.refs++;\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t\t}\r\n\t\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar parts = [];\r\n\t\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t\t}\r\n\t\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction listToStyles(list) {\r\n\t\tvar styles = [];\r\n\t\tvar newStyles = {};\r\n\t\tfor(var i = 0; i < list.length; i++) {\r\n\t\t\tvar item = list[i];\r\n\t\t\tvar id = item[0];\r\n\t\t\tvar css = item[1];\r\n\t\t\tvar media = item[2];\r\n\t\t\tvar sourceMap = item[3];\r\n\t\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\t\tif(!newStyles[id])\r\n\t\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\t\telse\r\n\t\t\t\tnewStyles[id].parts.push(part);\r\n\t\t}\r\n\t\treturn styles;\r\n\t}\r\n\t\r\n\tfunction insertStyleElement(options, styleElement) {\r\n\t\tvar head = getHeadElement();\r\n\t\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\t\tif (options.insertAt === \"top\") {\r\n\t\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t\t} else {\r\n\t\t\t\thead.appendChild(styleElement);\r\n\t\t\t}\r\n\t\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t\t} else if (options.insertAt === \"bottom\") {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction removeStyleElement(styleElement) {\r\n\t\tstyleElement.parentNode.removeChild(styleElement);\r\n\t\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\t\tif(idx >= 0) {\r\n\t\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction createStyleElement(options) {\r\n\t\tvar styleElement = document.createElement(\"style\");\r\n\t\tstyleElement.type = \"text/css\";\r\n\t\tinsertStyleElement(options, styleElement);\r\n\t\treturn styleElement;\r\n\t}\r\n\t\r\n\tfunction createLinkElement(options) {\r\n\t\tvar linkElement = document.createElement(\"link\");\r\n\t\tlinkElement.rel = \"stylesheet\";\r\n\t\tinsertStyleElement(options, linkElement);\r\n\t\treturn linkElement;\r\n\t}\r\n\t\r\n\tfunction addStyle(obj, options) {\r\n\t\tvar styleElement, update, remove;\r\n\t\r\n\t\tif (options.singleton) {\r\n\t\t\tvar styleIndex = singletonCounter++;\r\n\t\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t\t} else if(obj.sourceMap &&\r\n\t\t\ttypeof URL === \"function\" &&\r\n\t\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\t\ttypeof Blob === \"function\" &&\r\n\t\t\ttypeof btoa === \"function\") {\r\n\t\t\tstyleElement = createLinkElement(options);\r\n\t\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\t\tremove = function() {\r\n\t\t\t\tremoveStyleElement(styleElement);\r\n\t\t\t\tif(styleElement.href)\r\n\t\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tstyleElement = createStyleElement(options);\r\n\t\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\t\tremove = function() {\r\n\t\t\t\tremoveStyleElement(styleElement);\r\n\t\t\t};\r\n\t\t}\r\n\t\r\n\t\tupdate(obj);\r\n\t\r\n\t\treturn function updateStyle(newObj) {\r\n\t\t\tif(newObj) {\r\n\t\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tupdate(obj = newObj);\r\n\t\t\t} else {\r\n\t\t\t\tremove();\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tvar replaceText = (function () {\r\n\t\tvar textStore = [];\r\n\t\r\n\t\treturn function (index, replacement) {\r\n\t\t\ttextStore[index] = replacement;\r\n\t\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t\t};\r\n\t})();\r\n\t\r\n\tfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\t\tvar css = remove ? \"\" : obj.css;\r\n\t\r\n\t\tif (styleElement.styleSheet) {\r\n\t\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t\t} else {\r\n\t\t\tvar cssNode = document.createTextNode(css);\r\n\t\t\tvar childNodes = styleElement.childNodes;\r\n\t\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\t\tif (childNodes.length) {\r\n\t\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t\t} else {\r\n\t\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction applyToTag(styleElement, obj) {\r\n\t\tvar css = obj.css;\r\n\t\tvar media = obj.media;\r\n\t\tvar sourceMap = obj.sourceMap;\r\n\t\r\n\t\tif(media) {\r\n\t\t\tstyleElement.setAttribute(\"media\", media)\r\n\t\t}\r\n\t\r\n\t\tif(styleElement.styleSheet) {\r\n\t\t\tstyleElement.styleSheet.cssText = css;\r\n\t\t} else {\r\n\t\t\twhile(styleElement.firstChild) {\r\n\t\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t\t}\r\n\t\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction updateLink(linkElement, obj) {\r\n\t\tvar css = obj.css;\r\n\t\tvar media = obj.media;\r\n\t\tvar sourceMap = obj.sourceMap;\r\n\t\r\n\t\tif(sourceMap) {\r\n\t\t\t// http://stackoverflow.com/a/26603875\r\n\t\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t\t}\r\n\t\r\n\t\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\t\r\n\t\tvar oldSrc = linkElement.href;\r\n\t\r\n\t\tlinkElement.href = URL.createObjectURL(blob);\r\n\t\r\n\t\tif(oldSrc)\r\n\t\t\tURL.revokeObjectURL(oldSrc);\r\n\t}\r\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _eventemitter2 = __webpack_require__(4);\n\t\n\tvar _eventemitter22 = _interopRequireDefault(_eventemitter2);\n\t\n\tvar _jquery = __webpack_require__(1);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _ractive = __webpack_require__(7);\n\t\n\tvar _ractive2 = _interopRequireDefault(_ractive);\n\t\n\tvar _ractiveIndexHtml = __webpack_require__(14);\n\t\n\tvar _ractiveIndexHtml2 = _interopRequireDefault(_ractiveIndexHtml);\n\t\n\t__webpack_require__(15);\n\t\n\tvar ManualSignalling = (function (_EventEmitter) {\n\t    _inherits(ManualSignalling, _EventEmitter);\n\t\n\t    function ManualSignalling() {\n\t        var _this = this;\n\t\n\t        _classCallCheck(this, ManualSignalling);\n\t\n\t        _get(Object.getPrototypeOf(ManualSignalling.prototype), 'constructor', this).call(this);\n\t        var model = this._model = {\n\t            fileList: []\n\t        };\n\t        this._comp = new _ractive2['default']({\n\t            template: _ractiveIndexHtml2['default'],\n\t            data: this._model,\n\t            makeOffer: function makeOffer() {\n\t                return _this.emit('make-offer');\n\t            },\n\t            gotAnswer: function gotAnswer() {\n\t                getFileContents(model.fileList[0]).then(function (contents) {\n\t                    _this.emit('got-answer', JSON.parse(contents));\n\t                });\n\t            },\n\t            gotOffer: function gotOffer() {\n\t                getFileContents(model.fileList[0]).then(function (contents) {\n\t                    _this.emit('got-offer', JSON.parse(contents));\n\t                });\n\t            }\n\t        });\n\t    }\n\t\n\t    _createClass(ManualSignalling, [{\n\t        key: 'getName',\n\t        value: function getName() {\n\t            return \"Files\";\n\t        }\n\t    }, {\n\t        key: 'sendOffer',\n\t        value: function sendOffer(data) {\n\t            data = JSON.stringify(data, null, 2);\n\t            downloadFile(data, 'offer.txt');\n\t        }\n\t    }, {\n\t        key: 'sendAnswer',\n\t        value: function sendAnswer(data) {\n\t            data = JSON.stringify(data, null, 2);\n\t            downloadFile(data, 'answer.txt');\n\t        }\n\t    }, {\n\t        key: 'render',\n\t        value: function render($target) {\n\t            var _this2 = this;\n\t\n\t            return new Promise(function (resolve) {\n\t                _this2._comp.render($target);\n\t                resolve();\n\t            });\n\t        }\n\t    }]);\n\t\n\t    return ManualSignalling;\n\t})(_eventemitter22['default']);\n\t\n\tfunction getFileContents(file) {\n\t    var reader = new FileReader();\n\t    return new Promise(function (resolve, reject) {\n\t        if (!file) throw Error();\n\t        reader.readAsText(file);\n\t        reader.onload = resolve;\n\t        reader.onerror = reject;\n\t    }).then(function () {\n\t        return reader.result;\n\t    }, function () {\n\t        return \"\";\n\t    });\n\t}\n\t\n\tfunction downloadFile(contents, filename) {\n\t    var element = document.createElement('a');\n\t    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(contents));\n\t    element.setAttribute('download', filename);\n\t\n\t    element.style.display = 'none';\n\t    document.body.appendChild(element);\n\t\n\t    element.click();\n\t\n\t    document.body.removeChild(element);\n\t}\n\t\n\texports['default'] = ManualSignalling;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\tmodule.exports={\"v\":3,\"t\":[{\"t\":7,\"e\":\"div\",\"a\":{\"class\":\"file-signalling-root\"},\"f\":[{\"t\":7,\"e\":\"button\",\"a\":{\"class\":\"offer-btn\"},\"v\":{\"click\":{\"m\":\"makeOffer\",\"a\":{\"r\":[],\"s\":\"[]\"}}},\"f\":[\"make offer\"]},\" \",{\"t\":7,\"e\":\"input\",\"a\":{\"type\":\"file\",\"value\":[{\"t\":2,\"r\":\"fileList\"}]}},\" \",{\"t\":7,\"e\":\"button\",\"a\":{\"class\":\"ack-btn\"},\"v\":{\"click\":{\"m\":\"gotAnswer\",\"a\":{\"r\":[],\"s\":\"[]\"}}},\"f\":[\"accept answer\"]},\" \",{\"t\":7,\"e\":\"button\",\"a\":{\"class\":\"answer-btn\"},\"v\":{\"click\":{\"m\":\"gotOffer\",\"a\":{\"r\":[],\"s\":\"[]\"}}},\"f\":[\"accept offer\"]}]}]};\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(16);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(12)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/less-loader/index.js!./index.less\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/less-loader/index.js!./index.less\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(11)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \"\", \"\"]);\n\t\n\t// exports\n\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _eventemitter2 = __webpack_require__(4);\n\t\n\tvar _eventemitter22 = _interopRequireDefault(_eventemitter2);\n\t\n\tvar _jquery = __webpack_require__(1);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _htmlIndexHtml = __webpack_require__(18);\n\t\n\tvar _htmlIndexHtml2 = _interopRequireDefault(_htmlIndexHtml);\n\t\n\t__webpack_require__(19);\n\t\n\tvar Meeting = (function (_EventEmitter) {\n\t    _inherits(Meeting, _EventEmitter);\n\t\n\t    function Meeting() {\n\t        _classCallCheck(this, Meeting);\n\t\n\t        _get(Object.getPrototypeOf(Meeting.prototype), 'constructor', this).call(this);\n\t        this._$root = (0, _jquery2['default'])(_htmlIndexHtml2['default']);\n\t    }\n\t\n\t    _createClass(Meeting, [{\n\t        key: 'setLocalStream',\n\t        value: function setLocalStream(s) {\n\t            this._$root.find(\"video.local\").show()[0].srcObject = s;\n\t        }\n\t    }, {\n\t        key: 'addRemoteStream',\n\t        value: function addRemoteStream(s) {\n\t            var $vid = (0, _jquery2['default'])(\"<video autoplay>\").addClass(\"remote\");\n\t            $vid[0].srcObject = s;\n\t            this._$root.append($vid);\n\t        }\n\t    }, {\n\t        key: 'render',\n\t        value: function render($target) {\n\t            var _this = this;\n\t\n\t            return new Promise(function (resolve) {\n\t                $target.append(_this._$root);\n\t                resolve();\n\t            });\n\t        }\n\t    }]);\n\t\n\t    return Meeting;\n\t})(_eventemitter22['default']);\n\t\n\texports['default'] = Meeting;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=meeting><video autoplay class=local></video><div class=remote-videos></div></div>\";\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(20);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(12)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/less-loader/index.js!./index.less\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/less-loader/index.js!./index.less\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(11)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".meeting video{border-width:20px;border-style:solid;border-radius:20px}.meeting video.remote{border-color:red}.meeting video.local{border-color:blue;display:none}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div id=meeting-container></div><div id=error></div><div id=signalling-services-prompt>Please select a signalling service:<select id=signalling-services><option></select></div><div id=service-container></div>\";\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(23);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(12)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./../node_modules/less-loader/index.js!./index.less\", function() {\n\t\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/less-loader/index.js!./index.less\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(11)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \"#error{display:none;color:red}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** dist/index.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 91e40059ad5991426f16\n **/","import $ from 'jquery';\nimport Call from '../lib/call';\nimport ManualSignalling from '../lib/signalling/manual';\nimport FileSignalling from '../lib/signalling/files';\nimport Meeting from './meeting';\nimport template from 'html!./index.html';\nimport '!style!css!less!./index.less';\n\nvar $body = $('body').append($(template)),\n    $error = $body.find('#error'),\n    $serviceList = $body.find('#signalling-services'),\n    $servicePrompt = $body.find('#signalling-services-prompt'),\n    $serviceContainer = $body.find('#service-container'),\n    $meetingContainer = $body.find('#meeting-container');\n\nvar meeting = new Meeting();\nmeeting.render($meetingContainer);\n\nregisterSignallingService(new ManualSignalling());\nregisterSignallingService(new FileSignalling());\n\n$serviceList.change(() => {\n    var $option = $serviceList.find(\"option:selected\");\n    activateService($option.data('service'));\n});\n\nfunction registerSignallingService(service){\n    $('<option>')\n        .text(service.getName())\n        .data('service', service)\n        .appendTo($serviceList);\n\n    service.on('make-offer', () => {\n        var call = new Call(true, true);\n        $error.hide();\n        call.on('stream.add.local', meeting.setLocalStream.bind(meeting));\n        call.on('stream.add.remote', meeting.addRemoteStream.bind(meeting));\n        call.offer().then(data => {\n            service.sendOffer({\n                offer: data.offer.toJSON(),\n                candidates: data.candidates.map(c => c.toJSON())\n            });\n            service.once('got-answer', data => {\n                call.acknowledge(data.answer, data.candidates).catch(() => $error.show());\n            });\n        }).catch(() => $error.show());\n    });\n\n    service.on('got-offer', data => {\n        var call = new Call(true, true);\n        $error.hide();\n        call.on('stream.add.local', meeting.setLocalStream.bind(meeting));\n        call.on('stream.add.remote', meeting.addRemoteStream.bind(meeting));\n        call.answer(data.offer, data.candidates).then(data => {\n            service.sendAnswer({\n                answer: data.answer.toJSON(),\n                candidates: data.candidates.map(c => c.toJSON())\n            });\n        }).catch(() => $error.show());\n    });\n}\n\nfunction activateService (service) {\n    $serviceContainer.empty();\n    if (service) service.render($serviceContainer);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./app/index.js\n **/","/*!\n * jQuery JavaScript Library v2.1.4\n * http://jquery.com/\n *\n * Includes Sizzle.js\n * http://sizzlejs.com/\n *\n * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2015-04-28T16:01Z\n */\n\n(function( global, factory ) {\n\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n\t\t// For CommonJS and CommonJS-like environments where a proper `window`\n\t\t// is present, execute the factory and get jQuery.\n\t\t// For environments that do not have a `window` with a `document`\n\t\t// (such as Node.js), expose a factory as module.exports.\n\t\t// This accentuates the need for the creation of a real `window`.\n\t\t// e.g. var jQuery = require(\"jquery\")(window);\n\t\t// See ticket #14549 for more info.\n\t\tmodule.exports = global.document ?\n\t\t\tfactory( global, true ) :\n\t\t\tfunction( w ) {\n\t\t\t\tif ( !w.document ) {\n\t\t\t\t\tthrow new Error( \"jQuery requires a window with a document\" );\n\t\t\t\t}\n\t\t\t\treturn factory( w );\n\t\t\t};\n\t} else {\n\t\tfactory( global );\n\t}\n\n// Pass this if window is not defined yet\n}(typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\n\n// Support: Firefox 18+\n// Can't be in strict mode, several libs including ASP.NET trace\n// the stack via arguments.caller.callee and Firefox dies if\n// you try to trace through \"use strict\" call chains. (#13335)\n//\n\nvar arr = [];\n\nvar slice = arr.slice;\n\nvar concat = arr.concat;\n\nvar push = arr.push;\n\nvar indexOf = arr.indexOf;\n\nvar class2type = {};\n\nvar toString = class2type.toString;\n\nvar hasOwn = class2type.hasOwnProperty;\n\nvar support = {};\n\n\n\nvar\n\t// Use the correct document accordingly with window argument (sandbox)\n\tdocument = window.document,\n\n\tversion = \"2.1.4\",\n\n\t// Define a local copy of jQuery\n\tjQuery = function( selector, context ) {\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\n\t\t// Need init if jQuery is called (just allow error to be thrown if not included)\n\t\treturn new jQuery.fn.init( selector, context );\n\t},\n\n\t// Support: Android<4.1\n\t// Make sure we trim BOM and NBSP\n\trtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\n\n\t// Matches dashed string for camelizing\n\trmsPrefix = /^-ms-/,\n\trdashAlpha = /-([\\da-z])/gi,\n\n\t// Used by jQuery.camelCase as callback to replace()\n\tfcamelCase = function( all, letter ) {\n\t\treturn letter.toUpperCase();\n\t};\n\njQuery.fn = jQuery.prototype = {\n\t// The current version of jQuery being used\n\tjquery: version,\n\n\tconstructor: jQuery,\n\n\t// Start with an empty selector\n\tselector: \"\",\n\n\t// The default length of a jQuery object is 0\n\tlength: 0,\n\n\ttoArray: function() {\n\t\treturn slice.call( this );\n\t},\n\n\t// Get the Nth element in the matched element set OR\n\t// Get the whole matched element set as a clean array\n\tget: function( num ) {\n\t\treturn num != null ?\n\n\t\t\t// Return just the one element from the set\n\t\t\t( num < 0 ? this[ num + this.length ] : this[ num ] ) :\n\n\t\t\t// Return all the elements in a clean array\n\t\t\tslice.call( this );\n\t},\n\n\t// Take an array of elements and push it onto the stack\n\t// (returning the new matched element set)\n\tpushStack: function( elems ) {\n\n\t\t// Build a new jQuery matched element set\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\n\n\t\t// Add the old object onto the stack (as a reference)\n\t\tret.prevObject = this;\n\t\tret.context = this.context;\n\n\t\t// Return the newly-formed element set\n\t\treturn ret;\n\t},\n\n\t// Execute a callback for every element in the matched set.\n\t// (You can seed the arguments with an array of args, but this is\n\t// only used internally.)\n\teach: function( callback, args ) {\n\t\treturn jQuery.each( this, callback, args );\n\t},\n\n\tmap: function( callback ) {\n\t\treturn this.pushStack( jQuery.map(this, function( elem, i ) {\n\t\t\treturn callback.call( elem, i, elem );\n\t\t}));\n\t},\n\n\tslice: function() {\n\t\treturn this.pushStack( slice.apply( this, arguments ) );\n\t},\n\n\tfirst: function() {\n\t\treturn this.eq( 0 );\n\t},\n\n\tlast: function() {\n\t\treturn this.eq( -1 );\n\t},\n\n\teq: function( i ) {\n\t\tvar len = this.length,\n\t\t\tj = +i + ( i < 0 ? len : 0 );\n\t\treturn this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );\n\t},\n\n\tend: function() {\n\t\treturn this.prevObject || this.constructor(null);\n\t},\n\n\t// For internal use only.\n\t// Behaves like an Array's method, not like a jQuery method.\n\tpush: push,\n\tsort: arr.sort,\n\tsplice: arr.splice\n};\n\njQuery.extend = jQuery.fn.extend = function() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\n\t\t// Skip the boolean and the target\n\t\ttarget = arguments[ i ] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !jQuery.isFunction(target) ) {\n\t\ttarget = {};\n\t}\n\n\t// Extend jQuery itself if only one argument is passed\n\tif ( i === length ) {\n\t\ttarget = this;\n\t\ti--;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ( (options = arguments[ i ]) != null ) {\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tsrc = target[ name ];\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {\n\t\t\t\t\tif ( copyIsArray ) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && jQuery.isArray(src) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && jQuery.isPlainObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\njQuery.extend({\n\t// Unique for each copy of jQuery on the page\n\texpando: \"jQuery\" + ( version + Math.random() ).replace( /\\D/g, \"\" ),\n\n\t// Assume jQuery is ready without the ready module\n\tisReady: true,\n\n\terror: function( msg ) {\n\t\tthrow new Error( msg );\n\t},\n\n\tnoop: function() {},\n\n\tisFunction: function( obj ) {\n\t\treturn jQuery.type(obj) === \"function\";\n\t},\n\n\tisArray: Array.isArray,\n\n\tisWindow: function( obj ) {\n\t\treturn obj != null && obj === obj.window;\n\t},\n\n\tisNumeric: function( obj ) {\n\t\t// parseFloat NaNs numeric-cast false positives (null|true|false|\"\")\n\t\t// ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n\t\t// subtraction forces infinities to NaN\n\t\t// adding 1 corrects loss of precision from parseFloat (#15100)\n\t\treturn !jQuery.isArray( obj ) && (obj - parseFloat( obj ) + 1) >= 0;\n\t},\n\n\tisPlainObject: function( obj ) {\n\t\t// Not plain objects:\n\t\t// - Any object or value whose internal [[Class]] property is not \"[object Object]\"\n\t\t// - DOM nodes\n\t\t// - window\n\t\tif ( jQuery.type( obj ) !== \"object\" || obj.nodeType || jQuery.isWindow( obj ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( obj.constructor &&\n\t\t\t\t!hasOwn.call( obj.constructor.prototype, \"isPrototypeOf\" ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If the function hasn't returned already, we're confident that\n\t\t// |obj| is a plain object, created by {} or constructed with new Object\n\t\treturn true;\n\t},\n\n\tisEmptyObject: function( obj ) {\n\t\tvar name;\n\t\tfor ( name in obj ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\ttype: function( obj ) {\n\t\tif ( obj == null ) {\n\t\t\treturn obj + \"\";\n\t\t}\n\t\t// Support: Android<4.0, iOS<6 (functionish RegExp)\n\t\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\t\tclass2type[ toString.call(obj) ] || \"object\" :\n\t\t\ttypeof obj;\n\t},\n\n\t// Evaluates a script in a global context\n\tglobalEval: function( code ) {\n\t\tvar script,\n\t\t\tindirect = eval;\n\n\t\tcode = jQuery.trim( code );\n\n\t\tif ( code ) {\n\t\t\t// If the code includes a valid, prologue position\n\t\t\t// strict mode pragma, execute code by injecting a\n\t\t\t// script tag into the document.\n\t\t\tif ( code.indexOf(\"use strict\") === 1 ) {\n\t\t\t\tscript = document.createElement(\"script\");\n\t\t\t\tscript.text = code;\n\t\t\t\tdocument.head.appendChild( script ).parentNode.removeChild( script );\n\t\t\t} else {\n\t\t\t// Otherwise, avoid the DOM node creation, insertion\n\t\t\t// and removal by using an indirect global eval\n\t\t\t\tindirect( code );\n\t\t\t}\n\t\t}\n\t},\n\n\t// Convert dashed to camelCase; used by the css and data modules\n\t// Support: IE9-11+\n\t// Microsoft forgot to hump their vendor prefix (#9572)\n\tcamelCase: function( string ) {\n\t\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n\t},\n\n\tnodeName: function( elem, name ) {\n\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n\t},\n\n\t// args is for internal usage only\n\teach: function( obj, callback, args ) {\n\t\tvar value,\n\t\t\ti = 0,\n\t\t\tlength = obj.length,\n\t\t\tisArray = isArraylike( obj );\n\n\t\tif ( args ) {\n\t\t\tif ( isArray ) {\n\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\tvalue = callback.apply( obj[ i ], args );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( i in obj ) {\n\t\t\t\t\tvalue = callback.apply( obj[ i ], args );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// A special, fast, case for the most common use of each\n\t\t} else {\n\t\t\tif ( isArray ) {\n\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\tvalue = callback.call( obj[ i ], i, obj[ i ] );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( i in obj ) {\n\t\t\t\t\tvalue = callback.call( obj[ i ], i, obj[ i ] );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\t// Support: Android<4.1\n\ttrim: function( text ) {\n\t\treturn text == null ?\n\t\t\t\"\" :\n\t\t\t( text + \"\" ).replace( rtrim, \"\" );\n\t},\n\n\t// results is for internal usage only\n\tmakeArray: function( arr, results ) {\n\t\tvar ret = results || [];\n\n\t\tif ( arr != null ) {\n\t\t\tif ( isArraylike( Object(arr) ) ) {\n\t\t\t\tjQuery.merge( ret,\n\t\t\t\t\ttypeof arr === \"string\" ?\n\t\t\t\t\t[ arr ] : arr\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tpush.call( ret, arr );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tinArray: function( elem, arr, i ) {\n\t\treturn arr == null ? -1 : indexOf.call( arr, elem, i );\n\t},\n\n\tmerge: function( first, second ) {\n\t\tvar len = +second.length,\n\t\t\tj = 0,\n\t\t\ti = first.length;\n\n\t\tfor ( ; j < len; j++ ) {\n\t\t\tfirst[ i++ ] = second[ j ];\n\t\t}\n\n\t\tfirst.length = i;\n\n\t\treturn first;\n\t},\n\n\tgrep: function( elems, callback, invert ) {\n\t\tvar callbackInverse,\n\t\t\tmatches = [],\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tcallbackExpect = !invert;\n\n\t\t// Go through the array, only saving the items\n\t\t// that pass the validator function\n\t\tfor ( ; i < length; i++ ) {\n\t\t\tcallbackInverse = !callback( elems[ i ], i );\n\t\t\tif ( callbackInverse !== callbackExpect ) {\n\t\t\t\tmatches.push( elems[ i ] );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\t// arg is for internal usage only\n\tmap: function( elems, callback, arg ) {\n\t\tvar value,\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tisArray = isArraylike( elems ),\n\t\t\tret = [];\n\n\t\t// Go through the array, translating each of the items to their new values\n\t\tif ( isArray ) {\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Go through every key on the object,\n\t\t} else {\n\t\t\tfor ( i in elems ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Flatten any nested arrays\n\t\treturn concat.apply( [], ret );\n\t},\n\n\t// A global GUID counter for objects\n\tguid: 1,\n\n\t// Bind a function to a context, optionally partially applying any\n\t// arguments.\n\tproxy: function( fn, context ) {\n\t\tvar tmp, args, proxy;\n\n\t\tif ( typeof context === \"string\" ) {\n\t\t\ttmp = fn[ context ];\n\t\t\tcontext = fn;\n\t\t\tfn = tmp;\n\t\t}\n\n\t\t// Quick check to determine if target is callable, in the spec\n\t\t// this throws a TypeError, but we will just return undefined.\n\t\tif ( !jQuery.isFunction( fn ) ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Simulated bind\n\t\targs = slice.call( arguments, 2 );\n\t\tproxy = function() {\n\t\t\treturn fn.apply( context || this, args.concat( slice.call( arguments ) ) );\n\t\t};\n\n\t\t// Set the guid of unique handler to the same of original handler, so it can be removed\n\t\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n\n\t\treturn proxy;\n\t},\n\n\tnow: Date.now,\n\n\t// jQuery.support is not used in Core but other projects attach their\n\t// properties to it so it needs to exist.\n\tsupport: support\n});\n\n// Populate the class2type map\njQuery.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function(i, name) {\n\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n});\n\nfunction isArraylike( obj ) {\n\n\t// Support: iOS 8.2 (not reproducible in simulator)\n\t// `in` check used to prevent JIT error (gh-2145)\n\t// hasOwn isn't used here due to false negatives\n\t// regarding Nodelist length in IE\n\tvar length = \"length\" in obj && obj.length,\n\t\ttype = jQuery.type( obj );\n\n\tif ( type === \"function\" || jQuery.isWindow( obj ) ) {\n\t\treturn false;\n\t}\n\n\tif ( obj.nodeType === 1 && length ) {\n\t\treturn true;\n\t}\n\n\treturn type === \"array\" || length === 0 ||\n\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\n}\nvar Sizzle =\n/*!\n * Sizzle CSS Selector Engine v2.2.0-pre\n * http://sizzlejs.com/\n *\n * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2014-12-16\n */\n(function( window ) {\n\nvar i,\n\tsupport,\n\tExpr,\n\tgetText,\n\tisXML,\n\ttokenize,\n\tcompile,\n\tselect,\n\toutermostContext,\n\tsortInput,\n\thasDuplicate,\n\n\t// Local document vars\n\tsetDocument,\n\tdocument,\n\tdocElem,\n\tdocumentIsHTML,\n\trbuggyQSA,\n\trbuggyMatches,\n\tmatches,\n\tcontains,\n\n\t// Instance-specific data\n\texpando = \"sizzle\" + 1 * new Date(),\n\tpreferredDoc = window.document,\n\tdirruns = 0,\n\tdone = 0,\n\tclassCache = createCache(),\n\ttokenCache = createCache(),\n\tcompilerCache = createCache(),\n\tsortOrder = function( a, b ) {\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn 0;\n\t},\n\n\t// General-purpose constants\n\tMAX_NEGATIVE = 1 << 31,\n\n\t// Instance methods\n\thasOwn = ({}).hasOwnProperty,\n\tarr = [],\n\tpop = arr.pop,\n\tpush_native = arr.push,\n\tpush = arr.push,\n\tslice = arr.slice,\n\t// Use a stripped-down indexOf as it's faster than native\n\t// http://jsperf.com/thor-indexof-vs-for/5\n\tindexOf = function( list, elem ) {\n\t\tvar i = 0,\n\t\t\tlen = list.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tif ( list[i] === elem ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",\n\n\t// Regular expressions\n\n\t// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n\t// http://www.w3.org/TR/css3-syntax/#characters\n\tcharacterEncoding = \"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",\n\n\t// Loosely modeled on CSS identifier characters\n\t// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors\n\t// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier\n\tidentifier = characterEncoding.replace( \"w\", \"w#\" ),\n\n\t// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + characterEncoding + \")(?:\" + whitespace +\n\t\t// Operator (capture 2)\n\t\t\"*([*^$|!~]?=)\" + whitespace +\n\t\t// \"Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]\"\n\t\t\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" + whitespace +\n\t\t\"*\\\\]\",\n\n\tpseudos = \":(\" + characterEncoding + \")(?:\\\\((\" +\n\t\t// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\n\t\t// 1. quoted (capture 3; capture 4 or capture 5)\n\t\t\"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +\n\t\t// 2. simple (capture 6)\n\t\t\"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +\n\t\t// 3. anything else (capture 2)\n\t\t\".*\" +\n\t\t\")\\\\)|)\",\n\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\trwhitespace = new RegExp( whitespace + \"+\", \"g\" ),\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),\n\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace + \"*\" ),\n\n\trattributeQuotes = new RegExp( \"=\" + whitespace + \"*([^\\\\]'\\\"]*?)\" + whitespace + \"*\\\\]\", \"g\" ),\n\n\trpseudo = new RegExp( pseudos ),\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\tmatchExpr = {\n\t\t\"ID\": new RegExp( \"^#(\" + characterEncoding + \")\" ),\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + characterEncoding + \")\" ),\n\t\t\"TAG\": new RegExp( \"^(\" + characterEncoding.replace( \"w\", \"w*\" ) + \")\" ),\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace +\n\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +\n\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n\t\t// For use in libraries implementing .is()\n\t\t// We use this for POS matching in `select`\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" +\n\t\t\twhitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t},\n\n\trinputs = /^(?:input|select|textarea|button)$/i,\n\trheader = /^h\\d$/i,\n\n\trnative = /^[^{]+\\{\\s*\\[native \\w/,\n\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\trsibling = /[+~]/,\n\trescape = /'|\\\\/g,\n\n\t// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\trunescape = new RegExp( \"\\\\\\\\([\\\\da-f]{1,6}\" + whitespace + \"?|(\" + whitespace + \")|.)\", \"ig\" ),\n\tfunescape = function( _, escaped, escapedWhitespace ) {\n\t\tvar high = \"0x\" + escaped - 0x10000;\n\t\t// NaN means non-codepoint\n\t\t// Support: Firefox<24\n\t\t// Workaround erroneous numeric interpretation of +\"0x\"\n\t\treturn high !== high || escapedWhitespace ?\n\t\t\tescaped :\n\t\t\thigh < 0 ?\n\t\t\t\t// BMP codepoint\n\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\t\t// Supplemental Plane codepoint (surrogate pair)\n\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t},\n\n\t// Used for iframes\n\t// See setDocument()\n\t// Removing the function wrapper causes a \"Permission Denied\"\n\t// error in IE\n\tunloadHandler = function() {\n\t\tsetDocument();\n\t};\n\n// Optimize for push.apply( _, NodeList )\ntry {\n\tpush.apply(\n\t\t(arr = slice.call( preferredDoc.childNodes )),\n\t\tpreferredDoc.childNodes\n\t);\n\t// Support: Android<4.0\n\t// Detect silently failing push.apply\n\tarr[ preferredDoc.childNodes.length ].nodeType;\n} catch ( e ) {\n\tpush = { apply: arr.length ?\n\n\t\t// Leverage slice if possible\n\t\tfunction( target, els ) {\n\t\t\tpush_native.apply( target, slice.call(els) );\n\t\t} :\n\n\t\t// Support: IE<9\n\t\t// Otherwise append directly\n\t\tfunction( target, els ) {\n\t\t\tvar j = target.length,\n\t\t\t\ti = 0;\n\t\t\t// Can't trust NodeList.length\n\t\t\twhile ( (target[j++] = els[i++]) ) {}\n\t\t\ttarget.length = j - 1;\n\t\t}\n\t};\n}\n\nfunction Sizzle( selector, context, results, seed ) {\n\tvar match, elem, m, nodeType,\n\t\t// QSA vars\n\t\ti, groups, old, nid, newContext, newSelector;\n\n\tif ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\n\tcontext = context || document;\n\tresults = results || [];\n\tnodeType = context.nodeType;\n\n\tif ( typeof selector !== \"string\" || !selector ||\n\t\tnodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {\n\n\t\treturn results;\n\t}\n\n\tif ( !seed && documentIsHTML ) {\n\n\t\t// Try to shortcut find operations when possible (e.g., not under DocumentFragment)\n\t\tif ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {\n\t\t\t// Speed-up: Sizzle(\"#ID\")\n\t\t\tif ( (m = match[1]) ) {\n\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\telem = context.getElementById( m );\n\t\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t\t// nodes that are no longer in the document (jQuery #6963)\n\t\t\t\t\tif ( elem && elem.parentNode ) {\n\t\t\t\t\t\t// Handle the case where IE, Opera, and Webkit return items\n\t\t\t\t\t\t// by name instead of ID\n\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Context is not a document\n\t\t\t\t\tif ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&\n\t\t\t\t\t\tcontains( context, elem ) && elem.id === m ) {\n\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Speed-up: Sizzle(\"TAG\")\n\t\t\t} else if ( match[2] ) {\n\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n\t\t\t\treturn results;\n\n\t\t\t// Speed-up: Sizzle(\".CLASS\")\n\t\t\t} else if ( (m = match[3]) && support.getElementsByClassName ) {\n\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n\t\t\t\treturn results;\n\t\t\t}\n\t\t}\n\n\t\t// QSA path\n\t\tif ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {\n\t\t\tnid = old = expando;\n\t\t\tnewContext = context;\n\t\t\tnewSelector = nodeType !== 1 && selector;\n\n\t\t\t// qSA works strangely on Element-rooted queries\n\t\t\t// We can work around this by specifying an extra ID on the root\n\t\t\t// and working up from there (Thanks to Andrew Dupont for the technique)\n\t\t\t// IE 8 doesn't work on object elements\n\t\t\tif ( nodeType === 1 && context.nodeName.toLowerCase() !== \"object\" ) {\n\t\t\t\tgroups = tokenize( selector );\n\n\t\t\t\tif ( (old = context.getAttribute(\"id\")) ) {\n\t\t\t\t\tnid = old.replace( rescape, \"\\\\$&\" );\n\t\t\t\t} else {\n\t\t\t\t\tcontext.setAttribute( \"id\", nid );\n\t\t\t\t}\n\t\t\t\tnid = \"[id='\" + nid + \"'] \";\n\n\t\t\t\ti = groups.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tgroups[i] = nid + toSelector( groups[i] );\n\t\t\t\t}\n\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) || context;\n\t\t\t\tnewSelector = groups.join(\",\");\n\t\t\t}\n\n\t\t\tif ( newSelector ) {\n\t\t\t\ttry {\n\t\t\t\t\tpush.apply( results,\n\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n\t\t\t\t\t);\n\t\t\t\t\treturn results;\n\t\t\t\t} catch(qsaError) {\n\t\t\t\t} finally {\n\t\t\t\t\tif ( !old ) {\n\t\t\t\t\t\tcontext.removeAttribute(\"id\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// All others\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n}\n\n/**\n * Create key-value caches of limited size\n * @returns {Function(string, Object)} Returns the Object data after storing it on itself with\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n *\tdeleting the oldest entry\n */\nfunction createCache() {\n\tvar keys = [];\n\n\tfunction cache( key, value ) {\n\t\t// Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\n\t\t\t// Only keep the most recent entries\n\t\t\tdelete cache[ keys.shift() ];\n\t\t}\n\t\treturn (cache[ key + \" \" ] = value);\n\t}\n\treturn cache;\n}\n\n/**\n * Mark a function for special use by Sizzle\n * @param {Function} fn The function to mark\n */\nfunction markFunction( fn ) {\n\tfn[ expando ] = true;\n\treturn fn;\n}\n\n/**\n * Support testing using an element\n * @param {Function} fn Passed the created div and expects a boolean result\n */\nfunction assert( fn ) {\n\tvar div = document.createElement(\"div\");\n\n\ttry {\n\t\treturn !!fn( div );\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\t// Remove from its parent by default\n\t\tif ( div.parentNode ) {\n\t\t\tdiv.parentNode.removeChild( div );\n\t\t}\n\t\t// release memory in IE\n\t\tdiv = null;\n\t}\n}\n\n/**\n * Adds the same handler for all of the specified attrs\n * @param {String} attrs Pipe-separated list of attributes\n * @param {Function} handler The method that will be applied\n */\nfunction addHandle( attrs, handler ) {\n\tvar arr = attrs.split(\"|\"),\n\t\ti = attrs.length;\n\n\twhile ( i-- ) {\n\t\tExpr.attrHandle[ arr[i] ] = handler;\n\t}\n}\n\n/**\n * Checks document order of two siblings\n * @param {Element} a\n * @param {Element} b\n * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n */\nfunction siblingCheck( a, b ) {\n\tvar cur = b && a,\n\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&\n\t\t\t( ~b.sourceIndex || MAX_NEGATIVE ) -\n\t\t\t( ~a.sourceIndex || MAX_NEGATIVE );\n\n\t// Use IE sourceIndex if available on both nodes\n\tif ( diff ) {\n\t\treturn diff;\n\t}\n\n\t// Check if b follows a\n\tif ( cur ) {\n\t\twhile ( (cur = cur.nextSibling) ) {\n\t\t\tif ( cur === b ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn a ? 1 : -1;\n}\n\n/**\n * Returns a function to use in pseudos for input types\n * @param {String} type\n */\nfunction createInputPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn name === \"input\" && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for buttons\n * @param {String} type\n */\nfunction createButtonPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for positionals\n * @param {Function} fn\n */\nfunction createPositionalPseudo( fn ) {\n\treturn markFunction(function( argument ) {\n\t\targument = +argument;\n\t\treturn markFunction(function( seed, matches ) {\n\t\t\tvar j,\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\ti = matchIndexes.length;\n\n\t\t\t// Match elements found at the specified indexes\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {\n\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Checks a node for validity as a Sizzle context\n * @param {Element|Object=} context\n * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n */\nfunction testContext( context ) {\n\treturn context && typeof context.getElementsByTagName !== \"undefined\" && context;\n}\n\n// Expose support vars for convenience\nsupport = Sizzle.support = {};\n\n/**\n * Detects XML nodes\n * @param {Element|Object} elem An element or a document\n * @returns {Boolean} True iff elem is a non-HTML XML node\n */\nisXML = Sizzle.isXML = function( elem ) {\n\t// documentElement is verified for cases where it doesn't yet exist\n\t// (such as loading iframes in IE - #4833)\n\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;\n\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;\n};\n\n/**\n * Sets document-related variables once based on the current document\n * @param {Element|Object} [doc] An element or document object to use to set the document\n * @returns {Object} Returns the current document\n */\nsetDocument = Sizzle.setDocument = function( node ) {\n\tvar hasCompare, parent,\n\t\tdoc = node ? node.ownerDocument || node : preferredDoc;\n\n\t// If no document and documentElement is available, return\n\tif ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\treturn document;\n\t}\n\n\t// Set our document\n\tdocument = doc;\n\tdocElem = doc.documentElement;\n\tparent = doc.defaultView;\n\n\t// Support: IE>8\n\t// If iframe document is assigned to \"document\" variable and if iframe has been reloaded,\n\t// IE will throw \"permission denied\" error when accessing \"document\" variable, see jQuery #13936\n\t// IE6-8 do not support the defaultView property so parent will be undefined\n\tif ( parent && parent !== parent.top ) {\n\t\t// IE11 does not have attachEvent, so all must suffer\n\t\tif ( parent.addEventListener ) {\n\t\t\tparent.addEventListener( \"unload\", unloadHandler, false );\n\t\t} else if ( parent.attachEvent ) {\n\t\t\tparent.attachEvent( \"onunload\", unloadHandler );\n\t\t}\n\t}\n\n\t/* Support tests\n\t---------------------------------------------------------------------- */\n\tdocumentIsHTML = !isXML( doc );\n\n\t/* Attributes\n\t---------------------------------------------------------------------- */\n\n\t// Support: IE<8\n\t// Verify that getAttribute really returns attributes and not properties\n\t// (excepting IE8 booleans)\n\tsupport.attributes = assert(function( div ) {\n\t\tdiv.className = \"i\";\n\t\treturn !div.getAttribute(\"className\");\n\t});\n\n\t/* getElement(s)By*\n\t---------------------------------------------------------------------- */\n\n\t// Check if getElementsByTagName(\"*\") returns only elements\n\tsupport.getElementsByTagName = assert(function( div ) {\n\t\tdiv.appendChild( doc.createComment(\"\") );\n\t\treturn !div.getElementsByTagName(\"*\").length;\n\t});\n\n\t// Support: IE<9\n\tsupport.getElementsByClassName = rnative.test( doc.getElementsByClassName );\n\n\t// Support: IE<10\n\t// Check if getElementById returns elements by name\n\t// The broken getElementById methods don't pick up programatically-set names,\n\t// so use a roundabout getElementsByName test\n\tsupport.getById = assert(function( div ) {\n\t\tdocElem.appendChild( div ).id = expando;\n\t\treturn !doc.getElementsByName || !doc.getElementsByName( expando ).length;\n\t});\n\n\t// ID find and filter\n\tif ( support.getById ) {\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar m = context.getElementById( id );\n\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t// nodes that are no longer in the document #6963\n\t\t\t\treturn m && m.parentNode ? [ m ] : [];\n\t\t\t}\n\t\t};\n\t\tExpr.filter[\"ID\"] = function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.getAttribute(\"id\") === attrId;\n\t\t\t};\n\t\t};\n\t} else {\n\t\t// Support: IE6/7\n\t\t// getElementById is not reliable as a find shortcut\n\t\tdelete Expr.find[\"ID\"];\n\n\t\tExpr.filter[\"ID\"] =  function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" && elem.getAttributeNode(\"id\");\n\t\t\t\treturn node && node.value === attrId;\n\t\t\t};\n\t\t};\n\t}\n\n\t// Tag\n\tExpr.find[\"TAG\"] = support.getElementsByTagName ?\n\t\tfunction( tag, context ) {\n\t\t\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\t\t\treturn context.getElementsByTagName( tag );\n\n\t\t\t// DocumentFragment nodes don't have gEBTN\n\t\t\t} else if ( support.qsa ) {\n\t\t\t\treturn context.querySelectorAll( tag );\n\t\t\t}\n\t\t} :\n\n\t\tfunction( tag, context ) {\n\t\t\tvar elem,\n\t\t\t\ttmp = [],\n\t\t\t\ti = 0,\n\t\t\t\t// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too\n\t\t\t\tresults = context.getElementsByTagName( tag );\n\n\t\t\t// Filter out possible comments\n\t\t\tif ( tag === \"*\" ) {\n\t\t\t\twhile ( (elem = results[i++]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\ttmp.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn tmp;\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\t// Class\n\tExpr.find[\"CLASS\"] = support.getElementsByClassName && function( className, context ) {\n\t\tif ( documentIsHTML ) {\n\t\t\treturn context.getElementsByClassName( className );\n\t\t}\n\t};\n\n\t/* QSA/matchesSelector\n\t---------------------------------------------------------------------- */\n\n\t// QSA and matchesSelector support\n\n\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\trbuggyMatches = [];\n\n\t// qSa(:focus) reports false when true (Chrome 21)\n\t// We allow this because of a bug in IE8/9 that throws an error\n\t// whenever `document.activeElement` is accessed on an iframe\n\t// So, we allow :focus to pass through QSA all the time to avoid the IE error\n\t// See http://bugs.jquery.com/ticket/13378\n\trbuggyQSA = [];\n\n\tif ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {\n\t\t// Build QSA regex\n\t\t// Regex strategy adopted from Diego Perini\n\t\tassert(function( div ) {\n\t\t\t// Select is set to empty string on purpose\n\t\t\t// This is to test IE's treatment of not explicitly\n\t\t\t// setting a boolean content attribute,\n\t\t\t// since its presence should be enough\n\t\t\t// http://bugs.jquery.com/ticket/12359\n\t\t\tdocElem.appendChild( div ).innerHTML = \"<a id='\" + expando + \"'></a>\" +\n\t\t\t\t\"<select id='\" + expando + \"-\\f]' msallowcapture=''>\" +\n\t\t\t\t\"<option selected=''></option></select>\";\n\n\t\t\t// Support: IE8, Opera 11-12.16\n\t\t\t// Nothing should be selected when empty strings follow ^= or $= or *=\n\t\t\t// The test attribute must be unknown in Opera but \"safe\" for WinRT\n\t\t\t// http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section\n\t\t\tif ( div.querySelectorAll(\"[msallowcapture^='']\").length ) {\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t}\n\n\t\t\t// Support: IE8\n\t\t\t// Boolean attributes and \"value\" are not treated correctly\n\t\t\tif ( !div.querySelectorAll(\"[selected]\").length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n\t\t\t}\n\n\t\t\t// Support: Chrome<29, Android<4.2+, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.7+\n\t\t\tif ( !div.querySelectorAll( \"[id~=\" + expando + \"-]\" ).length ) {\n\t\t\t\trbuggyQSA.push(\"~=\");\n\t\t\t}\n\n\t\t\t// Webkit/Opera - :checked should return selected option elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !div.querySelectorAll(\":checked\").length ) {\n\t\t\t\trbuggyQSA.push(\":checked\");\n\t\t\t}\n\n\t\t\t// Support: Safari 8+, iOS 8+\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=136851\n\t\t\t// In-page `selector#id sibing-combinator selector` fails\n\t\t\tif ( !div.querySelectorAll( \"a#\" + expando + \"+*\" ).length ) {\n\t\t\t\trbuggyQSA.push(\".#.+[+~]\");\n\t\t\t}\n\t\t});\n\n\t\tassert(function( div ) {\n\t\t\t// Support: Windows 8 Native Apps\n\t\t\t// The type and name attributes are restricted during .innerHTML assignment\n\t\t\tvar input = doc.createElement(\"input\");\n\t\t\tinput.setAttribute( \"type\", \"hidden\" );\n\t\t\tdiv.appendChild( input ).setAttribute( \"name\", \"D\" );\n\n\t\t\t// Support: IE8\n\t\t\t// Enforce case-sensitivity of name attribute\n\t\t\tif ( div.querySelectorAll(\"[name=d]\").length ) {\n\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );\n\t\t\t}\n\n\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !div.querySelectorAll(\":enabled\").length ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Opera 10-11 does not throw on post-comma invalid pseudos\n\t\t\tdiv.querySelectorAll(\"*,:x\");\n\t\t\trbuggyQSA.push(\",.*:\");\n\t\t});\n\t}\n\n\tif ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||\n\t\tdocElem.webkitMatchesSelector ||\n\t\tdocElem.mozMatchesSelector ||\n\t\tdocElem.oMatchesSelector ||\n\t\tdocElem.msMatchesSelector) )) ) {\n\n\t\tassert(function( div ) {\n\t\t\t// Check to see if it's possible to do matchesSelector\n\t\t\t// on a disconnected node (IE 9)\n\t\t\tsupport.disconnectedMatch = matches.call( div, \"div\" );\n\n\t\t\t// This should fail with an exception\n\t\t\t// Gecko does not error, returns false instead\n\t\t\tmatches.call( div, \"[s!='']:x\" );\n\t\t\trbuggyMatches.push( \"!=\", pseudos );\n\t\t});\n\t}\n\n\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join(\"|\") );\n\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join(\"|\") );\n\n\t/* Contains\n\t---------------------------------------------------------------------- */\n\thasCompare = rnative.test( docElem.compareDocumentPosition );\n\n\t// Element contains another\n\t// Purposefully does not implement inclusive descendent\n\t// As in, an element does not contain itself\n\tcontains = hasCompare || rnative.test( docElem.contains ) ?\n\t\tfunction( a, b ) {\n\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\n\t\t\t\tbup = b && b.parentNode;\n\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\t\t\t\tadown.contains ?\n\t\t\t\t\tadown.contains( bup ) :\n\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t\t\t));\n\t\t} :\n\t\tfunction( a, b ) {\n\t\t\tif ( b ) {\n\t\t\t\twhile ( (b = b.parentNode) ) {\n\t\t\t\t\tif ( b === a ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t/* Sorting\n\t---------------------------------------------------------------------- */\n\n\t// Document order sorting\n\tsortOrder = hasCompare ?\n\tfunction( a, b ) {\n\n\t\t// Flag for duplicate removal\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Sort on method existence if only one input has compareDocumentPosition\n\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n\t\tif ( compare ) {\n\t\t\treturn compare;\n\t\t}\n\n\t\t// Calculate position if both inputs belong to the same document\n\t\tcompare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?\n\t\t\ta.compareDocumentPosition( b ) :\n\n\t\t\t// Otherwise we know they are disconnected\n\t\t\t1;\n\n\t\t// Disconnected nodes\n\t\tif ( compare & 1 ||\n\t\t\t(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {\n\n\t\t\t// Choose the first element that is related to our preferred document\n\t\t\tif ( a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif ( b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\t// Maintain original order\n\t\t\treturn sortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\t\t}\n\n\t\treturn compare & 4 ? -1 : 1;\n\t} :\n\tfunction( a, b ) {\n\t\t// Exit early if the nodes are identical\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\taup = a.parentNode,\n\t\t\tbup = b.parentNode,\n\t\t\tap = [ a ],\n\t\t\tbp = [ b ];\n\n\t\t// Parentless nodes are either documents or disconnected\n\t\tif ( !aup || !bup ) {\n\t\t\treturn a === doc ? -1 :\n\t\t\t\tb === doc ? 1 :\n\t\t\t\taup ? -1 :\n\t\t\t\tbup ? 1 :\n\t\t\t\tsortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\n\t\t// If the nodes are siblings, we can do a quick check\n\t\t} else if ( aup === bup ) {\n\t\t\treturn siblingCheck( a, b );\n\t\t}\n\n\t\t// Otherwise we need full lists of their ancestors for comparison\n\t\tcur = a;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tap.unshift( cur );\n\t\t}\n\t\tcur = b;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tbp.unshift( cur );\n\t\t}\n\n\t\t// Walk down the tree looking for a discrepancy\n\t\twhile ( ap[i] === bp[i] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i ?\n\t\t\t// Do a sibling check if the nodes have a common ancestor\n\t\t\tsiblingCheck( ap[i], bp[i] ) :\n\n\t\t\t// Otherwise nodes in our document sort first\n\t\t\tap[i] === preferredDoc ? -1 :\n\t\t\tbp[i] === preferredDoc ? 1 :\n\t\t\t0;\n\t};\n\n\treturn doc;\n};\n\nSizzle.matches = function( expr, elements ) {\n\treturn Sizzle( expr, null, null, elements );\n};\n\nSizzle.matchesSelector = function( elem, expr ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\t// Make sure that attribute selectors are quoted\n\texpr = expr.replace( rattributeQuotes, \"='$1']\" );\n\n\tif ( support.matchesSelector && documentIsHTML &&\n\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&\n\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {\n\n\t\ttry {\n\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\n\t\t\tif ( ret || support.disconnectedMatch ||\n\t\t\t\t\t// As well, disconnected nodes are said to be in a document\n\t\t\t\t\t// fragment in IE 9\n\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t} catch (e) {}\n\t}\n\n\treturn Sizzle( expr, document, null, [ elem ] ).length > 0;\n};\n\nSizzle.contains = function( context, elem ) {\n\t// Set document vars if needed\n\tif ( ( context.ownerDocument || context ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\treturn contains( context, elem );\n};\n\nSizzle.attr = function( elem, name ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n\t\t// Don't get fooled by Object.prototype properties (jQuery #13807)\n\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n\t\t\tfn( elem, name, !documentIsHTML ) :\n\t\t\tundefined;\n\n\treturn val !== undefined ?\n\t\tval :\n\t\tsupport.attributes || !documentIsHTML ?\n\t\t\telem.getAttribute( name ) :\n\t\t\t(val = elem.getAttributeNode(name)) && val.specified ?\n\t\t\t\tval.value :\n\t\t\t\tnull;\n};\n\nSizzle.error = function( msg ) {\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n};\n\n/**\n * Document sorting and removing duplicates\n * @param {ArrayLike} results\n */\nSizzle.uniqueSort = function( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\tj = 0,\n\t\ti = 0;\n\n\t// Unless we *know* we can detect duplicates, assume their presence\n\thasDuplicate = !support.detectDuplicates;\n\tsortInput = !support.sortStable && results.slice( 0 );\n\tresults.sort( sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\twhile ( (elem = results[i++]) ) {\n\t\t\tif ( elem === results[ i ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\t// Clear input after sorting to release objects\n\t// See https://github.com/jquery/sizzle/pull/225\n\tsortInput = null;\n\n\treturn results;\n};\n\n/**\n * Utility function for retrieving the text value of an array of DOM nodes\n * @param {Array|Element} elem\n */\ngetText = Sizzle.getText = function( elem ) {\n\tvar node,\n\t\tret = \"\",\n\t\ti = 0,\n\t\tnodeType = elem.nodeType;\n\n\tif ( !nodeType ) {\n\t\t// If no nodeType, this is expected to be an array\n\t\twhile ( (node = elem[i++]) ) {\n\t\t\t// Do not traverse comment nodes\n\t\t\tret += getText( node );\n\t\t}\n\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n\t\t// Use textContent for elements\n\t\t// innerText usage removed for consistency of new lines (jQuery #11153)\n\t\tif ( typeof elem.textContent === \"string\" ) {\n\t\t\treturn elem.textContent;\n\t\t} else {\n\t\t\t// Traverse its children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tret += getText( elem );\n\t\t\t}\n\t\t}\n\t} else if ( nodeType === 3 || nodeType === 4 ) {\n\t\treturn elem.nodeValue;\n\t}\n\t// Do not include comment or processing instruction nodes\n\n\treturn ret;\n};\n\nExpr = Sizzle.selectors = {\n\n\t// Can be adjusted by the user\n\tcacheLength: 50,\n\n\tcreatePseudo: markFunction,\n\n\tmatch: matchExpr,\n\n\tattrHandle: {},\n\n\tfind: {},\n\n\trelative: {\n\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\" \": { dir: \"parentNode\" },\n\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\"~\": { dir: \"previousSibling\" }\n\t},\n\n\tpreFilter: {\n\t\t\"ATTR\": function( match ) {\n\t\t\tmatch[1] = match[1].replace( runescape, funescape );\n\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\n\t\t\tmatch[3] = ( match[3] || match[4] || match[5] || \"\" ).replace( runescape, funescape );\n\n\t\t\tif ( match[2] === \"~=\" ) {\n\t\t\t\tmatch[3] = \" \" + match[3] + \" \";\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 4 );\n\t\t},\n\n\t\t\"CHILD\": function( match ) {\n\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t1 type (only|nth|...)\n\t\t\t\t2 what (child|of-type)\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t5 sign of xn-component\n\t\t\t\t6 x of xn-component\n\t\t\t\t7 sign of y-component\n\t\t\t\t8 y of y-component\n\t\t\t*/\n\t\t\tmatch[1] = match[1].toLowerCase();\n\n\t\t\tif ( match[1].slice( 0, 3 ) === \"nth\" ) {\n\t\t\t\t// nth-* requires argument\n\t\t\t\tif ( !match[3] ) {\n\t\t\t\t\tSizzle.error( match[0] );\n\t\t\t\t}\n\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\n\t\t\t\t// remember that false/true cast respectively to 0/1\n\t\t\t\tmatch[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === \"even\" || match[3] === \"odd\" ) );\n\t\t\t\tmatch[5] = +( ( match[7] + match[8] ) || match[3] === \"odd\" );\n\n\t\t\t// other types prohibit arguments\n\t\t\t} else if ( match[3] ) {\n\t\t\t\tSizzle.error( match[0] );\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\n\t\t\"PSEUDO\": function( match ) {\n\t\t\tvar excess,\n\t\t\t\tunquoted = !match[6] && match[2];\n\n\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Accept quoted arguments as-is\n\t\t\tif ( match[3] ) {\n\t\t\t\tmatch[2] = match[4] || match[5] || \"\";\n\n\t\t\t// Strip excess characters from unquoted arguments\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\t\t\t\t// Get excess from tokenize (recursively)\n\t\t\t\t(excess = tokenize( unquoted, true )) &&\n\t\t\t\t// advance to the next closing parenthesis\n\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {\n\n\t\t\t\t// excess is a negative index\n\t\t\t\tmatch[0] = match[0].slice( 0, excess );\n\t\t\t\tmatch[2] = unquoted.slice( 0, excess );\n\t\t\t}\n\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\n\t\t\treturn match.slice( 0, 3 );\n\t\t}\n\t},\n\n\tfilter: {\n\n\t\t\"TAG\": function( nodeNameSelector ) {\n\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn nodeNameSelector === \"*\" ?\n\t\t\t\tfunction() { return true; } :\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n\t\t\t\t};\n\t\t},\n\n\t\t\"CLASS\": function( className ) {\n\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\treturn pattern ||\n\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&\n\t\t\t\tclassCache( className, function( elem ) {\n\t\t\t\t\treturn pattern.test( typeof elem.className === \"string\" && elem.className || typeof elem.getAttribute !== \"undefined\" && elem.getAttribute(\"class\") || \"\" );\n\t\t\t\t});\n\t\t},\n\n\t\t\"ATTR\": function( name, operator, check ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar result = Sizzle.attr( elem, name );\n\n\t\t\t\tif ( result == null ) {\n\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t}\n\t\t\t\tif ( !operator ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tresult += \"\";\n\n\t\t\t\treturn operator === \"=\" ? result === check :\n\t\t\t\t\toperator === \"!=\" ? result !== check :\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result.replace( rwhitespace, \" \" ) + \" \" ).indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n\t\t\t\t\tfalse;\n\t\t\t};\n\t\t},\n\n\t\t\"CHILD\": function( type, what, argument, first, last ) {\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\tofType = what === \"of-type\";\n\n\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\t// Shortcut for :nth-*(n)\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t} :\n\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tvar cache, outerCache, node, diff, nodeIndex, start,\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\tuseCache = !xml && !ofType;\n\n\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\n\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\twhile ( (node = node[ dir ]) ) {\n\t\t\t\t\t\t\t\t\tif ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\n\t\t\t\t\t\tif ( forward && useCache ) {\n\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\n\t\t\t\t\t\t\touterCache = parent[ expando ] || (parent[ expando ] = {});\n\t\t\t\t\t\t\tcache = outerCache[ type ] || [];\n\t\t\t\t\t\t\tnodeIndex = cache[0] === dirruns && cache[1];\n\t\t\t\t\t\t\tdiff = cache[0] === dirruns && cache[2];\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\touterCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Use previously-cached element index if available\n\t\t\t\t\t\t} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {\n\t\t\t\t\t\t\tdiff = cache[1];\n\n\t\t\t\t\t\t// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\tif ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {\n\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\n\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\n\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t},\n\n\t\t\"PSEUDO\": function( pseudo, argument ) {\n\t\t\t// pseudo-class names are case-insensitive\n\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t\t\t// Remember that setFilters inherits from pseudos\n\t\t\tvar args,\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\t// The user may use createPseudo to indicate that\n\t\t\t// arguments are needed to create the filter function\n\t\t\t// just as Sizzle does\n\t\t\tif ( fn[ expando ] ) {\n\t\t\t\treturn fn( argument );\n\t\t\t}\n\n\t\t\t// But maintain support for old signatures\n\t\t\tif ( fn.length > 1 ) {\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\tmarkFunction(function( seed, matches ) {\n\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tidx = indexOf( seed, matched[i] );\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}) :\n\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t}\n\t},\n\n\tpseudos: {\n\t\t// Potentially complex pseudos\n\t\t\"not\": markFunction(function( selector ) {\n\t\t\t// Trim the selector passed to compile\n\t\t\t// to avoid treating leading and trailing\n\t\t\t// spaces as combinators\n\t\t\tvar input = [],\n\t\t\t\tresults = [],\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n\n\t\t\treturn matcher[ expando ] ?\n\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\t// Match elements unmatched by `matcher`\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {\n\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}) :\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tinput[0] = elem;\n\t\t\t\t\tmatcher( input, null, xml, results );\n\t\t\t\t\t// Don't keep the element (issue #299)\n\t\t\t\t\tinput[0] = null;\n\t\t\t\t\treturn !results.pop();\n\t\t\t\t};\n\t\t}),\n\n\t\t\"has\": markFunction(function( selector ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n\t\t\t};\n\t\t}),\n\n\t\t\"contains\": markFunction(function( text ) {\n\t\t\ttext = text.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;\n\t\t\t};\n\t\t}),\n\n\t\t// \"Whether an element is represented by a :lang() selector\n\t\t// is based solely on the element's language value\n\t\t// being equal to the identifier C,\n\t\t// or beginning with the identifier C immediately followed by \"-\".\n\t\t// The matching of C against the element's language value is performed case-insensitively.\n\t\t// The identifier C does not have to be a valid language name.\"\n\t\t// http://www.w3.org/TR/selectors/#lang-pseudo\n\t\t\"lang\": markFunction( function( lang ) {\n\t\t\t// lang value must be a valid identifier\n\t\t\tif ( !ridentifier.test(lang || \"\") ) {\n\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n\t\t\t}\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\tvar elemLang;\n\t\t\t\tdo {\n\t\t\t\t\tif ( (elemLang = documentIsHTML ?\n\t\t\t\t\t\telem.lang :\n\t\t\t\t\t\telem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\")) ) {\n\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t}\n\t\t\t\t} while ( (elem = elem.parentNode) && elem.nodeType === 1 );\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}),\n\n\t\t// Miscellaneous\n\t\t\"target\": function( elem ) {\n\t\t\tvar hash = window.location && window.location.hash;\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t},\n\n\t\t\"root\": function( elem ) {\n\t\t\treturn elem === docElem;\n\t\t},\n\n\t\t\"focus\": function( elem ) {\n\t\t\treturn elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n\t\t},\n\n\t\t// Boolean properties\n\t\t\"enabled\": function( elem ) {\n\t\t\treturn elem.disabled === false;\n\t\t},\n\n\t\t\"disabled\": function( elem ) {\n\t\t\treturn elem.disabled === true;\n\t\t},\n\n\t\t\"checked\": function( elem ) {\n\t\t\t// In CSS3, :checked should return both checked and selected elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);\n\t\t},\n\n\t\t\"selected\": function( elem ) {\n\t\t\t// Accessing this property makes selected-by-default\n\t\t\t// options in Safari work properly\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t}\n\n\t\t\treturn elem.selected === true;\n\t\t},\n\n\t\t// Contents\n\t\t\"empty\": function( elem ) {\n\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\n\t\t\t// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n\t\t\t//   but not by others (comment: 8; processing instruction: 7; etc.)\n\t\t\t// nodeType < 6 works because attributes (2) do not appear as children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tif ( elem.nodeType < 6 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t\"parent\": function( elem ) {\n\t\t\treturn !Expr.pseudos[\"empty\"]( elem );\n\t\t},\n\n\t\t// Element/input types\n\t\t\"header\": function( elem ) {\n\t\t\treturn rheader.test( elem.nodeName );\n\t\t},\n\n\t\t\"input\": function( elem ) {\n\t\t\treturn rinputs.test( elem.nodeName );\n\t\t},\n\n\t\t\"button\": function( elem ) {\n\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n\t\t},\n\n\t\t\"text\": function( elem ) {\n\t\t\tvar attr;\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n\t\t\t\telem.type === \"text\" &&\n\n\t\t\t\t// Support: IE<8\n\t\t\t\t// New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\n\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === \"text\" );\n\t\t},\n\n\t\t// Position-in-collection\n\t\t\"first\": createPositionalPseudo(function() {\n\t\t\treturn [ 0 ];\n\t\t}),\n\n\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\treturn [ length - 1 ];\n\t\t}),\n\n\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t}),\n\n\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 1;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t})\n\t}\n};\n\nExpr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];\n\n// Add button/input type pseudos\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\tExpr.pseudos[ i ] = createInputPseudo( i );\n}\nfor ( i in { submit: true, reset: true } ) {\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\n}\n\n// Easy API for creating new setFilters\nfunction setFilters() {}\nsetFilters.prototype = Expr.filters = Expr.pseudos;\nExpr.setFilters = new setFilters();\n\ntokenize = Sizzle.tokenize = function( selector, parseOnly ) {\n\tvar matched, match, tokens, type,\n\t\tsoFar, groups, preFilters,\n\t\tcached = tokenCache[ selector + \" \" ];\n\n\tif ( cached ) {\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t}\n\n\tsoFar = selector;\n\tgroups = [];\n\tpreFilters = Expr.preFilter;\n\n\twhile ( soFar ) {\n\n\t\t// Comma and first run\n\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {\n\t\t\tif ( match ) {\n\t\t\t\t// Don't consume trailing commas as valid\n\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;\n\t\t\t}\n\t\t\tgroups.push( (tokens = []) );\n\t\t}\n\n\t\tmatched = false;\n\n\t\t// Combinators\n\t\tif ( (match = rcombinators.exec( soFar )) ) {\n\t\t\tmatched = match.shift();\n\t\t\ttokens.push({\n\t\t\t\tvalue: matched,\n\t\t\t\t// Cast descendant combinators to space\n\t\t\t\ttype: match[0].replace( rtrim, \" \" )\n\t\t\t});\n\t\t\tsoFar = soFar.slice( matched.length );\n\t\t}\n\n\t\t// Filters\n\t\tfor ( type in Expr.filter ) {\n\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||\n\t\t\t\t(match = preFilters[ type ]( match ))) ) {\n\t\t\t\tmatched = match.shift();\n\t\t\t\ttokens.push({\n\t\t\t\t\tvalue: matched,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmatches: match\n\t\t\t\t});\n\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t}\n\t\t}\n\n\t\tif ( !matched ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Return the length of the invalid excess\n\t// if we're just parsing\n\t// Otherwise, throw an error or return tokens\n\treturn parseOnly ?\n\t\tsoFar.length :\n\t\tsoFar ?\n\t\t\tSizzle.error( selector ) :\n\t\t\t// Cache the tokens\n\t\t\ttokenCache( selector, groups ).slice( 0 );\n};\n\nfunction toSelector( tokens ) {\n\tvar i = 0,\n\t\tlen = tokens.length,\n\t\tselector = \"\";\n\tfor ( ; i < len; i++ ) {\n\t\tselector += tokens[i].value;\n\t}\n\treturn selector;\n}\n\nfunction addCombinator( matcher, combinator, base ) {\n\tvar dir = combinator.dir,\n\t\tcheckNonElements = base && dir === \"parentNode\",\n\t\tdoneName = done++;\n\n\treturn combinator.first ?\n\t\t// Check against closest ancestor/preceding element\n\t\tfunction( elem, context, xml ) {\n\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t}\n\t\t\t}\n\t\t} :\n\n\t\t// Check against all ancestor/preceding elements\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar oldCache, outerCache,\n\t\t\t\tnewCache = [ dirruns, doneName ];\n\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching\n\t\t\tif ( xml ) {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\touterCache = elem[ expando ] || (elem[ expando ] = {});\n\t\t\t\t\t\tif ( (oldCache = outerCache[ dir ]) &&\n\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\n\n\t\t\t\t\t\t\t// Assign to newCache so results back-propagate to previous elements\n\t\t\t\t\t\t\treturn (newCache[ 2 ] = oldCache[ 2 ]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Reuse newcache so results back-propagate to previous elements\n\t\t\t\t\t\t\touterCache[ dir ] = newCache;\n\n\t\t\t\t\t\t\t// A match means we're done; a fail means we have to keep checking\n\t\t\t\t\t\t\tif ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n}\n\nfunction elementMatcher( matchers ) {\n\treturn matchers.length > 1 ?\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar i = matchers.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} :\n\t\tmatchers[0];\n}\n\nfunction multipleContexts( selector, contexts, results ) {\n\tvar i = 0,\n\t\tlen = contexts.length;\n\tfor ( ; i < len; i++ ) {\n\t\tSizzle( selector, contexts[i], results );\n\t}\n\treturn results;\n}\n\nfunction condense( unmatched, map, filter, context, xml ) {\n\tvar elem,\n\t\tnewUnmatched = [],\n\t\ti = 0,\n\t\tlen = unmatched.length,\n\t\tmapped = map != null;\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (elem = unmatched[i]) ) {\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\tif ( mapped ) {\n\t\t\t\t\tmap.push( i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newUnmatched;\n}\n\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\tif ( postFilter && !postFilter[ expando ] ) {\n\t\tpostFilter = setMatcher( postFilter );\n\t}\n\tif ( postFinder && !postFinder[ expando ] ) {\n\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t}\n\treturn markFunction(function( seed, results, context, xml ) {\n\t\tvar temp, i, elem,\n\t\t\tpreMap = [],\n\t\t\tpostMap = [],\n\t\t\tpreexisting = results.length,\n\n\t\t\t// Get initial elements from seed or context\n\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),\n\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\telems,\n\n\t\t\tmatcherOut = matcher ?\n\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t\t// ...intermediate processing is necessary\n\t\t\t\t\t[] :\n\n\t\t\t\t\t// ...otherwise use results directly\n\t\t\t\t\tresults :\n\t\t\t\tmatcherIn;\n\n\t\t// Find primary matches\n\t\tif ( matcher ) {\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t}\n\n\t\t// Apply postFilter\n\t\tif ( postFilter ) {\n\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\t// Un-match failing elements by moving them back to matcherIn\n\t\t\ti = temp.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( (elem = temp[i]) ) {\n\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( seed ) {\n\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\tif ( postFinder ) {\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\n\t\t\t\t\ttemp = [];\n\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\n\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );\n\t\t\t\t}\n\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\n\t\t\t\ti = matcherOut.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tif ( (elem = matcherOut[i]) &&\n\t\t\t\t\t\t(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {\n\n\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Add elements to results, through postFinder if defined\n\t\t} else {\n\t\t\tmatcherOut = condense(\n\t\t\t\tmatcherOut === results ?\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\tmatcherOut\n\t\t\t);\n\t\t\tif ( postFinder ) {\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t} else {\n\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction matcherFromTokens( tokens ) {\n\tvar checkContext, matcher, j,\n\t\tlen = tokens.length,\n\t\tleadingRelative = Expr.relative[ tokens[0].type ],\n\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],\n\t\ti = leadingRelative ? 1 : 0,\n\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\n\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\treturn elem === checkContext;\n\t\t}, implicitRelative, true ),\n\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\treturn indexOf( checkContext, elem ) > -1;\n\t\t}, implicitRelative, true ),\n\t\tmatchers = [ function( elem, context, xml ) {\n\t\t\tvar ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n\t\t\t\t(checkContext = context).nodeType ?\n\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\t\t\t// Avoid hanging onto element (issue #299)\n\t\t\tcheckContext = null;\n\t\t\treturn ret;\n\t\t} ];\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {\n\t\t\tmatchers = [ addCombinator(elementMatcher( matchers ), matcher) ];\n\t\t} else {\n\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );\n\n\t\t\t// Return special upon seeing a positional matcher\n\t\t\tif ( matcher[ expando ] ) {\n\t\t\t\t// Find the next relative operator (if any) for proper handling\n\t\t\t\tj = ++i;\n\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn setMatcher(\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\ti > 1 && toSelector(\n\t\t\t\t\t\t// If the preceding token was a descendant combinator, insert an implicit any-element `*`\n\t\t\t\t\t\ttokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" })\n\t\t\t\t\t).replace( rtrim, \"$1\" ),\n\t\t\t\t\tmatcher,\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),\n\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t);\n\t\t\t}\n\t\t\tmatchers.push( matcher );\n\t\t}\n\t}\n\n\treturn elementMatcher( matchers );\n}\n\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\tvar bySet = setMatchers.length > 0,\n\t\tbyElement = elementMatchers.length > 0,\n\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\n\t\t\tvar elem, j, matcher,\n\t\t\t\tmatchedCount = 0,\n\t\t\t\ti = \"0\",\n\t\t\t\tunmatched = seed && [],\n\t\t\t\tsetMatched = [],\n\t\t\t\tcontextBackup = outermostContext,\n\t\t\t\t// We must always have either seed elements or outermost context\n\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", outermost ),\n\t\t\t\t// Use integer dirruns iff this is the outermost matcher\n\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),\n\t\t\t\tlen = elems.length;\n\n\t\t\tif ( outermost ) {\n\t\t\t\toutermostContext = context !== document && context;\n\t\t\t}\n\n\t\t\t// Add elements passing elementMatchers directly to results\n\t\t\t// Keep `i` a string if there are no elements so `matchedCount` will be \"00\" below\n\t\t\t// Support: IE<9, Safari\n\t\t\t// Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\n\t\t\tfor ( ; i !== len && (elem = elems[i]) != null; i++ ) {\n\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (matcher = elementMatchers[j++]) ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Track unmatched elements for set filters\n\t\t\t\tif ( bySet ) {\n\t\t\t\t\t// They will have gone through all possible matchers\n\t\t\t\t\tif ( (elem = !matcher && elem) ) {\n\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Lengthen the array for every element, matched or not\n\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Apply set filters to unmatched elements\n\t\t\tmatchedCount += i;\n\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (matcher = setMatchers[j++]) ) {\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\n\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {\n\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\n\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t}\n\n\t\t\t\t// Add matches to results\n\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\tSizzle.uniqueSort( results );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Override manipulation of globals by nested matchers\n\t\t\tif ( outermost ) {\n\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\toutermostContext = contextBackup;\n\t\t\t}\n\n\t\t\treturn unmatched;\n\t\t};\n\n\treturn bySet ?\n\t\tmarkFunction( superMatcher ) :\n\t\tsuperMatcher;\n}\n\ncompile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {\n\tvar i,\n\t\tsetMatchers = [],\n\t\telementMatchers = [],\n\t\tcached = compilerCache[ selector + \" \" ];\n\n\tif ( !cached ) {\n\t\t// Generate a function of recursive functions that can be used to check each element\n\t\tif ( !match ) {\n\t\t\tmatch = tokenize( selector );\n\t\t}\n\t\ti = match.length;\n\t\twhile ( i-- ) {\n\t\t\tcached = matcherFromTokens( match[i] );\n\t\t\tif ( cached[ expando ] ) {\n\t\t\t\tsetMatchers.push( cached );\n\t\t\t} else {\n\t\t\t\telementMatchers.push( cached );\n\t\t\t}\n\t\t}\n\n\t\t// Cache the compiled function\n\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );\n\n\t\t// Save selector and tokenization\n\t\tcached.selector = selector;\n\t}\n\treturn cached;\n};\n\n/**\n * A low-level selection function that works with Sizzle's compiled\n *  selector functions\n * @param {String|Function} selector A selector or a pre-compiled\n *  selector function built with Sizzle.compile\n * @param {Element} context\n * @param {Array} [results]\n * @param {Array} [seed] A set of elements to match against\n */\nselect = Sizzle.select = function( selector, context, results, seed ) {\n\tvar i, tokens, token, type, find,\n\t\tcompiled = typeof selector === \"function\" && selector,\n\t\tmatch = !seed && tokenize( (selector = compiled.selector || selector) );\n\n\tresults = results || [];\n\n\t// Try to minimize operations if there is no seed and only one group\n\tif ( match.length === 1 ) {\n\n\t\t// Take a shortcut and set the context if the root selector is an ID\n\t\ttokens = match[0] = match[0].slice( 0 );\n\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&\n\t\t\t\tsupport.getById && context.nodeType === 9 && documentIsHTML &&\n\t\t\t\tExpr.relative[ tokens[1].type ] ) {\n\n\t\t\tcontext = ( Expr.find[\"ID\"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];\n\t\t\tif ( !context ) {\n\t\t\t\treturn results;\n\n\t\t\t// Precompiled matchers will still verify ancestry, so step up a level\n\t\t\t} else if ( compiled ) {\n\t\t\t\tcontext = context.parentNode;\n\t\t\t}\n\n\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t}\n\n\t\t// Fetch a seed set for right-to-left matching\n\t\ti = matchExpr[\"needsContext\"].test( selector ) ? 0 : tokens.length;\n\t\twhile ( i-- ) {\n\t\t\ttoken = tokens[i];\n\n\t\t\t// Abort if we hit a combinator\n\t\t\tif ( Expr.relative[ (type = token.type) ] ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( (find = Expr.find[ type ]) ) {\n\t\t\t\t// Search, expanding context for leading sibling combinators\n\t\t\t\tif ( (seed = find(\n\t\t\t\t\ttoken.matches[0].replace( runescape, funescape ),\n\t\t\t\t\trsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context\n\t\t\t\t)) ) {\n\n\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\n\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\tpush.apply( results, seed );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Compile and execute a filtering function if one is not provided\n\t// Provide `match` to avoid retokenization if we modified the selector above\n\t( compiled || compile( selector, match ) )(\n\t\tseed,\n\t\tcontext,\n\t\t!documentIsHTML,\n\t\tresults,\n\t\trsibling.test( selector ) && testContext( context.parentNode ) || context\n\t);\n\treturn results;\n};\n\n// One-time assignments\n\n// Sort stability\nsupport.sortStable = expando.split(\"\").sort( sortOrder ).join(\"\") === expando;\n\n// Support: Chrome 14-35+\n// Always assume duplicates if they aren't passed to the comparison function\nsupport.detectDuplicates = !!hasDuplicate;\n\n// Initialize against the default document\nsetDocument();\n\n// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\n// Detached nodes confoundingly follow *each other*\nsupport.sortDetached = assert(function( div1 ) {\n\t// Should return 1, but returns 4 (following)\n\treturn div1.compareDocumentPosition( document.createElement(\"div\") ) & 1;\n});\n\n// Support: IE<8\n// Prevent attribute/property \"interpolation\"\n// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\nif ( !assert(function( div ) {\n\tdiv.innerHTML = \"<a href='#'></a>\";\n\treturn div.firstChild.getAttribute(\"href\") === \"#\" ;\n}) ) {\n\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {\n\t\tif ( !isXML ) {\n\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use defaultValue in place of getAttribute(\"value\")\nif ( !support.attributes || !assert(function( div ) {\n\tdiv.innerHTML = \"<input/>\";\n\tdiv.firstChild.setAttribute( \"value\", \"\" );\n\treturn div.firstChild.getAttribute( \"value\" ) === \"\";\n}) ) {\n\taddHandle( \"value\", function( elem, name, isXML ) {\n\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {\n\t\t\treturn elem.defaultValue;\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use getAttributeNode to fetch booleans when getAttribute lies\nif ( !assert(function( div ) {\n\treturn div.getAttribute(\"disabled\") == null;\n}) ) {\n\taddHandle( booleans, function( elem, name, isXML ) {\n\t\tvar val;\n\t\tif ( !isXML ) {\n\t\t\treturn elem[ name ] === true ? name.toLowerCase() :\n\t\t\t\t\t(val = elem.getAttributeNode( name )) && val.specified ?\n\t\t\t\t\tval.value :\n\t\t\t\tnull;\n\t\t}\n\t});\n}\n\nreturn Sizzle;\n\n})( window );\n\n\n\njQuery.find = Sizzle;\njQuery.expr = Sizzle.selectors;\njQuery.expr[\":\"] = jQuery.expr.pseudos;\njQuery.unique = Sizzle.uniqueSort;\njQuery.text = Sizzle.getText;\njQuery.isXMLDoc = Sizzle.isXML;\njQuery.contains = Sizzle.contains;\n\n\n\nvar rneedsContext = jQuery.expr.match.needsContext;\n\nvar rsingleTag = (/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/);\n\n\n\nvar risSimple = /^.[^:#\\[\\.,]*$/;\n\n// Implement the identical functionality for filter and not\nfunction winnow( elements, qualifier, not ) {\n\tif ( jQuery.isFunction( qualifier ) ) {\n\t\treturn jQuery.grep( elements, function( elem, i ) {\n\t\t\t/* jshint -W018 */\n\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\n\t\t});\n\n\t}\n\n\tif ( qualifier.nodeType ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( elem === qualifier ) !== not;\n\t\t});\n\n\t}\n\n\tif ( typeof qualifier === \"string\" ) {\n\t\tif ( risSimple.test( qualifier ) ) {\n\t\t\treturn jQuery.filter( qualifier, elements, not );\n\t\t}\n\n\t\tqualifier = jQuery.filter( qualifier, elements );\n\t}\n\n\treturn jQuery.grep( elements, function( elem ) {\n\t\treturn ( indexOf.call( qualifier, elem ) >= 0 ) !== not;\n\t});\n}\n\njQuery.filter = function( expr, elems, not ) {\n\tvar elem = elems[ 0 ];\n\n\tif ( not ) {\n\t\texpr = \":not(\" + expr + \")\";\n\t}\n\n\treturn elems.length === 1 && elem.nodeType === 1 ?\n\t\tjQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :\n\t\tjQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\n\t\t\treturn elem.nodeType === 1;\n\t\t}));\n};\n\njQuery.fn.extend({\n\tfind: function( selector ) {\n\t\tvar i,\n\t\t\tlen = this.length,\n\t\t\tret = [],\n\t\t\tself = this;\n\n\t\tif ( typeof selector !== \"string\" ) {\n\t\t\treturn this.pushStack( jQuery( selector ).filter(function() {\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}) );\n\t\t}\n\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tjQuery.find( selector, self[ i ], ret );\n\t\t}\n\n\t\t// Needed because $( selector, context ) becomes $( context ).find( selector )\n\t\tret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );\n\t\tret.selector = this.selector ? this.selector + \" \" + selector : selector;\n\t\treturn ret;\n\t},\n\tfilter: function( selector ) {\n\t\treturn this.pushStack( winnow(this, selector || [], false) );\n\t},\n\tnot: function( selector ) {\n\t\treturn this.pushStack( winnow(this, selector || [], true) );\n\t},\n\tis: function( selector ) {\n\t\treturn !!winnow(\n\t\t\tthis,\n\n\t\t\t// If this is a positional/relative selector, check membership in the returned set\n\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\n\t\t\t\tjQuery( selector ) :\n\t\t\t\tselector || [],\n\t\t\tfalse\n\t\t).length;\n\t}\n});\n\n\n// Initialize a jQuery object\n\n\n// A central reference to the root jQuery(document)\nvar rootjQuery,\n\n\t// A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\n\t// Strict HTML recognition (#11290: must start with <)\n\trquickExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,\n\n\tinit = jQuery.fn.init = function( selector, context ) {\n\t\tvar match, elem;\n\n\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\t\tif ( !selector ) {\n\t\t\treturn this;\n\t\t}\n\n\t\t// Handle HTML strings\n\t\tif ( typeof selector === \"string\" ) {\n\t\t\tif ( selector[0] === \"<\" && selector[ selector.length - 1 ] === \">\" && selector.length >= 3 ) {\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\n\t\t\t\tmatch = [ null, selector, null ];\n\n\t\t\t} else {\n\t\t\t\tmatch = rquickExpr.exec( selector );\n\t\t\t}\n\n\t\t\t// Match html or make sure no context is specified for #id\n\t\t\tif ( match && (match[1] || !context) ) {\n\n\t\t\t\t// HANDLE: $(html) -> $(array)\n\t\t\t\tif ( match[1] ) {\n\t\t\t\t\tcontext = context instanceof jQuery ? context[0] : context;\n\n\t\t\t\t\t// Option to run scripts is true for back-compat\n\t\t\t\t\t// Intentionally let the error be thrown if parseHTML is not present\n\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n\t\t\t\t\t\tmatch[1],\n\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t) );\n\n\t\t\t\t\t// HANDLE: $(html, props)\n\t\t\t\t\tif ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {\n\t\t\t\t\t\tfor ( match in context ) {\n\t\t\t\t\t\t\t// Properties of context are called as methods if possible\n\t\t\t\t\t\t\tif ( jQuery.isFunction( this[ match ] ) ) {\n\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n\n\t\t\t\t\t\t\t// ...and otherwise set as attributes\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t// HANDLE: $(#id)\n\t\t\t\t} else {\n\t\t\t\t\telem = document.getElementById( match[2] );\n\n\t\t\t\t\t// Support: Blackberry 4.6\n\t\t\t\t\t// gEBID returns nodes no longer in the document (#6963)\n\t\t\t\t\tif ( elem && elem.parentNode ) {\n\t\t\t\t\t\t// Inject the element directly into the jQuery object\n\t\t\t\t\t\tthis.length = 1;\n\t\t\t\t\t\tthis[0] = elem;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.context = document;\n\t\t\t\t\tthis.selector = selector;\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t// HANDLE: $(expr, $(...))\n\t\t\t} else if ( !context || context.jquery ) {\n\t\t\t\treturn ( context || rootjQuery ).find( selector );\n\n\t\t\t// HANDLE: $(expr, context)\n\t\t\t// (which is just equivalent to: $(context).find(expr)\n\t\t\t} else {\n\t\t\t\treturn this.constructor( context ).find( selector );\n\t\t\t}\n\n\t\t// HANDLE: $(DOMElement)\n\t\t} else if ( selector.nodeType ) {\n\t\t\tthis.context = this[0] = selector;\n\t\t\tthis.length = 1;\n\t\t\treturn this;\n\n\t\t// HANDLE: $(function)\n\t\t// Shortcut for document ready\n\t\t} else if ( jQuery.isFunction( selector ) ) {\n\t\t\treturn typeof rootjQuery.ready !== \"undefined\" ?\n\t\t\t\trootjQuery.ready( selector ) :\n\t\t\t\t// Execute immediately if ready is not present\n\t\t\t\tselector( jQuery );\n\t\t}\n\n\t\tif ( selector.selector !== undefined ) {\n\t\t\tthis.selector = selector.selector;\n\t\t\tthis.context = selector.context;\n\t\t}\n\n\t\treturn jQuery.makeArray( selector, this );\n\t};\n\n// Give the init function the jQuery prototype for later instantiation\ninit.prototype = jQuery.fn;\n\n// Initialize central reference\nrootjQuery = jQuery( document );\n\n\nvar rparentsprev = /^(?:parents|prev(?:Until|All))/,\n\t// Methods guaranteed to produce a unique set when starting from a unique set\n\tguaranteedUnique = {\n\t\tchildren: true,\n\t\tcontents: true,\n\t\tnext: true,\n\t\tprev: true\n\t};\n\njQuery.extend({\n\tdir: function( elem, dir, until ) {\n\t\tvar matched = [],\n\t\t\ttruncate = until !== undefined;\n\n\t\twhile ( (elem = elem[ dir ]) && elem.nodeType !== 9 ) {\n\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tmatched.push( elem );\n\t\t\t}\n\t\t}\n\t\treturn matched;\n\t},\n\n\tsibling: function( n, elem ) {\n\t\tvar matched = [];\n\n\t\tfor ( ; n; n = n.nextSibling ) {\n\t\t\tif ( n.nodeType === 1 && n !== elem ) {\n\t\t\t\tmatched.push( n );\n\t\t\t}\n\t\t}\n\n\t\treturn matched;\n\t}\n});\n\njQuery.fn.extend({\n\thas: function( target ) {\n\t\tvar targets = jQuery( target, this ),\n\t\t\tl = targets.length;\n\n\t\treturn this.filter(function() {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tif ( jQuery.contains( this, targets[i] ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\tclosest: function( selectors, context ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tmatched = [],\n\t\t\tpos = rneedsContext.test( selectors ) || typeof selectors !== \"string\" ?\n\t\t\t\tjQuery( selectors, context || this.context ) :\n\t\t\t\t0;\n\n\t\tfor ( ; i < l; i++ ) {\n\t\t\tfor ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {\n\t\t\t\t// Always skip document fragments\n\t\t\t\tif ( cur.nodeType < 11 && (pos ?\n\t\t\t\t\tpos.index(cur) > -1 :\n\n\t\t\t\t\t// Don't pass non-elements to Sizzle\n\t\t\t\t\tcur.nodeType === 1 &&\n\t\t\t\t\t\tjQuery.find.matchesSelector(cur, selectors)) ) {\n\n\t\t\t\t\tmatched.push( cur );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched.length > 1 ? jQuery.unique( matched ) : matched );\n\t},\n\n\t// Determine the position of an element within the set\n\tindex: function( elem ) {\n\n\t\t// No argument, return index in parent\n\t\tif ( !elem ) {\n\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\n\t\t}\n\n\t\t// Index in selector\n\t\tif ( typeof elem === \"string\" ) {\n\t\t\treturn indexOf.call( jQuery( elem ), this[ 0 ] );\n\t\t}\n\n\t\t// Locate the position of the desired element\n\t\treturn indexOf.call( this,\n\n\t\t\t// If it receives a jQuery object, the first element is used\n\t\t\telem.jquery ? elem[ 0 ] : elem\n\t\t);\n\t},\n\n\tadd: function( selector, context ) {\n\t\treturn this.pushStack(\n\t\t\tjQuery.unique(\n\t\t\t\tjQuery.merge( this.get(), jQuery( selector, context ) )\n\t\t\t)\n\t\t);\n\t},\n\n\taddBack: function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter(selector)\n\t\t);\n\t}\n});\n\nfunction sibling( cur, dir ) {\n\twhile ( (cur = cur[dir]) && cur.nodeType !== 1 ) {}\n\treturn cur;\n}\n\njQuery.each({\n\tparent: function( elem ) {\n\t\tvar parent = elem.parentNode;\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n\t},\n\tparents: function( elem ) {\n\t\treturn jQuery.dir( elem, \"parentNode\" );\n\t},\n\tparentsUntil: function( elem, i, until ) {\n\t\treturn jQuery.dir( elem, \"parentNode\", until );\n\t},\n\tnext: function( elem ) {\n\t\treturn sibling( elem, \"nextSibling\" );\n\t},\n\tprev: function( elem ) {\n\t\treturn sibling( elem, \"previousSibling\" );\n\t},\n\tnextAll: function( elem ) {\n\t\treturn jQuery.dir( elem, \"nextSibling\" );\n\t},\n\tprevAll: function( elem ) {\n\t\treturn jQuery.dir( elem, \"previousSibling\" );\n\t},\n\tnextUntil: function( elem, i, until ) {\n\t\treturn jQuery.dir( elem, \"nextSibling\", until );\n\t},\n\tprevUntil: function( elem, i, until ) {\n\t\treturn jQuery.dir( elem, \"previousSibling\", until );\n\t},\n\tsiblings: function( elem ) {\n\t\treturn jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );\n\t},\n\tchildren: function( elem ) {\n\t\treturn jQuery.sibling( elem.firstChild );\n\t},\n\tcontents: function( elem ) {\n\t\treturn elem.contentDocument || jQuery.merge( [], elem.childNodes );\n\t}\n}, function( name, fn ) {\n\tjQuery.fn[ name ] = function( until, selector ) {\n\t\tvar matched = jQuery.map( this, fn, until );\n\n\t\tif ( name.slice( -5 ) !== \"Until\" ) {\n\t\t\tselector = until;\n\t\t}\n\n\t\tif ( selector && typeof selector === \"string\" ) {\n\t\t\tmatched = jQuery.filter( selector, matched );\n\t\t}\n\n\t\tif ( this.length > 1 ) {\n\t\t\t// Remove duplicates\n\t\t\tif ( !guaranteedUnique[ name ] ) {\n\t\t\t\tjQuery.unique( matched );\n\t\t\t}\n\n\t\t\t// Reverse order for parents* and prev-derivatives\n\t\t\tif ( rparentsprev.test( name ) ) {\n\t\t\t\tmatched.reverse();\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched );\n\t};\n});\nvar rnotwhite = (/\\S+/g);\n\n\n\n// String to Object options format cache\nvar optionsCache = {};\n\n// Convert String-formatted options into Object-formatted ones and store in cache\nfunction createOptions( options ) {\n\tvar object = optionsCache[ options ] = {};\n\tjQuery.each( options.match( rnotwhite ) || [], function( _, flag ) {\n\t\tobject[ flag ] = true;\n\t});\n\treturn object;\n}\n\n/*\n * Create a callback list using the following parameters:\n *\n *\toptions: an optional list of space-separated options that will change how\n *\t\t\tthe callback list behaves or a more traditional option object\n *\n * By default a callback list will act like an event callback list and can be\n * \"fired\" multiple times.\n *\n * Possible options:\n *\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n *\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n *\t\t\t\t\tvalues (like a Deferred)\n *\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n *\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\n *\n */\njQuery.Callbacks = function( options ) {\n\n\t// Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\" ?\n\t\t( optionsCache[ options ] || createOptions( options ) ) :\n\t\tjQuery.extend( {}, options );\n\n\tvar // Last fire value (for non-forgettable lists)\n\t\tmemory,\n\t\t// Flag to know if list was already fired\n\t\tfired,\n\t\t// Flag to know if list is currently firing\n\t\tfiring,\n\t\t// First callback to fire (used internally by add and fireWith)\n\t\tfiringStart,\n\t\t// End of the loop when firing\n\t\tfiringLength,\n\t\t// Index of currently firing callback (modified by remove if needed)\n\t\tfiringIndex,\n\t\t// Actual callback list\n\t\tlist = [],\n\t\t// Stack of fire calls for repeatable lists\n\t\tstack = !options.once && [],\n\t\t// Fire callbacks\n\t\tfire = function( data ) {\n\t\t\tmemory = options.memory && data;\n\t\t\tfired = true;\n\t\t\tfiringIndex = firingStart || 0;\n\t\t\tfiringStart = 0;\n\t\t\tfiringLength = list.length;\n\t\t\tfiring = true;\n\t\t\tfor ( ; list && firingIndex < firingLength; firingIndex++ ) {\n\t\t\t\tif ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {\n\t\t\t\t\tmemory = false; // To prevent further calls using add\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfiring = false;\n\t\t\tif ( list ) {\n\t\t\t\tif ( stack ) {\n\t\t\t\t\tif ( stack.length ) {\n\t\t\t\t\t\tfire( stack.shift() );\n\t\t\t\t\t}\n\t\t\t\t} else if ( memory ) {\n\t\t\t\t\tlist = [];\n\t\t\t\t} else {\n\t\t\t\t\tself.disable();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// Actual Callbacks object\n\t\tself = {\n\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\tadd: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\t// First, we save the current length\n\t\t\t\t\tvar start = list.length;\n\t\t\t\t\t(function add( args ) {\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\tvar type = jQuery.type( arg );\n\t\t\t\t\t\t\tif ( type === \"function\" ) {\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( arg && arg.length && type !== \"string\" ) {\n\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t})( arguments );\n\t\t\t\t\t// Do we need to add the callbacks to the\n\t\t\t\t\t// current firing batch?\n\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\tfiringLength = list.length;\n\t\t\t\t\t// With memory, if we're not firing then\n\t\t\t\t\t// we should call right away\n\t\t\t\t\t} else if ( memory ) {\n\t\t\t\t\t\tfiringStart = start;\n\t\t\t\t\t\tfire( memory );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Remove a callback from the list\n\t\t\tremove: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\t\tvar index;\n\t\t\t\t\t\twhile ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\t\tlist.splice( index, 1 );\n\t\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\t\t\tif ( index <= firingLength ) {\n\t\t\t\t\t\t\t\t\tfiringLength--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Check if a given callback is in the list.\n\t\t\t// If no argument is given, return whether or not list has callbacks attached.\n\t\t\thas: function( fn ) {\n\t\t\t\treturn fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );\n\t\t\t},\n\t\t\t// Remove all callbacks from the list\n\t\t\tempty: function() {\n\t\t\t\tlist = [];\n\t\t\t\tfiringLength = 0;\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Have the list do nothing anymore\n\t\t\tdisable: function() {\n\t\t\t\tlist = stack = memory = undefined;\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Is it disabled?\n\t\t\tdisabled: function() {\n\t\t\t\treturn !list;\n\t\t\t},\n\t\t\t// Lock the list in its current state\n\t\t\tlock: function() {\n\t\t\t\tstack = undefined;\n\t\t\t\tif ( !memory ) {\n\t\t\t\t\tself.disable();\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Is it locked?\n\t\t\tlocked: function() {\n\t\t\t\treturn !stack;\n\t\t\t},\n\t\t\t// Call all callbacks with the given context and arguments\n\t\t\tfireWith: function( context, args ) {\n\t\t\t\tif ( list && ( !fired || stack ) ) {\n\t\t\t\t\targs = args || [];\n\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\tstack.push( args );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfire( args );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Call all the callbacks with the given arguments\n\t\t\tfire: function() {\n\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// To know if the callbacks have already been called at least once\n\t\t\tfired: function() {\n\t\t\t\treturn !!fired;\n\t\t\t}\n\t\t};\n\n\treturn self;\n};\n\n\njQuery.extend({\n\n\tDeferred: function( func ) {\n\t\tvar tuples = [\n\t\t\t\t// action, add listener, listener list, final state\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks(\"once memory\"), \"resolved\" ],\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks(\"once memory\"), \"rejected\" ],\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks(\"memory\") ]\n\t\t\t],\n\t\t\tstate = \"pending\",\n\t\t\tpromise = {\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn state;\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\tthen: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\tvar fns = arguments;\n\t\t\t\t\treturn jQuery.Deferred(function( newDefer ) {\n\t\t\t\t\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\t\t\t\t\tvar fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];\n\t\t\t\t\t\t\t// deferred[ done | fail | progress ] for forwarding actions to newDefer\n\t\t\t\t\t\t\tdeferred[ tuple[1] ](function() {\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\t\t\tif ( returned && jQuery.isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject )\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfns = null;\n\t\t\t\t\t}).promise();\n\t\t\t\t},\n\t\t\t\t// Get a promise for this deferred\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeferred = {};\n\n\t\t// Keep pipe for back-compat\n\t\tpromise.pipe = promise.then;\n\n\t\t// Add list-specific methods\n\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\tvar list = tuple[ 2 ],\n\t\t\t\tstateString = tuple[ 3 ];\n\n\t\t\t// promise[ done | fail | progress ] = list.add\n\t\t\tpromise[ tuple[1] ] = list.add;\n\n\t\t\t// Handle state\n\t\t\tif ( stateString ) {\n\t\t\t\tlist.add(function() {\n\t\t\t\t\t// state = [ resolved | rejected ]\n\t\t\t\t\tstate = stateString;\n\n\t\t\t\t// [ reject_list | resolve_list ].disable; progress_list.lock\n\t\t\t\t}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );\n\t\t\t}\n\n\t\t\t// deferred[ resolve | reject | notify ]\n\t\t\tdeferred[ tuple[0] ] = function() {\n\t\t\t\tdeferred[ tuple[0] + \"With\" ]( this === deferred ? promise : this, arguments );\n\t\t\t\treturn this;\n\t\t\t};\n\t\t\tdeferred[ tuple[0] + \"With\" ] = list.fireWith;\n\t\t});\n\n\t\t// Make the deferred a promise\n\t\tpromise.promise( deferred );\n\n\t\t// Call given func if any\n\t\tif ( func ) {\n\t\t\tfunc.call( deferred, deferred );\n\t\t}\n\n\t\t// All done!\n\t\treturn deferred;\n\t},\n\n\t// Deferred helper\n\twhen: function( subordinate /* , ..., subordinateN */ ) {\n\t\tvar i = 0,\n\t\t\tresolveValues = slice.call( arguments ),\n\t\t\tlength = resolveValues.length,\n\n\t\t\t// the count of uncompleted subordinates\n\t\t\tremaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,\n\n\t\t\t// the master Deferred. If resolveValues consist of only a single Deferred, just use that.\n\t\t\tdeferred = remaining === 1 ? subordinate : jQuery.Deferred(),\n\n\t\t\t// Update function for both resolve and progress values\n\t\t\tupdateFunc = function( i, contexts, values ) {\n\t\t\t\treturn function( value ) {\n\t\t\t\t\tcontexts[ i ] = this;\n\t\t\t\t\tvalues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\n\t\t\t\t\tif ( values === progressValues ) {\n\t\t\t\t\t\tdeferred.notifyWith( contexts, values );\n\t\t\t\t\t} else if ( !( --remaining ) ) {\n\t\t\t\t\t\tdeferred.resolveWith( contexts, values );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tprogressValues, progressContexts, resolveContexts;\n\n\t\t// Add listeners to Deferred subordinates; treat others as resolved\n\t\tif ( length > 1 ) {\n\t\t\tprogressValues = new Array( length );\n\t\t\tprogressContexts = new Array( length );\n\t\t\tresolveContexts = new Array( length );\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {\n\t\t\t\t\tresolveValues[ i ].promise()\n\t\t\t\t\t\t.done( updateFunc( i, resolveContexts, resolveValues ) )\n\t\t\t\t\t\t.fail( deferred.reject )\n\t\t\t\t\t\t.progress( updateFunc( i, progressContexts, progressValues ) );\n\t\t\t\t} else {\n\t\t\t\t\t--remaining;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// If we're not waiting on anything, resolve the master\n\t\tif ( !remaining ) {\n\t\t\tdeferred.resolveWith( resolveContexts, resolveValues );\n\t\t}\n\n\t\treturn deferred.promise();\n\t}\n});\n\n\n// The deferred used on DOM ready\nvar readyList;\n\njQuery.fn.ready = function( fn ) {\n\t// Add the callback\n\tjQuery.ready.promise().done( fn );\n\n\treturn this;\n};\n\njQuery.extend({\n\t// Is the DOM ready to be used? Set to true once it occurs.\n\tisReady: false,\n\n\t// A counter to track how many items to wait for before\n\t// the ready event fires. See #6781\n\treadyWait: 1,\n\n\t// Hold (or release) the ready event\n\tholdReady: function( hold ) {\n\t\tif ( hold ) {\n\t\t\tjQuery.readyWait++;\n\t\t} else {\n\t\t\tjQuery.ready( true );\n\t\t}\n\t},\n\n\t// Handle when the DOM is ready\n\tready: function( wait ) {\n\n\t\t// Abort if there are pending holds or we're already ready\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remember that the DOM is ready\n\t\tjQuery.isReady = true;\n\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there are functions bound, to execute\n\t\treadyList.resolveWith( document, [ jQuery ] );\n\n\t\t// Trigger any bound ready events\n\t\tif ( jQuery.fn.triggerHandler ) {\n\t\t\tjQuery( document ).triggerHandler( \"ready\" );\n\t\t\tjQuery( document ).off( \"ready\" );\n\t\t}\n\t}\n});\n\n/**\n * The ready event handler and self cleanup method\n */\nfunction completed() {\n\tdocument.removeEventListener( \"DOMContentLoaded\", completed, false );\n\twindow.removeEventListener( \"load\", completed, false );\n\tjQuery.ready();\n}\n\njQuery.ready.promise = function( obj ) {\n\tif ( !readyList ) {\n\n\t\treadyList = jQuery.Deferred();\n\n\t\t// Catch cases where $(document).ready() is called after the browser event has already occurred.\n\t\t// We once tried to use readyState \"interactive\" here, but it caused issues like the one\n\t\t// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15\n\t\tif ( document.readyState === \"complete\" ) {\n\t\t\t// Handle it asynchronously to allow scripts the opportunity to delay ready\n\t\t\tsetTimeout( jQuery.ready );\n\n\t\t} else {\n\n\t\t\t// Use the handy event callback\n\t\t\tdocument.addEventListener( \"DOMContentLoaded\", completed, false );\n\n\t\t\t// A fallback to window.onload, that will always work\n\t\t\twindow.addEventListener( \"load\", completed, false );\n\t\t}\n\t}\n\treturn readyList.promise( obj );\n};\n\n// Kick off the DOM ready check even if the user does not\njQuery.ready.promise();\n\n\n\n\n// Multifunctional method to get and set values of a collection\n// The value/s can optionally be executed if it's a function\nvar access = jQuery.access = function( elems, fn, key, value, chainable, emptyGet, raw ) {\n\tvar i = 0,\n\t\tlen = elems.length,\n\t\tbulk = key == null;\n\n\t// Sets many values\n\tif ( jQuery.type( key ) === \"object\" ) {\n\t\tchainable = true;\n\t\tfor ( i in key ) {\n\t\t\tjQuery.access( elems, fn, i, key[i], true, emptyGet, raw );\n\t\t}\n\n\t// Sets one value\n\t} else if ( value !== undefined ) {\n\t\tchainable = true;\n\n\t\tif ( !jQuery.isFunction( value ) ) {\n\t\t\traw = true;\n\t\t}\n\n\t\tif ( bulk ) {\n\t\t\t// Bulk operations run against the entire set\n\t\t\tif ( raw ) {\n\t\t\t\tfn.call( elems, value );\n\t\t\t\tfn = null;\n\n\t\t\t// ...except when executing function values\n\t\t\t} else {\n\t\t\t\tbulk = fn;\n\t\t\t\tfn = function( elem, key, value ) {\n\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif ( fn ) {\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\tfn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn chainable ?\n\t\telems :\n\n\t\t// Gets\n\t\tbulk ?\n\t\t\tfn.call( elems ) :\n\t\t\tlen ? fn( elems[0], key ) : emptyGet;\n};\n\n\n/**\n * Determines whether an object can have data\n */\njQuery.acceptData = function( owner ) {\n\t// Accepts only:\n\t//  - Node\n\t//    - Node.ELEMENT_NODE\n\t//    - Node.DOCUMENT_NODE\n\t//  - Object\n\t//    - Any\n\t/* jshint -W018 */\n\treturn owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );\n};\n\n\nfunction Data() {\n\t// Support: Android<4,\n\t// Old WebKit does not have Object.preventExtensions/freeze method,\n\t// return new empty object instead with no [[set]] accessor\n\tObject.defineProperty( this.cache = {}, 0, {\n\t\tget: function() {\n\t\t\treturn {};\n\t\t}\n\t});\n\n\tthis.expando = jQuery.expando + Data.uid++;\n}\n\nData.uid = 1;\nData.accepts = jQuery.acceptData;\n\nData.prototype = {\n\tkey: function( owner ) {\n\t\t// We can accept data for non-element nodes in modern browsers,\n\t\t// but we should not, see #8335.\n\t\t// Always return the key for a frozen object.\n\t\tif ( !Data.accepts( owner ) ) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar descriptor = {},\n\t\t\t// Check if the owner object already has a cache key\n\t\t\tunlock = owner[ this.expando ];\n\n\t\t// If not, create one\n\t\tif ( !unlock ) {\n\t\t\tunlock = Data.uid++;\n\n\t\t\t// Secure it in a non-enumerable, non-writable property\n\t\t\ttry {\n\t\t\t\tdescriptor[ this.expando ] = { value: unlock };\n\t\t\t\tObject.defineProperties( owner, descriptor );\n\n\t\t\t// Support: Android<4\n\t\t\t// Fallback to a less secure definition\n\t\t\t} catch ( e ) {\n\t\t\t\tdescriptor[ this.expando ] = unlock;\n\t\t\t\tjQuery.extend( owner, descriptor );\n\t\t\t}\n\t\t}\n\n\t\t// Ensure the cache object\n\t\tif ( !this.cache[ unlock ] ) {\n\t\t\tthis.cache[ unlock ] = {};\n\t\t}\n\n\t\treturn unlock;\n\t},\n\tset: function( owner, data, value ) {\n\t\tvar prop,\n\t\t\t// There may be an unlock assigned to this node,\n\t\t\t// if there is no entry for this \"owner\", create one inline\n\t\t\t// and set the unlock as though an owner entry had always existed\n\t\t\tunlock = this.key( owner ),\n\t\t\tcache = this.cache[ unlock ];\n\n\t\t// Handle: [ owner, key, value ] args\n\t\tif ( typeof data === \"string\" ) {\n\t\t\tcache[ data ] = value;\n\n\t\t// Handle: [ owner, { properties } ] args\n\t\t} else {\n\t\t\t// Fresh assignments by object are shallow copied\n\t\t\tif ( jQuery.isEmptyObject( cache ) ) {\n\t\t\t\tjQuery.extend( this.cache[ unlock ], data );\n\t\t\t// Otherwise, copy the properties one-by-one to the cache object\n\t\t\t} else {\n\t\t\t\tfor ( prop in data ) {\n\t\t\t\t\tcache[ prop ] = data[ prop ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn cache;\n\t},\n\tget: function( owner, key ) {\n\t\t// Either a valid cache is found, or will be created.\n\t\t// New caches will be created and the unlock returned,\n\t\t// allowing direct access to the newly created\n\t\t// empty data object. A valid owner object must be provided.\n\t\tvar cache = this.cache[ this.key( owner ) ];\n\n\t\treturn key === undefined ?\n\t\t\tcache : cache[ key ];\n\t},\n\taccess: function( owner, key, value ) {\n\t\tvar stored;\n\t\t// In cases where either:\n\t\t//\n\t\t//   1. No key was specified\n\t\t//   2. A string key was specified, but no value provided\n\t\t//\n\t\t// Take the \"read\" path and allow the get method to determine\n\t\t// which value to return, respectively either:\n\t\t//\n\t\t//   1. The entire cache object\n\t\t//   2. The data stored at the key\n\t\t//\n\t\tif ( key === undefined ||\n\t\t\t\t((key && typeof key === \"string\") && value === undefined) ) {\n\n\t\t\tstored = this.get( owner, key );\n\n\t\t\treturn stored !== undefined ?\n\t\t\t\tstored : this.get( owner, jQuery.camelCase(key) );\n\t\t}\n\n\t\t// [*]When the key is not a string, or both a key and value\n\t\t// are specified, set or extend (existing objects) with either:\n\t\t//\n\t\t//   1. An object of properties\n\t\t//   2. A key and value\n\t\t//\n\t\tthis.set( owner, key, value );\n\n\t\t// Since the \"set\" path can have two possible entry points\n\t\t// return the expected data based on which path was taken[*]\n\t\treturn value !== undefined ? value : key;\n\t},\n\tremove: function( owner, key ) {\n\t\tvar i, name, camel,\n\t\t\tunlock = this.key( owner ),\n\t\t\tcache = this.cache[ unlock ];\n\n\t\tif ( key === undefined ) {\n\t\t\tthis.cache[ unlock ] = {};\n\n\t\t} else {\n\t\t\t// Support array or space separated string of keys\n\t\t\tif ( jQuery.isArray( key ) ) {\n\t\t\t\t// If \"name\" is an array of keys...\n\t\t\t\t// When data is initially created, via (\"key\", \"val\") signature,\n\t\t\t\t// keys will be converted to camelCase.\n\t\t\t\t// Since there is no way to tell _how_ a key was added, remove\n\t\t\t\t// both plain key and camelCase key. #12786\n\t\t\t\t// This will only penalize the array argument path.\n\t\t\t\tname = key.concat( key.map( jQuery.camelCase ) );\n\t\t\t} else {\n\t\t\t\tcamel = jQuery.camelCase( key );\n\t\t\t\t// Try the string as a key before any manipulation\n\t\t\t\tif ( key in cache ) {\n\t\t\t\t\tname = [ key, camel ];\n\t\t\t\t} else {\n\t\t\t\t\t// If a key with the spaces exists, use it.\n\t\t\t\t\t// Otherwise, create an array by matching non-whitespace\n\t\t\t\t\tname = camel;\n\t\t\t\t\tname = name in cache ?\n\t\t\t\t\t\t[ name ] : ( name.match( rnotwhite ) || [] );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ti = name.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tdelete cache[ name[ i ] ];\n\t\t\t}\n\t\t}\n\t},\n\thasData: function( owner ) {\n\t\treturn !jQuery.isEmptyObject(\n\t\t\tthis.cache[ owner[ this.expando ] ] || {}\n\t\t);\n\t},\n\tdiscard: function( owner ) {\n\t\tif ( owner[ this.expando ] ) {\n\t\t\tdelete this.cache[ owner[ this.expando ] ];\n\t\t}\n\t}\n};\nvar data_priv = new Data();\n\nvar data_user = new Data();\n\n\n\n//\tImplementation Summary\n//\n//\t1. Enforce API surface and semantic compatibility with 1.9.x branch\n//\t2. Improve the module's maintainability by reducing the storage\n//\t\tpaths to a single mechanism.\n//\t3. Use the same single mechanism to support \"private\" and \"user\" data.\n//\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\n//\t5. Avoid exposing implementation details on user objects (eg. expando properties)\n//\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\n\nvar rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,\n\trmultiDash = /([A-Z])/g;\n\nfunction dataAttr( elem, key, data ) {\n\tvar name;\n\n\t// If nothing was found internally, try to fetch any\n\t// data from the HTML5 data-* attribute\n\tif ( data === undefined && elem.nodeType === 1 ) {\n\t\tname = \"data-\" + key.replace( rmultiDash, \"-$1\" ).toLowerCase();\n\t\tdata = elem.getAttribute( name );\n\n\t\tif ( typeof data === \"string\" ) {\n\t\t\ttry {\n\t\t\t\tdata = data === \"true\" ? true :\n\t\t\t\t\tdata === \"false\" ? false :\n\t\t\t\t\tdata === \"null\" ? null :\n\t\t\t\t\t// Only convert to a number if it doesn't change the string\n\t\t\t\t\t+data + \"\" === data ? +data :\n\t\t\t\t\trbrace.test( data ) ? jQuery.parseJSON( data ) :\n\t\t\t\t\tdata;\n\t\t\t} catch( e ) {}\n\n\t\t\t// Make sure we set the data so it isn't changed later\n\t\t\tdata_user.set( elem, key, data );\n\t\t} else {\n\t\t\tdata = undefined;\n\t\t}\n\t}\n\treturn data;\n}\n\njQuery.extend({\n\thasData: function( elem ) {\n\t\treturn data_user.hasData( elem ) || data_priv.hasData( elem );\n\t},\n\n\tdata: function( elem, name, data ) {\n\t\treturn data_user.access( elem, name, data );\n\t},\n\n\tremoveData: function( elem, name ) {\n\t\tdata_user.remove( elem, name );\n\t},\n\n\t// TODO: Now that all calls to _data and _removeData have been replaced\n\t// with direct calls to data_priv methods, these can be deprecated.\n\t_data: function( elem, name, data ) {\n\t\treturn data_priv.access( elem, name, data );\n\t},\n\n\t_removeData: function( elem, name ) {\n\t\tdata_priv.remove( elem, name );\n\t}\n});\n\njQuery.fn.extend({\n\tdata: function( key, value ) {\n\t\tvar i, name, data,\n\t\t\telem = this[ 0 ],\n\t\t\tattrs = elem && elem.attributes;\n\n\t\t// Gets all values\n\t\tif ( key === undefined ) {\n\t\t\tif ( this.length ) {\n\t\t\t\tdata = data_user.get( elem );\n\n\t\t\t\tif ( elem.nodeType === 1 && !data_priv.get( elem, \"hasDataAttrs\" ) ) {\n\t\t\t\t\ti = attrs.length;\n\t\t\t\t\twhile ( i-- ) {\n\n\t\t\t\t\t\t// Support: IE11+\n\t\t\t\t\t\t// The attrs elements can be null (#14894)\n\t\t\t\t\t\tif ( attrs[ i ] ) {\n\t\t\t\t\t\t\tname = attrs[ i ].name;\n\t\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\n\t\t\t\t\t\t\t\tname = jQuery.camelCase( name.slice(5) );\n\t\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata_priv.set( elem, \"hasDataAttrs\", true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\n\t\t// Sets multiple values\n\t\tif ( typeof key === \"object\" ) {\n\t\t\treturn this.each(function() {\n\t\t\t\tdata_user.set( this, key );\n\t\t\t});\n\t\t}\n\n\t\treturn access( this, function( value ) {\n\t\t\tvar data,\n\t\t\t\tcamelKey = jQuery.camelCase( key );\n\n\t\t\t// The calling jQuery object (element matches) is not empty\n\t\t\t// (and therefore has an element appears at this[ 0 ]) and the\n\t\t\t// `value` parameter was not undefined. An empty jQuery object\n\t\t\t// will result in `undefined` for elem = this[ 0 ] which will\n\t\t\t// throw an exception if an attempt to read a data cache is made.\n\t\t\tif ( elem && value === undefined ) {\n\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t// with the key as-is\n\t\t\t\tdata = data_user.get( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t// with the key camelized\n\t\t\t\tdata = data_user.get( elem, camelKey );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// Attempt to \"discover\" the data in\n\t\t\t\t// HTML5 custom data-* attrs\n\t\t\t\tdata = dataAttr( elem, camelKey, undefined );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// We tried really hard, but the data doesn't exist.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Set the data...\n\t\t\tthis.each(function() {\n\t\t\t\t// First, attempt to store a copy or reference of any\n\t\t\t\t// data that might've been store with a camelCased key.\n\t\t\t\tvar data = data_user.get( this, camelKey );\n\n\t\t\t\t// For HTML5 data-* attribute interop, we have to\n\t\t\t\t// store property names with dashes in a camelCase form.\n\t\t\t\t// This might not apply to all properties...*\n\t\t\t\tdata_user.set( this, camelKey, value );\n\n\t\t\t\t// *... In the case of properties that might _actually_\n\t\t\t\t// have dashes, we need to also store a copy of that\n\t\t\t\t// unchanged property.\n\t\t\t\tif ( key.indexOf(\"-\") !== -1 && data !== undefined ) {\n\t\t\t\t\tdata_user.set( this, key, value );\n\t\t\t\t}\n\t\t\t});\n\t\t}, null, value, arguments.length > 1, null, true );\n\t},\n\n\tremoveData: function( key ) {\n\t\treturn this.each(function() {\n\t\t\tdata_user.remove( this, key );\n\t\t});\n\t}\n});\n\n\njQuery.extend({\n\tqueue: function( elem, type, data ) {\n\t\tvar queue;\n\n\t\tif ( elem ) {\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n\t\t\tqueue = data_priv.get( elem, type );\n\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\n\t\t\tif ( data ) {\n\t\t\t\tif ( !queue || jQuery.isArray( data ) ) {\n\t\t\t\t\tqueue = data_priv.access( elem, type, jQuery.makeArray(data) );\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push( data );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn queue || [];\n\t\t}\n\t},\n\n\tdequeue: function( elem, type ) {\n\t\ttype = type || \"fx\";\n\n\t\tvar queue = jQuery.queue( elem, type ),\n\t\t\tstartLength = queue.length,\n\t\t\tfn = queue.shift(),\n\t\t\thooks = jQuery._queueHooks( elem, type ),\n\t\t\tnext = function() {\n\t\t\t\tjQuery.dequeue( elem, type );\n\t\t\t};\n\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\n\t\tif ( fn === \"inprogress\" ) {\n\t\t\tfn = queue.shift();\n\t\t\tstartLength--;\n\t\t}\n\n\t\tif ( fn ) {\n\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\n\t\t\t// automatically dequeued\n\t\t\tif ( type === \"fx\" ) {\n\t\t\t\tqueue.unshift( \"inprogress\" );\n\t\t\t}\n\n\t\t\t// Clear up the last queue stop function\n\t\t\tdelete hooks.stop;\n\t\t\tfn.call( elem, next, hooks );\n\t\t}\n\n\t\tif ( !startLength && hooks ) {\n\t\t\thooks.empty.fire();\n\t\t}\n\t},\n\n\t// Not public - generate a queueHooks object, or return the current one\n\t_queueHooks: function( elem, type ) {\n\t\tvar key = type + \"queueHooks\";\n\t\treturn data_priv.get( elem, key ) || data_priv.access( elem, key, {\n\t\t\tempty: jQuery.Callbacks(\"once memory\").add(function() {\n\t\t\t\tdata_priv.remove( elem, [ type + \"queue\", key ] );\n\t\t\t})\n\t\t});\n\t}\n});\n\njQuery.fn.extend({\n\tqueue: function( type, data ) {\n\t\tvar setter = 2;\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tdata = type;\n\t\t\ttype = \"fx\";\n\t\t\tsetter--;\n\t\t}\n\n\t\tif ( arguments.length < setter ) {\n\t\t\treturn jQuery.queue( this[0], type );\n\t\t}\n\n\t\treturn data === undefined ?\n\t\t\tthis :\n\t\t\tthis.each(function() {\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\n\n\t\t\t\t// Ensure a hooks for this queue\n\t\t\t\tjQuery._queueHooks( this, type );\n\n\t\t\t\tif ( type === \"fx\" && queue[0] !== \"inprogress\" ) {\n\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t}\n\t\t\t});\n\t},\n\tdequeue: function( type ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.dequeue( this, type );\n\t\t});\n\t},\n\tclearQueue: function( type ) {\n\t\treturn this.queue( type || \"fx\", [] );\n\t},\n\t// Get a promise resolved when queues of a certain type\n\t// are emptied (fx is the type by default)\n\tpromise: function( type, obj ) {\n\t\tvar tmp,\n\t\t\tcount = 1,\n\t\t\tdefer = jQuery.Deferred(),\n\t\t\telements = this,\n\t\t\ti = this.length,\n\t\t\tresolve = function() {\n\t\t\t\tif ( !( --count ) ) {\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n\t\t\t\t}\n\t\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tobj = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\ttype = type || \"fx\";\n\n\t\twhile ( i-- ) {\n\t\t\ttmp = data_priv.get( elements[ i ], type + \"queueHooks\" );\n\t\t\tif ( tmp && tmp.empty ) {\n\t\t\t\tcount++;\n\t\t\t\ttmp.empty.add( resolve );\n\t\t\t}\n\t\t}\n\t\tresolve();\n\t\treturn defer.promise( obj );\n\t}\n});\nvar pnum = (/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/).source;\n\nvar cssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ];\n\nvar isHidden = function( elem, el ) {\n\t\t// isHidden might be called from jQuery#filter function;\n\t\t// in that case, element will be second argument\n\t\telem = el || elem;\n\t\treturn jQuery.css( elem, \"display\" ) === \"none\" || !jQuery.contains( elem.ownerDocument, elem );\n\t};\n\nvar rcheckableType = (/^(?:checkbox|radio)$/i);\n\n\n\n(function() {\n\tvar fragment = document.createDocumentFragment(),\n\t\tdiv = fragment.appendChild( document.createElement( \"div\" ) ),\n\t\tinput = document.createElement( \"input\" );\n\n\t// Support: Safari<=5.1\n\t// Check state lost if the name is set (#11217)\n\t// Support: Windows Web Apps (WWA)\n\t// `name` and `type` must use .setAttribute for WWA (#14901)\n\tinput.setAttribute( \"type\", \"radio\" );\n\tinput.setAttribute( \"checked\", \"checked\" );\n\tinput.setAttribute( \"name\", \"t\" );\n\n\tdiv.appendChild( input );\n\n\t// Support: Safari<=5.1, Android<4.2\n\t// Older WebKit doesn't clone checked state correctly in fragments\n\tsupport.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;\n\n\t// Support: IE<=11+\n\t// Make sure textarea (and checkbox) defaultValue is properly cloned\n\tdiv.innerHTML = \"<textarea>x</textarea>\";\n\tsupport.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;\n})();\nvar strundefined = typeof undefined;\n\n\n\nsupport.focusinBubbles = \"onfocusin\" in window;\n\n\nvar\n\trkeyEvent = /^key/,\n\trmouseEvent = /^(?:mouse|pointer|contextmenu)|click/,\n\trfocusMorph = /^(?:focusinfocus|focusoutblur)$/,\n\trtypenamespace = /^([^.]*)(?:\\.(.+)|)$/;\n\nfunction returnTrue() {\n\treturn true;\n}\n\nfunction returnFalse() {\n\treturn false;\n}\n\nfunction safeActiveElement() {\n\ttry {\n\t\treturn document.activeElement;\n\t} catch ( err ) { }\n}\n\n/*\n * Helper functions for managing events -- not part of the public interface.\n * Props to Dean Edwards' addEvent library for many of the ideas.\n */\njQuery.event = {\n\n\tglobal: {},\n\n\tadd: function( elem, types, handler, data, selector ) {\n\n\t\tvar handleObjIn, eventHandle, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = data_priv.get( elem );\n\n\t\t// Don't attach events to noData or text/comment nodes (but allow plain objects)\n\t\tif ( !elemData ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Caller can pass in an object of custom data in lieu of the handler\n\t\tif ( handler.handler ) {\n\t\t\thandleObjIn = handler;\n\t\t\thandler = handleObjIn.handler;\n\t\t\tselector = handleObjIn.selector;\n\t\t}\n\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\n\t\tif ( !handler.guid ) {\n\t\t\thandler.guid = jQuery.guid++;\n\t\t}\n\n\t\t// Init the element's event structure and main handler, if this is the first\n\t\tif ( !(events = elemData.events) ) {\n\t\t\tevents = elemData.events = {};\n\t\t}\n\t\tif ( !(eventHandle = elemData.handle) ) {\n\t\t\teventHandle = elemData.handle = function( e ) {\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\n\t\t\t\t// when an event is called after a page has unloaded\n\t\t\t\treturn typeof jQuery !== strundefined && jQuery.event.triggered !== e.type ?\n\t\t\t\t\tjQuery.event.dispatch.apply( elem, arguments ) : undefined;\n\t\t\t};\n\t\t}\n\n\t\t// Handle multiple events separated by a space\n\t\ttypes = ( types || \"\" ).match( rnotwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[t] ) || [];\n\t\t\ttype = origType = tmp[1];\n\t\t\tnamespaces = ( tmp[2] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// There *must* be a type, no attaching namespace-only handlers\n\t\t\tif ( !type ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If event changes its type, use the special event handlers for the changed type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// If selector defined, determine special event api type, otherwise given type\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\n\t\t\t// Update special based on newly reset type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// handleObj is passed to all event handlers\n\t\t\thandleObj = jQuery.extend({\n\t\t\t\ttype: type,\n\t\t\t\torigType: origType,\n\t\t\t\tdata: data,\n\t\t\t\thandler: handler,\n\t\t\t\tguid: handler.guid,\n\t\t\t\tselector: selector,\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n\t\t\t\tnamespace: namespaces.join(\".\")\n\t\t\t}, handleObjIn );\n\n\t\t\t// Init the event handler queue if we're the first\n\t\t\tif ( !(handlers = events[ type ]) ) {\n\t\t\t\thandlers = events[ type ] = [];\n\t\t\t\thandlers.delegateCount = 0;\n\n\t\t\t\t// Only use addEventListener if the special events handler returns false\n\t\t\t\tif ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n\t\t\t\t\tif ( elem.addEventListener ) {\n\t\t\t\t\t\telem.addEventListener( type, eventHandle, false );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( special.add ) {\n\t\t\t\tspecial.add.call( elem, handleObj );\n\n\t\t\t\tif ( !handleObj.handler.guid ) {\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to the element's handler list, delegates in front\n\t\t\tif ( selector ) {\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n\t\t\t} else {\n\t\t\t\thandlers.push( handleObj );\n\t\t\t}\n\n\t\t\t// Keep track of which events have ever been used, for event optimization\n\t\t\tjQuery.event.global[ type ] = true;\n\t\t}\n\n\t},\n\n\t// Detach an event or set of events from an element\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\n\n\t\tvar j, origCount, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = data_priv.hasData( elem ) && data_priv.get( elem );\n\n\t\tif ( !elemData || !(events = elemData.events) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Once for each type.namespace in types; type may be omitted\n\t\ttypes = ( types || \"\" ).match( rnotwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[t] ) || [];\n\t\t\ttype = origType = tmp[1];\n\t\t\tnamespaces = ( tmp[2] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\n\t\t\tif ( !type ) {\n\t\t\t\tfor ( type in events ) {\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\t\t\thandlers = events[ type ] || [];\n\t\t\ttmp = tmp[2] && new RegExp( \"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\" );\n\n\t\t\t// Remove matching events\n\t\t\torigCount = j = handlers.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\thandleObj = handlers[ j ];\n\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n\t\t\t\t\t( !selector || selector === handleObj.selector || selector === \"**\" && handleObj.selector ) ) {\n\t\t\t\t\thandlers.splice( j, 1 );\n\n\t\t\t\t\tif ( handleObj.selector ) {\n\t\t\t\t\t\thandlers.delegateCount--;\n\t\t\t\t\t}\n\t\t\t\t\tif ( special.remove ) {\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\n\t\t\tif ( origCount && !handlers.length ) {\n\t\t\t\tif ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n\t\t\t\t}\n\n\t\t\t\tdelete events[ type ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove the expando if it's no longer used\n\t\tif ( jQuery.isEmptyObject( events ) ) {\n\t\t\tdelete elemData.handle;\n\t\t\tdata_priv.remove( elem, \"events\" );\n\t\t}\n\t},\n\n\ttrigger: function( event, data, elem, onlyHandlers ) {\n\n\t\tvar i, cur, tmp, bubbleType, ontype, handle, special,\n\t\t\teventPath = [ elem || document ],\n\t\t\ttype = hasOwn.call( event, \"type\" ) ? event.type : event,\n\t\t\tnamespaces = hasOwn.call( event, \"namespace\" ) ? event.namespace.split(\".\") : [];\n\n\t\tcur = tmp = elem = elem || document;\n\n\t\t// Don't do events on text and comment nodes\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( type.indexOf(\".\") >= 0 ) {\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\n\t\t\tnamespaces = type.split(\".\");\n\t\t\ttype = namespaces.shift();\n\t\t\tnamespaces.sort();\n\t\t}\n\t\tontype = type.indexOf(\":\") < 0 && \"on\" + type;\n\n\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\n\t\tevent = event[ jQuery.expando ] ?\n\t\t\tevent :\n\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n\n\t\t// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\n\t\tevent.namespace = namespaces.join(\".\");\n\t\tevent.namespace_re = event.namespace ?\n\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\" ) :\n\t\t\tnull;\n\n\t\t// Clean up the event in case it is being reused\n\t\tevent.result = undefined;\n\t\tif ( !event.target ) {\n\t\t\tevent.target = elem;\n\t\t}\n\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\n\t\tdata = data == null ?\n\t\t\t[ event ] :\n\t\t\tjQuery.makeArray( data, [ event ] );\n\n\t\t// Allow special events to draw outside the lines\n\t\tspecial = jQuery.event.special[ type ] || {};\n\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine event propagation path in advance, per W3C events spec (#9951)\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\n\t\tif ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {\n\n\t\t\tbubbleType = special.delegateType || type;\n\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n\t\t\t\teventPath.push( cur );\n\t\t\t\ttmp = cur;\n\t\t\t}\n\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\n\t\t\tif ( tmp === (elem.ownerDocument || document) ) {\n\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n\t\t\t}\n\t\t}\n\n\t\t// Fire handlers on the event path\n\t\ti = 0;\n\t\twhile ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {\n\n\t\t\tevent.type = i > 1 ?\n\t\t\t\tbubbleType :\n\t\t\t\tspecial.bindType || type;\n\n\t\t\t// jQuery handler\n\t\t\thandle = ( data_priv.get( cur, \"events\" ) || {} )[ event.type ] && data_priv.get( cur, \"handle\" );\n\t\t\tif ( handle ) {\n\t\t\t\thandle.apply( cur, data );\n\t\t\t}\n\n\t\t\t// Native handler\n\t\t\thandle = ontype && cur[ ontype ];\n\t\t\tif ( handle && handle.apply && jQuery.acceptData( cur ) ) {\n\t\t\t\tevent.result = handle.apply( cur, data );\n\t\t\t\tif ( event.result === false ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tevent.type = type;\n\n\t\t// If nobody prevented the default action, do it now\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n\n\t\t\tif ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&\n\t\t\t\tjQuery.acceptData( elem ) ) {\n\n\t\t\t\t// Call a native DOM method on the target with the same name name as the event.\n\t\t\t\t// Don't do default actions on window, that's where global variables be (#6170)\n\t\t\t\tif ( ontype && jQuery.isFunction( elem[ type ] ) && !jQuery.isWindow( elem ) ) {\n\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\n\t\t\t\t\ttmp = elem[ ontype ];\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\n\t\t\t\t\tjQuery.event.triggered = type;\n\t\t\t\t\telem[ type ]();\n\t\t\t\t\tjQuery.event.triggered = undefined;\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = tmp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\tdispatch: function( event ) {\n\n\t\t// Make a writable jQuery.Event from the native event object\n\t\tevent = jQuery.event.fix( event );\n\n\t\tvar i, j, ret, matched, handleObj,\n\t\t\thandlerQueue = [],\n\t\t\targs = slice.call( arguments ),\n\t\t\thandlers = ( data_priv.get( this, \"events\" ) || {} )[ event.type ] || [],\n\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\n\t\targs[0] = event;\n\t\tevent.delegateTarget = this;\n\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine handlers\n\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n\n\t\t// Run delegates first; they may want to stop propagation beneath us\n\t\ti = 0;\n\t\twhile ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {\n\t\t\tevent.currentTarget = matched.elem;\n\n\t\t\tj = 0;\n\t\t\twhile ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {\n\n\t\t\t\t// Triggered event must either 1) have no namespace, or 2) have namespace(s)\n\t\t\t\t// a subset or equal to those in the bound event (both can have no namespace).\n\t\t\t\tif ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {\n\n\t\t\t\t\tevent.handleObj = handleObj;\n\t\t\t\t\tevent.data = handleObj.data;\n\n\t\t\t\t\tret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )\n\t\t\t\t\t\t\t.apply( matched.elem, args );\n\n\t\t\t\t\tif ( ret !== undefined ) {\n\t\t\t\t\t\tif ( (event.result = ret) === false ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Call the postDispatch hook for the mapped type\n\t\tif ( special.postDispatch ) {\n\t\t\tspecial.postDispatch.call( this, event );\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\thandlers: function( event, handlers ) {\n\t\tvar i, matches, sel, handleObj,\n\t\t\thandlerQueue = [],\n\t\t\tdelegateCount = handlers.delegateCount,\n\t\t\tcur = event.target;\n\n\t\t// Find delegate handlers\n\t\t// Black-hole SVG <use> instance trees (#13180)\n\t\t// Avoid non-left-click bubbling in Firefox (#3861)\n\t\tif ( delegateCount && cur.nodeType && (!event.button || event.type !== \"click\") ) {\n\n\t\t\tfor ( ; cur !== this; cur = cur.parentNode || this ) {\n\n\t\t\t\t// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)\n\t\t\t\tif ( cur.disabled !== true || event.type !== \"click\" ) {\n\t\t\t\t\tmatches = [];\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n\t\t\t\t\t\thandleObj = handlers[ i ];\n\n\t\t\t\t\t\t// Don't conflict with Object.prototype properties (#13203)\n\t\t\t\t\t\tsel = handleObj.selector + \" \";\n\n\t\t\t\t\t\tif ( matches[ sel ] === undefined ) {\n\t\t\t\t\t\t\tmatches[ sel ] = handleObj.needsContext ?\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) >= 0 :\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( matches[ sel ] ) {\n\t\t\t\t\t\t\tmatches.push( handleObj );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( matches.length ) {\n\t\t\t\t\t\thandlerQueue.push({ elem: cur, handlers: matches });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add the remaining (directly-bound) handlers\n\t\tif ( delegateCount < handlers.length ) {\n\t\t\thandlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });\n\t\t}\n\n\t\treturn handlerQueue;\n\t},\n\n\t// Includes some event props shared by KeyEvent and MouseEvent\n\tprops: \"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),\n\n\tfixHooks: {},\n\n\tkeyHooks: {\n\t\tprops: \"char charCode key keyCode\".split(\" \"),\n\t\tfilter: function( event, original ) {\n\n\t\t\t// Add which for key events\n\t\t\tif ( event.which == null ) {\n\t\t\t\tevent.which = original.charCode != null ? original.charCode : original.keyCode;\n\t\t\t}\n\n\t\t\treturn event;\n\t\t}\n\t},\n\n\tmouseHooks: {\n\t\tprops: \"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),\n\t\tfilter: function( event, original ) {\n\t\t\tvar eventDoc, doc, body,\n\t\t\t\tbutton = original.button;\n\n\t\t\t// Calculate pageX/Y if missing and clientX/Y available\n\t\t\tif ( event.pageX == null && original.clientX != null ) {\n\t\t\t\teventDoc = event.target.ownerDocument || document;\n\t\t\t\tdoc = eventDoc.documentElement;\n\t\t\t\tbody = eventDoc.body;\n\n\t\t\t\tevent.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );\n\t\t\t\tevent.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );\n\t\t\t}\n\n\t\t\t// Add which for click: 1 === left; 2 === middle; 3 === right\n\t\t\t// Note: button is not normalized, so don't use it\n\t\t\tif ( !event.which && button !== undefined ) {\n\t\t\t\tevent.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );\n\t\t\t}\n\n\t\t\treturn event;\n\t\t}\n\t},\n\n\tfix: function( event ) {\n\t\tif ( event[ jQuery.expando ] ) {\n\t\t\treturn event;\n\t\t}\n\n\t\t// Create a writable copy of the event object and normalize some properties\n\t\tvar i, prop, copy,\n\t\t\ttype = event.type,\n\t\t\toriginalEvent = event,\n\t\t\tfixHook = this.fixHooks[ type ];\n\n\t\tif ( !fixHook ) {\n\t\t\tthis.fixHooks[ type ] = fixHook =\n\t\t\t\trmouseEvent.test( type ) ? this.mouseHooks :\n\t\t\t\trkeyEvent.test( type ) ? this.keyHooks :\n\t\t\t\t{};\n\t\t}\n\t\tcopy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;\n\n\t\tevent = new jQuery.Event( originalEvent );\n\n\t\ti = copy.length;\n\t\twhile ( i-- ) {\n\t\t\tprop = copy[ i ];\n\t\t\tevent[ prop ] = originalEvent[ prop ];\n\t\t}\n\n\t\t// Support: Cordova 2.5 (WebKit) (#13255)\n\t\t// All events should have a target; Cordova deviceready doesn't\n\t\tif ( !event.target ) {\n\t\t\tevent.target = document;\n\t\t}\n\n\t\t// Support: Safari 6.0+, Chrome<28\n\t\t// Target should not be a text node (#504, #13143)\n\t\tif ( event.target.nodeType === 3 ) {\n\t\t\tevent.target = event.target.parentNode;\n\t\t}\n\n\t\treturn fixHook.filter ? fixHook.filter( event, originalEvent ) : event;\n\t},\n\n\tspecial: {\n\t\tload: {\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\n\t\t\tnoBubble: true\n\t\t},\n\t\tfocus: {\n\t\t\t// Fire native event if possible so blur/focus sequence is correct\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this !== safeActiveElement() && this.focus ) {\n\t\t\t\t\tthis.focus();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusin\"\n\t\t},\n\t\tblur: {\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this === safeActiveElement() && this.blur ) {\n\t\t\t\t\tthis.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusout\"\n\t\t},\n\t\tclick: {\n\t\t\t// For checkbox, fire native event so checked state will be right\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this.type === \"checkbox\" && this.click && jQuery.nodeName( this, \"input\" ) ) {\n\t\t\t\t\tthis.click();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// For cross-browser consistency, don't fire native .click() on links\n\t\t\t_default: function( event ) {\n\t\t\t\treturn jQuery.nodeName( event.target, \"a\" );\n\t\t\t}\n\t\t},\n\n\t\tbeforeunload: {\n\t\t\tpostDispatch: function( event ) {\n\n\t\t\t\t// Support: Firefox 20+\n\t\t\t\t// Firefox doesn't alert if the returnValue field is not set.\n\t\t\t\tif ( event.result !== undefined && event.originalEvent ) {\n\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tsimulate: function( type, elem, event, bubble ) {\n\t\t// Piggyback on a donor event to simulate a different one.\n\t\t// Fake originalEvent to avoid donor's stopPropagation, but if the\n\t\t// simulated event prevents default then we do the same on the donor.\n\t\tvar e = jQuery.extend(\n\t\t\tnew jQuery.Event(),\n\t\t\tevent,\n\t\t\t{\n\t\t\t\ttype: type,\n\t\t\t\tisSimulated: true,\n\t\t\t\toriginalEvent: {}\n\t\t\t}\n\t\t);\n\t\tif ( bubble ) {\n\t\t\tjQuery.event.trigger( e, null, elem );\n\t\t} else {\n\t\t\tjQuery.event.dispatch.call( elem, e );\n\t\t}\n\t\tif ( e.isDefaultPrevented() ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n};\n\njQuery.removeEvent = function( elem, type, handle ) {\n\tif ( elem.removeEventListener ) {\n\t\telem.removeEventListener( type, handle, false );\n\t}\n};\n\njQuery.Event = function( src, props ) {\n\t// Allow instantiation without the 'new' keyword\n\tif ( !(this instanceof jQuery.Event) ) {\n\t\treturn new jQuery.Event( src, props );\n\t}\n\n\t// Event object\n\tif ( src && src.type ) {\n\t\tthis.originalEvent = src;\n\t\tthis.type = src.type;\n\n\t\t// Events bubbling up the document may have been marked as prevented\n\t\t// by a handler lower down the tree; reflect the correct value.\n\t\tthis.isDefaultPrevented = src.defaultPrevented ||\n\t\t\t\tsrc.defaultPrevented === undefined &&\n\t\t\t\t// Support: Android<4.0\n\t\t\t\tsrc.returnValue === false ?\n\t\t\treturnTrue :\n\t\t\treturnFalse;\n\n\t// Event type\n\t} else {\n\t\tthis.type = src;\n\t}\n\n\t// Put explicitly provided properties onto the event object\n\tif ( props ) {\n\t\tjQuery.extend( this, props );\n\t}\n\n\t// Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = src && src.timeStamp || jQuery.now();\n\n\t// Mark it as fixed\n\tthis[ jQuery.expando ] = true;\n};\n\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\njQuery.Event.prototype = {\n\tisDefaultPrevented: returnFalse,\n\tisPropagationStopped: returnFalse,\n\tisImmediatePropagationStopped: returnFalse,\n\n\tpreventDefault: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isDefaultPrevented = returnTrue;\n\n\t\tif ( e && e.preventDefault ) {\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tstopPropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isPropagationStopped = returnTrue;\n\n\t\tif ( e && e.stopPropagation ) {\n\t\t\te.stopPropagation();\n\t\t}\n\t},\n\tstopImmediatePropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isImmediatePropagationStopped = returnTrue;\n\n\t\tif ( e && e.stopImmediatePropagation ) {\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\n\t\tthis.stopPropagation();\n\t}\n};\n\n// Create mouseenter/leave events using mouseover/out and event-time checks\n// Support: Chrome 15+\njQuery.each({\n\tmouseenter: \"mouseover\",\n\tmouseleave: \"mouseout\",\n\tpointerenter: \"pointerover\",\n\tpointerleave: \"pointerout\"\n}, function( orig, fix ) {\n\tjQuery.event.special[ orig ] = {\n\t\tdelegateType: fix,\n\t\tbindType: fix,\n\n\t\thandle: function( event ) {\n\t\t\tvar ret,\n\t\t\t\ttarget = this,\n\t\t\t\trelated = event.relatedTarget,\n\t\t\t\thandleObj = event.handleObj;\n\n\t\t\t// For mousenter/leave call the handler if related is outside the target.\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\n\t\t\tif ( !related || (related !== target && !jQuery.contains( target, related )) ) {\n\t\t\t\tevent.type = handleObj.origType;\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\n\t\t\t\tevent.type = fix;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n});\n\n// Support: Firefox, Chrome, Safari\n// Create \"bubbling\" focus and blur events\nif ( !support.focusinBubbles ) {\n\tjQuery.each({ focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\n\n\t\t// Attach a single capturing handler on the document while someone wants focusin/focusout\n\t\tvar handler = function( event ) {\n\t\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );\n\t\t\t};\n\n\t\tjQuery.event.special[ fix ] = {\n\t\t\tsetup: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = data_priv.access( doc, fix );\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.addEventListener( orig, handler, true );\n\t\t\t\t}\n\t\t\t\tdata_priv.access( doc, fix, ( attaches || 0 ) + 1 );\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = data_priv.access( doc, fix ) - 1;\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.removeEventListener( orig, handler, true );\n\t\t\t\t\tdata_priv.remove( doc, fix );\n\n\t\t\t\t} else {\n\t\t\t\t\tdata_priv.access( doc, fix, attaches );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t});\n}\n\njQuery.fn.extend({\n\n\ton: function( types, selector, data, fn, /*INTERNAL*/ one ) {\n\t\tvar origFn, type;\n\n\t\t// Types can be a map of types/handlers\n\t\tif ( typeof types === \"object\" ) {\n\t\t\t// ( types-Object, selector, data )\n\t\t\tif ( typeof selector !== \"string\" ) {\n\t\t\t\t// ( types-Object, data )\n\t\t\t\tdata = data || selector;\n\t\t\t\tselector = undefined;\n\t\t\t}\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.on( type, selector, data, types[ type ], one );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\tif ( data == null && fn == null ) {\n\t\t\t// ( types, fn )\n\t\t\tfn = selector;\n\t\t\tdata = selector = undefined;\n\t\t} else if ( fn == null ) {\n\t\t\tif ( typeof selector === \"string\" ) {\n\t\t\t\t// ( types, selector, fn )\n\t\t\t\tfn = data;\n\t\t\t\tdata = undefined;\n\t\t\t} else {\n\t\t\t\t// ( types, data, fn )\n\t\t\t\tfn = data;\n\t\t\t\tdata = selector;\n\t\t\t\tselector = undefined;\n\t\t\t}\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t} else if ( !fn ) {\n\t\t\treturn this;\n\t\t}\n\n\t\tif ( one === 1 ) {\n\t\t\torigFn = fn;\n\t\t\tfn = function( event ) {\n\t\t\t\t// Can use an empty set, since event contains the info\n\t\t\t\tjQuery().off( event );\n\t\t\t\treturn origFn.apply( this, arguments );\n\t\t\t};\n\t\t\t// Use same guid so caller can remove using origFn\n\t\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.add( this, types, fn, data, selector );\n\t\t});\n\t},\n\tone: function( types, selector, data, fn ) {\n\t\treturn this.on( types, selector, data, fn, 1 );\n\t},\n\toff: function( types, selector, fn ) {\n\t\tvar handleObj, type;\n\t\tif ( types && types.preventDefault && types.handleObj ) {\n\t\t\t// ( event )  dispatched jQuery.Event\n\t\t\thandleObj = types.handleObj;\n\t\t\tjQuery( types.delegateTarget ).off(\n\t\t\t\thandleObj.namespace ? handleObj.origType + \".\" + handleObj.namespace : handleObj.origType,\n\t\t\t\thandleObj.selector,\n\t\t\t\thandleObj.handler\n\t\t\t);\n\t\t\treturn this;\n\t\t}\n\t\tif ( typeof types === \"object\" ) {\n\t\t\t// ( types-object [, selector] )\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.off( type, selector, types[ type ] );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif ( selector === false || typeof selector === \"function\" ) {\n\t\t\t// ( types [, fn] )\n\t\t\tfn = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t}\n\t\treturn this.each(function() {\n\t\t\tjQuery.event.remove( this, types, fn, selector );\n\t\t});\n\t},\n\n\ttrigger: function( type, data ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.event.trigger( type, data, this );\n\t\t});\n\t},\n\ttriggerHandler: function( type, data ) {\n\t\tvar elem = this[0];\n\t\tif ( elem ) {\n\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n\t\t}\n\t}\n});\n\n\nvar\n\trxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,\n\trtagName = /<([\\w:]+)/,\n\trhtml = /<|&#?\\w+;/,\n\trnoInnerhtml = /<(?:script|style|link)/i,\n\t// checked=\"checked\" or checked\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\n\trscriptType = /^$|\\/(?:java|ecma)script/i,\n\trscriptTypeMasked = /^true\\/(.*)/,\n\trcleanScript = /^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,\n\n\t// We have to close these tags to support XHTML (#13200)\n\twrapMap = {\n\n\t\t// Support: IE9\n\t\toption: [ 1, \"<select multiple='multiple'>\", \"</select>\" ],\n\n\t\tthead: [ 1, \"<table>\", \"</table>\" ],\n\t\tcol: [ 2, \"<table><colgroup>\", \"</colgroup></table>\" ],\n\t\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\n\t\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\n\n\t\t_default: [ 0, \"\", \"\" ]\n\t};\n\n// Support: IE9\nwrapMap.optgroup = wrapMap.option;\n\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\nwrapMap.th = wrapMap.td;\n\n// Support: 1.x compatibility\n// Manipulating tables requires a tbody\nfunction manipulationTarget( elem, content ) {\n\treturn jQuery.nodeName( elem, \"table\" ) &&\n\t\tjQuery.nodeName( content.nodeType !== 11 ? content : content.firstChild, \"tr\" ) ?\n\n\t\telem.getElementsByTagName(\"tbody\")[0] ||\n\t\t\telem.appendChild( elem.ownerDocument.createElement(\"tbody\") ) :\n\t\telem;\n}\n\n// Replace/restore the type attribute of script elements for safe DOM manipulation\nfunction disableScript( elem ) {\n\telem.type = (elem.getAttribute(\"type\") !== null) + \"/\" + elem.type;\n\treturn elem;\n}\nfunction restoreScript( elem ) {\n\tvar match = rscriptTypeMasked.exec( elem.type );\n\n\tif ( match ) {\n\t\telem.type = match[ 1 ];\n\t} else {\n\t\telem.removeAttribute(\"type\");\n\t}\n\n\treturn elem;\n}\n\n// Mark scripts as having already been evaluated\nfunction setGlobalEval( elems, refElements ) {\n\tvar i = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\tdata_priv.set(\n\t\t\telems[ i ], \"globalEval\", !refElements || data_priv.get( refElements[ i ], \"globalEval\" )\n\t\t);\n\t}\n}\n\nfunction cloneCopyEvent( src, dest ) {\n\tvar i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;\n\n\tif ( dest.nodeType !== 1 ) {\n\t\treturn;\n\t}\n\n\t// 1. Copy private data: events, handlers, etc.\n\tif ( data_priv.hasData( src ) ) {\n\t\tpdataOld = data_priv.access( src );\n\t\tpdataCur = data_priv.set( dest, pdataOld );\n\t\tevents = pdataOld.events;\n\n\t\tif ( events ) {\n\t\t\tdelete pdataCur.handle;\n\t\t\tpdataCur.events = {};\n\n\t\t\tfor ( type in events ) {\n\t\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n\t\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// 2. Copy user data\n\tif ( data_user.hasData( src ) ) {\n\t\tudataOld = data_user.access( src );\n\t\tudataCur = jQuery.extend( {}, udataOld );\n\n\t\tdata_user.set( dest, udataCur );\n\t}\n}\n\nfunction getAll( context, tag ) {\n\tvar ret = context.getElementsByTagName ? context.getElementsByTagName( tag || \"*\" ) :\n\t\t\tcontext.querySelectorAll ? context.querySelectorAll( tag || \"*\" ) :\n\t\t\t[];\n\n\treturn tag === undefined || tag && jQuery.nodeName( context, tag ) ?\n\t\tjQuery.merge( [ context ], ret ) :\n\t\tret;\n}\n\n// Fix IE bugs, see support tests\nfunction fixInput( src, dest ) {\n\tvar nodeName = dest.nodeName.toLowerCase();\n\n\t// Fails to persist the checked state of a cloned checkbox or radio button.\n\tif ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\n\t\tdest.checked = src.checked;\n\n\t// Fails to return the selected option to the default selected state when cloning options\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n\t\tdest.defaultValue = src.defaultValue;\n\t}\n}\n\njQuery.extend({\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n\t\tvar i, l, srcElements, destElements,\n\t\t\tclone = elem.cloneNode( true ),\n\t\t\tinPage = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t// Fix IE cloning issues\n\t\tif ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&\n\t\t\t\t!jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2\n\t\t\tdestElements = getAll( clone );\n\t\t\tsrcElements = getAll( elem );\n\n\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\tfixInput( srcElements[ i ], destElements[ i ] );\n\t\t\t}\n\t\t}\n\n\t\t// Copy the events from the original to the clone\n\t\tif ( dataAndEvents ) {\n\t\t\tif ( deepDataAndEvents ) {\n\t\t\t\tsrcElements = srcElements || getAll( elem );\n\t\t\t\tdestElements = destElements || getAll( clone );\n\n\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\t\tcloneCopyEvent( srcElements[ i ], destElements[ i ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloneCopyEvent( elem, clone );\n\t\t\t}\n\t\t}\n\n\t\t// Preserve script evaluation history\n\t\tdestElements = getAll( clone, \"script\" );\n\t\tif ( destElements.length > 0 ) {\n\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n\t\t}\n\n\t\t// Return the cloned set\n\t\treturn clone;\n\t},\n\n\tbuildFragment: function( elems, context, scripts, selection ) {\n\t\tvar elem, tmp, tag, wrap, contains, j,\n\t\t\tfragment = context.createDocumentFragment(),\n\t\t\tnodes = [],\n\t\t\ti = 0,\n\t\t\tl = elems.length;\n\n\t\tfor ( ; i < l; i++ ) {\n\t\t\telem = elems[ i ];\n\n\t\t\tif ( elem || elem === 0 ) {\n\n\t\t\t\t// Add nodes directly\n\t\t\t\tif ( jQuery.type( elem ) === \"object\" ) {\n\t\t\t\t\t// Support: QtWebKit, PhantomJS\n\t\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n\n\t\t\t\t// Convert non-html into a text node\n\t\t\t\t} else if ( !rhtml.test( elem ) ) {\n\t\t\t\t\tnodes.push( context.createTextNode( elem ) );\n\n\t\t\t\t// Convert html into DOM nodes\n\t\t\t\t} else {\n\t\t\t\t\ttmp = tmp || fragment.appendChild( context.createElement(\"div\") );\n\n\t\t\t\t\t// Deserialize a standard representation\n\t\t\t\t\ttag = ( rtagName.exec( elem ) || [ \"\", \"\" ] )[ 1 ].toLowerCase();\n\t\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n\t\t\t\t\ttmp.innerHTML = wrap[ 1 ] + elem.replace( rxhtmlTag, \"<$1></$2>\" ) + wrap[ 2 ];\n\n\t\t\t\t\t// Descend through wrappers to the right content\n\t\t\t\t\tj = wrap[ 0 ];\n\t\t\t\t\twhile ( j-- ) {\n\t\t\t\t\t\ttmp = tmp.lastChild;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Support: QtWebKit, PhantomJS\n\t\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n\n\t\t\t\t\t// Remember the top-level container\n\t\t\t\t\ttmp = fragment.firstChild;\n\n\t\t\t\t\t// Ensure the created nodes are orphaned (#12392)\n\t\t\t\t\ttmp.textContent = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Remove wrapper from fragment\n\t\tfragment.textContent = \"\";\n\n\t\ti = 0;\n\t\twhile ( (elem = nodes[ i++ ]) ) {\n\n\t\t\t// #4087 - If origin and destination elements are the same, and this is\n\t\t\t// that element, do not do anything\n\t\t\tif ( selection && jQuery.inArray( elem, selection ) !== -1 ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tcontains = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t\t// Append to fragment\n\t\t\ttmp = getAll( fragment.appendChild( elem ), \"script\" );\n\n\t\t\t// Preserve script evaluation history\n\t\t\tif ( contains ) {\n\t\t\t\tsetGlobalEval( tmp );\n\t\t\t}\n\n\t\t\t// Capture executables\n\t\t\tif ( scripts ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (elem = tmp[ j++ ]) ) {\n\t\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n\t\t\t\t\t\tscripts.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn fragment;\n\t},\n\n\tcleanData: function( elems ) {\n\t\tvar data, elem, type, key,\n\t\t\tspecial = jQuery.event.special,\n\t\t\ti = 0;\n\n\t\tfor ( ; (elem = elems[ i ]) !== undefined; i++ ) {\n\t\t\tif ( jQuery.acceptData( elem ) ) {\n\t\t\t\tkey = elem[ data_priv.expando ];\n\n\t\t\t\tif ( key && (data = data_priv.cache[ key ]) ) {\n\t\t\t\t\tif ( data.events ) {\n\t\t\t\t\t\tfor ( type in data.events ) {\n\t\t\t\t\t\t\tif ( special[ type ] ) {\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( data_priv.cache[ key ] ) {\n\t\t\t\t\t\t// Discard any remaining `private` data\n\t\t\t\t\t\tdelete data_priv.cache[ key ];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Discard any remaining `user` data\n\t\t\tdelete data_user.cache[ elem[ data_user.expando ] ];\n\t\t}\n\t}\n});\n\njQuery.fn.extend({\n\ttext: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\treturn value === undefined ?\n\t\t\t\tjQuery.text( this ) :\n\t\t\t\tthis.empty().each(function() {\n\t\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}, null, value, arguments.length );\n\t},\n\n\tappend: function() {\n\t\treturn this.domManip( arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.appendChild( elem );\n\t\t\t}\n\t\t});\n\t},\n\n\tprepend: function() {\n\t\treturn this.domManip( arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.insertBefore( elem, target.firstChild );\n\t\t\t}\n\t\t});\n\t},\n\n\tbefore: function() {\n\t\treturn this.domManip( arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\n\t\t\t}\n\t\t});\n\t},\n\n\tafter: function() {\n\t\treturn this.domManip( arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n\t\t\t}\n\t\t});\n\t},\n\n\tremove: function( selector, keepData /* Internal Use Only */ ) {\n\t\tvar elem,\n\t\t\telems = selector ? jQuery.filter( selector, this ) : this,\n\t\t\ti = 0;\n\n\t\tfor ( ; (elem = elems[i]) != null; i++ ) {\n\t\t\tif ( !keepData && elem.nodeType === 1 ) {\n\t\t\t\tjQuery.cleanData( getAll( elem ) );\n\t\t\t}\n\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\tif ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\t\t\tsetGlobalEval( getAll( elem, \"script\" ) );\n\t\t\t\t}\n\t\t\t\telem.parentNode.removeChild( elem );\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tempty: function() {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; (elem = this[i]) != null; i++ ) {\n\t\t\tif ( elem.nodeType === 1 ) {\n\n\t\t\t\t// Prevent memory leaks\n\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\n\t\t\t\t// Remove any remaining nodes\n\t\t\t\telem.textContent = \"\";\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n\n\t\treturn this.map(function() {\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n\t\t});\n\t},\n\n\thtml: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\tvar elem = this[ 0 ] || {},\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length;\n\n\t\t\tif ( value === undefined && elem.nodeType === 1 ) {\n\t\t\t\treturn elem.innerHTML;\n\t\t\t}\n\n\t\t\t// See if we can take a shortcut and just use innerHTML\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\n\n\t\t\t\tvalue = value.replace( rxhtmlTag, \"<$1></$2>\" );\n\n\t\t\t\ttry {\n\t\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\t\telem = this[ i ] || {};\n\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t\t\t\t\telem.innerHTML = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telem = 0;\n\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\n\t\t\t\t} catch( e ) {}\n\t\t\t}\n\n\t\t\tif ( elem ) {\n\t\t\t\tthis.empty().append( value );\n\t\t\t}\n\t\t}, null, value, arguments.length );\n\t},\n\n\treplaceWith: function() {\n\t\tvar arg = arguments[ 0 ];\n\n\t\t// Make the changes, replacing each context element with the new content\n\t\tthis.domManip( arguments, function( elem ) {\n\t\t\targ = this.parentNode;\n\n\t\t\tjQuery.cleanData( getAll( this ) );\n\n\t\t\tif ( arg ) {\n\t\t\t\targ.replaceChild( elem, this );\n\t\t\t}\n\t\t});\n\n\t\t// Force removal if there was no new content (e.g., from empty arguments)\n\t\treturn arg && (arg.length || arg.nodeType) ? this : this.remove();\n\t},\n\n\tdetach: function( selector ) {\n\t\treturn this.remove( selector, true );\n\t},\n\n\tdomManip: function( args, callback ) {\n\n\t\t// Flatten any nested arrays\n\t\targs = concat.apply( [], args );\n\n\t\tvar fragment, first, scripts, hasScripts, node, doc,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tset = this,\n\t\t\tiNoClone = l - 1,\n\t\t\tvalue = args[ 0 ],\n\t\t\tisFunction = jQuery.isFunction( value );\n\n\t\t// We can't cloneNode fragments that contain checked, in WebKit\n\t\tif ( isFunction ||\n\t\t\t\t( l > 1 && typeof value === \"string\" &&\n\t\t\t\t\t!support.checkClone && rchecked.test( value ) ) ) {\n\t\t\treturn this.each(function( index ) {\n\t\t\t\tvar self = set.eq( index );\n\t\t\t\tif ( isFunction ) {\n\t\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\n\t\t\t\t}\n\t\t\t\tself.domManip( args, callback );\n\t\t\t});\n\t\t}\n\n\t\tif ( l ) {\n\t\t\tfragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, this );\n\t\t\tfirst = fragment.firstChild;\n\n\t\t\tif ( fragment.childNodes.length === 1 ) {\n\t\t\t\tfragment = first;\n\t\t\t}\n\n\t\t\tif ( first ) {\n\t\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n\t\t\t\thasScripts = scripts.length;\n\n\t\t\t\t// Use the original fragment for the last item instead of the first because it can end up\n\t\t\t\t// being emptied incorrectly in certain situations (#8070).\n\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\tnode = fragment;\n\n\t\t\t\t\tif ( i !== iNoClone ) {\n\t\t\t\t\t\tnode = jQuery.clone( node, true, true );\n\n\t\t\t\t\t\t// Keep references to cloned scripts for later restoration\n\t\t\t\t\t\tif ( hasScripts ) {\n\t\t\t\t\t\t\t// Support: QtWebKit\n\t\t\t\t\t\t\t// jQuery.merge because push.apply(_, arraylike) throws\n\t\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback.call( this[ i ], node, i );\n\t\t\t\t}\n\n\t\t\t\tif ( hasScripts ) {\n\t\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n\n\t\t\t\t\t// Reenable scripts\n\t\t\t\t\tjQuery.map( scripts, restoreScript );\n\n\t\t\t\t\t// Evaluate executable scripts on first document insertion\n\t\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n\t\t\t\t\t\tnode = scripts[ i ];\n\t\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n\t\t\t\t\t\t\t!data_priv.access( node, \"globalEval\" ) && jQuery.contains( doc, node ) ) {\n\n\t\t\t\t\t\t\tif ( node.src ) {\n\t\t\t\t\t\t\t\t// Optional AJAX dependency, but won't run scripts if not present\n\t\t\t\t\t\t\t\tif ( jQuery._evalUrl ) {\n\t\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.globalEval( node.textContent.replace( rcleanScript, \"\" ) );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n});\n\njQuery.each({\n\tappendTo: \"append\",\n\tprependTo: \"prepend\",\n\tinsertBefore: \"before\",\n\tinsertAfter: \"after\",\n\treplaceAll: \"replaceWith\"\n}, function( name, original ) {\n\tjQuery.fn[ name ] = function( selector ) {\n\t\tvar elems,\n\t\t\tret = [],\n\t\t\tinsert = jQuery( selector ),\n\t\t\tlast = insert.length - 1,\n\t\t\ti = 0;\n\n\t\tfor ( ; i <= last; i++ ) {\n\t\t\telems = i === last ? this : this.clone( true );\n\t\t\tjQuery( insert[ i ] )[ original ]( elems );\n\n\t\t\t// Support: QtWebKit\n\t\t\t// .get() because push.apply(_, arraylike) throws\n\t\t\tpush.apply( ret, elems.get() );\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n});\n\n\nvar iframe,\n\telemdisplay = {};\n\n/**\n * Retrieve the actual display of a element\n * @param {String} name nodeName of the element\n * @param {Object} doc Document object\n */\n// Called only from within defaultDisplay\nfunction actualDisplay( name, doc ) {\n\tvar style,\n\t\telem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),\n\n\t\t// getDefaultComputedStyle might be reliably used only on attached element\n\t\tdisplay = window.getDefaultComputedStyle && ( style = window.getDefaultComputedStyle( elem[ 0 ] ) ) ?\n\n\t\t\t// Use of this method is a temporary fix (more like optimization) until something better comes along,\n\t\t\t// since it was removed from specification and supported only in FF\n\t\t\tstyle.display : jQuery.css( elem[ 0 ], \"display\" );\n\n\t// We don't have any data stored on the element,\n\t// so use \"detach\" method as fast way to get rid of the element\n\telem.detach();\n\n\treturn display;\n}\n\n/**\n * Try to determine the default display value of an element\n * @param {String} nodeName\n */\nfunction defaultDisplay( nodeName ) {\n\tvar doc = document,\n\t\tdisplay = elemdisplay[ nodeName ];\n\n\tif ( !display ) {\n\t\tdisplay = actualDisplay( nodeName, doc );\n\n\t\t// If the simple way fails, read from inside an iframe\n\t\tif ( display === \"none\" || !display ) {\n\n\t\t\t// Use the already-created iframe if possible\n\t\t\tiframe = (iframe || jQuery( \"<iframe frameborder='0' width='0' height='0'/>\" )).appendTo( doc.documentElement );\n\n\t\t\t// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse\n\t\t\tdoc = iframe[ 0 ].contentDocument;\n\n\t\t\t// Support: IE\n\t\t\tdoc.write();\n\t\t\tdoc.close();\n\n\t\t\tdisplay = actualDisplay( nodeName, doc );\n\t\t\tiframe.detach();\n\t\t}\n\n\t\t// Store the correct default display\n\t\telemdisplay[ nodeName ] = display;\n\t}\n\n\treturn display;\n}\nvar rmargin = (/^margin/);\n\nvar rnumnonpx = new RegExp( \"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\" );\n\nvar getStyles = function( elem ) {\n\t\t// Support: IE<=11+, Firefox<=30+ (#15098, #14150)\n\t\t// IE throws on elements created in popups\n\t\t// FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\n\t\tif ( elem.ownerDocument.defaultView.opener ) {\n\t\t\treturn elem.ownerDocument.defaultView.getComputedStyle( elem, null );\n\t\t}\n\n\t\treturn window.getComputedStyle( elem, null );\n\t};\n\n\n\nfunction curCSS( elem, name, computed ) {\n\tvar width, minWidth, maxWidth, ret,\n\t\tstyle = elem.style;\n\n\tcomputed = computed || getStyles( elem );\n\n\t// Support: IE9\n\t// getPropertyValue is only needed for .css('filter') (#12537)\n\tif ( computed ) {\n\t\tret = computed.getPropertyValue( name ) || computed[ name ];\n\t}\n\n\tif ( computed ) {\n\n\t\tif ( ret === \"\" && !jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\tret = jQuery.style( elem, name );\n\t\t}\n\n\t\t// Support: iOS < 6\n\t\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t\t// iOS < 6 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels\n\t\t// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values\n\t\tif ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {\n\n\t\t\t// Remember the original values\n\t\t\twidth = style.width;\n\t\t\tminWidth = style.minWidth;\n\t\t\tmaxWidth = style.maxWidth;\n\n\t\t\t// Put in the new values to get a computed value out\n\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n\t\t\tret = computed.width;\n\n\t\t\t// Revert the changed values\n\t\t\tstyle.width = width;\n\t\t\tstyle.minWidth = minWidth;\n\t\t\tstyle.maxWidth = maxWidth;\n\t\t}\n\t}\n\n\treturn ret !== undefined ?\n\t\t// Support: IE\n\t\t// IE returns zIndex value as an integer.\n\t\tret + \"\" :\n\t\tret;\n}\n\n\nfunction addGetHookIf( conditionFn, hookFn ) {\n\t// Define the hook, we'll check on the first run if it's really needed.\n\treturn {\n\t\tget: function() {\n\t\t\tif ( conditionFn() ) {\n\t\t\t\t// Hook not needed (or it's not possible to use it due\n\t\t\t\t// to missing dependency), remove it.\n\t\t\t\tdelete this.get;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Hook needed; redefine it so that the support test is not executed again.\n\t\t\treturn (this.get = hookFn).apply( this, arguments );\n\t\t}\n\t};\n}\n\n\n(function() {\n\tvar pixelPositionVal, boxSizingReliableVal,\n\t\tdocElem = document.documentElement,\n\t\tcontainer = document.createElement( \"div\" ),\n\t\tdiv = document.createElement( \"div\" );\n\n\tif ( !div.style ) {\n\t\treturn;\n\t}\n\n\t// Support: IE9-11+\n\t// Style of cloned element affects source element cloned (#8908)\n\tdiv.style.backgroundClip = \"content-box\";\n\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n\n\tcontainer.style.cssText = \"border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;\" +\n\t\t\"position:absolute\";\n\tcontainer.appendChild( div );\n\n\t// Executing both pixelPosition & boxSizingReliable tests require only one layout\n\t// so they're executed at the same time to save the second computation.\n\tfunction computePixelPositionAndBoxSizingReliable() {\n\t\tdiv.style.cssText =\n\t\t\t// Support: Firefox<29, Android 2.3\n\t\t\t// Vendor-prefix box-sizing\n\t\t\t\"-webkit-box-sizing:border-box;-moz-box-sizing:border-box;\" +\n\t\t\t\"box-sizing:border-box;display:block;margin-top:1%;top:1%;\" +\n\t\t\t\"border:1px;padding:1px;width:4px;position:absolute\";\n\t\tdiv.innerHTML = \"\";\n\t\tdocElem.appendChild( container );\n\n\t\tvar divStyle = window.getComputedStyle( div, null );\n\t\tpixelPositionVal = divStyle.top !== \"1%\";\n\t\tboxSizingReliableVal = divStyle.width === \"4px\";\n\n\t\tdocElem.removeChild( container );\n\t}\n\n\t// Support: node.js jsdom\n\t// Don't assume that getComputedStyle is a property of the global object\n\tif ( window.getComputedStyle ) {\n\t\tjQuery.extend( support, {\n\t\t\tpixelPosition: function() {\n\n\t\t\t\t// This test is executed only once but we still do memoizing\n\t\t\t\t// since we can use the boxSizingReliable pre-computing.\n\t\t\t\t// No need to check if the test was already performed, though.\n\t\t\t\tcomputePixelPositionAndBoxSizingReliable();\n\t\t\t\treturn pixelPositionVal;\n\t\t\t},\n\t\t\tboxSizingReliable: function() {\n\t\t\t\tif ( boxSizingReliableVal == null ) {\n\t\t\t\t\tcomputePixelPositionAndBoxSizingReliable();\n\t\t\t\t}\n\t\t\t\treturn boxSizingReliableVal;\n\t\t\t},\n\t\t\treliableMarginRight: function() {\n\n\t\t\t\t// Support: Android 2.3\n\t\t\t\t// Check if div with explicit width and no margin-right incorrectly\n\t\t\t\t// gets computed margin-right based on width of container. (#3333)\n\t\t\t\t// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right\n\t\t\t\t// This support function is only executed once so no memoizing is needed.\n\t\t\t\tvar ret,\n\t\t\t\t\tmarginDiv = div.appendChild( document.createElement( \"div\" ) );\n\n\t\t\t\t// Reset CSS: box-sizing; display; margin; border; padding\n\t\t\t\tmarginDiv.style.cssText = div.style.cssText =\n\t\t\t\t\t// Support: Firefox<29, Android 2.3\n\t\t\t\t\t// Vendor-prefix box-sizing\n\t\t\t\t\t\"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;\" +\n\t\t\t\t\t\"box-sizing:content-box;display:block;margin:0;border:0;padding:0\";\n\t\t\t\tmarginDiv.style.marginRight = marginDiv.style.width = \"0\";\n\t\t\t\tdiv.style.width = \"1px\";\n\t\t\t\tdocElem.appendChild( container );\n\n\t\t\t\tret = !parseFloat( window.getComputedStyle( marginDiv, null ).marginRight );\n\n\t\t\t\tdocElem.removeChild( container );\n\t\t\t\tdiv.removeChild( marginDiv );\n\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t});\n\t}\n})();\n\n\n// A method for quickly swapping in/out CSS properties to get correct calculations.\njQuery.swap = function( elem, options, callback, args ) {\n\tvar ret, name,\n\t\told = {};\n\n\t// Remember the old values, and insert the new ones\n\tfor ( name in options ) {\n\t\told[ name ] = elem.style[ name ];\n\t\telem.style[ name ] = options[ name ];\n\t}\n\n\tret = callback.apply( elem, args || [] );\n\n\t// Revert the old values\n\tfor ( name in options ) {\n\t\telem.style[ name ] = old[ name ];\n\t}\n\n\treturn ret;\n};\n\n\nvar\n\t// Swappable if display is none or starts with table except \"table\", \"table-cell\", or \"table-caption\"\n\t// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\n\trnumsplit = new RegExp( \"^(\" + pnum + \")(.*)$\", \"i\" ),\n\trrelNum = new RegExp( \"^([+-])=(\" + pnum + \")\", \"i\" ),\n\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n\tcssNormalTransform = {\n\t\tletterSpacing: \"0\",\n\t\tfontWeight: \"400\"\n\t},\n\n\tcssPrefixes = [ \"Webkit\", \"O\", \"Moz\", \"ms\" ];\n\n// Return a css property mapped to a potentially vendor prefixed property\nfunction vendorPropName( style, name ) {\n\n\t// Shortcut for names that are not vendor prefixed\n\tif ( name in style ) {\n\t\treturn name;\n\t}\n\n\t// Check for vendor prefixed names\n\tvar capName = name[0].toUpperCase() + name.slice(1),\n\t\torigName = name,\n\t\ti = cssPrefixes.length;\n\n\twhile ( i-- ) {\n\t\tname = cssPrefixes[ i ] + capName;\n\t\tif ( name in style ) {\n\t\t\treturn name;\n\t\t}\n\t}\n\n\treturn origName;\n}\n\nfunction setPositiveNumber( elem, value, subtract ) {\n\tvar matches = rnumsplit.exec( value );\n\treturn matches ?\n\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\t\tMath.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || \"px\" ) :\n\t\tvalue;\n}\n\nfunction augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {\n\tvar i = extra === ( isBorderBox ? \"border\" : \"content\" ) ?\n\t\t// If we already have the right measurement, avoid augmentation\n\t\t4 :\n\t\t// Otherwise initialize for horizontal or vertical properties\n\t\tname === \"width\" ? 1 : 0,\n\n\t\tval = 0;\n\n\tfor ( ; i < 4; i += 2 ) {\n\t\t// Both box models exclude margin, so add it if we want it\n\t\tif ( extra === \"margin\" ) {\n\t\t\tval += jQuery.css( elem, extra + cssExpand[ i ], true, styles );\n\t\t}\n\n\t\tif ( isBorderBox ) {\n\t\t\t// border-box includes padding, so remove it if we want content\n\t\t\tif ( extra === \"content\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\t\t\t}\n\n\t\t\t// At this point, extra isn't border nor margin, so remove border\n\t\t\tif ( extra !== \"margin\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t} else {\n\t\t\t// At this point, extra isn't content, so add padding\n\t\t\tval += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\n\t\t\t// At this point, extra isn't content nor padding, so add border\n\t\t\tif ( extra !== \"padding\" ) {\n\t\t\t\tval += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn val;\n}\n\nfunction getWidthOrHeight( elem, name, extra ) {\n\n\t// Start with offset property, which is equivalent to the border-box value\n\tvar valueIsBorderBox = true,\n\t\tval = name === \"width\" ? elem.offsetWidth : elem.offsetHeight,\n\t\tstyles = getStyles( elem ),\n\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\n\n\t// Some non-html elements return undefined for offsetWidth, so check for null/undefined\n\t// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285\n\t// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668\n\tif ( val <= 0 || val == null ) {\n\t\t// Fall back to computed then uncomputed css if necessary\n\t\tval = curCSS( elem, name, styles );\n\t\tif ( val < 0 || val == null ) {\n\t\t\tval = elem.style[ name ];\n\t\t}\n\n\t\t// Computed unit is not pixels. Stop here and return.\n\t\tif ( rnumnonpx.test(val) ) {\n\t\t\treturn val;\n\t\t}\n\n\t\t// Check for style in case a browser which returns unreliable values\n\t\t// for getComputedStyle silently falls back to the reliable elem.style\n\t\tvalueIsBorderBox = isBorderBox &&\n\t\t\t( support.boxSizingReliable() || val === elem.style[ name ] );\n\n\t\t// Normalize \"\", auto, and prepare for extra\n\t\tval = parseFloat( val ) || 0;\n\t}\n\n\t// Use the active box-sizing model to add/subtract irrelevant styles\n\treturn ( val +\n\t\taugmentWidthOrHeight(\n\t\t\telem,\n\t\t\tname,\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n\t\t\tvalueIsBorderBox,\n\t\t\tstyles\n\t\t)\n\t) + \"px\";\n}\n\nfunction showHide( elements, show ) {\n\tvar display, elem, hidden,\n\t\tvalues = [],\n\t\tindex = 0,\n\t\tlength = elements.length;\n\n\tfor ( ; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tvalues[ index ] = data_priv.get( elem, \"olddisplay\" );\n\t\tdisplay = elem.style.display;\n\t\tif ( show ) {\n\t\t\t// Reset the inline display of this element to learn if it is\n\t\t\t// being hidden by cascaded rules or not\n\t\t\tif ( !values[ index ] && display === \"none\" ) {\n\t\t\t\telem.style.display = \"\";\n\t\t\t}\n\n\t\t\t// Set elements which have been overridden with display: none\n\t\t\t// in a stylesheet to whatever the default browser style is\n\t\t\t// for such an element\n\t\t\tif ( elem.style.display === \"\" && isHidden( elem ) ) {\n\t\t\t\tvalues[ index ] = data_priv.access( elem, \"olddisplay\", defaultDisplay(elem.nodeName) );\n\t\t\t}\n\t\t} else {\n\t\t\thidden = isHidden( elem );\n\n\t\t\tif ( display !== \"none\" || !hidden ) {\n\t\t\t\tdata_priv.set( elem, \"olddisplay\", hidden ? display : jQuery.css( elem, \"display\" ) );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Set the display of most of the elements in a second loop\n\t// to avoid the constant reflow\n\tfor ( index = 0; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\t\tif ( !show || elem.style.display === \"none\" || elem.style.display === \"\" ) {\n\t\t\telem.style.display = show ? values[ index ] || \"\" : \"none\";\n\t\t}\n\t}\n\n\treturn elements;\n}\n\njQuery.extend({\n\n\t// Add in style property hooks for overriding the default\n\t// behavior of getting and setting a style property\n\tcssHooks: {\n\t\topacity: {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\n\t\t\t\t\t// We should always get a number back from opacity\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Don't automatically add \"px\" to these possibly-unitless properties\n\tcssNumber: {\n\t\t\"columnCount\": true,\n\t\t\"fillOpacity\": true,\n\t\t\"flexGrow\": true,\n\t\t\"flexShrink\": true,\n\t\t\"fontWeight\": true,\n\t\t\"lineHeight\": true,\n\t\t\"opacity\": true,\n\t\t\"order\": true,\n\t\t\"orphans\": true,\n\t\t\"widows\": true,\n\t\t\"zIndex\": true,\n\t\t\"zoom\": true\n\t},\n\n\t// Add in properties whose names you wish to fix before\n\t// setting or getting the value\n\tcssProps: {\n\t\t\"float\": \"cssFloat\"\n\t},\n\n\t// Get and set the style property on a DOM Node\n\tstyle: function( elem, name, value, extra ) {\n\n\t\t// Don't set styles on text and comment nodes\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure that we're working with the right name\n\t\tvar ret, type, hooks,\n\t\t\torigName = jQuery.camelCase( name ),\n\t\t\tstyle = elem.style;\n\n\t\tname = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );\n\n\t\t// Gets hook for the prefixed version, then unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// Check if we're setting a value\n\t\tif ( value !== undefined ) {\n\t\t\ttype = typeof value;\n\n\t\t\t// Convert \"+=\" or \"-=\" to relative numbers (#7345)\n\t\t\tif ( type === \"string\" && (ret = rrelNum.exec( value )) ) {\n\t\t\t\tvalue = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );\n\t\t\t\t// Fixes bug #9237\n\t\t\t\ttype = \"number\";\n\t\t\t}\n\n\t\t\t// Make sure that null and NaN values aren't set (#7116)\n\t\t\tif ( value == null || value !== value ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If a number, add 'px' to the (except for certain CSS properties)\n\t\t\tif ( type === \"number\" && !jQuery.cssNumber[ origName ] ) {\n\t\t\t\tvalue += \"px\";\n\t\t\t}\n\n\t\t\t// Support: IE9-11+\n\t\t\t// background-* props affect original clone's values\n\t\t\tif ( !support.clearCloneStyle && value === \"\" && name.indexOf( \"background\" ) === 0 ) {\n\t\t\t\tstyle[ name ] = \"inherit\";\n\t\t\t}\n\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\n\t\t\tif ( !hooks || !(\"set\" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {\n\t\t\t\tstyle[ name ] = value;\n\t\t\t}\n\n\t\t} else {\n\t\t\t// If a hook was provided get the non-computed value from there\n\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// Otherwise just get the value from the style object\n\t\t\treturn style[ name ];\n\t\t}\n\t},\n\n\tcss: function( elem, name, extra, styles ) {\n\t\tvar val, num, hooks,\n\t\t\torigName = jQuery.camelCase( name );\n\n\t\t// Make sure that we're working with the right name\n\t\tname = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );\n\n\t\t// Try prefixed name followed by the unprefixed name\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// If a hook was provided get the computed value from there\n\t\tif ( hooks && \"get\" in hooks ) {\n\t\t\tval = hooks.get( elem, true, extra );\n\t\t}\n\n\t\t// Otherwise, if a way to get the computed value exists, use that\n\t\tif ( val === undefined ) {\n\t\t\tval = curCSS( elem, name, styles );\n\t\t}\n\n\t\t// Convert \"normal\" to computed value\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n\t\t\tval = cssNormalTransform[ name ];\n\t\t}\n\n\t\t// Make numeric if forced or a qualifier was provided and val looks numeric\n\t\tif ( extra === \"\" || extra ) {\n\t\t\tnum = parseFloat( val );\n\t\t\treturn extra === true || jQuery.isNumeric( num ) ? num || 0 : val;\n\t\t}\n\t\treturn val;\n\t}\n});\n\njQuery.each([ \"height\", \"width\" ], function( i, name ) {\n\tjQuery.cssHooks[ name ] = {\n\t\tget: function( elem, computed, extra ) {\n\t\t\tif ( computed ) {\n\n\t\t\t\t// Certain elements can have dimension info if we invisibly show them\n\t\t\t\t// but it must have a current display style that would benefit\n\t\t\t\treturn rdisplayswap.test( jQuery.css( elem, \"display\" ) ) && elem.offsetWidth === 0 ?\n\t\t\t\t\tjQuery.swap( elem, cssShow, function() {\n\t\t\t\t\t\treturn getWidthOrHeight( elem, name, extra );\n\t\t\t\t\t}) :\n\t\t\t\t\tgetWidthOrHeight( elem, name, extra );\n\t\t\t}\n\t\t},\n\n\t\tset: function( elem, value, extra ) {\n\t\t\tvar styles = extra && getStyles( elem );\n\t\t\treturn setPositiveNumber( elem, value, extra ?\n\t\t\t\taugmentWidthOrHeight(\n\t\t\t\t\telem,\n\t\t\t\t\tname,\n\t\t\t\t\textra,\n\t\t\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\t\t\t\tstyles\n\t\t\t\t) : 0\n\t\t\t);\n\t\t}\n\t};\n});\n\n// Support: Android 2.3\njQuery.cssHooks.marginRight = addGetHookIf( support.reliableMarginRight,\n\tfunction( elem, computed ) {\n\t\tif ( computed ) {\n\t\t\treturn jQuery.swap( elem, { \"display\": \"inline-block\" },\n\t\t\t\tcurCSS, [ elem, \"marginRight\" ] );\n\t\t}\n\t}\n);\n\n// These hooks are used by animate to expand properties\njQuery.each({\n\tmargin: \"\",\n\tpadding: \"\",\n\tborder: \"Width\"\n}, function( prefix, suffix ) {\n\tjQuery.cssHooks[ prefix + suffix ] = {\n\t\texpand: function( value ) {\n\t\t\tvar i = 0,\n\t\t\t\texpanded = {},\n\n\t\t\t\t// Assumes a single number if not a string\n\t\t\t\tparts = typeof value === \"string\" ? value.split(\" \") : [ value ];\n\n\t\t\tfor ( ; i < 4; i++ ) {\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n\t\t\t}\n\n\t\t\treturn expanded;\n\t\t}\n\t};\n\n\tif ( !rmargin.test( prefix ) ) {\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n\t}\n});\n\njQuery.fn.extend({\n\tcss: function( name, value ) {\n\t\treturn access( this, function( elem, name, value ) {\n\t\t\tvar styles, len,\n\t\t\t\tmap = {},\n\t\t\t\ti = 0;\n\n\t\t\tif ( jQuery.isArray( name ) ) {\n\t\t\t\tstyles = getStyles( elem );\n\t\t\t\tlen = name.length;\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t}\n\n\t\t\treturn value !== undefined ?\n\t\t\t\tjQuery.style( elem, name, value ) :\n\t\t\t\tjQuery.css( elem, name );\n\t\t}, name, value, arguments.length > 1 );\n\t},\n\tshow: function() {\n\t\treturn showHide( this, true );\n\t},\n\thide: function() {\n\t\treturn showHide( this );\n\t},\n\ttoggle: function( state ) {\n\t\tif ( typeof state === \"boolean\" ) {\n\t\t\treturn state ? this.show() : this.hide();\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tif ( isHidden( this ) ) {\n\t\t\t\tjQuery( this ).show();\n\t\t\t} else {\n\t\t\t\tjQuery( this ).hide();\n\t\t\t}\n\t\t});\n\t}\n});\n\n\nfunction Tween( elem, options, prop, end, easing ) {\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n}\njQuery.Tween = Tween;\n\nTween.prototype = {\n\tconstructor: Tween,\n\tinit: function( elem, options, prop, end, easing, unit ) {\n\t\tthis.elem = elem;\n\t\tthis.prop = prop;\n\t\tthis.easing = easing || \"swing\";\n\t\tthis.options = options;\n\t\tthis.start = this.now = this.cur();\n\t\tthis.end = end;\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\t},\n\tcur: function() {\n\t\tvar hooks = Tween.propHooks[ this.prop ];\n\n\t\treturn hooks && hooks.get ?\n\t\t\thooks.get( this ) :\n\t\t\tTween.propHooks._default.get( this );\n\t},\n\trun: function( percent ) {\n\t\tvar eased,\n\t\t\thooks = Tween.propHooks[ this.prop ];\n\n\t\tif ( this.options.duration ) {\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n\t\t\t);\n\t\t} else {\n\t\t\tthis.pos = eased = percent;\n\t\t}\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n\n\t\tif ( this.options.step ) {\n\t\t\tthis.options.step.call( this.elem, this.now, this );\n\t\t}\n\n\t\tif ( hooks && hooks.set ) {\n\t\t\thooks.set( this );\n\t\t} else {\n\t\t\tTween.propHooks._default.set( this );\n\t\t}\n\t\treturn this;\n\t}\n};\n\nTween.prototype.init.prototype = Tween.prototype;\n\nTween.propHooks = {\n\t_default: {\n\t\tget: function( tween ) {\n\t\t\tvar result;\n\n\t\t\tif ( tween.elem[ tween.prop ] != null &&\n\t\t\t\t(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {\n\t\t\t\treturn tween.elem[ tween.prop ];\n\t\t\t}\n\n\t\t\t// Passing an empty string as a 3rd parameter to .css will automatically\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails.\n\t\t\t// Simple values such as \"10px\" are parsed to Float;\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as-is.\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\n\t\t},\n\t\tset: function( tween ) {\n\t\t\t// Use step hook for back compat.\n\t\t\t// Use cssHook if its there.\n\t\t\t// Use .style if available and use plain properties where available.\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n\t\t\t} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n\t\t\t} else {\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Support: IE9\n// Panic based approach to setting things on disconnected nodes\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n\tset: function( tween ) {\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t}\n\t}\n};\n\njQuery.easing = {\n\tlinear: function( p ) {\n\t\treturn p;\n\t},\n\tswing: function( p ) {\n\t\treturn 0.5 - Math.cos( p * Math.PI ) / 2;\n\t}\n};\n\njQuery.fx = Tween.prototype.init;\n\n// Back Compat <1.8 extension point\njQuery.fx.step = {};\n\n\n\n\nvar\n\tfxNow, timerId,\n\trfxtypes = /^(?:toggle|show|hide)$/,\n\trfxnum = new RegExp( \"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\" ),\n\trrun = /queueHooks$/,\n\tanimationPrefilters = [ defaultPrefilter ],\n\ttweeners = {\n\t\t\"*\": [ function( prop, value ) {\n\t\t\tvar tween = this.createTween( prop, value ),\n\t\t\t\ttarget = tween.cur(),\n\t\t\t\tparts = rfxnum.exec( value ),\n\t\t\t\tunit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\n\n\t\t\t\t// Starting value computation is required for potential unit mismatches\n\t\t\t\tstart = ( jQuery.cssNumber[ prop ] || unit !== \"px\" && +target ) &&\n\t\t\t\t\trfxnum.exec( jQuery.css( tween.elem, prop ) ),\n\t\t\t\tscale = 1,\n\t\t\t\tmaxIterations = 20;\n\n\t\t\tif ( start && start[ 3 ] !== unit ) {\n\t\t\t\t// Trust units reported by jQuery.css\n\t\t\t\tunit = unit || start[ 3 ];\n\n\t\t\t\t// Make sure we update the tween properties later on\n\t\t\t\tparts = parts || [];\n\n\t\t\t\t// Iteratively approximate from a nonzero starting point\n\t\t\t\tstart = +target || 1;\n\n\t\t\t\tdo {\n\t\t\t\t\t// If previous iteration zeroed out, double until we get *something*.\n\t\t\t\t\t// Use string for doubling so we don't accidentally see scale as unchanged below\n\t\t\t\t\tscale = scale || \".5\";\n\n\t\t\t\t\t// Adjust and apply\n\t\t\t\t\tstart = start / scale;\n\t\t\t\t\tjQuery.style( tween.elem, prop, start + unit );\n\n\t\t\t\t// Update scale, tolerating zero or NaN from tween.cur(),\n\t\t\t\t// break the loop if scale is unchanged or perfect, or if we've just had enough\n\t\t\t\t} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );\n\t\t\t}\n\n\t\t\t// Update tween properties\n\t\t\tif ( parts ) {\n\t\t\t\tstart = tween.start = +start || +target || 0;\n\t\t\t\ttween.unit = unit;\n\t\t\t\t// If a +=/-= token was provided, we're doing a relative animation\n\t\t\t\ttween.end = parts[ 1 ] ?\n\t\t\t\t\tstart + ( parts[ 1 ] + 1 ) * parts[ 2 ] :\n\t\t\t\t\t+parts[ 2 ];\n\t\t\t}\n\n\t\t\treturn tween;\n\t\t} ]\n\t};\n\n// Animations created synchronously will run synchronously\nfunction createFxNow() {\n\tsetTimeout(function() {\n\t\tfxNow = undefined;\n\t});\n\treturn ( fxNow = jQuery.now() );\n}\n\n// Generate parameters to create a standard animation\nfunction genFx( type, includeWidth ) {\n\tvar which,\n\t\ti = 0,\n\t\tattrs = { height: type };\n\n\t// If we include width, step value is 1 to do all cssExpand values,\n\t// otherwise step value is 2 to skip over Left and Right\n\tincludeWidth = includeWidth ? 1 : 0;\n\tfor ( ; i < 4 ; i += 2 - includeWidth ) {\n\t\twhich = cssExpand[ i ];\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n\t}\n\n\tif ( includeWidth ) {\n\t\tattrs.opacity = attrs.width = type;\n\t}\n\n\treturn attrs;\n}\n\nfunction createTween( value, prop, animation ) {\n\tvar tween,\n\t\tcollection = ( tweeners[ prop ] || [] ).concat( tweeners[ \"*\" ] ),\n\t\tindex = 0,\n\t\tlength = collection.length;\n\tfor ( ; index < length; index++ ) {\n\t\tif ( (tween = collection[ index ].call( animation, prop, value )) ) {\n\n\t\t\t// We're done with this property\n\t\t\treturn tween;\n\t\t}\n\t}\n}\n\nfunction defaultPrefilter( elem, props, opts ) {\n\t/* jshint validthis: true */\n\tvar prop, value, toggle, tween, hooks, oldfire, display, checkDisplay,\n\t\tanim = this,\n\t\torig = {},\n\t\tstyle = elem.style,\n\t\thidden = elem.nodeType && isHidden( elem ),\n\t\tdataShow = data_priv.get( elem, \"fxshow\" );\n\n\t// Handle queue: false promises\n\tif ( !opts.queue ) {\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n\t\tif ( hooks.unqueued == null ) {\n\t\t\thooks.unqueued = 0;\n\t\t\toldfire = hooks.empty.fire;\n\t\t\thooks.empty.fire = function() {\n\t\t\t\tif ( !hooks.unqueued ) {\n\t\t\t\t\toldfire();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\thooks.unqueued++;\n\n\t\tanim.always(function() {\n\t\t\t// Ensure the complete handler is called before this completes\n\t\t\tanim.always(function() {\n\t\t\t\thooks.unqueued--;\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n\t\t\t\t\thooks.empty.fire();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t// Height/width overflow pass\n\tif ( elem.nodeType === 1 && ( \"height\" in props || \"width\" in props ) ) {\n\t\t// Make sure that nothing sneaks out\n\t\t// Record all 3 overflow attributes because IE9-10 do not\n\t\t// change the overflow attribute when overflowX and\n\t\t// overflowY are set to the same value\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n\n\t\t// Set display property to inline-block for height/width\n\t\t// animations on inline elements that are having width/height animated\n\t\tdisplay = jQuery.css( elem, \"display\" );\n\n\t\t// Test default display if display is currently \"none\"\n\t\tcheckDisplay = display === \"none\" ?\n\t\t\tdata_priv.get( elem, \"olddisplay\" ) || defaultDisplay( elem.nodeName ) : display;\n\n\t\tif ( checkDisplay === \"inline\" && jQuery.css( elem, \"float\" ) === \"none\" ) {\n\t\t\tstyle.display = \"inline-block\";\n\t\t}\n\t}\n\n\tif ( opts.overflow ) {\n\t\tstyle.overflow = \"hidden\";\n\t\tanim.always(function() {\n\t\t\tstyle.overflow = opts.overflow[ 0 ];\n\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n\t\t});\n\t}\n\n\t// show/hide pass\n\tfor ( prop in props ) {\n\t\tvalue = props[ prop ];\n\t\tif ( rfxtypes.exec( value ) ) {\n\t\t\tdelete props[ prop ];\n\t\t\ttoggle = toggle || value === \"toggle\";\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n\n\t\t\t\t// If there is dataShow left over from a stopped hide or show and we are going to proceed with show, we should pretend to be hidden\n\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\n\t\t\t\t\thidden = true;\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\n\n\t\t// Any non-fx value stops us from restoring the original display value\n\t\t} else {\n\t\t\tdisplay = undefined;\n\t\t}\n\t}\n\n\tif ( !jQuery.isEmptyObject( orig ) ) {\n\t\tif ( dataShow ) {\n\t\t\tif ( \"hidden\" in dataShow ) {\n\t\t\t\thidden = dataShow.hidden;\n\t\t\t}\n\t\t} else {\n\t\t\tdataShow = data_priv.access( elem, \"fxshow\", {} );\n\t\t}\n\n\t\t// Store state if its toggle - enables .stop().toggle() to \"reverse\"\n\t\tif ( toggle ) {\n\t\t\tdataShow.hidden = !hidden;\n\t\t}\n\t\tif ( hidden ) {\n\t\t\tjQuery( elem ).show();\n\t\t} else {\n\t\t\tanim.done(function() {\n\t\t\t\tjQuery( elem ).hide();\n\t\t\t});\n\t\t}\n\t\tanim.done(function() {\n\t\t\tvar prop;\n\n\t\t\tdata_priv.remove( elem, \"fxshow\" );\n\t\t\tfor ( prop in orig ) {\n\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n\t\t\t}\n\t\t});\n\t\tfor ( prop in orig ) {\n\t\t\ttween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\n\n\t\t\tif ( !( prop in dataShow ) ) {\n\t\t\t\tdataShow[ prop ] = tween.start;\n\t\t\t\tif ( hidden ) {\n\t\t\t\t\ttween.end = tween.start;\n\t\t\t\t\ttween.start = prop === \"width\" || prop === \"height\" ? 1 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t// If this is a noop like .hide().hide(), restore an overwritten display value\n\t} else if ( (display === \"none\" ? defaultDisplay( elem.nodeName ) : display) === \"inline\" ) {\n\t\tstyle.display = display;\n\t}\n}\n\nfunction propFilter( props, specialEasing ) {\n\tvar index, name, easing, value, hooks;\n\n\t// camelCase, specialEasing and expand cssHook pass\n\tfor ( index in props ) {\n\t\tname = jQuery.camelCase( index );\n\t\teasing = specialEasing[ name ];\n\t\tvalue = props[ index ];\n\t\tif ( jQuery.isArray( value ) ) {\n\t\t\teasing = value[ 1 ];\n\t\t\tvalue = props[ index ] = value[ 0 ];\n\t\t}\n\n\t\tif ( index !== name ) {\n\t\t\tprops[ name ] = value;\n\t\t\tdelete props[ index ];\n\t\t}\n\n\t\thooks = jQuery.cssHooks[ name ];\n\t\tif ( hooks && \"expand\" in hooks ) {\n\t\t\tvalue = hooks.expand( value );\n\t\t\tdelete props[ name ];\n\n\t\t\t// Not quite $.extend, this won't overwrite existing keys.\n\t\t\t// Reusing 'index' because we have the correct \"name\"\n\t\t\tfor ( index in value ) {\n\t\t\t\tif ( !( index in props ) ) {\n\t\t\t\t\tprops[ index ] = value[ index ];\n\t\t\t\t\tspecialEasing[ index ] = easing;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tspecialEasing[ name ] = easing;\n\t\t}\n\t}\n}\n\nfunction Animation( elem, properties, options ) {\n\tvar result,\n\t\tstopped,\n\t\tindex = 0,\n\t\tlength = animationPrefilters.length,\n\t\tdeferred = jQuery.Deferred().always( function() {\n\t\t\t// Don't match elem in the :animated selector\n\t\t\tdelete tick.elem;\n\t\t}),\n\t\ttick = function() {\n\t\t\tif ( stopped ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar currentTime = fxNow || createFxNow(),\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n\t\t\t\t// Support: Android 2.3\n\t\t\t\t// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)\n\t\t\t\ttemp = remaining / animation.duration || 0,\n\t\t\t\tpercent = 1 - temp,\n\t\t\t\tindex = 0,\n\t\t\t\tlength = animation.tweens.length;\n\n\t\t\tfor ( ; index < length ; index++ ) {\n\t\t\t\tanimation.tweens[ index ].run( percent );\n\t\t\t}\n\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ]);\n\n\t\t\tif ( percent < 1 && length ) {\n\t\t\t\treturn remaining;\n\t\t\t} else {\n\t\t\t\tdeferred.resolveWith( elem, [ animation ] );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tanimation = deferred.promise({\n\t\t\telem: elem,\n\t\t\tprops: jQuery.extend( {}, properties ),\n\t\t\topts: jQuery.extend( true, { specialEasing: {} }, options ),\n\t\t\toriginalProperties: properties,\n\t\t\toriginalOptions: options,\n\t\t\tstartTime: fxNow || createFxNow(),\n\t\t\tduration: options.duration,\n\t\t\ttweens: [],\n\t\t\tcreateTween: function( prop, end ) {\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n\t\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n\t\t\t\tanimation.tweens.push( tween );\n\t\t\t\treturn tween;\n\t\t\t},\n\t\t\tstop: function( gotoEnd ) {\n\t\t\t\tvar index = 0,\n\t\t\t\t\t// If we are going to the end, we want to run all the tweens\n\t\t\t\t\t// otherwise we skip this part\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n\t\t\t\tif ( stopped ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\tstopped = true;\n\t\t\t\tfor ( ; index < length ; index++ ) {\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n\t\t\t\t}\n\n\t\t\t\t// Resolve when we played the last frame; otherwise, reject\n\t\t\t\tif ( gotoEnd ) {\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}),\n\t\tprops = animation.props;\n\n\tpropFilter( props, animation.opts.specialEasing );\n\n\tfor ( ; index < length ; index++ ) {\n\t\tresult = animationPrefilters[ index ].call( animation, elem, props, animation.opts );\n\t\tif ( result ) {\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tjQuery.map( props, createTween, animation );\n\n\tif ( jQuery.isFunction( animation.opts.start ) ) {\n\t\tanimation.opts.start.call( elem, animation );\n\t}\n\n\tjQuery.fx.timer(\n\t\tjQuery.extend( tick, {\n\t\t\telem: elem,\n\t\t\tanim: animation,\n\t\t\tqueue: animation.opts.queue\n\t\t})\n\t);\n\n\t// attach callbacks from options\n\treturn animation.progress( animation.opts.progress )\n\t\t.done( animation.opts.done, animation.opts.complete )\n\t\t.fail( animation.opts.fail )\n\t\t.always( animation.opts.always );\n}\n\njQuery.Animation = jQuery.extend( Animation, {\n\n\ttweener: function( props, callback ) {\n\t\tif ( jQuery.isFunction( props ) ) {\n\t\t\tcallback = props;\n\t\t\tprops = [ \"*\" ];\n\t\t} else {\n\t\t\tprops = props.split(\" \");\n\t\t}\n\n\t\tvar prop,\n\t\t\tindex = 0,\n\t\t\tlength = props.length;\n\n\t\tfor ( ; index < length ; index++ ) {\n\t\t\tprop = props[ index ];\n\t\t\ttweeners[ prop ] = tweeners[ prop ] || [];\n\t\t\ttweeners[ prop ].unshift( callback );\n\t\t}\n\t},\n\n\tprefilter: function( callback, prepend ) {\n\t\tif ( prepend ) {\n\t\t\tanimationPrefilters.unshift( callback );\n\t\t} else {\n\t\t\tanimationPrefilters.push( callback );\n\t\t}\n\t}\n});\n\njQuery.speed = function( speed, easing, fn ) {\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n\t\tcomplete: fn || !fn && easing ||\n\t\t\tjQuery.isFunction( speed ) && speed,\n\t\tduration: speed,\n\t\teasing: fn && easing || easing && !jQuery.isFunction( easing ) && easing\n\t};\n\n\topt.duration = jQuery.fx.off ? 0 : typeof opt.duration === \"number\" ? opt.duration :\n\t\topt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;\n\n\t// Normalize opt.queue - true/undefined/null -> \"fx\"\n\tif ( opt.queue == null || opt.queue === true ) {\n\t\topt.queue = \"fx\";\n\t}\n\n\t// Queueing\n\topt.old = opt.complete;\n\n\topt.complete = function() {\n\t\tif ( jQuery.isFunction( opt.old ) ) {\n\t\t\topt.old.call( this );\n\t\t}\n\n\t\tif ( opt.queue ) {\n\t\t\tjQuery.dequeue( this, opt.queue );\n\t\t}\n\t};\n\n\treturn opt;\n};\n\njQuery.fn.extend({\n\tfadeTo: function( speed, to, easing, callback ) {\n\n\t\t// Show any hidden elements after setting opacity to 0\n\t\treturn this.filter( isHidden ).css( \"opacity\", 0 ).show()\n\n\t\t\t// Animate to the value specified\n\t\t\t.end().animate({ opacity: to }, speed, easing, callback );\n\t},\n\tanimate: function( prop, speed, easing, callback ) {\n\t\tvar empty = jQuery.isEmptyObject( prop ),\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\n\t\t\tdoAnimation = function() {\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n\n\t\t\t\t// Empty animations, or finishing resolves immediately\n\t\t\t\tif ( empty || data_priv.get( this, \"finish\" ) ) {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t}\n\t\t\t};\n\t\t\tdoAnimation.finish = doAnimation;\n\n\t\treturn empty || optall.queue === false ?\n\t\t\tthis.each( doAnimation ) :\n\t\t\tthis.queue( optall.queue, doAnimation );\n\t},\n\tstop: function( type, clearQueue, gotoEnd ) {\n\t\tvar stopQueue = function( hooks ) {\n\t\t\tvar stop = hooks.stop;\n\t\t\tdelete hooks.stop;\n\t\t\tstop( gotoEnd );\n\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tgotoEnd = clearQueue;\n\t\t\tclearQueue = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\tif ( clearQueue && type !== false ) {\n\t\t\tthis.queue( type || \"fx\", [] );\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tvar dequeue = true,\n\t\t\t\tindex = type != null && type + \"queueHooks\",\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tdata = data_priv.get( this );\n\n\t\t\tif ( index ) {\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( index in data ) {\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n\t\t\t\t\tdequeue = false;\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Start the next in the queue if the last step wasn't forced.\n\t\t\t// Timers currently will call their complete callbacks, which\n\t\t\t// will dequeue but only if they were gotoEnd.\n\t\t\tif ( dequeue || !gotoEnd ) {\n\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t}\n\t\t});\n\t},\n\tfinish: function( type ) {\n\t\tif ( type !== false ) {\n\t\t\ttype = type || \"fx\";\n\t\t}\n\t\treturn this.each(function() {\n\t\t\tvar index,\n\t\t\t\tdata = data_priv.get( this ),\n\t\t\t\tqueue = data[ type + \"queue\" ],\n\t\t\t\thooks = data[ type + \"queueHooks\" ],\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tlength = queue ? queue.length : 0;\n\n\t\t\t// Enable finishing flag on private data\n\t\t\tdata.finish = true;\n\n\t\t\t// Empty the queue first\n\t\t\tjQuery.queue( this, type, [] );\n\n\t\t\tif ( hooks && hooks.stop ) {\n\t\t\t\thooks.stop.call( this, true );\n\t\t\t}\n\n\t\t\t// Look for any active animations, and finish them\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n\t\t\t\t\ttimers[ index ].anim.stop( true );\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Look for any animations in the old queue and finish them\n\t\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n\t\t\t\t\tqueue[ index ].finish.call( this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Turn off finishing flag\n\t\t\tdelete data.finish;\n\t\t});\n\t}\n});\n\njQuery.each([ \"toggle\", \"show\", \"hide\" ], function( i, name ) {\n\tvar cssFn = jQuery.fn[ name ];\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn speed == null || typeof speed === \"boolean\" ?\n\t\t\tcssFn.apply( this, arguments ) :\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n\t};\n});\n\n// Generate shortcuts for custom animations\njQuery.each({\n\tslideDown: genFx(\"show\"),\n\tslideUp: genFx(\"hide\"),\n\tslideToggle: genFx(\"toggle\"),\n\tfadeIn: { opacity: \"show\" },\n\tfadeOut: { opacity: \"hide\" },\n\tfadeToggle: { opacity: \"toggle\" }\n}, function( name, props ) {\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn this.animate( props, speed, easing, callback );\n\t};\n});\n\njQuery.timers = [];\njQuery.fx.tick = function() {\n\tvar timer,\n\t\ti = 0,\n\t\ttimers = jQuery.timers;\n\n\tfxNow = jQuery.now();\n\n\tfor ( ; i < timers.length; i++ ) {\n\t\ttimer = timers[ i ];\n\t\t// Checks the timer has not already been removed\n\t\tif ( !timer() && timers[ i ] === timer ) {\n\t\t\ttimers.splice( i--, 1 );\n\t\t}\n\t}\n\n\tif ( !timers.length ) {\n\t\tjQuery.fx.stop();\n\t}\n\tfxNow = undefined;\n};\n\njQuery.fx.timer = function( timer ) {\n\tjQuery.timers.push( timer );\n\tif ( timer() ) {\n\t\tjQuery.fx.start();\n\t} else {\n\t\tjQuery.timers.pop();\n\t}\n};\n\njQuery.fx.interval = 13;\n\njQuery.fx.start = function() {\n\tif ( !timerId ) {\n\t\ttimerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );\n\t}\n};\n\njQuery.fx.stop = function() {\n\tclearInterval( timerId );\n\ttimerId = null;\n};\n\njQuery.fx.speeds = {\n\tslow: 600,\n\tfast: 200,\n\t// Default speed\n\t_default: 400\n};\n\n\n// Based off of the plugin by Clint Helfers, with permission.\n// http://blindsignals.com/index.php/2009/07/jquery-delay/\njQuery.fn.delay = function( time, type ) {\n\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n\ttype = type || \"fx\";\n\n\treturn this.queue( type, function( next, hooks ) {\n\t\tvar timeout = setTimeout( next, time );\n\t\thooks.stop = function() {\n\t\t\tclearTimeout( timeout );\n\t\t};\n\t});\n};\n\n\n(function() {\n\tvar input = document.createElement( \"input\" ),\n\t\tselect = document.createElement( \"select\" ),\n\t\topt = select.appendChild( document.createElement( \"option\" ) );\n\n\tinput.type = \"checkbox\";\n\n\t// Support: iOS<=5.1, Android<=4.2+\n\t// Default value for a checkbox should be \"on\"\n\tsupport.checkOn = input.value !== \"\";\n\n\t// Support: IE<=11+\n\t// Must access selectedIndex to make default options select\n\tsupport.optSelected = opt.selected;\n\n\t// Support: Android<=2.3\n\t// Options inside disabled selects are incorrectly marked as disabled\n\tselect.disabled = true;\n\tsupport.optDisabled = !opt.disabled;\n\n\t// Support: IE<=11+\n\t// An input loses its value after becoming a radio\n\tinput = document.createElement( \"input\" );\n\tinput.value = \"t\";\n\tinput.type = \"radio\";\n\tsupport.radioValue = input.value === \"t\";\n})();\n\n\nvar nodeHook, boolHook,\n\tattrHandle = jQuery.expr.attrHandle;\n\njQuery.fn.extend({\n\tattr: function( name, value ) {\n\t\treturn access( this, jQuery.attr, name, value, arguments.length > 1 );\n\t},\n\n\tremoveAttr: function( name ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.removeAttr( this, name );\n\t\t});\n\t}\n});\n\njQuery.extend({\n\tattr: function( elem, name, value ) {\n\t\tvar hooks, ret,\n\t\t\tnType = elem.nodeType;\n\n\t\t// don't get/set attributes on text, comment and attribute nodes\n\t\tif ( !elem || nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fallback to prop when attributes are not supported\n\t\tif ( typeof elem.getAttribute === strundefined ) {\n\t\t\treturn jQuery.prop( elem, name, value );\n\t\t}\n\n\t\t// All attributes are lowercase\n\t\t// Grab necessary hook if one is defined\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\t\t\tname = name.toLowerCase();\n\t\t\thooks = jQuery.attrHooks[ name ] ||\n\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\n\t\t\tif ( value === null ) {\n\t\t\t\tjQuery.removeAttr( elem, name );\n\n\t\t\t} else if ( hooks && \"set\" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {\n\t\t\t\treturn ret;\n\n\t\t\t} else {\n\t\t\t\telem.setAttribute( name, value + \"\" );\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t} else if ( hooks && \"get\" in hooks && (ret = hooks.get( elem, name )) !== null ) {\n\t\t\treturn ret;\n\n\t\t} else {\n\t\t\tret = jQuery.find.attr( elem, name );\n\n\t\t\t// Non-existent attributes return null, we normalize to undefined\n\t\t\treturn ret == null ?\n\t\t\t\tundefined :\n\t\t\t\tret;\n\t\t}\n\t},\n\n\tremoveAttr: function( elem, value ) {\n\t\tvar name, propName,\n\t\t\ti = 0,\n\t\t\tattrNames = value && value.match( rnotwhite );\n\n\t\tif ( attrNames && elem.nodeType === 1 ) {\n\t\t\twhile ( (name = attrNames[i++]) ) {\n\t\t\t\tpropName = jQuery.propFix[ name ] || name;\n\n\t\t\t\t// Boolean attributes get special treatment (#10870)\n\t\t\t\tif ( jQuery.expr.match.bool.test( name ) ) {\n\t\t\t\t\t// Set corresponding property to false\n\t\t\t\t\telem[ propName ] = false;\n\t\t\t\t}\n\n\t\t\t\telem.removeAttribute( name );\n\t\t\t}\n\t\t}\n\t},\n\n\tattrHooks: {\n\t\ttype: {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( !support.radioValue && value === \"radio\" &&\n\t\t\t\t\tjQuery.nodeName( elem, \"input\" ) ) {\n\t\t\t\t\tvar val = elem.value;\n\t\t\t\t\telem.setAttribute( \"type\", value );\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\telem.value = val;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\n// Hooks for boolean attributes\nboolHook = {\n\tset: function( elem, value, name ) {\n\t\tif ( value === false ) {\n\t\t\t// Remove boolean attributes when set to false\n\t\t\tjQuery.removeAttr( elem, name );\n\t\t} else {\n\t\t\telem.setAttribute( name, name );\n\t\t}\n\t\treturn name;\n\t}\n};\njQuery.each( jQuery.expr.match.bool.source.match( /\\w+/g ), function( i, name ) {\n\tvar getter = attrHandle[ name ] || jQuery.find.attr;\n\n\tattrHandle[ name ] = function( elem, name, isXML ) {\n\t\tvar ret, handle;\n\t\tif ( !isXML ) {\n\t\t\t// Avoid an infinite loop by temporarily removing this function from the getter\n\t\t\thandle = attrHandle[ name ];\n\t\t\tattrHandle[ name ] = ret;\n\t\t\tret = getter( elem, name, isXML ) != null ?\n\t\t\t\tname.toLowerCase() :\n\t\t\t\tnull;\n\t\t\tattrHandle[ name ] = handle;\n\t\t}\n\t\treturn ret;\n\t};\n});\n\n\n\n\nvar rfocusable = /^(?:input|select|textarea|button)$/i;\n\njQuery.fn.extend({\n\tprop: function( name, value ) {\n\t\treturn access( this, jQuery.prop, name, value, arguments.length > 1 );\n\t},\n\n\tremoveProp: function( name ) {\n\t\treturn this.each(function() {\n\t\t\tdelete this[ jQuery.propFix[ name ] || name ];\n\t\t});\n\t}\n});\n\njQuery.extend({\n\tpropFix: {\n\t\t\"for\": \"htmlFor\",\n\t\t\"class\": \"className\"\n\t},\n\n\tprop: function( elem, name, value ) {\n\t\tvar ret, hooks, notxml,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set properties on text, comment and attribute nodes\n\t\tif ( !elem || nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tnotxml = nType !== 1 || !jQuery.isXMLDoc( elem );\n\n\t\tif ( notxml ) {\n\t\t\t// Fix name and attach hooks\n\t\t\tname = jQuery.propFix[ name ] || name;\n\t\t\thooks = jQuery.propHooks[ name ];\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\treturn hooks && \"set\" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?\n\t\t\t\tret :\n\t\t\t\t( elem[ name ] = value );\n\n\t\t} else {\n\t\t\treturn hooks && \"get\" in hooks && (ret = hooks.get( elem, name )) !== null ?\n\t\t\t\tret :\n\t\t\t\telem[ name ];\n\t\t}\n\t},\n\n\tpropHooks: {\n\t\ttabIndex: {\n\t\t\tget: function( elem ) {\n\t\t\t\treturn elem.hasAttribute( \"tabindex\" ) || rfocusable.test( elem.nodeName ) || elem.href ?\n\t\t\t\t\telem.tabIndex :\n\t\t\t\t\t-1;\n\t\t\t}\n\t\t}\n\t}\n});\n\nif ( !support.optSelected ) {\n\tjQuery.propHooks.selected = {\n\t\tget: function( elem ) {\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent && parent.parentNode ) {\n\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t};\n}\n\njQuery.each([\n\t\"tabIndex\",\n\t\"readOnly\",\n\t\"maxLength\",\n\t\"cellSpacing\",\n\t\"cellPadding\",\n\t\"rowSpan\",\n\t\"colSpan\",\n\t\"useMap\",\n\t\"frameBorder\",\n\t\"contentEditable\"\n], function() {\n\tjQuery.propFix[ this.toLowerCase() ] = this;\n});\n\n\n\n\nvar rclass = /[\\t\\r\\n\\f]/g;\n\njQuery.fn.extend({\n\taddClass: function( value ) {\n\t\tvar classes, elem, cur, clazz, j, finalValue,\n\t\t\tproceed = typeof value === \"string\" && value,\n\t\t\ti = 0,\n\t\t\tlen = this.length;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each(function( j ) {\n\t\t\t\tjQuery( this ).addClass( value.call( this, j, this.className ) );\n\t\t\t});\n\t\t}\n\n\t\tif ( proceed ) {\n\t\t\t// The disjunction here is for better compressibility (see removeClass)\n\t\t\tclasses = ( value || \"\" ).match( rnotwhite ) || [];\n\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\telem = this[ i ];\n\t\t\t\tcur = elem.nodeType === 1 && ( elem.className ?\n\t\t\t\t\t( \" \" + elem.className + \" \" ).replace( rclass, \" \" ) :\n\t\t\t\t\t\" \"\n\t\t\t\t);\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (clazz = classes[j++]) ) {\n\t\t\t\t\t\tif ( cur.indexOf( \" \" + clazz + \" \" ) < 0 ) {\n\t\t\t\t\t\t\tcur += clazz + \" \";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = jQuery.trim( cur );\n\t\t\t\t\tif ( elem.className !== finalValue ) {\n\t\t\t\t\t\telem.className = finalValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveClass: function( value ) {\n\t\tvar classes, elem, cur, clazz, j, finalValue,\n\t\t\tproceed = arguments.length === 0 || typeof value === \"string\" && value,\n\t\t\ti = 0,\n\t\t\tlen = this.length;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each(function( j ) {\n\t\t\t\tjQuery( this ).removeClass( value.call( this, j, this.className ) );\n\t\t\t});\n\t\t}\n\t\tif ( proceed ) {\n\t\t\tclasses = ( value || \"\" ).match( rnotwhite ) || [];\n\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\telem = this[ i ];\n\t\t\t\t// This expression is here for better compressibility (see addClass)\n\t\t\t\tcur = elem.nodeType === 1 && ( elem.className ?\n\t\t\t\t\t( \" \" + elem.className + \" \" ).replace( rclass, \" \" ) :\n\t\t\t\t\t\"\"\n\t\t\t\t);\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (clazz = classes[j++]) ) {\n\t\t\t\t\t\t// Remove *all* instances\n\t\t\t\t\t\twhile ( cur.indexOf( \" \" + clazz + \" \" ) >= 0 ) {\n\t\t\t\t\t\t\tcur = cur.replace( \" \" + clazz + \" \", \" \" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = value ? jQuery.trim( cur ) : \"\";\n\t\t\t\t\tif ( elem.className !== finalValue ) {\n\t\t\t\t\t\telem.className = finalValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\ttoggleClass: function( value, stateVal ) {\n\t\tvar type = typeof value;\n\n\t\tif ( typeof stateVal === \"boolean\" && type === \"string\" ) {\n\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\n\t\t}\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each(function( i ) {\n\t\t\t\tjQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );\n\t\t\t});\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tif ( type === \"string\" ) {\n\t\t\t\t// Toggle individual class names\n\t\t\t\tvar className,\n\t\t\t\t\ti = 0,\n\t\t\t\t\tself = jQuery( this ),\n\t\t\t\t\tclassNames = value.match( rnotwhite ) || [];\n\n\t\t\t\twhile ( (className = classNames[ i++ ]) ) {\n\t\t\t\t\t// Check each className given, space separated list\n\t\t\t\t\tif ( self.hasClass( className ) ) {\n\t\t\t\t\t\tself.removeClass( className );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.addClass( className );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Toggle whole class name\n\t\t\t} else if ( type === strundefined || type === \"boolean\" ) {\n\t\t\t\tif ( this.className ) {\n\t\t\t\t\t// store className if set\n\t\t\t\t\tdata_priv.set( this, \"__className__\", this.className );\n\t\t\t\t}\n\n\t\t\t\t// If the element has a class name or if we're passed `false`,\n\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\n\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\n\t\t\t\t// falling back to the empty string if nothing was stored.\n\t\t\t\tthis.className = this.className || value === false ? \"\" : data_priv.get( this, \"__className__\" ) || \"\";\n\t\t\t}\n\t\t});\n\t},\n\n\thasClass: function( selector ) {\n\t\tvar className = \" \" + selector + \" \",\n\t\t\ti = 0,\n\t\t\tl = this.length;\n\t\tfor ( ; i < l; i++ ) {\n\t\t\tif ( this[i].nodeType === 1 && (\" \" + this[i].className + \" \").replace(rclass, \" \").indexOf( className ) >= 0 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n});\n\n\n\n\nvar rreturn = /\\r/g;\n\njQuery.fn.extend({\n\tval: function( value ) {\n\t\tvar hooks, ret, isFunction,\n\t\t\telem = this[0];\n\n\t\tif ( !arguments.length ) {\n\t\t\tif ( elem ) {\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];\n\n\t\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, \"value\" )) !== undefined ) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\tret = elem.value;\n\n\t\t\t\treturn typeof ret === \"string\" ?\n\t\t\t\t\t// Handle most common string cases\n\t\t\t\t\tret.replace(rreturn, \"\") :\n\t\t\t\t\t// Handle cases where value is null/undef or number\n\t\t\t\t\tret == null ? \"\" : ret;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tisFunction = jQuery.isFunction( value );\n\n\t\treturn this.each(function( i ) {\n\t\t\tvar val;\n\n\t\t\tif ( this.nodeType !== 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( isFunction ) {\n\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\n\t\t\t} else {\n\t\t\t\tval = value;\n\t\t\t}\n\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\n\t\t\tif ( val == null ) {\n\t\t\t\tval = \"\";\n\n\t\t\t} else if ( typeof val === \"number\" ) {\n\t\t\t\tval += \"\";\n\n\t\t\t} else if ( jQuery.isArray( val ) ) {\n\t\t\t\tval = jQuery.map( val, function( value ) {\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n\t\t\t\t});\n\t\t\t}\n\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n\n\t\t\t// If set returns undefined, fall back to normal setting\n\t\t\tif ( !hooks || !(\"set\" in hooks) || hooks.set( this, val, \"value\" ) === undefined ) {\n\t\t\t\tthis.value = val;\n\t\t\t}\n\t\t});\n\t}\n});\n\njQuery.extend({\n\tvalHooks: {\n\t\toption: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar val = jQuery.find.attr( elem, \"value\" );\n\t\t\t\treturn val != null ?\n\t\t\t\t\tval :\n\t\t\t\t\t// Support: IE10-11+\n\t\t\t\t\t// option.text throws exceptions (#14686, #14858)\n\t\t\t\t\tjQuery.trim( jQuery.text( elem ) );\n\t\t\t}\n\t\t},\n\t\tselect: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar value, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tindex = elem.selectedIndex,\n\t\t\t\t\tone = elem.type === \"select-one\" || index < 0,\n\t\t\t\t\tvalues = one ? null : [],\n\t\t\t\t\tmax = one ? index + 1 : options.length,\n\t\t\t\t\ti = index < 0 ?\n\t\t\t\t\t\tmax :\n\t\t\t\t\t\tone ? index : 0;\n\n\t\t\t\t// Loop through all the selected options\n\t\t\t\tfor ( ; i < max; i++ ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t// IE6-9 doesn't update selected after form reset (#2551)\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\n\t\t\t\t\t\t\t( support.optDisabled ? !option.disabled : option.getAttribute( \"disabled\" ) === null ) &&\n\t\t\t\t\t\t\t( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, \"optgroup\" ) ) ) {\n\n\t\t\t\t\t\t// Get the specific value for the option\n\t\t\t\t\t\tvalue = jQuery( option ).val();\n\n\t\t\t\t\t\t// We don't need an array for one selects\n\t\t\t\t\t\tif ( one ) {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multi-Selects return an array\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t},\n\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar optionSet, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tvalues = jQuery.makeArray( value ),\n\t\t\t\t\ti = options.length;\n\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\toption = options[ i ];\n\t\t\t\t\tif ( (option.selected = jQuery.inArray( option.value, values ) >= 0) ) {\n\t\t\t\t\t\toptionSet = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Force browsers to behave consistently when non-matching value is set\n\t\t\t\tif ( !optionSet ) {\n\t\t\t\t\telem.selectedIndex = -1;\n\t\t\t\t}\n\t\t\t\treturn values;\n\t\t\t}\n\t\t}\n\t}\n});\n\n// Radios and checkboxes getter/setter\njQuery.each([ \"radio\", \"checkbox\" ], function() {\n\tjQuery.valHooks[ this ] = {\n\t\tset: function( elem, value ) {\n\t\t\tif ( jQuery.isArray( value ) ) {\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );\n\t\t\t}\n\t\t}\n\t};\n\tif ( !support.checkOn ) {\n\t\tjQuery.valHooks[ this ].get = function( elem ) {\n\t\t\treturn elem.getAttribute(\"value\") === null ? \"on\" : elem.value;\n\t\t};\n\t}\n});\n\n\n\n\n// Return jQuery for attributes-only inclusion\n\n\njQuery.each( (\"blur focus focusin focusout load resize scroll unload click dblclick \" +\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n\t\"change select submit keydown keypress keyup error contextmenu\").split(\" \"), function( i, name ) {\n\n\t// Handle event binding\n\tjQuery.fn[ name ] = function( data, fn ) {\n\t\treturn arguments.length > 0 ?\n\t\t\tthis.on( name, null, data, fn ) :\n\t\t\tthis.trigger( name );\n\t};\n});\n\njQuery.fn.extend({\n\thover: function( fnOver, fnOut ) {\n\t\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n\t},\n\n\tbind: function( types, data, fn ) {\n\t\treturn this.on( types, null, data, fn );\n\t},\n\tunbind: function( types, fn ) {\n\t\treturn this.off( types, null, fn );\n\t},\n\n\tdelegate: function( selector, types, data, fn ) {\n\t\treturn this.on( types, selector, data, fn );\n\t},\n\tundelegate: function( selector, types, fn ) {\n\t\t// ( namespace ) or ( selector, types [, fn] )\n\t\treturn arguments.length === 1 ? this.off( selector, \"**\" ) : this.off( types, selector || \"**\", fn );\n\t}\n});\n\n\nvar nonce = jQuery.now();\n\nvar rquery = (/\\?/);\n\n\n\n// Support: Android 2.3\n// Workaround failure to string-cast null input\njQuery.parseJSON = function( data ) {\n\treturn JSON.parse( data + \"\" );\n};\n\n\n// Cross-browser xml parsing\njQuery.parseXML = function( data ) {\n\tvar xml, tmp;\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\n\t// Support: IE9\n\ttry {\n\t\ttmp = new DOMParser();\n\t\txml = tmp.parseFromString( data, \"text/xml\" );\n\t} catch ( e ) {\n\t\txml = undefined;\n\t}\n\n\tif ( !xml || xml.getElementsByTagName( \"parsererror\" ).length ) {\n\t\tjQuery.error( \"Invalid XML: \" + data );\n\t}\n\treturn xml;\n};\n\n\nvar\n\trhash = /#.*$/,\n\trts = /([?&])_=[^&]*/,\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)$/mg,\n\t// #7653, #8125, #8152: local protocol detection\n\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\n\trnoContent = /^(?:GET|HEAD)$/,\n\trprotocol = /^\\/\\//,\n\trurl = /^([\\w.+-]+:)(?:\\/\\/(?:[^\\/?#]*@|)([^\\/?#:]*)(?::(\\d+)|)|)/,\n\n\t/* Prefilters\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t * 2) These are called:\n\t *    - BEFORE asking for a transport\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t * 3) key is the dataType\n\t * 4) the catchall symbol \"*\" can be used\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t */\n\tprefilters = {},\n\n\t/* Transports bindings\n\t * 1) key is the dataType\n\t * 2) the catchall symbol \"*\" can be used\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t */\n\ttransports = {},\n\n\t// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\n\tallTypes = \"*/\".concat( \"*\" ),\n\n\t// Document location\n\tajaxLocation = window.location.href,\n\n\t// Segment location into parts\n\tajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];\n\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\nfunction addToPrefiltersOrTransports( structure ) {\n\n\t// dataTypeExpression is optional and defaults to \"*\"\n\treturn function( dataTypeExpression, func ) {\n\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n\t\t\tfunc = dataTypeExpression;\n\t\t\tdataTypeExpression = \"*\";\n\t\t}\n\n\t\tvar dataType,\n\t\t\ti = 0,\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( rnotwhite ) || [];\n\n\t\tif ( jQuery.isFunction( func ) ) {\n\t\t\t// For each dataType in the dataTypeExpression\n\t\t\twhile ( (dataType = dataTypes[i++]) ) {\n\t\t\t\t// Prepend if requested\n\t\t\t\tif ( dataType[0] === \"+\" ) {\n\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n\t\t\t\t\t(structure[ dataType ] = structure[ dataType ] || []).unshift( func );\n\n\t\t\t\t// Otherwise append\n\t\t\t\t} else {\n\t\t\t\t\t(structure[ dataType ] = structure[ dataType ] || []).push( func );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Base inspection function for prefilters and transports\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n\n\tvar inspected = {},\n\t\tseekingTransport = ( structure === transports );\n\n\tfunction inspect( dataType ) {\n\t\tvar selected;\n\t\tinspected[ dataType ] = true;\n\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n\t\t\tif ( typeof dataTypeOrTransport === \"string\" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n\t\t\t\tinspect( dataTypeOrTransport );\n\t\t\t\treturn false;\n\t\t\t} else if ( seekingTransport ) {\n\t\t\t\treturn !( selected = dataTypeOrTransport );\n\t\t\t}\n\t\t});\n\t\treturn selected;\n\t}\n\n\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n}\n\n// A special extend for ajax options\n// that takes \"flat\" options (not to be deep extended)\n// Fixes #9887\nfunction ajaxExtend( target, src ) {\n\tvar key, deep,\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n\tfor ( key in src ) {\n\t\tif ( src[ key ] !== undefined ) {\n\t\t\t( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];\n\t\t}\n\t}\n\tif ( deep ) {\n\t\tjQuery.extend( true, target, deep );\n\t}\n\n\treturn target;\n}\n\n/* Handles responses to an ajax request:\n * - finds the right dataType (mediates between content-type and expected dataType)\n * - returns the corresponding response\n */\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\n\n\tvar ct, type, finalDataType, firstDataType,\n\t\tcontents = s.contents,\n\t\tdataTypes = s.dataTypes;\n\n\t// Remove auto dataType and get content-type in the process\n\twhile ( dataTypes[ 0 ] === \"*\" ) {\n\t\tdataTypes.shift();\n\t\tif ( ct === undefined ) {\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader(\"Content-Type\");\n\t\t}\n\t}\n\n\t// Check if we're dealing with a known content-type\n\tif ( ct ) {\n\t\tfor ( type in contents ) {\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n\t\t\t\tdataTypes.unshift( type );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check to see if we have a response for the expected dataType\n\tif ( dataTypes[ 0 ] in responses ) {\n\t\tfinalDataType = dataTypes[ 0 ];\n\t} else {\n\t\t// Try convertible dataTypes\n\t\tfor ( type in responses ) {\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[0] ] ) {\n\t\t\t\tfinalDataType = type;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !firstDataType ) {\n\t\t\t\tfirstDataType = type;\n\t\t\t}\n\t\t}\n\t\t// Or just use first one\n\t\tfinalDataType = finalDataType || firstDataType;\n\t}\n\n\t// If we found a dataType\n\t// We add the dataType to the list if needed\n\t// and return the corresponding response\n\tif ( finalDataType ) {\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n\t\t\tdataTypes.unshift( finalDataType );\n\t\t}\n\t\treturn responses[ finalDataType ];\n\t}\n}\n\n/* Chain conversions given the request and the original response\n * Also sets the responseXXX fields on the jqXHR instance\n */\nfunction ajaxConvert( s, response, jqXHR, isSuccess ) {\n\tvar conv2, current, conv, tmp, prev,\n\t\tconverters = {},\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\n\t\tdataTypes = s.dataTypes.slice();\n\n\t// Create converters map with lowercased keys\n\tif ( dataTypes[ 1 ] ) {\n\t\tfor ( conv in s.converters ) {\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n\t\t}\n\t}\n\n\tcurrent = dataTypes.shift();\n\n\t// Convert to each sequential dataType\n\twhile ( current ) {\n\n\t\tif ( s.responseFields[ current ] ) {\n\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\n\t\t}\n\n\t\t// Apply the dataFilter if provided\n\t\tif ( !prev && isSuccess && s.dataFilter ) {\n\t\t\tresponse = s.dataFilter( response, s.dataType );\n\t\t}\n\n\t\tprev = current;\n\t\tcurrent = dataTypes.shift();\n\n\t\tif ( current ) {\n\n\t\t// There's only work to do if current dataType is non-auto\n\t\t\tif ( current === \"*\" ) {\n\n\t\t\t\tcurrent = prev;\n\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\n\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\n\n\t\t\t\t// Seek a direct converter\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n\n\t\t\t\t// If none found, seek a pair\n\t\t\t\tif ( !conv ) {\n\t\t\t\t\tfor ( conv2 in converters ) {\n\n\t\t\t\t\t\t// If conv2 outputs current\n\t\t\t\t\t\ttmp = conv2.split( \" \" );\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n\t\t\t\t\t\t\tif ( conv ) {\n\t\t\t\t\t\t\t\t// Condense equivalence converters\n\t\t\t\t\t\t\t\tif ( conv === true ) {\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Apply converter (if not an equivalence)\n\t\t\t\tif ( conv !== true ) {\n\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\n\t\t\t\t\tif ( conv && s[ \"throws\" ] ) {\n\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\treturn { state: \"parsererror\", error: conv ? e : \"No conversion from \" + prev + \" to \" + current };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { state: \"success\", data: response };\n}\n\njQuery.extend({\n\n\t// Counter for holding the number of active queries\n\tactive: 0,\n\n\t// Last-Modified header cache for next request\n\tlastModified: {},\n\tetag: {},\n\n\tajaxSettings: {\n\t\turl: ajaxLocation,\n\t\ttype: \"GET\",\n\t\tisLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),\n\t\tglobal: true,\n\t\tprocessData: true,\n\t\tasync: true,\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\t\t/*\n\t\ttimeout: 0,\n\t\tdata: null,\n\t\tdataType: null,\n\t\tusername: null,\n\t\tpassword: null,\n\t\tcache: null,\n\t\tthrows: false,\n\t\ttraditional: false,\n\t\theaders: {},\n\t\t*/\n\n\t\taccepts: {\n\t\t\t\"*\": allTypes,\n\t\t\ttext: \"text/plain\",\n\t\t\thtml: \"text/html\",\n\t\t\txml: \"application/xml, text/xml\",\n\t\t\tjson: \"application/json, text/javascript\"\n\t\t},\n\n\t\tcontents: {\n\t\t\txml: /xml/,\n\t\t\thtml: /html/,\n\t\t\tjson: /json/\n\t\t},\n\n\t\tresponseFields: {\n\t\t\txml: \"responseXML\",\n\t\t\ttext: \"responseText\",\n\t\t\tjson: \"responseJSON\"\n\t\t},\n\n\t\t// Data converters\n\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\t\tconverters: {\n\n\t\t\t// Convert anything to text\n\t\t\t\"* text\": String,\n\n\t\t\t// Text to html (true = no transformation)\n\t\t\t\"text html\": true,\n\n\t\t\t// Evaluate text as a json expression\n\t\t\t\"text json\": jQuery.parseJSON,\n\n\t\t\t// Parse text as xml\n\t\t\t\"text xml\": jQuery.parseXML\n\t\t},\n\n\t\t// For options that shouldn't be deep extended:\n\t\t// you can add your own custom options here if\n\t\t// and when you create one that shouldn't be\n\t\t// deep extended (see ajaxExtend)\n\t\tflatOptions: {\n\t\t\turl: true,\n\t\t\tcontext: true\n\t\t}\n\t},\n\n\t// Creates a full fledged settings object into target\n\t// with both ajaxSettings and settings fields.\n\t// If target is omitted, writes into ajaxSettings.\n\tajaxSetup: function( target, settings ) {\n\t\treturn settings ?\n\n\t\t\t// Building a settings object\n\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n\n\t\t\t// Extending ajaxSettings\n\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n\t},\n\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\n\n\t// Main method\n\tajax: function( url, options ) {\n\n\t\t// If url is an object, simulate pre-1.5 signature\n\t\tif ( typeof url === \"object\" ) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\t// Force options to be an object\n\t\toptions = options || {};\n\n\t\tvar transport,\n\t\t\t// URL without anti-cache param\n\t\t\tcacheURL,\n\t\t\t// Response headers\n\t\t\tresponseHeadersString,\n\t\t\tresponseHeaders,\n\t\t\t// timeout handle\n\t\t\ttimeoutTimer,\n\t\t\t// Cross-domain detection vars\n\t\t\tparts,\n\t\t\t// To know if global events are to be dispatched\n\t\t\tfireGlobals,\n\t\t\t// Loop variable\n\t\t\ti,\n\t\t\t// Create the final options object\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\n\t\t\t// Callbacks context\n\t\t\tcallbackContext = s.context || s,\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\n\t\t\tglobalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?\n\t\t\t\tjQuery( callbackContext ) :\n\t\t\t\tjQuery.event,\n\t\t\t// Deferreds\n\t\t\tdeferred = jQuery.Deferred(),\n\t\t\tcompleteDeferred = jQuery.Callbacks(\"once memory\"),\n\t\t\t// Status-dependent callbacks\n\t\t\tstatusCode = s.statusCode || {},\n\t\t\t// Headers (they are sent all at once)\n\t\t\trequestHeaders = {},\n\t\t\trequestHeadersNames = {},\n\t\t\t// The jqXHR state\n\t\t\tstate = 0,\n\t\t\t// Default abort message\n\t\t\tstrAbort = \"canceled\",\n\t\t\t// Fake xhr\n\t\t\tjqXHR = {\n\t\t\t\treadyState: 0,\n\n\t\t\t\t// Builds headers hashtable if needed\n\t\t\t\tgetResponseHeader: function( key ) {\n\t\t\t\t\tvar match;\n\t\t\t\t\tif ( state === 2 ) {\n\t\t\t\t\t\tif ( !responseHeaders ) {\n\t\t\t\t\t\t\tresponseHeaders = {};\n\t\t\t\t\t\t\twhile ( (match = rheaders.exec( responseHeadersString )) ) {\n\t\t\t\t\t\t\t\tresponseHeaders[ match[1].toLowerCase() ] = match[ 2 ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() ];\n\t\t\t\t\t}\n\t\t\t\t\treturn match == null ? null : match;\n\t\t\t\t},\n\n\t\t\t\t// Raw string\n\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\treturn state === 2 ? responseHeadersString : null;\n\t\t\t\t},\n\n\t\t\t\t// Caches the header\n\t\t\t\tsetRequestHeader: function( name, value ) {\n\t\t\t\t\tvar lname = name.toLowerCase();\n\t\t\t\t\tif ( !state ) {\n\t\t\t\t\t\tname = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;\n\t\t\t\t\t\trequestHeaders[ name ] = value;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Overrides response content-type header\n\t\t\t\toverrideMimeType: function( type ) {\n\t\t\t\t\tif ( !state ) {\n\t\t\t\t\t\ts.mimeType = type;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Status-dependent callbacks\n\t\t\t\tstatusCode: function( map ) {\n\t\t\t\t\tvar code;\n\t\t\t\t\tif ( map ) {\n\t\t\t\t\t\tif ( state < 2 ) {\n\t\t\t\t\t\t\tfor ( code in map ) {\n\t\t\t\t\t\t\t\t// Lazy-add the new callback in a way that preserves old ones\n\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Execute the appropriate callbacks\n\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Cancel the request\n\t\t\t\tabort: function( statusText ) {\n\t\t\t\t\tvar finalText = statusText || strAbort;\n\t\t\t\t\tif ( transport ) {\n\t\t\t\t\t\ttransport.abort( finalText );\n\t\t\t\t\t}\n\t\t\t\t\tdone( 0, finalText );\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Attach deferreds\n\t\tdeferred.promise( jqXHR ).complete = completeDeferred.add;\n\t\tjqXHR.success = jqXHR.done;\n\t\tjqXHR.error = jqXHR.fail;\n\n\t\t// Remove hash character (#7531: and string promotion)\n\t\t// Add protocol if not provided (prefilters might expect it)\n\t\t// Handle falsy url in the settings object (#10093: consistency with old signature)\n\t\t// We also use the url parameter if available\n\t\ts.url = ( ( url || s.url || ajaxLocation ) + \"\" ).replace( rhash, \"\" )\n\t\t\t.replace( rprotocol, ajaxLocParts[ 1 ] + \"//\" );\n\n\t\t// Alias method option to type as per ticket #12004\n\t\ts.type = options.method || options.type || s.method || s.type;\n\n\t\t// Extract dataTypes list\n\t\ts.dataTypes = jQuery.trim( s.dataType || \"*\" ).toLowerCase().match( rnotwhite ) || [ \"\" ];\n\n\t\t// A cross-domain request is in order when we have a protocol:host:port mismatch\n\t\tif ( s.crossDomain == null ) {\n\t\t\tparts = rurl.exec( s.url.toLowerCase() );\n\t\t\ts.crossDomain = !!( parts &&\n\t\t\t\t( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||\n\t\t\t\t\t( parts[ 3 ] || ( parts[ 1 ] === \"http:\" ? \"80\" : \"443\" ) ) !==\n\t\t\t\t\t\t( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === \"http:\" ? \"80\" : \"443\" ) ) )\n\t\t\t);\n\t\t}\n\n\t\t// Convert data if not already a string\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\n\t\t}\n\n\t\t// Apply prefilters\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n\n\t\t// If request was aborted inside a prefilter, stop there\n\t\tif ( state === 2 ) {\n\t\t\treturn jqXHR;\n\t\t}\n\n\t\t// We can fire global events as of now if asked to\n\t\t// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)\n\t\tfireGlobals = jQuery.event && s.global;\n\n\t\t// Watch for a new set of requests\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n\t\t\tjQuery.event.trigger(\"ajaxStart\");\n\t\t}\n\n\t\t// Uppercase the type\n\t\ts.type = s.type.toUpperCase();\n\n\t\t// Determine if request has content\n\t\ts.hasContent = !rnoContent.test( s.type );\n\n\t\t// Save the URL in case we're toying with the If-Modified-Since\n\t\t// and/or If-None-Match header later on\n\t\tcacheURL = s.url;\n\n\t\t// More options handling for requests with no content\n\t\tif ( !s.hasContent ) {\n\n\t\t\t// If data is available, append data to url\n\t\t\tif ( s.data ) {\n\t\t\t\tcacheURL = ( s.url += ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data );\n\t\t\t\t// #9682: remove data so that it's not used in an eventual retry\n\t\t\t\tdelete s.data;\n\t\t\t}\n\n\t\t\t// Add anti-cache in url if needed\n\t\t\tif ( s.cache === false ) {\n\t\t\t\ts.url = rts.test( cacheURL ) ?\n\n\t\t\t\t\t// If there is already a '_' parameter, set its value\n\t\t\t\t\tcacheURL.replace( rts, \"$1_=\" + nonce++ ) :\n\n\t\t\t\t\t// Otherwise add one to the end\n\t\t\t\t\tcacheURL + ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + nonce++;\n\t\t\t}\n\t\t}\n\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\tif ( s.ifModified ) {\n\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n\t\t\t}\n\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n\t\t\t}\n\t\t}\n\n\t\t// Set the correct header, if data is being sent\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n\t\t}\n\n\t\t// Set the Accepts header for the server, depending on the dataType\n\t\tjqXHR.setRequestHeader(\n\t\t\t\"Accept\",\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?\n\t\t\t\ts.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n\t\t\t\ts.accepts[ \"*\" ]\n\t\t);\n\n\t\t// Check for headers option\n\t\tfor ( i in s.headers ) {\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n\t\t}\n\n\t\t// Allow custom headers/mimetypes and early abort\n\t\tif ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {\n\t\t\t// Abort if not done already and return\n\t\t\treturn jqXHR.abort();\n\t\t}\n\n\t\t// Aborting is no longer a cancellation\n\t\tstrAbort = \"abort\";\n\n\t\t// Install callbacks on deferreds\n\t\tfor ( i in { success: 1, error: 1, complete: 1 } ) {\n\t\t\tjqXHR[ i ]( s[ i ] );\n\t\t}\n\n\t\t// Get transport\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n\n\t\t// If no transport, we auto-abort\n\t\tif ( !transport ) {\n\t\t\tdone( -1, \"No Transport\" );\n\t\t} else {\n\t\t\tjqXHR.readyState = 1;\n\n\t\t\t// Send global event\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n\t\t\t}\n\t\t\t// Timeout\n\t\t\tif ( s.async && s.timeout > 0 ) {\n\t\t\t\ttimeoutTimer = setTimeout(function() {\n\t\t\t\t\tjqXHR.abort(\"timeout\");\n\t\t\t\t}, s.timeout );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tstate = 1;\n\t\t\t\ttransport.send( requestHeaders, done );\n\t\t\t} catch ( e ) {\n\t\t\t\t// Propagate exception as error if not done\n\t\t\t\tif ( state < 2 ) {\n\t\t\t\t\tdone( -1, e );\n\t\t\t\t// Simply rethrow otherwise\n\t\t\t\t} else {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Callback for when everything is done\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\n\t\t\tvar isSuccess, success, error, response, modified,\n\t\t\t\tstatusText = nativeStatusText;\n\n\t\t\t// Called once\n\t\t\tif ( state === 2 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// State is \"done\" now\n\t\t\tstate = 2;\n\n\t\t\t// Clear timeout if it exists\n\t\t\tif ( timeoutTimer ) {\n\t\t\t\tclearTimeout( timeoutTimer );\n\t\t\t}\n\n\t\t\t// Dereference transport for early garbage collection\n\t\t\t// (no matter how long the jqXHR object will be used)\n\t\t\ttransport = undefined;\n\n\t\t\t// Cache response headers\n\t\t\tresponseHeadersString = headers || \"\";\n\n\t\t\t// Set readyState\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n\n\t\t\t// Determine if successful\n\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\n\n\t\t\t// Get response data\n\t\t\tif ( responses ) {\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n\t\t\t}\n\n\t\t\t// Convert no matter what (that way responseXXX fields are always set)\n\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\n\n\t\t\t// If successful, handle type chaining\n\t\t\tif ( isSuccess ) {\n\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\t\tif ( s.ifModified ) {\n\t\t\t\t\tmodified = jqXHR.getResponseHeader(\"Last-Modified\");\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t\tmodified = jqXHR.getResponseHeader(\"etag\");\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if no content\n\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\n\t\t\t\t\tstatusText = \"nocontent\";\n\n\t\t\t\t// if not modified\n\t\t\t\t} else if ( status === 304 ) {\n\t\t\t\t\tstatusText = \"notmodified\";\n\n\t\t\t\t// If we have data, let's convert it\n\t\t\t\t} else {\n\t\t\t\t\tstatusText = response.state;\n\t\t\t\t\tsuccess = response.data;\n\t\t\t\t\terror = response.error;\n\t\t\t\t\tisSuccess = !error;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Extract error from statusText and normalize for non-aborts\n\t\t\t\terror = statusText;\n\t\t\t\tif ( status || !statusText ) {\n\t\t\t\t\tstatusText = \"error\";\n\t\t\t\t\tif ( status < 0 ) {\n\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set data for the fake xhr object\n\t\t\tjqXHR.status = status;\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n\n\t\t\t// Success/Error\n\t\t\tif ( isSuccess ) {\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n\t\t\t} else {\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n\t\t\t}\n\n\t\t\t// Status-dependent callbacks\n\t\t\tjqXHR.statusCode( statusCode );\n\t\t\tstatusCode = undefined;\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n\t\t\t}\n\n\t\t\t// Complete\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n\t\t\t\t// Handle the global AJAX counter\n\t\t\t\tif ( !( --jQuery.active ) ) {\n\t\t\t\t\tjQuery.event.trigger(\"ajaxStop\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn jqXHR;\n\t},\n\n\tgetJSON: function( url, data, callback ) {\n\t\treturn jQuery.get( url, data, callback, \"json\" );\n\t},\n\n\tgetScript: function( url, callback ) {\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n\t}\n});\n\njQuery.each( [ \"get\", \"post\" ], function( i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\t\t// Shift arguments if data argument was omitted\n\t\tif ( jQuery.isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\n\t\treturn jQuery.ajax({\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t});\n\t};\n});\n\n\njQuery._evalUrl = function( url ) {\n\treturn jQuery.ajax({\n\t\turl: url,\n\t\ttype: \"GET\",\n\t\tdataType: \"script\",\n\t\tasync: false,\n\t\tglobal: false,\n\t\t\"throws\": true\n\t});\n};\n\n\njQuery.fn.extend({\n\twrapAll: function( html ) {\n\t\tvar wrap;\n\n\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\treturn this.each(function( i ) {\n\t\t\t\tjQuery( this ).wrapAll( html.call(this, i) );\n\t\t\t});\n\t\t}\n\n\t\tif ( this[ 0 ] ) {\n\n\t\t\t// The elements to wrap the target around\n\t\t\twrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\n\n\t\t\tif ( this[ 0 ].parentNode ) {\n\t\t\t\twrap.insertBefore( this[ 0 ] );\n\t\t\t}\n\n\t\t\twrap.map(function() {\n\t\t\t\tvar elem = this;\n\n\t\t\t\twhile ( elem.firstElementChild ) {\n\t\t\t\t\telem = elem.firstElementChild;\n\t\t\t\t}\n\n\t\t\t\treturn elem;\n\t\t\t}).append( this );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\twrapInner: function( html ) {\n\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\treturn this.each(function( i ) {\n\t\t\t\tjQuery( this ).wrapInner( html.call(this, i) );\n\t\t\t});\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tvar self = jQuery( this ),\n\t\t\t\tcontents = self.contents();\n\n\t\t\tif ( contents.length ) {\n\t\t\t\tcontents.wrapAll( html );\n\n\t\t\t} else {\n\t\t\t\tself.append( html );\n\t\t\t}\n\t\t});\n\t},\n\n\twrap: function( html ) {\n\t\tvar isFunction = jQuery.isFunction( html );\n\n\t\treturn this.each(function( i ) {\n\t\t\tjQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );\n\t\t});\n\t},\n\n\tunwrap: function() {\n\t\treturn this.parent().each(function() {\n\t\t\tif ( !jQuery.nodeName( this, \"body\" ) ) {\n\t\t\t\tjQuery( this ).replaceWith( this.childNodes );\n\t\t\t}\n\t\t}).end();\n\t}\n});\n\n\njQuery.expr.filters.hidden = function( elem ) {\n\t// Support: Opera <= 12.12\n\t// Opera reports offsetWidths and offsetHeights less than zero on some elements\n\treturn elem.offsetWidth <= 0 && elem.offsetHeight <= 0;\n};\njQuery.expr.filters.visible = function( elem ) {\n\treturn !jQuery.expr.filters.hidden( elem );\n};\n\n\n\n\nvar r20 = /%20/g,\n\trbracket = /\\[\\]$/,\n\trCRLF = /\\r?\\n/g,\n\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\n\trsubmittable = /^(?:input|select|textarea|keygen)/i;\n\nfunction buildParams( prefix, obj, traditional, add ) {\n\tvar name;\n\n\tif ( jQuery.isArray( obj ) ) {\n\t\t// Serialize array item.\n\t\tjQuery.each( obj, function( i, v ) {\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, v );\n\n\t\t\t} else {\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams( prefix + \"[\" + ( typeof v === \"object\" ? i : \"\" ) + \"]\", v, traditional, add );\n\t\t\t}\n\t\t});\n\n\t} else if ( !traditional && jQuery.type( obj ) === \"object\" ) {\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t}\n\n\t} else {\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\n\n// Serialize an array of form elements or a set of\n// key/values into a query string\njQuery.param = function( a, traditional ) {\n\tvar prefix,\n\t\ts = [],\n\t\tadd = function( key, value ) {\n\t\t\t// If value is a function, invoke it and return its value\n\t\t\tvalue = jQuery.isFunction( value ) ? value() : ( value == null ? \"\" : value );\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" + encodeURIComponent( value );\n\t\t};\n\n\t// Set traditional to true for jQuery <= 1.3.2 behavior.\n\tif ( traditional === undefined ) {\n\t\ttraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;\n\t}\n\n\t// If an array was passed in, assume that it is an array of form elements.\n\tif ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n\t\t// Serialize the form elements\n\t\tjQuery.each( a, function() {\n\t\t\tadd( this.name, this.value );\n\t\t});\n\n\t} else {\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t// did it), otherwise encode params recursively.\n\t\tfor ( prefix in a ) {\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t}\n\t}\n\n\t// Return the resulting serialization\n\treturn s.join( \"&\" ).replace( r20, \"+\" );\n};\n\njQuery.fn.extend({\n\tserialize: function() {\n\t\treturn jQuery.param( this.serializeArray() );\n\t},\n\tserializeArray: function() {\n\t\treturn this.map(function() {\n\t\t\t// Can add propHook for \"elements\" to filter or add form elements\n\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n\t\t})\n\t\t.filter(function() {\n\t\t\tvar type = this.type;\n\n\t\t\t// Use .is( \":disabled\" ) so that fieldset[disabled] works\n\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n\t\t\t\t( this.checked || !rcheckableType.test( type ) );\n\t\t})\n\t\t.map(function( i, elem ) {\n\t\t\tvar val = jQuery( this ).val();\n\n\t\t\treturn val == null ?\n\t\t\t\tnull :\n\t\t\t\tjQuery.isArray( val ) ?\n\t\t\t\t\tjQuery.map( val, function( val ) {\n\t\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t\t}) :\n\t\t\t\t\t{ name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t}).get();\n\t}\n});\n\n\njQuery.ajaxSettings.xhr = function() {\n\ttry {\n\t\treturn new XMLHttpRequest();\n\t} catch( e ) {}\n};\n\nvar xhrId = 0,\n\txhrCallbacks = {},\n\txhrSuccessStatus = {\n\t\t// file protocol always yields status code 0, assume 200\n\t\t0: 200,\n\t\t// Support: IE9\n\t\t// #1450: sometimes IE returns 1223 when it should be 204\n\t\t1223: 204\n\t},\n\txhrSupported = jQuery.ajaxSettings.xhr();\n\n// Support: IE9\n// Open requests must be manually aborted on unload (#5280)\n// See https://support.microsoft.com/kb/2856746 for more info\nif ( window.attachEvent ) {\n\twindow.attachEvent( \"onunload\", function() {\n\t\tfor ( var key in xhrCallbacks ) {\n\t\t\txhrCallbacks[ key ]();\n\t\t}\n\t});\n}\n\nsupport.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nsupport.ajax = xhrSupported = !!xhrSupported;\n\njQuery.ajaxTransport(function( options ) {\n\tvar callback;\n\n\t// Cross domain only allowed if supported through XMLHttpRequest\n\tif ( support.cors || xhrSupported && !options.crossDomain ) {\n\t\treturn {\n\t\t\tsend: function( headers, complete ) {\n\t\t\t\tvar i,\n\t\t\t\t\txhr = options.xhr(),\n\t\t\t\t\tid = ++xhrId;\n\n\t\t\t\txhr.open( options.type, options.url, options.async, options.username, options.password );\n\n\t\t\t\t// Apply custom fields if provided\n\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Override mime type if needed\n\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t}\n\n\t\t\t\t// X-Requested-With header\n\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\tif ( !options.crossDomain && !headers[\"X-Requested-With\"] ) {\n\t\t\t\t\theaders[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t\t}\n\n\t\t\t\t// Set headers\n\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t}\n\n\t\t\t\t// Callback\n\t\t\t\tcallback = function( type ) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tdelete xhrCallbacks[ id ];\n\t\t\t\t\t\t\tcallback = xhr.onload = xhr.onerror = null;\n\n\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\t// file: protocol always yields status 0; see #8605, #14207\n\t\t\t\t\t\t\t\t\txhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText,\n\t\t\t\t\t\t\t\t\t// Support: IE9\n\t\t\t\t\t\t\t\t\t// Accessing binary-data responseText throws an exception\n\t\t\t\t\t\t\t\t\t// (#11426)\n\t\t\t\t\t\t\t\t\ttypeof xhr.responseText === \"string\" ? {\n\t\t\t\t\t\t\t\t\t\ttext: xhr.responseText\n\t\t\t\t\t\t\t\t\t} : undefined,\n\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\t// Listen to events\n\t\t\t\txhr.onload = callback();\n\t\t\t\txhr.onerror = callback(\"error\");\n\n\t\t\t\t// Create the abort callback\n\t\t\t\tcallback = xhrCallbacks[ id ] = callback(\"abort\");\n\n\t\t\t\ttry {\n\t\t\t\t\t// Do send the request (this may raise an exception)\n\t\t\t\t\txhr.send( options.hasContent && options.data || null );\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\t// #14683: Only rethrow if this hasn't been notified as an error yet\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n});\n\n\n\n\n// Install script dataType\njQuery.ajaxSetup({\n\taccepts: {\n\t\tscript: \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"\n\t},\n\tcontents: {\n\t\tscript: /(?:java|ecma)script/\n\t},\n\tconverters: {\n\t\t\"text script\": function( text ) {\n\t\t\tjQuery.globalEval( text );\n\t\t\treturn text;\n\t\t}\n\t}\n});\n\n// Handle cache's special case and crossDomain\njQuery.ajaxPrefilter( \"script\", function( s ) {\n\tif ( s.cache === undefined ) {\n\t\ts.cache = false;\n\t}\n\tif ( s.crossDomain ) {\n\t\ts.type = \"GET\";\n\t}\n});\n\n// Bind script tag hack transport\njQuery.ajaxTransport( \"script\", function( s ) {\n\t// This transport only deals with cross domain requests\n\tif ( s.crossDomain ) {\n\t\tvar script, callback;\n\t\treturn {\n\t\t\tsend: function( _, complete ) {\n\t\t\t\tscript = jQuery(\"<script>\").prop({\n\t\t\t\t\tasync: true,\n\t\t\t\t\tcharset: s.scriptCharset,\n\t\t\t\t\tsrc: s.url\n\t\t\t\t}).on(\n\t\t\t\t\t\"load error\",\n\t\t\t\t\tcallback = function( evt ) {\n\t\t\t\t\t\tscript.remove();\n\t\t\t\t\t\tcallback = null;\n\t\t\t\t\t\tif ( evt ) {\n\t\t\t\t\t\t\tcomplete( evt.type === \"error\" ? 404 : 200, evt.type );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tdocument.head.appendChild( script[ 0 ] );\n\t\t\t},\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n});\n\n\n\n\nvar oldCallbacks = [],\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\n\n// Default jsonp settings\njQuery.ajaxSetup({\n\tjsonp: \"callback\",\n\tjsonpCallback: function() {\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce++ ) );\n\t\tthis[ callback ] = true;\n\t\treturn callback;\n\t}\n});\n\n// Detect, normalize options and install callbacks for jsonp requests\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n\n\tvar callbackName, overwritten, responseContainer,\n\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n\t\t\t\"url\" :\n\t\t\ttypeof s.data === \"string\" && !( s.contentType || \"\" ).indexOf(\"application/x-www-form-urlencoded\") && rjsonp.test( s.data ) && \"data\"\n\t\t);\n\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n\n\t\t// Get callback name, remembering preexisting value associated with it\n\t\tcallbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?\n\t\t\ts.jsonpCallback() :\n\t\t\ts.jsonpCallback;\n\n\t\t// Insert callback into url or form data\n\t\tif ( jsonProp ) {\n\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n\t\t} else if ( s.jsonp !== false ) {\n\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n\t\t}\n\n\t\t// Use data converter to retrieve json after script execution\n\t\ts.converters[\"script json\"] = function() {\n\t\t\tif ( !responseContainer ) {\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n\t\t\t}\n\t\t\treturn responseContainer[ 0 ];\n\t\t};\n\n\t\t// force json dataType\n\t\ts.dataTypes[ 0 ] = \"json\";\n\n\t\t// Install callback\n\t\toverwritten = window[ callbackName ];\n\t\twindow[ callbackName ] = function() {\n\t\t\tresponseContainer = arguments;\n\t\t};\n\n\t\t// Clean-up function (fires after converters)\n\t\tjqXHR.always(function() {\n\t\t\t// Restore preexisting value\n\t\t\twindow[ callbackName ] = overwritten;\n\n\t\t\t// Save back as free\n\t\t\tif ( s[ callbackName ] ) {\n\t\t\t\t// make sure that re-using the options doesn't screw things around\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n\n\t\t\t\t// save the callback name for future use\n\t\t\t\toldCallbacks.push( callbackName );\n\t\t\t}\n\n\t\t\t// Call if it was a function and we have a response\n\t\t\tif ( responseContainer && jQuery.isFunction( overwritten ) ) {\n\t\t\t\toverwritten( responseContainer[ 0 ] );\n\t\t\t}\n\n\t\t\tresponseContainer = overwritten = undefined;\n\t\t});\n\n\t\t// Delegate to script\n\t\treturn \"script\";\n\t}\n});\n\n\n\n\n// data: string of html\n// context (optional): If specified, the fragment will be created in this context, defaults to document\n// keepScripts (optional): If true, will include scripts passed in the html string\njQuery.parseHTML = function( data, context, keepScripts ) {\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\tif ( typeof context === \"boolean\" ) {\n\t\tkeepScripts = context;\n\t\tcontext = false;\n\t}\n\tcontext = context || document;\n\n\tvar parsed = rsingleTag.exec( data ),\n\t\tscripts = !keepScripts && [];\n\n\t// Single tag\n\tif ( parsed ) {\n\t\treturn [ context.createElement( parsed[1] ) ];\n\t}\n\n\tparsed = jQuery.buildFragment( [ data ], context, scripts );\n\n\tif ( scripts && scripts.length ) {\n\t\tjQuery( scripts ).remove();\n\t}\n\n\treturn jQuery.merge( [], parsed.childNodes );\n};\n\n\n// Keep a copy of the old load method\nvar _load = jQuery.fn.load;\n\n/**\n * Load a url into a page\n */\njQuery.fn.load = function( url, params, callback ) {\n\tif ( typeof url !== \"string\" && _load ) {\n\t\treturn _load.apply( this, arguments );\n\t}\n\n\tvar selector, type, response,\n\t\tself = this,\n\t\toff = url.indexOf(\" \");\n\n\tif ( off >= 0 ) {\n\t\tselector = jQuery.trim( url.slice( off ) );\n\t\turl = url.slice( 0, off );\n\t}\n\n\t// If it's a function\n\tif ( jQuery.isFunction( params ) ) {\n\n\t\t// We assume that it's the callback\n\t\tcallback = params;\n\t\tparams = undefined;\n\n\t// Otherwise, build a param string\n\t} else if ( params && typeof params === \"object\" ) {\n\t\ttype = \"POST\";\n\t}\n\n\t// If we have elements to modify, make the request\n\tif ( self.length > 0 ) {\n\t\tjQuery.ajax({\n\t\t\turl: url,\n\n\t\t\t// if \"type\" variable is undefined, then \"GET\" method will be used\n\t\t\ttype: type,\n\t\t\tdataType: \"html\",\n\t\t\tdata: params\n\t\t}).done(function( responseText ) {\n\n\t\t\t// Save response for use in complete callback\n\t\t\tresponse = arguments;\n\n\t\t\tself.html( selector ?\n\n\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\n\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\t\t\t\tjQuery(\"<div>\").append( jQuery.parseHTML( responseText ) ).find( selector ) :\n\n\t\t\t\t// Otherwise use the full result\n\t\t\t\tresponseText );\n\n\t\t}).complete( callback && function( jqXHR, status ) {\n\t\t\tself.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );\n\t\t});\n\t}\n\n\treturn this;\n};\n\n\n\n\n// Attach a bunch of functions for handling common AJAX events\njQuery.each( [ \"ajaxStart\", \"ajaxStop\", \"ajaxComplete\", \"ajaxError\", \"ajaxSuccess\", \"ajaxSend\" ], function( i, type ) {\n\tjQuery.fn[ type ] = function( fn ) {\n\t\treturn this.on( type, fn );\n\t};\n});\n\n\n\n\njQuery.expr.filters.animated = function( elem ) {\n\treturn jQuery.grep(jQuery.timers, function( fn ) {\n\t\treturn elem === fn.elem;\n\t}).length;\n};\n\n\n\n\nvar docElem = window.document.documentElement;\n\n/**\n * Gets a window from an element\n */\nfunction getWindow( elem ) {\n\treturn jQuery.isWindow( elem ) ? elem : elem.nodeType === 9 && elem.defaultView;\n}\n\njQuery.offset = {\n\tsetOffset: function( elem, options, i ) {\n\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\n\t\t\tposition = jQuery.css( elem, \"position\" ),\n\t\t\tcurElem = jQuery( elem ),\n\t\t\tprops = {};\n\n\t\t// Set position first, in-case top/left are set even on static elem\n\t\tif ( position === \"static\" ) {\n\t\t\telem.style.position = \"relative\";\n\t\t}\n\n\t\tcurOffset = curElem.offset();\n\t\tcurCSSTop = jQuery.css( elem, \"top\" );\n\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\n\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) &&\n\t\t\t( curCSSTop + curCSSLeft ).indexOf(\"auto\") > -1;\n\n\t\t// Need to be able to calculate position if either\n\t\t// top or left is auto and position is either absolute or fixed\n\t\tif ( calculatePosition ) {\n\t\t\tcurPosition = curElem.position();\n\t\t\tcurTop = curPosition.top;\n\t\t\tcurLeft = curPosition.left;\n\n\t\t} else {\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n\t\t}\n\n\t\tif ( jQuery.isFunction( options ) ) {\n\t\t\toptions = options.call( elem, i, curOffset );\n\t\t}\n\n\t\tif ( options.top != null ) {\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n\t\t}\n\t\tif ( options.left != null ) {\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n\t\t}\n\n\t\tif ( \"using\" in options ) {\n\t\t\toptions.using.call( elem, props );\n\n\t\t} else {\n\t\t\tcurElem.css( props );\n\t\t}\n\t}\n};\n\njQuery.fn.extend({\n\toffset: function( options ) {\n\t\tif ( arguments.length ) {\n\t\t\treturn options === undefined ?\n\t\t\t\tthis :\n\t\t\t\tthis.each(function( i ) {\n\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\n\t\t\t\t});\n\t\t}\n\n\t\tvar docElem, win,\n\t\t\telem = this[ 0 ],\n\t\t\tbox = { top: 0, left: 0 },\n\t\t\tdoc = elem && elem.ownerDocument;\n\n\t\tif ( !doc ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdocElem = doc.documentElement;\n\n\t\t// Make sure it's not a disconnected DOM node\n\t\tif ( !jQuery.contains( docElem, elem ) ) {\n\t\t\treturn box;\n\t\t}\n\n\t\t// Support: BlackBerry 5, iOS 3 (original iPhone)\n\t\t// If we don't have gBCR, just use 0,0 rather than error\n\t\tif ( typeof elem.getBoundingClientRect !== strundefined ) {\n\t\t\tbox = elem.getBoundingClientRect();\n\t\t}\n\t\twin = getWindow( doc );\n\t\treturn {\n\t\t\ttop: box.top + win.pageYOffset - docElem.clientTop,\n\t\t\tleft: box.left + win.pageXOffset - docElem.clientLeft\n\t\t};\n\t},\n\n\tposition: function() {\n\t\tif ( !this[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar offsetParent, offset,\n\t\t\telem = this[ 0 ],\n\t\t\tparentOffset = { top: 0, left: 0 };\n\n\t\t// Fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is its only offset parent\n\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n\t\t\t// Assume getBoundingClientRect is there when computed position is fixed\n\t\t\toffset = elem.getBoundingClientRect();\n\n\t\t} else {\n\t\t\t// Get *real* offsetParent\n\t\t\toffsetParent = this.offsetParent();\n\n\t\t\t// Get correct offsets\n\t\t\toffset = this.offset();\n\t\t\tif ( !jQuery.nodeName( offsetParent[ 0 ], \"html\" ) ) {\n\t\t\t\tparentOffset = offsetParent.offset();\n\t\t\t}\n\n\t\t\t// Add offsetParent borders\n\t\t\tparentOffset.top += jQuery.css( offsetParent[ 0 ], \"borderTopWidth\", true );\n\t\t\tparentOffset.left += jQuery.css( offsetParent[ 0 ], \"borderLeftWidth\", true );\n\t\t}\n\n\t\t// Subtract parent offsets and element margins\n\t\treturn {\n\t\t\ttop: offset.top - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\n\t\t};\n\t},\n\n\toffsetParent: function() {\n\t\treturn this.map(function() {\n\t\t\tvar offsetParent = this.offsetParent || docElem;\n\n\t\t\twhile ( offsetParent && ( !jQuery.nodeName( offsetParent, \"html\" ) && jQuery.css( offsetParent, \"position\" ) === \"static\" ) ) {\n\t\t\t\toffsetParent = offsetParent.offsetParent;\n\t\t\t}\n\n\t\t\treturn offsetParent || docElem;\n\t\t});\n\t}\n});\n\n// Create scrollLeft and scrollTop methods\njQuery.each( { scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function( method, prop ) {\n\tvar top = \"pageYOffset\" === prop;\n\n\tjQuery.fn[ method ] = function( val ) {\n\t\treturn access( this, function( elem, method, val ) {\n\t\t\tvar win = getWindow( elem );\n\n\t\t\tif ( val === undefined ) {\n\t\t\t\treturn win ? win[ prop ] : elem[ method ];\n\t\t\t}\n\n\t\t\tif ( win ) {\n\t\t\t\twin.scrollTo(\n\t\t\t\t\t!top ? val : window.pageXOffset,\n\t\t\t\t\ttop ? val : window.pageYOffset\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\telem[ method ] = val;\n\t\t\t}\n\t\t}, method, val, arguments.length, null );\n\t};\n});\n\n// Support: Safari<7+, Chrome<37+\n// Add the top/left cssHooks using jQuery.fn.position\n// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n// Blink bug: https://code.google.com/p/chromium/issues/detail?id=229280\n// getComputedStyle returns percent when specified for top/left/bottom/right;\n// rather than make the css module depend on the offset module, just check for it here\njQuery.each( [ \"top\", \"left\" ], function( i, prop ) {\n\tjQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,\n\t\tfunction( elem, computed ) {\n\t\t\tif ( computed ) {\n\t\t\t\tcomputed = curCSS( elem, prop );\n\t\t\t\t// If curCSS returns percentage, fallback to offset\n\t\t\t\treturn rnumnonpx.test( computed ) ?\n\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n\t\t\t\t\tcomputed;\n\t\t\t}\n\t\t}\n\t);\n});\n\n\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n\tjQuery.each( { padding: \"inner\" + name, content: type, \"\": \"outer\" + name }, function( defaultExtra, funcName ) {\n\t\t// Margin is only for outerHeight, outerWidth\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n\n\t\t\treturn access( this, function( elem, type, value ) {\n\t\t\t\tvar doc;\n\n\t\t\t\tif ( jQuery.isWindow( elem ) ) {\n\t\t\t\t\t// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there\n\t\t\t\t\t// isn't a whole lot we can do. See pull request at this URL for discussion:\n\t\t\t\t\t// https://github.com/jquery/jquery/pull/764\n\t\t\t\t\treturn elem.document.documentElement[ \"client\" + name ];\n\t\t\t\t}\n\n\t\t\t\t// Get document width or height\n\t\t\t\tif ( elem.nodeType === 9 ) {\n\t\t\t\t\tdoc = elem.documentElement;\n\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\n\t\t\t\t\t// whichever is greatest\n\t\t\t\t\treturn Math.max(\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n\t\t\t\t\t\tdoc[ \"client\" + name ]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value === undefined ?\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\n\t\t\t\t\tjQuery.css( elem, type, extra ) :\n\n\t\t\t\t\t// Set width or height on the element\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\n\t\t\t}, type, chainable ? margin : undefined, chainable, null );\n\t\t};\n\t});\n});\n\n\n// The number of elements contained in the matched element set\njQuery.fn.size = function() {\n\treturn this.length;\n};\n\njQuery.fn.andSelf = jQuery.fn.addBack;\n\n\n\n\n// Register as a named AMD module, since jQuery can be concatenated with other\n// files that may use define, but not via a proper concatenation script that\n// understands anonymous AMD modules. A named AMD is safest and most robust\n// way to register. Lowercase jquery is used because AMD module names are\n// derived from file names, and jQuery is normally delivered in a lowercase\n// file name. Do this after creating the global so that if an AMD module wants\n// to call noConflict to hide this version of jQuery, it will work.\n\n// Note that for maximum portability, libraries that are not jQuery should\n// declare themselves as anonymous modules, and avoid setting a global if an\n// AMD loader is present. jQuery is a special case. For more information, see\n// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon\n\nif ( typeof define === \"function\" && define.amd ) {\n\tdefine( \"jquery\", [], function() {\n\t\treturn jQuery;\n\t});\n}\n\n\n\n\nvar\n\t// Map over jQuery in case of overwrite\n\t_jQuery = window.jQuery,\n\n\t// Map over the $ in case of overwrite\n\t_$ = window.$;\n\njQuery.noConflict = function( deep ) {\n\tif ( window.$ === jQuery ) {\n\t\twindow.$ = _$;\n\t}\n\n\tif ( deep && window.jQuery === jQuery ) {\n\t\twindow.jQuery = _jQuery;\n\t}\n\n\treturn jQuery;\n};\n\n// Expose jQuery and $ identifiers, even in AMD\n// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)\n// and CommonJS for browser emulators (#13566)\nif ( typeof noGlobal === strundefined ) {\n\twindow.jQuery = window.$ = jQuery;\n}\n\n\n\n\nreturn jQuery;\n\n}));\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/jquery/dist/jquery.js\n **/","import 'webrtc-adapter-test'; // consistent webrtc api across browsers\nimport EventEmitter from 'eventemitter2';\nimport getUserMedia from './getUserMedia';\n\nclass Call extends EventEmitter{\n    constructor (video, audio) {\n        super();\n        var that = this;\n\n        this._audio = !!audio;\n        this._video = !!video;\n        this._pc = new RTCPeerConnection();\n        this._initiator = false;\n        this._pUserMedia = undefined;\n        this._iceCandidates = [];\n        this._pIceCandidates = new Promise((resolve, reject) => {\n            this._pc.onicecandidate = e => {\n                if (e.candidate) that._iceCandidates.push(e.candidate);\n                if (that._pc.iceGatheringState === \"complete\"){\n                    that._pc.onicecandidate = undefined;\n                    resolve(that._iceCandidates);\n                }\n            };\n        });\n\n        this._pc.onaddstream = data => {\n            that.emit('stream.add.remote', data.stream);\n        };\n    }\n\n    offer () {\n        this._pUserMedia = this._pUserMedia || getUserMedia(this._video, this._audio);\n        return this._pUserMedia.then(userMedia => {\n            this._pc.addStream(userMedia);\n            this.emit('stream.add.local', userMedia);\n            return this._createOffer().then(offer => {\n                return this._setLocalDescription(offer).then(() => {\n                    return this._pIceCandidates.then(candidates => {\n                        this._initiator = true;\n                        return { offer: offer, candidates: candidates };\n                    });\n                });\n            });\n        });\n    }\n\n    acknowledge (offeranswer, remoteCandidates) {\n        return this._setRemoteDescription(offeranswer).then(() => {\n            return Promise.all(remoteCandidates.map(c => {\n                return this._addRemoteIceCandidate(c);\n            }));\n        }).then(() => undefined);\n    }\n\n    answer (offer, remoteCandidates) {\n        this._pUserMedia = this._pUserMedia || getUserMedia(this._video, this._audio);\n        return this._pUserMedia.then(userMedia => {\n            this._pc.addStream(userMedia);\n            this.emit('stream.add.local', userMedia);\n            return this.acknowledge(offer, remoteCandidates).then(() => {\n                return this._createAnswer().then(answer => {\n                    return this._setLocalDescription(answer).then(() => {\n                        return this._pIceCandidates.then(candidates => {\n                            return { answer: answer, candidates: candidates };\n                        });\n                    });\n                });\n            });\n        });\n    }\n\n    _createOffer () {\n        return this._pc.createOffer();\n    }\n\n    _createAnswer () {\n        return this._pc.createAnswer();\n    }\n\n    _setLocalDescription (offeranswer) {\n        return this._pc.setLocalDescription(new RTCSessionDescription(offeranswer));\n    }\n\n    _setRemoteDescription (offeranswer) {\n        return this._pc.setRemoteDescription(new RTCSessionDescription(offeranswer));\n    }\n\n    _addRemoteIceCandidate (candidate) {\n        return this._pc.addIceCandidate(new RTCIceCandidate(candidate));\n    }\n}\n\nexport default Call;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/call.js\n **/","/*\n *  Copyright (c) 2014 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* More information about these options at jshint.com/docs/options */\n/* jshint browser: true, camelcase: true, curly: true, devel: true,\n   eqeqeq: true, forin: false, globalstrict: true, node: true,\n   quotmark: single, undef: true, unused: strict */\n/* global mozRTCIceCandidate, mozRTCPeerConnection, Promise,\nmozRTCSessionDescription, webkitRTCPeerConnection, MediaStreamTrack */\n/* exported trace,requestUserMedia */\n\n'use strict';\n\nvar getUserMedia = null;\nvar attachMediaStream = null;\nvar reattachMediaStream = null;\nvar webrtcDetectedBrowser = null;\nvar webrtcDetectedVersion = null;\nvar webrtcMinimumVersion = null;\nvar webrtcUtils = {\n  log: function() {\n    // suppress console.log output when being included as a module.\n    if (typeof module !== 'undefined' ||\n        typeof require === 'function' && typeof define === 'function') {\n      return;\n    }\n    console.log.apply(console, arguments);\n  }\n};\n\nfunction trace(text) {\n  // This function is used for logging.\n  if (text[text.length - 1] === '\\n') {\n    text = text.substring(0, text.length - 1);\n  }\n  if (window.performance) {\n    var now = (window.performance.now() / 1000).toFixed(3);\n    webrtcUtils.log(now + ': ' + text);\n  } else {\n    webrtcUtils.log(text);\n  }\n}\n\nif (typeof window === 'object') {\n  if (window.HTMLMediaElement &&\n    !('srcObject' in window.HTMLMediaElement.prototype)) {\n    // Shim the srcObject property, once, when HTMLMediaElement is found.\n    Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n      get: function() {\n        // If prefixed srcObject property exists, return it.\n        // Otherwise use the shimmed property, _srcObject\n        return 'mozSrcObject' in this ? this.mozSrcObject : this._srcObject;\n      },\n      set: function(stream) {\n        if ('mozSrcObject' in this) {\n          this.mozSrcObject = stream;\n        } else {\n          // Use _srcObject as a private property for this shim\n          this._srcObject = stream;\n          // TODO: revokeObjectUrl(this.src) when !stream to release resources?\n          this.src = URL.createObjectURL(stream);\n        }\n      }\n    });\n  }\n  // Proxy existing globals\n  getUserMedia = window.navigator && window.navigator.getUserMedia;\n}\n\n// Attach a media stream to an element.\nattachMediaStream = function(element, stream) {\n  element.srcObject = stream;\n};\n\nreattachMediaStream = function(to, from) {\n  to.srcObject = from.srcObject;\n};\n\nif (typeof window === 'undefined' || !window.navigator) {\n  webrtcUtils.log('This does not appear to be a browser');\n  webrtcDetectedBrowser = 'not a browser';\n} else if (navigator.mozGetUserMedia && window.mozRTCPeerConnection) {\n  webrtcUtils.log('This appears to be Firefox');\n\n  webrtcDetectedBrowser = 'firefox';\n\n  // the detected firefox version.\n  webrtcDetectedVersion =\n    parseInt(navigator.userAgent.match(/Firefox\\/([0-9]+)\\./)[1], 10);\n\n  // the minimum firefox version still supported by adapter.\n  webrtcMinimumVersion = 31;\n\n  // The RTCPeerConnection object.\n  window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n    if (webrtcDetectedVersion < 38) {\n      // .urls is not supported in FF < 38.\n      // create RTCIceServers with a single url.\n      if (pcConfig && pcConfig.iceServers) {\n        var newIceServers = [];\n        for (var i = 0; i < pcConfig.iceServers.length; i++) {\n          var server = pcConfig.iceServers[i];\n          if (server.hasOwnProperty('urls')) {\n            for (var j = 0; j < server.urls.length; j++) {\n              var newServer = {\n                url: server.urls[j]\n              };\n              if (server.urls[j].indexOf('turn') === 0) {\n                newServer.username = server.username;\n                newServer.credential = server.credential;\n              }\n              newIceServers.push(newServer);\n            }\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n    }\n    return new mozRTCPeerConnection(pcConfig, pcConstraints); // jscs:ignore requireCapitalizedConstructors\n  };\n\n  // The RTCSessionDescription object.\n  if (!window.RTCSessionDescription) {\n    window.RTCSessionDescription = mozRTCSessionDescription;\n  }\n\n  // The RTCIceCandidate object.\n  if (!window.RTCIceCandidate) {\n    window.RTCIceCandidate = mozRTCIceCandidate;\n  }\n\n  // getUserMedia constraints shim.\n  getUserMedia = function(constraints, onSuccess, onError) {\n    var constraintsToFF37 = function(c) {\n      if (typeof c !== 'object' || c.require) {\n        return c;\n      }\n      var require = [];\n      Object.keys(c).forEach(function(key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = c[key] = (typeof c[key] === 'object') ?\n            c[key] : {ideal: c[key]};\n        if (r.min !== undefined ||\n            r.max !== undefined || r.exact !== undefined) {\n          require.push(key);\n        }\n        if (r.exact !== undefined) {\n          if (typeof r.exact === 'number') {\n            r.min = r.max = r.exact;\n          } else {\n            c[key] = r.exact;\n          }\n          delete r.exact;\n        }\n        if (r.ideal !== undefined) {\n          c.advanced = c.advanced || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[key] = {min: r.ideal, max: r.ideal};\n          } else {\n            oc[key] = r.ideal;\n          }\n          c.advanced.push(oc);\n          delete r.ideal;\n          if (!Object.keys(r).length) {\n            delete c[key];\n          }\n        }\n      });\n      if (require.length) {\n        c.require = require;\n      }\n      return c;\n    };\n    if (webrtcDetectedVersion < 38) {\n      webrtcUtils.log('spec: ' + JSON.stringify(constraints));\n      if (constraints.audio) {\n        constraints.audio = constraintsToFF37(constraints.audio);\n      }\n      if (constraints.video) {\n        constraints.video = constraintsToFF37(constraints.video);\n      }\n      webrtcUtils.log('ff37: ' + JSON.stringify(constraints));\n    }\n    return navigator.mozGetUserMedia(constraints, onSuccess, onError);\n  };\n\n  navigator.getUserMedia = getUserMedia;\n\n  // Shim for mediaDevices on older versions.\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {getUserMedia: requestUserMedia,\n      addEventListener: function() { },\n      removeEventListener: function() { }\n    };\n  }\n  navigator.mediaDevices.enumerateDevices =\n      navigator.mediaDevices.enumerateDevices || function() {\n    return new Promise(function(resolve) {\n      var infos = [\n        {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n        {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n      ];\n      resolve(infos);\n    });\n  };\n\n  if (webrtcDetectedVersion < 41) {\n    // Work around http://bugzil.la/1169665\n    var orgEnumerateDevices =\n        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n    navigator.mediaDevices.enumerateDevices = function() {\n      return orgEnumerateDevices().then(undefined, function(e) {\n        if (e.name === 'NotFoundError') {\n          return [];\n        }\n        throw e;\n      });\n    };\n  }\n} else if (navigator.webkitGetUserMedia && !!window.chrome) {\n  webrtcUtils.log('This appears to be Chrome');\n\n  webrtcDetectedBrowser = 'chrome';\n\n  // the detected chrome version.\n  webrtcDetectedVersion =\n    parseInt(navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)[2], 10);\n\n  // the minimum chrome version still supported by adapter.\n  webrtcMinimumVersion = 38;\n\n  // The RTCPeerConnection object.\n  window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n    // Translate iceTransportPolicy to iceTransports,\n    // see https://code.google.com/p/webrtc/issues/detail?id=4869\n    if (pcConfig && pcConfig.iceTransportPolicy) {\n      pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n    }\n\n    var pc = new webkitRTCPeerConnection(pcConfig, pcConstraints); // jscs:ignore requireCapitalizedConstructors\n    var origGetStats = pc.getStats.bind(pc);\n    pc.getStats = function(selector, successCallback, errorCallback) { // jshint ignore: line\n      var self = this;\n      var args = arguments;\n\n      // If selector is a function then we are in the old style stats so just\n      // pass back the original getStats format to avoid breaking old users.\n      if (arguments.length > 0 && typeof selector === 'function') {\n        return origGetStats(selector, successCallback);\n      }\n\n      var fixChromeStats = function(response) {\n        var standardReport = {};\n        var reports = response.result();\n        reports.forEach(function(report) {\n          var standardStats = {\n            id: report.id,\n            timestamp: report.timestamp,\n            type: report.type\n          };\n          report.names().forEach(function(name) {\n            standardStats[name] = report.stat(name);\n          });\n          standardReport[standardStats.id] = standardStats;\n        });\n\n        return standardReport;\n      };\n\n      if (arguments.length >= 2) {\n        var successCallbackWrapper = function(response) {\n          args[1](fixChromeStats(response));\n        };\n\n        return origGetStats.apply(this, [successCallbackWrapper, arguments[0]]);\n      }\n\n      // promise-support\n      return new Promise(function(resolve, reject) {\n        if (args.length === 1 && selector === null) {\n          origGetStats.apply(self, [\n              function(response) {\n                resolve.apply(null, [fixChromeStats(response)]);\n              }, reject]);\n        } else {\n          origGetStats.apply(self, [resolve, reject]);\n        }\n      });\n    };\n\n    return pc;\n  };\n\n  // add promise support\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    var nativeMethod = webkitRTCPeerConnection.prototype[method];\n    webkitRTCPeerConnection.prototype[method] = function() {\n      var self = this;\n      if (arguments.length < 1 || (arguments.length === 1 &&\n          typeof(arguments[0]) === 'object')) {\n        var opts = arguments.length === 1 ? arguments[0] : undefined;\n        return new Promise(function(resolve, reject) {\n          nativeMethod.apply(self, [resolve, reject, opts]);\n        });\n      } else {\n        return nativeMethod.apply(this, arguments);\n      }\n    };\n  });\n\n  ['setLocalDescription', 'setRemoteDescription',\n      'addIceCandidate'].forEach(function(method) {\n    var nativeMethod = webkitRTCPeerConnection.prototype[method];\n    webkitRTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      var self = this;\n      return new Promise(function(resolve, reject) {\n        nativeMethod.apply(self, [args[0],\n            function() {\n              resolve();\n              if (args.length >= 2) {\n                args[1].apply(null, []);\n              }\n            },\n            function(err) {\n              reject(err);\n              if (args.length >= 3) {\n                args[2].apply(null, [err]);\n              }\n            }]\n          );\n      });\n    };\n  });\n\n  // getUserMedia constraints shim.\n  var constraintsToChrome = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function(key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function(mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  getUserMedia = function(constraints, onSuccess, onError) {\n    if (constraints.audio) {\n      constraints.audio = constraintsToChrome(constraints.audio);\n    }\n    if (constraints.video) {\n      constraints.video = constraintsToChrome(constraints.video);\n    }\n    webrtcUtils.log('chrome: ' + JSON.stringify(constraints));\n    return navigator.webkitGetUserMedia(constraints, onSuccess, onError);\n  };\n  navigator.getUserMedia = getUserMedia;\n\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {getUserMedia: requestUserMedia,\n                              enumerateDevices: function() {\n      return new Promise(function(resolve) {\n        var kinds = {audio: 'audioinput', video: 'videoinput'};\n        return MediaStreamTrack.getSources(function(devices) {\n          resolve(devices.map(function(device) {\n            return {label: device.label,\n                    kind: kinds[device.kind],\n                    deviceId: device.id,\n                    groupId: ''};\n          }));\n        });\n      });\n    }};\n  }\n\n  // A shim for getUserMedia method on the mediaDevices object.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (!navigator.mediaDevices.getUserMedia) {\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      return requestUserMedia(constraints);\n    };\n  } else {\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      webrtcUtils.log('spec:   ' + JSON.stringify(c)); // whitespace for alignment\n      c.audio = constraintsToChrome(c.audio);\n      c.video = constraintsToChrome(c.video);\n      webrtcUtils.log('chrome: ' + JSON.stringify(c));\n      return origGetUserMedia(c);\n    };\n  }\n\n  // Dummy devicechange event methods.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n    navigator.mediaDevices.addEventListener = function() {\n      webrtcUtils.log('Dummy mediaDevices.addEventListener called.');\n    };\n  }\n  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n    navigator.mediaDevices.removeEventListener = function() {\n      webrtcUtils.log('Dummy mediaDevices.removeEventListener called.');\n    };\n  }\n\n  // Attach a media stream to an element.\n  attachMediaStream = function(element, stream) {\n    if (webrtcDetectedVersion >= 43) {\n      element.srcObject = stream;\n    } else if (typeof element.src !== 'undefined') {\n      element.src = URL.createObjectURL(stream);\n    } else {\n      webrtcUtils.log('Error attaching stream to element.');\n    }\n  };\n  reattachMediaStream = function(to, from) {\n    if (webrtcDetectedVersion >= 43) {\n      to.srcObject = from.srcObject;\n    } else {\n      to.src = from.src;\n    }\n  };\n\n} else if (navigator.mediaDevices && navigator.userAgent.match(\n    /Edge\\/(\\d+).(\\d+)$/)) {\n  webrtcUtils.log('This appears to be Edge');\n  webrtcDetectedBrowser = 'edge';\n\n  webrtcDetectedVersion =\n    parseInt(navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)[2], 10);\n\n  // the minimum version still supported by adapter.\n  webrtcMinimumVersion = 12;\n} else {\n  webrtcUtils.log('Browser does not appear to be WebRTC-capable');\n}\n\n// Returns the result of getUserMedia as a Promise.\nfunction requestUserMedia(constraints) {\n  return new Promise(function(resolve, reject) {\n    getUserMedia(constraints, resolve, reject);\n  });\n}\n\nvar webrtcTesting = {};\ntry {\n  Object.defineProperty(webrtcTesting, 'version', {\n    set: function(version) {\n      webrtcDetectedVersion = version;\n    }\n  });\n} catch (e) {}\n\nif (typeof module !== 'undefined') {\n  var RTCPeerConnection;\n  if (typeof window !== 'undefined') {\n    RTCPeerConnection = window.RTCPeerConnection;\n  }\n  module.exports = {\n    RTCPeerConnection: RTCPeerConnection,\n    getUserMedia: getUserMedia,\n    attachMediaStream: attachMediaStream,\n    reattachMediaStream: reattachMediaStream,\n    webrtcDetectedBrowser: webrtcDetectedBrowser,\n    webrtcDetectedVersion: webrtcDetectedVersion,\n    webrtcMinimumVersion: webrtcMinimumVersion,\n    webrtcTesting: webrtcTesting\n    //requestUserMedia: not exposed on purpose.\n    //trace: not exposed on purpose.\n  };\n} else if ((typeof require === 'function') && (typeof define === 'function')) {\n  // Expose objects and functions when RequireJS is doing the loading.\n  define([], function() {\n    return {\n      RTCPeerConnection: window.RTCPeerConnection,\n      getUserMedia: getUserMedia,\n      attachMediaStream: attachMediaStream,\n      reattachMediaStream: reattachMediaStream,\n      webrtcDetectedBrowser: webrtcDetectedBrowser,\n      webrtcDetectedVersion: webrtcDetectedVersion,\n      webrtcMinimumVersion: webrtcMinimumVersion,\n      webrtcTesting: webrtcTesting\n      //requestUserMedia: not exposed on purpose.\n      //trace: not exposed on purpose.\n    };\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/webrtc-adapter-test/adapter.js\n **/","/*!\n * EventEmitter2\n * https://github.com/hij1nx/EventEmitter2\n *\n * Copyright (c) 2013 hij1nx\n * Licensed under the MIT license.\n */\n;!function(undefined) {\n\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\n  };\n  var defaultMaxListeners = 10;\n\n  function init() {\n    this._events = {};\n    if (this._conf) {\n      configure.call(this, this._conf);\n    }\n  }\n\n  function configure(conf) {\n    if (conf) {\n\n      this._conf = conf;\n\n      conf.delimiter && (this.delimiter = conf.delimiter);\n      conf.maxListeners && (this._events.maxListeners = conf.maxListeners);\n      conf.wildcard && (this.wildcard = conf.wildcard);\n      conf.newListener && (this.newListener = conf.newListener);\n\n      if (this.wildcard) {\n        this.listenerTree = {};\n      }\n    }\n  }\n\n  function EventEmitter(conf) {\n    this._events = {};\n    this.newListener = false;\n    configure.call(this, conf);\n  }\n\n  //\n  // Attention, function return type now is array, always !\n  // It has zero elements if no any matches found and one or more\n  // elements (leafs) if there are matches\n  //\n  function searchListenerTree(handlers, type, tree, i) {\n    if (!tree) {\n      return [];\n    }\n    var listeners=[], leaf, len, branch, xTree, xxTree, isolatedBranch, endReached,\n        typeLength = type.length, currentType = type[i], nextType = type[i+1];\n    if (i === typeLength && tree._listeners) {\n      //\n      // If at the end of the event(s) list and the tree has listeners\n      // invoke those listeners.\n      //\n      if (typeof tree._listeners === 'function') {\n        handlers && handlers.push(tree._listeners);\n        return [tree];\n      } else {\n        for (leaf = 0, len = tree._listeners.length; leaf < len; leaf++) {\n          handlers && handlers.push(tree._listeners[leaf]);\n        }\n        return [tree];\n      }\n    }\n\n    if ((currentType === '*' || currentType === '**') || tree[currentType]) {\n      //\n      // If the event emitted is '*' at this part\n      // or there is a concrete match at this patch\n      //\n      if (currentType === '*') {\n        for (branch in tree) {\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\n            listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+1));\n          }\n        }\n        return listeners;\n      } else if(currentType === '**') {\n        endReached = (i+1 === typeLength || (i+2 === typeLength && nextType === '*'));\n        if(endReached && tree._listeners) {\n          // The next element has a _listeners, add it to the handlers.\n          listeners = listeners.concat(searchListenerTree(handlers, type, tree, typeLength));\n        }\n\n        for (branch in tree) {\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\n            if(branch === '*' || branch === '**') {\n              if(tree[branch]._listeners && !endReached) {\n                listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], typeLength));\n              }\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\n            } else if(branch === nextType) {\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+2));\n            } else {\n              // No match on this one, shift into the tree but not in the type array.\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\n            }\n          }\n        }\n        return listeners;\n      }\n\n      listeners = listeners.concat(searchListenerTree(handlers, type, tree[currentType], i+1));\n    }\n\n    xTree = tree['*'];\n    if (xTree) {\n      //\n      // If the listener tree will allow any match for this part,\n      // then recursively explore all branches of the tree\n      //\n      searchListenerTree(handlers, type, xTree, i+1);\n    }\n\n    xxTree = tree['**'];\n    if(xxTree) {\n      if(i < typeLength) {\n        if(xxTree._listeners) {\n          // If we have a listener on a '**', it will catch all, so add its handler.\n          searchListenerTree(handlers, type, xxTree, typeLength);\n        }\n\n        // Build arrays of matching next branches and others.\n        for(branch in xxTree) {\n          if(branch !== '_listeners' && xxTree.hasOwnProperty(branch)) {\n            if(branch === nextType) {\n              // We know the next element will match, so jump twice.\n              searchListenerTree(handlers, type, xxTree[branch], i+2);\n            } else if(branch === currentType) {\n              // Current node matches, move into the tree.\n              searchListenerTree(handlers, type, xxTree[branch], i+1);\n            } else {\n              isolatedBranch = {};\n              isolatedBranch[branch] = xxTree[branch];\n              searchListenerTree(handlers, type, { '**': isolatedBranch }, i+1);\n            }\n          }\n        }\n      } else if(xxTree._listeners) {\n        // We have reached the end and still on a '**'\n        searchListenerTree(handlers, type, xxTree, typeLength);\n      } else if(xxTree['*'] && xxTree['*']._listeners) {\n        searchListenerTree(handlers, type, xxTree['*'], typeLength);\n      }\n    }\n\n    return listeners;\n  }\n\n  function growListenerTree(type, listener) {\n\n    type = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n\n    //\n    // Looks for two consecutive '**', if so, don't add the event at all.\n    //\n    for(var i = 0, len = type.length; i+1 < len; i++) {\n      if(type[i] === '**' && type[i+1] === '**') {\n        return;\n      }\n    }\n\n    var tree = this.listenerTree;\n    var name = type.shift();\n\n    while (name) {\n\n      if (!tree[name]) {\n        tree[name] = {};\n      }\n\n      tree = tree[name];\n\n      if (type.length === 0) {\n\n        if (!tree._listeners) {\n          tree._listeners = listener;\n        }\n        else if(typeof tree._listeners === 'function') {\n          tree._listeners = [tree._listeners, listener];\n        }\n        else if (isArray(tree._listeners)) {\n\n          tree._listeners.push(listener);\n\n          if (!tree._listeners.warned) {\n\n            var m = defaultMaxListeners;\n\n            if (typeof this._events.maxListeners !== 'undefined') {\n              m = this._events.maxListeners;\n            }\n\n            if (m > 0 && tree._listeners.length > m) {\n\n              tree._listeners.warned = true;\n              console.error('(node) warning: possible EventEmitter memory ' +\n                            'leak detected. %d listeners added. ' +\n                            'Use emitter.setMaxListeners() to increase limit.',\n                            tree._listeners.length);\n              console.trace();\n            }\n          }\n        }\n        return true;\n      }\n      name = type.shift();\n    }\n    return true;\n  }\n\n  // By default EventEmitters will print a warning if more than\n  // 10 listeners are added to it. This is a useful default which\n  // helps finding memory leaks.\n  //\n  // Obviously not all Emitters should be limited to 10. This function allows\n  // that to be increased. Set to zero for unlimited.\n\n  EventEmitter.prototype.delimiter = '.';\n\n  EventEmitter.prototype.setMaxListeners = function(n) {\n    this._events || init.call(this);\n    this._events.maxListeners = n;\n    if (!this._conf) this._conf = {};\n    this._conf.maxListeners = n;\n  };\n\n  EventEmitter.prototype.event = '';\n\n  EventEmitter.prototype.once = function(event, fn) {\n    this.many(event, 1, fn);\n    return this;\n  };\n\n  EventEmitter.prototype.many = function(event, ttl, fn) {\n    var self = this;\n\n    if (typeof fn !== 'function') {\n      throw new Error('many only accepts instances of Function');\n    }\n\n    function listener() {\n      if (--ttl === 0) {\n        self.off(event, listener);\n      }\n      fn.apply(this, arguments);\n    }\n\n    listener._origin = fn;\n\n    this.on(event, listener);\n\n    return self;\n  };\n\n  EventEmitter.prototype.emit = function() {\n\n    this._events || init.call(this);\n\n    var type = arguments[0];\n\n    if (type === 'newListener' && !this.newListener) {\n      if (!this._events.newListener) { return false; }\n    }\n\n    // Loop through the *_all* functions and invoke them.\n    if (this._all) {\n      var l = arguments.length;\n      var args = new Array(l - 1);\n      for (var i = 1; i < l; i++) args[i - 1] = arguments[i];\n      for (i = 0, l = this._all.length; i < l; i++) {\n        this.event = type;\n        this._all[i].apply(this, args);\n      }\n    }\n\n    // If there is no 'error' event listener then throw.\n    if (type === 'error') {\n\n      if (!this._all &&\n        !this._events.error &&\n        !(this.wildcard && this.listenerTree.error)) {\n\n        if (arguments[1] instanceof Error) {\n          throw arguments[1]; // Unhandled 'error' event\n        } else {\n          throw new Error(\"Uncaught, unspecified 'error' event.\");\n        }\n        return false;\n      }\n    }\n\n    var handler;\n\n    if(this.wildcard) {\n      handler = [];\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\n    }\n    else {\n      handler = this._events[type];\n    }\n\n    if (typeof handler === 'function') {\n      this.event = type;\n      if (arguments.length === 1) {\n        handler.call(this);\n      }\n      else if (arguments.length > 1)\n        switch (arguments.length) {\n          case 2:\n            handler.call(this, arguments[1]);\n            break;\n          case 3:\n            handler.call(this, arguments[1], arguments[2]);\n            break;\n          // slower\n          default:\n            var l = arguments.length;\n            var args = new Array(l - 1);\n            for (var i = 1; i < l; i++) args[i - 1] = arguments[i];\n            handler.apply(this, args);\n        }\n      return true;\n    }\n    else if (handler) {\n      var l = arguments.length;\n      var args = new Array(l - 1);\n      for (var i = 1; i < l; i++) args[i - 1] = arguments[i];\n\n      var listeners = handler.slice();\n      for (var i = 0, l = listeners.length; i < l; i++) {\n        this.event = type;\n        listeners[i].apply(this, args);\n      }\n      return (listeners.length > 0) || !!this._all;\n    }\n    else {\n      return !!this._all;\n    }\n\n  };\n\n  EventEmitter.prototype.on = function(type, listener) {\n\n    if (typeof type === 'function') {\n      this.onAny(type);\n      return this;\n    }\n\n    if (typeof listener !== 'function') {\n      throw new Error('on only accepts instances of Function');\n    }\n    this._events || init.call(this);\n\n    // To avoid recursion in the case that type == \"newListeners\"! Before\n    // adding it to the listeners, first emit \"newListeners\".\n    this.emit('newListener', type, listener);\n\n    if(this.wildcard) {\n      growListenerTree.call(this, type, listener);\n      return this;\n    }\n\n    if (!this._events[type]) {\n      // Optimize the case of one listener. Don't need the extra array object.\n      this._events[type] = listener;\n    }\n    else if(typeof this._events[type] === 'function') {\n      // Adding the second element, need to change to array.\n      this._events[type] = [this._events[type], listener];\n    }\n    else if (isArray(this._events[type])) {\n      // If we've already got an array, just append.\n      this._events[type].push(listener);\n\n      // Check for listener leak\n      if (!this._events[type].warned) {\n\n        var m = defaultMaxListeners;\n\n        if (typeof this._events.maxListeners !== 'undefined') {\n          m = this._events.maxListeners;\n        }\n\n        if (m > 0 && this._events[type].length > m) {\n\n          this._events[type].warned = true;\n          console.error('(node) warning: possible EventEmitter memory ' +\n                        'leak detected. %d listeners added. ' +\n                        'Use emitter.setMaxListeners() to increase limit.',\n                        this._events[type].length);\n          console.trace();\n        }\n      }\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.onAny = function(fn) {\n\n    if (typeof fn !== 'function') {\n      throw new Error('onAny only accepts instances of Function');\n    }\n\n    if(!this._all) {\n      this._all = [];\n    }\n\n    // Add the function to the event listener collection.\n    this._all.push(fn);\n    return this;\n  };\n\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n  EventEmitter.prototype.off = function(type, listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('removeListener only takes instances of Function');\n    }\n\n    var handlers,leafs=[];\n\n    if(this.wildcard) {\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n    }\n    else {\n      // does not use listeners(), so no side effect of creating _events[type]\n      if (!this._events[type]) return this;\n      handlers = this._events[type];\n      leafs.push({_listeners:handlers});\n    }\n\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\n      var leaf = leafs[iLeaf];\n      handlers = leaf._listeners;\n      if (isArray(handlers)) {\n\n        var position = -1;\n\n        for (var i = 0, length = handlers.length; i < length; i++) {\n          if (handlers[i] === listener ||\n            (handlers[i].listener && handlers[i].listener === listener) ||\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0) {\n          continue;\n        }\n\n        if(this.wildcard) {\n          leaf._listeners.splice(position, 1);\n        }\n        else {\n          this._events[type].splice(position, 1);\n        }\n\n        if (handlers.length === 0) {\n          if(this.wildcard) {\n            delete leaf._listeners;\n          }\n          else {\n            delete this._events[type];\n          }\n        }\n        return this;\n      }\n      else if (handlers === listener ||\n        (handlers.listener && handlers.listener === listener) ||\n        (handlers._origin && handlers._origin === listener)) {\n        if(this.wildcard) {\n          delete leaf._listeners;\n        }\n        else {\n          delete this._events[type];\n        }\n      }\n    }\n\n    return this;\n  };\n\n  EventEmitter.prototype.offAny = function(fn) {\n    var i = 0, l = 0, fns;\n    if (fn && this._all && this._all.length > 0) {\n      fns = this._all;\n      for(i = 0, l = fns.length; i < l; i++) {\n        if(fn === fns[i]) {\n          fns.splice(i, 1);\n          return this;\n        }\n      }\n    } else {\n      this._all = [];\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\n\n  EventEmitter.prototype.removeAllListeners = function(type) {\n    if (arguments.length === 0) {\n      !this._events || init.call(this);\n      return this;\n    }\n\n    if(this.wildcard) {\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      var leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n\n      for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\n        var leaf = leafs[iLeaf];\n        leaf._listeners = null;\n      }\n    }\n    else {\n      if (!this._events[type]) return this;\n      this._events[type] = null;\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.listeners = function(type) {\n    if(this.wildcard) {\n      var handlers = [];\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\n      return handlers;\n    }\n\n    this._events || init.call(this);\n\n    if (!this._events[type]) this._events[type] = [];\n    if (!isArray(this._events[type])) {\n      this._events[type] = [this._events[type]];\n    }\n    return this._events[type];\n  };\n\n  EventEmitter.prototype.listenersAny = function() {\n\n    if(this._all) {\n      return this._all;\n    }\n    else {\n      return [];\n    }\n\n  };\n\n  if (typeof define === 'function' && define.amd) {\n     // AMD. Register as an anonymous module.\n    define(function() {\n      return EventEmitter;\n    });\n  } else if (typeof exports === 'object') {\n    // CommonJS\n    exports.EventEmitter2 = EventEmitter;\n  }\n  else {\n    // Browser global.\n    window.EventEmitter2 = EventEmitter;\n  }\n}();\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eventemitter2/lib/eventemitter2.js\n **/","import 'webrtc-adapter-test'; // consistent webrtc api across browsers\n\nconst VID_WIDTH = 320;\nconst VID_HEIGHT = 240;\n\nvar gotCam = false,\n    gotMic = false,\n    media = null;\n\nfunction getUserMedia(v, a){\n    return new Promise((resolve, reject) => {\n        if ((!v || gotCam) && (!a || gotMic)) return resolve(media);\n        navigator.getUserMedia({\n            audio: a,\n            video: !v ? false : {\n                width: VID_WIDTH,\n                height: VID_HEIGHT\n            }\n        }, resolve, reject);\n    }).then(res => {\n        gotCam = gotCam || !!v;\n        gotMic = gotMic || !!a;\n        media = res;\n        return res;\n    });\n}\n\nexport default getUserMedia;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/getUserMedia.js\n **/","import EventEmitter from 'eventemitter2';\nimport $ from 'jquery';\nimport Ractive from 'ractive';\nimport template from 'ractive!./index.html';\nimport '!style!css!less!./index.less';\n\nclass ManualSignalling extends EventEmitter {\n    constructor () {\n        super();\n        this._model = {\n            data: ''\n        };\n        this._comp = new Ractive({\n            template: template,\n            data: this._model,\n            makeOffer: () => this.emit('make-offer'),\n            gotAnswer: () => this.emit('got-answer', JSON.parse(this._model.data)),\n            gotOffer: () => this.emit('got-offer', JSON.parse(this._model.data))\n        });\n    }\n\n    getName () {\n        return \"Manual\";\n    }\n\n    sendOffer (data) {\n        this._comp.set('data', JSON.stringify(data, null, 2));\n    }\n\n    sendAnswer (data) {\n        this._comp.set('data', JSON.stringify(data, null, 2));\n    }\n\n    render ($target) {\n        return new Promise(resolve => {\n            this._comp.render($target);\n            resolve();\n        });\n    }\n}\n\nexport default ManualSignalling;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/signalling/manual/index.js\n **/","/*\n\tRactive.js v0.7.3\n\tSat Apr 25 2015 13:52:38 GMT-0400 (EDT) - commit da40f81c660ba2f09c45a09a9c20fdd34ee36d80\n\n\thttp://ractivejs.org\n\thttp://twitter.com/RactiveJS\n\n\tReleased under the MIT License.\n*/\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  global.Ractive = factory()\n}(this, function () { 'use strict';\n\n  var TEMPLATE_VERSION = 3;\n\n  var defaultOptions = {\n\n  \t// render placement:\n  \tel: void 0,\n  \tappend: false,\n\n  \t// template:\n  \ttemplate: { v: TEMPLATE_VERSION, t: [] },\n\n  \t// parse:     // TODO static delimiters?\n  \tpreserveWhitespace: false,\n  \tsanitize: false,\n  \tstripComments: true,\n  \tdelimiters: [\"{{\", \"}}\"],\n  \ttripleDelimiters: [\"{{{\", \"}}}\"],\n  \tinterpolate: false,\n\n  \t// data & binding:\n  \tdata: {},\n  \tcomputed: {},\n  \tmagic: false,\n  \tmodifyArrays: true,\n  \tadapt: [],\n  \tisolated: false,\n  \ttwoway: true,\n  \tlazy: false,\n\n  \t// transitions:\n  \tnoIntro: false,\n  \ttransitionsEnabled: true,\n  \tcomplete: void 0,\n\n  \t// css:\n  \tcss: null,\n  \tnoCssTransform: false\n  };\n\n  var config_defaults = defaultOptions;\n\n  // These are a subset of the easing equations found at\n  // https://raw.github.com/danro/easing-js - license info\n  // follows:\n\n  // --------------------------------------------------\n  // easing.js v0.5.4\n  // Generic set of easing functions with AMD support\n  // https://github.com/danro/easing-js\n  // This code may be freely distributed under the MIT license\n  // http://danro.mit-license.org/\n  // --------------------------------------------------\n  // All functions adapted from Thomas Fuchs & Jeremy Kahn\n  // Easing Equations (c) 2003 Robert Penner, BSD license\n  // https://raw.github.com/danro/easing-js/master/LICENSE\n  // --------------------------------------------------\n\n  // In that library, the functions named easeIn, easeOut, and\n  // easeInOut below are named easeInCubic, easeOutCubic, and\n  // (you guessed it) easeInOutCubic.\n  //\n  // You can add additional easing functions to this list, and they\n  // will be globally available.\n\n  var static_easing = {\n  \tlinear: function (pos) {\n  \t\treturn pos;\n  \t},\n  \teaseIn: function (pos) {\n  \t\treturn Math.pow(pos, 3);\n  \t},\n  \teaseOut: function (pos) {\n  \t\treturn Math.pow(pos - 1, 3) + 1;\n  \t},\n  \teaseInOut: function (pos) {\n  \t\tif ((pos /= 0.5) < 1) {\n  \t\t\treturn 0.5 * Math.pow(pos, 3);\n  \t\t}\n  \t\treturn 0.5 * (Math.pow(pos - 2, 3) + 2);\n  \t}\n  };\n\n  /*global console, navigator */\n  var isClient, isJsdom, hasConsole, environment__magic, namespaces, svg, vendors;\n\n  isClient = typeof document === \"object\";\n\n  isJsdom = typeof navigator !== \"undefined\" && /jsDom/.test(navigator.appName);\n\n  hasConsole = typeof console !== \"undefined\" && typeof console.warn === \"function\" && typeof console.warn.apply === \"function\";\n\n  try {\n  \tObject.defineProperty({}, \"test\", { value: 0 });\n  \tenvironment__magic = true;\n  } catch (e) {\n  \tenvironment__magic = false;\n  }\n\n  namespaces = {\n  \thtml: \"http://www.w3.org/1999/xhtml\",\n  \tmathml: \"http://www.w3.org/1998/Math/MathML\",\n  \tsvg: \"http://www.w3.org/2000/svg\",\n  \txlink: \"http://www.w3.org/1999/xlink\",\n  \txml: \"http://www.w3.org/XML/1998/namespace\",\n  \txmlns: \"http://www.w3.org/2000/xmlns/\"\n  };\n\n  if (typeof document === \"undefined\") {\n  \tsvg = false;\n  } else {\n  \tsvg = document && document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\");\n  }\n\n  vendors = [\"o\", \"ms\", \"moz\", \"webkit\"];\n\n  var createElement, matches, dom__div, methodNames, unprefixed, prefixed, dom__i, j, makeFunction;\n\n  // Test for SVG support\n  if (!svg) {\n  \tcreateElement = function (type, ns) {\n  \t\tif (ns && ns !== namespaces.html) {\n  \t\t\tthrow \"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information\";\n  \t\t}\n\n  \t\treturn document.createElement(type);\n  \t};\n  } else {\n  \tcreateElement = function (type, ns) {\n  \t\tif (!ns || ns === namespaces.html) {\n  \t\t\treturn document.createElement(type);\n  \t\t}\n\n  \t\treturn document.createElementNS(ns, type);\n  \t};\n  }\n\n  function getElement(input) {\n  \tvar output;\n\n  \tif (!input || typeof input === \"boolean\") {\n  \t\treturn;\n  \t}\n\n  \tif (typeof window === \"undefined\" || !document || !input) {\n  \t\treturn null;\n  \t}\n\n  \t// We already have a DOM node - no work to do. (Duck typing alert!)\n  \tif (input.nodeType) {\n  \t\treturn input;\n  \t}\n\n  \t// Get node from string\n  \tif (typeof input === \"string\") {\n  \t\t// try ID first\n  \t\toutput = document.getElementById(input);\n\n  \t\t// then as selector, if possible\n  \t\tif (!output && document.querySelector) {\n  \t\t\toutput = document.querySelector(input);\n  \t\t}\n\n  \t\t// did it work?\n  \t\tif (output && output.nodeType) {\n  \t\t\treturn output;\n  \t\t}\n  \t}\n\n  \t// If we've been given a collection (jQuery, Zepto etc), extract the first item\n  \tif (input[0] && input[0].nodeType) {\n  \t\treturn input[0];\n  \t}\n\n  \treturn null;\n  }\n\n  if (!isClient) {\n  \tmatches = null;\n  } else {\n  \tdom__div = createElement(\"div\");\n  \tmethodNames = [\"matches\", \"matchesSelector\"];\n\n  \tmakeFunction = function (methodName) {\n  \t\treturn function (node, selector) {\n  \t\t\treturn node[methodName](selector);\n  \t\t};\n  \t};\n\n  \tdom__i = methodNames.length;\n\n  \twhile (dom__i-- && !matches) {\n  \t\tunprefixed = methodNames[dom__i];\n\n  \t\tif (dom__div[unprefixed]) {\n  \t\t\tmatches = makeFunction(unprefixed);\n  \t\t} else {\n  \t\t\tj = vendors.length;\n  \t\t\twhile (j--) {\n  \t\t\t\tprefixed = vendors[dom__i] + unprefixed.substr(0, 1).toUpperCase() + unprefixed.substring(1);\n\n  \t\t\t\tif (dom__div[prefixed]) {\n  \t\t\t\t\tmatches = makeFunction(prefixed);\n  \t\t\t\t\tbreak;\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \t// IE8...\n  \tif (!matches) {\n  \t\tmatches = function (node, selector) {\n  \t\t\tvar nodes, parentNode, i;\n\n  \t\t\tparentNode = node.parentNode;\n\n  \t\t\tif (!parentNode) {\n  \t\t\t\t// empty dummy <div>\n  \t\t\t\tdom__div.innerHTML = \"\";\n\n  \t\t\t\tparentNode = dom__div;\n  \t\t\t\tnode = node.cloneNode();\n\n  \t\t\t\tdom__div.appendChild(node);\n  \t\t\t}\n\n  \t\t\tnodes = parentNode.querySelectorAll(selector);\n\n  \t\t\ti = nodes.length;\n  \t\t\twhile (i--) {\n  \t\t\t\tif (nodes[i] === node) {\n  \t\t\t\t\treturn true;\n  \t\t\t\t}\n  \t\t\t}\n\n  \t\t\treturn false;\n  \t\t};\n  \t}\n  }\n\n  function detachNode(node) {\n  \tif (node && typeof node.parentNode !== \"unknown\" && node.parentNode) {\n  \t\tnode.parentNode.removeChild(node);\n  \t}\n\n  \treturn node;\n  }\n\n  function safeToStringValue(value) {\n  \treturn value == null || !value.toString ? \"\" : value;\n  }\n\n  var legacy = null;\n\n  var create, defineProperty, defineProperties;\n\n  try {\n  \tObject.defineProperty({}, \"test\", { value: 0 });\n\n  \tif (isClient) {\n  \t\tObject.defineProperty(document.createElement(\"div\"), \"test\", { value: 0 });\n  \t}\n\n  \tdefineProperty = Object.defineProperty;\n  } catch (err) {\n  \t// Object.defineProperty doesn't exist, or we're in IE8 where you can\n  \t// only use it with DOM objects (what were you smoking, MSFT?)\n  \tdefineProperty = function (obj, prop, desc) {\n  \t\tobj[prop] = desc.value;\n  \t};\n  }\n\n  try {\n  \ttry {\n  \t\tObject.defineProperties({}, { test: { value: 0 } });\n  \t} catch (err) {\n  \t\t// TODO how do we account for this? noMagic = true;\n  \t\tthrow err;\n  \t}\n\n  \tif (isClient) {\n  \t\tObject.defineProperties(createElement(\"div\"), { test: { value: 0 } });\n  \t}\n\n  \tdefineProperties = Object.defineProperties;\n  } catch (err) {\n  \tdefineProperties = function (obj, props) {\n  \t\tvar prop;\n\n  \t\tfor (prop in props) {\n  \t\t\tif (props.hasOwnProperty(prop)) {\n  \t\t\t\tdefineProperty(obj, prop, props[prop]);\n  \t\t\t}\n  \t\t}\n  \t};\n  }\n\n  try {\n  \tObject.create(null);\n\n  \tcreate = Object.create;\n  } catch (err) {\n  \t// sigh\n  \tcreate = (function () {\n  \t\tvar F = function () {};\n\n  \t\treturn function (proto, props) {\n  \t\t\tvar obj;\n\n  \t\t\tif (proto === null) {\n  \t\t\t\treturn {};\n  \t\t\t}\n\n  \t\t\tF.prototype = proto;\n  \t\t\tobj = new F();\n\n  \t\t\tif (props) {\n  \t\t\t\tObject.defineProperties(obj, props);\n  \t\t\t}\n\n  \t\t\treturn obj;\n  \t\t};\n  \t})();\n  }\n\n  function utils_object__extend(target) {\n  \tfor (var _len = arguments.length, sources = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n  \t\tsources[_key - 1] = arguments[_key];\n  \t}\n\n  \tvar prop, source;\n\n  \twhile (source = sources.shift()) {\n  \t\tfor (prop in source) {\n  \t\t\tif (hasOwn.call(source, prop)) {\n  \t\t\t\ttarget[prop] = source[prop];\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \treturn target;\n  }\n\n  function fillGaps(target) {\n  \tfor (var _len = arguments.length, sources = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n  \t\tsources[_key - 1] = arguments[_key];\n  \t}\n\n  \tsources.forEach(function (s) {\n  \t\tfor (var key in s) {\n  \t\t\tif (s.hasOwnProperty(key) && !(key in target)) {\n  \t\t\t\ttarget[key] = s[key];\n  \t\t\t}\n  \t\t}\n  \t});\n\n  \treturn target;\n  }\n\n  var hasOwn = Object.prototype.hasOwnProperty;\n\n  // thanks, http://perfectionkills.com/instanceof-considered-harmful-or-how-to-write-a-robust-isarray/\n  var is__toString = Object.prototype.toString,\n      arrayLikePattern = /^\\[object (?:Array|FileList)\\]$/;\n  function isArray(thing) {\n  \treturn is__toString.call(thing) === \"[object Array]\";\n  }\n\n  function isArrayLike(obj) {\n  \treturn arrayLikePattern.test(is__toString.call(obj));\n  }\n\n  function isEqual(a, b) {\n  \tif (a === null && b === null) {\n  \t\treturn true;\n  \t}\n\n  \tif (typeof a === \"object\" || typeof b === \"object\") {\n  \t\treturn false;\n  \t}\n\n  \treturn a === b;\n  }\n\n  function is__isNumeric(thing) {\n  \treturn !isNaN(parseFloat(thing)) && isFinite(thing);\n  }\n\n  function isObject(thing) {\n  \treturn thing && is__toString.call(thing) === \"[object Object]\";\n  }\n\n  var noop = function () {};\n\n  /* global console */\n  var alreadyWarned = {},\n      log,\n      printWarning,\n      welcome;\n\n  if (hasConsole) {\n  \t(function () {\n  \t\tvar welcomeIntro = [\"%cRactive.js %c0.7.3 %cin debug mode, %cmore...\", \"color: rgb(114, 157, 52); font-weight: normal;\", \"color: rgb(85, 85, 85); font-weight: normal;\", \"color: rgb(85, 85, 85); font-weight: normal;\", \"color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;\"];\n  \t\tvar welcomeMessage = \"You're running Ractive 0.7.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\\n\\nTo disable debug mode, add this line at the start of your app:\\n  Ractive.DEBUG = false;\\n\\nTo disable debug mode when your app is minified, add this snippet:\\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\\n\\nGet help and support:\\n  http://docs.ractivejs.org\\n  http://stackoverflow.com/questions/tagged/ractivejs\\n  http://groups.google.com/forum/#!forum/ractive-js\\n  http://twitter.com/ractivejs\\n\\nFound a bug? Raise an issue:\\n  https://github.com/ractivejs/ractive/issues\\n\\n\";\n\n  \t\twelcome = function () {\n  \t\t\tvar hasGroup = !!console.groupCollapsed;\n  \t\t\tconsole[hasGroup ? \"groupCollapsed\" : \"log\"].apply(console, welcomeIntro);\n  \t\t\tconsole.log(welcomeMessage);\n  \t\t\tif (hasGroup) {\n  \t\t\t\tconsole.groupEnd(welcomeIntro);\n  \t\t\t}\n\n  \t\t\twelcome = noop;\n  \t\t};\n\n  \t\tprintWarning = function (message, args) {\n  \t\t\twelcome();\n\n  \t\t\t// extract information about the instance this message pertains to, if applicable\n  \t\t\tif (typeof args[args.length - 1] === \"object\") {\n  \t\t\t\tvar options = args.pop();\n  \t\t\t\tvar ractive = options ? options.ractive : null;\n\n  \t\t\t\tif (ractive) {\n  \t\t\t\t\t// if this is an instance of a component that we know the name of, add\n  \t\t\t\t\t// it to the message\n  \t\t\t\t\tvar _name = undefined;\n  \t\t\t\t\tif (ractive.component && (_name = ractive.component.name)) {\n  \t\t\t\t\t\tmessage = \"<\" + _name + \"> \" + message;\n  \t\t\t\t\t}\n\n  \t\t\t\t\tvar node = undefined;\n  \t\t\t\t\tif (node = options.node || ractive.fragment && ractive.fragment.rendered && ractive.find(\"*\")) {\n  \t\t\t\t\t\targs.push(node);\n  \t\t\t\t\t}\n  \t\t\t\t}\n  \t\t\t}\n\n  \t\t\tconsole.warn.apply(console, [\"%cRactive.js: %c\" + message, \"color: rgb(114, 157, 52);\", \"color: rgb(85, 85, 85);\"].concat(args));\n  \t\t};\n\n  \t\tlog = function () {\n  \t\t\tconsole.log.apply(console, arguments);\n  \t\t};\n  \t})();\n  } else {\n  \tprintWarning = log = welcome = noop;\n  }\n\n  function format(message, args) {\n  \treturn message.replace(/%s/g, function () {\n  \t\treturn args.shift();\n  \t});\n  }\n\n  function fatal(message) {\n  \tfor (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n  \t\targs[_key - 1] = arguments[_key];\n  \t}\n\n  \tmessage = format(message, args);\n  \tthrow new Error(message);\n  }\n\n  function logIfDebug() {\n  \tif (_Ractive.DEBUG) {\n  \t\tlog.apply(null, arguments);\n  \t}\n  }\n\n  function warn(message) {\n  \tfor (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n  \t\targs[_key - 1] = arguments[_key];\n  \t}\n\n  \tmessage = format(message, args);\n  \tprintWarning(message, args);\n  }\n\n  function warnOnce(message) {\n  \tfor (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n  \t\targs[_key - 1] = arguments[_key];\n  \t}\n\n  \tmessage = format(message, args);\n\n  \tif (alreadyWarned[message]) {\n  \t\treturn;\n  \t}\n\n  \talreadyWarned[message] = true;\n  \tprintWarning(message, args);\n  }\n\n  function warnIfDebug() {\n  \tif (_Ractive.DEBUG) {\n  \t\twarn.apply(null, arguments);\n  \t}\n  }\n\n  function warnOnceIfDebug() {\n  \tif (_Ractive.DEBUG) {\n  \t\twarnOnce.apply(null, arguments);\n  \t}\n  }\n\n  // Error messages that are used (or could be) in multiple places\n  var badArguments = \"Bad arguments\";\n  var noRegistryFunctionReturn = \"A function was specified for \\\"%s\\\" %s, but no %s was returned\";\n  var missingPlugin = function (name, type) {\n    return \"Missing \\\"\" + name + \"\\\" \" + type + \" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#\" + type + \"s\";\n  };\n\n  function findInViewHierarchy(registryName, ractive, name) {\n  \tvar instance = findInstance(registryName, ractive, name);\n  \treturn instance ? instance[registryName][name] : null;\n  }\n\n  function findInstance(registryName, ractive, name) {\n  \twhile (ractive) {\n  \t\tif (name in ractive[registryName]) {\n  \t\t\treturn ractive;\n  \t\t}\n\n  \t\tif (ractive.isolated) {\n  \t\t\treturn null;\n  \t\t}\n\n  \t\tractive = ractive.parent;\n  \t}\n  }\n\n  var interpolate = function (from, to, ractive, type) {\n  \tif (from === to) {\n  \t\treturn snap(to);\n  \t}\n\n  \tif (type) {\n\n  \t\tvar interpol = findInViewHierarchy(\"interpolators\", ractive, type);\n  \t\tif (interpol) {\n  \t\t\treturn interpol(from, to) || snap(to);\n  \t\t}\n\n  \t\tfatal(missingPlugin(type, \"interpolator\"));\n  \t}\n\n  \treturn static_interpolators.number(from, to) || static_interpolators.array(from, to) || static_interpolators.object(from, to) || snap(to);\n  };\n\n  var shared_interpolate = interpolate;\n\n  function snap(to) {\n  \treturn function () {\n  \t\treturn to;\n  \t};\n  }\n\n  var interpolators = {\n  \tnumber: function (from, to) {\n  \t\tvar delta;\n\n  \t\tif (!is__isNumeric(from) || !is__isNumeric(to)) {\n  \t\t\treturn null;\n  \t\t}\n\n  \t\tfrom = +from;\n  \t\tto = +to;\n\n  \t\tdelta = to - from;\n\n  \t\tif (!delta) {\n  \t\t\treturn function () {\n  \t\t\t\treturn from;\n  \t\t\t};\n  \t\t}\n\n  \t\treturn function (t) {\n  \t\t\treturn from + t * delta;\n  \t\t};\n  \t},\n\n  \tarray: function (from, to) {\n  \t\tvar intermediate, interpolators, len, i;\n\n  \t\tif (!isArray(from) || !isArray(to)) {\n  \t\t\treturn null;\n  \t\t}\n\n  \t\tintermediate = [];\n  \t\tinterpolators = [];\n\n  \t\ti = len = Math.min(from.length, to.length);\n  \t\twhile (i--) {\n  \t\t\tinterpolators[i] = shared_interpolate(from[i], to[i]);\n  \t\t}\n\n  \t\t// surplus values - don't interpolate, but don't exclude them either\n  \t\tfor (i = len; i < from.length; i += 1) {\n  \t\t\tintermediate[i] = from[i];\n  \t\t}\n\n  \t\tfor (i = len; i < to.length; i += 1) {\n  \t\t\tintermediate[i] = to[i];\n  \t\t}\n\n  \t\treturn function (t) {\n  \t\t\tvar i = len;\n\n  \t\t\twhile (i--) {\n  \t\t\t\tintermediate[i] = interpolators[i](t);\n  \t\t\t}\n\n  \t\t\treturn intermediate;\n  \t\t};\n  \t},\n\n  \tobject: function (from, to) {\n  \t\tvar properties, len, interpolators, intermediate, prop;\n\n  \t\tif (!isObject(from) || !isObject(to)) {\n  \t\t\treturn null;\n  \t\t}\n\n  \t\tproperties = [];\n  \t\tintermediate = {};\n  \t\tinterpolators = {};\n\n  \t\tfor (prop in from) {\n  \t\t\tif (hasOwn.call(from, prop)) {\n  \t\t\t\tif (hasOwn.call(to, prop)) {\n  \t\t\t\t\tproperties.push(prop);\n  \t\t\t\t\tinterpolators[prop] = shared_interpolate(from[prop], to[prop]);\n  \t\t\t\t} else {\n  \t\t\t\t\tintermediate[prop] = from[prop];\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n\n  \t\tfor (prop in to) {\n  \t\t\tif (hasOwn.call(to, prop) && !hasOwn.call(from, prop)) {\n  \t\t\t\tintermediate[prop] = to[prop];\n  \t\t\t}\n  \t\t}\n\n  \t\tlen = properties.length;\n\n  \t\treturn function (t) {\n  \t\t\tvar i = len,\n  \t\t\t    prop;\n\n  \t\t\twhile (i--) {\n  \t\t\t\tprop = properties[i];\n\n  \t\t\t\tintermediate[prop] = interpolators[prop](t);\n  \t\t\t}\n\n  \t\t\treturn intermediate;\n  \t\t};\n  \t}\n  };\n\n  var static_interpolators = interpolators;\n\n  // This function takes a keypath such as 'foo.bar.baz', and returns\n  // all the variants of that keypath that include a wildcard in place\n  // of a key, such as 'foo.bar.*', 'foo.*.baz', 'foo.*.*' and so on.\n  // These are then checked against the dependants map (ractive.viewmodel.depsMap)\n  // to see if any pattern observers are downstream of one or more of\n  // these wildcard keypaths (e.g. 'foo.bar.*.status')\n  var utils_getPotentialWildcardMatches = getPotentialWildcardMatches;\n\n  var starMaps = {};\n  function getPotentialWildcardMatches(keypath) {\n  \tvar keys, starMap, mapper, i, result, wildcardKeypath;\n\n  \tkeys = keypath.split(\".\");\n  \tif (!(starMap = starMaps[keys.length])) {\n  \t\tstarMap = getStarMap(keys.length);\n  \t}\n\n  \tresult = [];\n\n  \tmapper = function (star, i) {\n  \t\treturn star ? \"*\" : keys[i];\n  \t};\n\n  \ti = starMap.length;\n  \twhile (i--) {\n  \t\twildcardKeypath = starMap[i].map(mapper).join(\".\");\n\n  \t\tif (!result.hasOwnProperty(wildcardKeypath)) {\n  \t\t\tresult.push(wildcardKeypath);\n  \t\t\tresult[wildcardKeypath] = true;\n  \t\t}\n  \t}\n\n  \treturn result;\n  }\n\n  // This function returns all the possible true/false combinations for\n  // a given number - e.g. for two, the possible combinations are\n  // [ true, true ], [ true, false ], [ false, true ], [ false, false ].\n  // It does so by getting all the binary values between 0 and e.g. 11\n  function getStarMap(num) {\n  \tvar ones = \"\",\n  \t    max,\n  \t    binary,\n  \t    starMap,\n  \t    mapper,\n  \t    i,\n  \t    j,\n  \t    l,\n  \t    map;\n\n  \tif (!starMaps[num]) {\n  \t\tstarMap = [];\n\n  \t\twhile (ones.length < num) {\n  \t\t\tones += 1;\n  \t\t}\n\n  \t\tmax = parseInt(ones, 2);\n\n  \t\tmapper = function (digit) {\n  \t\t\treturn digit === \"1\";\n  \t\t};\n\n  \t\tfor (i = 0; i <= max; i += 1) {\n  \t\t\tbinary = i.toString(2);\n  \t\t\twhile (binary.length < num) {\n  \t\t\t\tbinary = \"0\" + binary;\n  \t\t\t}\n\n  \t\t\tmap = [];\n  \t\t\tl = binary.length;\n  \t\t\tfor (j = 0; j < l; j++) {\n  \t\t\t\tmap.push(mapper(binary[j]));\n  \t\t\t}\n  \t\t\tstarMap[i] = map;\n  \t\t}\n\n  \t\tstarMaps[num] = starMap;\n  \t}\n\n  \treturn starMaps[num];\n  }\n\n  var refPattern = /\\[\\s*(\\*|[0-9]|[1-9][0-9]+)\\s*\\]/g;\n  var patternPattern = /\\*/;\n  var keypathCache = {};\n\n  var Keypath = function (str) {\n  \tvar keys = str.split(\".\");\n\n  \tthis.str = str;\n\n  \tif (str[0] === \"@\") {\n  \t\tthis.isSpecial = true;\n  \t\tthis.value = decodeKeypath(str);\n  \t}\n\n  \tthis.firstKey = keys[0];\n  \tthis.lastKey = keys.pop();\n\n  \tthis.isPattern = patternPattern.test(str);\n\n  \tthis.parent = str === \"\" ? null : getKeypath(keys.join(\".\"));\n  \tthis.isRoot = !str;\n  };\n\n  Keypath.prototype = {\n  \tequalsOrStartsWith: function (keypath) {\n  \t\treturn keypath === this || this.startsWith(keypath);\n  \t},\n\n  \tjoin: function (str) {\n  \t\treturn getKeypath(this.isRoot ? String(str) : this.str + \".\" + str);\n  \t},\n\n  \treplace: function (oldKeypath, newKeypath) {\n  \t\tif (this === oldKeypath) {\n  \t\t\treturn newKeypath;\n  \t\t}\n\n  \t\tif (this.startsWith(oldKeypath)) {\n  \t\t\treturn newKeypath === null ? newKeypath : getKeypath(this.str.replace(oldKeypath.str + \".\", newKeypath.str + \".\"));\n  \t\t}\n  \t},\n\n  \tstartsWith: function (keypath) {\n  \t\tif (!keypath) {\n  \t\t\t// TODO under what circumstances does this happen?\n  \t\t\treturn false;\n  \t\t}\n\n  \t\treturn keypath && this.str.substr(0, keypath.str.length + 1) === keypath.str + \".\";\n  \t},\n\n  \ttoString: function () {\n  \t\tthrow new Error(\"Bad coercion\");\n  \t},\n\n  \tvalueOf: function () {\n  \t\tthrow new Error(\"Bad coercion\");\n  \t},\n\n  \twildcardMatches: function () {\n  \t\treturn this._wildcardMatches || (this._wildcardMatches = utils_getPotentialWildcardMatches(this.str));\n  \t}\n  };\n  function assignNewKeypath(target, property, oldKeypath, newKeypath) {\n  \tvar existingKeypath = target[property];\n\n  \tif (existingKeypath && (existingKeypath.equalsOrStartsWith(newKeypath) || !existingKeypath.equalsOrStartsWith(oldKeypath))) {\n  \t\treturn;\n  \t}\n\n  \ttarget[property] = existingKeypath ? existingKeypath.replace(oldKeypath, newKeypath) : newKeypath;\n  \treturn true;\n  }\n\n  function decodeKeypath(keypath) {\n  \tvar value = keypath.slice(2);\n\n  \tif (keypath[1] === \"i\") {\n  \t\treturn is__isNumeric(value) ? +value : value;\n  \t} else {\n  \t\treturn value;\n  \t}\n  }\n\n  function getKeypath(str) {\n  \tif (str == null) {\n  \t\treturn str;\n  \t}\n\n  \t// TODO it *may* be worth having two versions of this function - one where\n  \t// keypathCache inherits from null, and one for IE8. Depends on how\n  \t// much of an overhead hasOwnProperty is - probably negligible\n  \tif (!keypathCache.hasOwnProperty(str)) {\n  \t\tkeypathCache[str] = new Keypath(str);\n  \t}\n\n  \treturn keypathCache[str];\n  }\n\n  function getMatchingKeypaths(ractive, keypath) {\n  \tvar keys, key, matchingKeypaths;\n\n  \tkeys = keypath.str.split(\".\");\n  \tmatchingKeypaths = [rootKeypath];\n\n  \twhile (key = keys.shift()) {\n  \t\tif (key === \"*\") {\n  \t\t\t// expand to find all valid child keypaths\n  \t\t\tmatchingKeypaths = matchingKeypaths.reduce(expand, []);\n  \t\t} else {\n  \t\t\tif (matchingKeypaths[0] === rootKeypath) {\n  \t\t\t\t// first key\n  \t\t\t\tmatchingKeypaths[0] = getKeypath(key);\n  \t\t\t} else {\n  \t\t\t\tmatchingKeypaths = matchingKeypaths.map(concatenate(key));\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \treturn matchingKeypaths;\n\n  \tfunction expand(matchingKeypaths, keypath) {\n  \t\tvar wrapper, value, keys;\n\n  \t\tif (keypath.isRoot) {\n  \t\t\tkeys = [].concat(Object.keys(ractive.viewmodel.data), Object.keys(ractive.viewmodel.mappings), Object.keys(ractive.viewmodel.computations));\n  \t\t} else {\n  \t\t\twrapper = ractive.viewmodel.wrapped[keypath.str];\n  \t\t\tvalue = wrapper ? wrapper.get() : ractive.viewmodel.get(keypath);\n\n  \t\t\tkeys = value ? Object.keys(value) : null;\n  \t\t}\n\n  \t\tif (keys) {\n  \t\t\tkeys.forEach(function (key) {\n  \t\t\t\tif (key !== \"_ractive\" || !isArray(value)) {\n  \t\t\t\t\tmatchingKeypaths.push(keypath.join(key));\n  \t\t\t\t}\n  \t\t\t});\n  \t\t}\n\n  \t\treturn matchingKeypaths;\n  \t}\n  }\n\n  function concatenate(key) {\n  \treturn function (keypath) {\n  \t\treturn keypath.join(key);\n  \t};\n  }\n  function normalise(ref) {\n  \treturn ref ? ref.replace(refPattern, \".$1\") : \"\";\n  }\n\n  var rootKeypath = getKeypath(\"\");\n\n  var shared_add = add;\n  var shared_add__errorMessage = \"Cannot add to a non-numeric value\";\n  function add(root, keypath, d) {\n  \tif (typeof keypath !== \"string\" || !is__isNumeric(d)) {\n  \t\tthrow new Error(\"Bad arguments\");\n  \t}\n\n  \tvar value = undefined,\n  \t    changes = undefined;\n\n  \tif (/\\*/.test(keypath)) {\n  \t\tchanges = {};\n\n  \t\tgetMatchingKeypaths(root, getKeypath(normalise(keypath))).forEach(function (keypath) {\n  \t\t\tvar value = root.viewmodel.get(keypath);\n\n  \t\t\tif (!is__isNumeric(value)) {\n  \t\t\t\tthrow new Error(shared_add__errorMessage);\n  \t\t\t}\n\n  \t\t\tchanges[keypath.str] = value + d;\n  \t\t});\n\n  \t\treturn root.set(changes);\n  \t}\n\n  \tvalue = root.get(keypath);\n\n  \tif (!is__isNumeric(value)) {\n  \t\tthrow new Error(shared_add__errorMessage);\n  \t}\n\n  \treturn root.set(keypath, +value + d);\n  }\n\n  var prototype_add = Ractive$add;\n  function Ractive$add(keypath, d) {\n  \treturn shared_add(this, keypath, d === undefined ? 1 : +d);\n  }\n\n  var requestAnimationFrame;\n\n  // If window doesn't exist, we don't need requestAnimationFrame\n  if (typeof window === \"undefined\") {\n  \trequestAnimationFrame = null;\n  } else {\n  \t// https://gist.github.com/paulirish/1579671\n  \t(function (vendors, lastTime, window) {\n\n  \t\tvar x, setTimeout;\n\n  \t\tif (window.requestAnimationFrame) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tfor (x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n  \t\t\twindow.requestAnimationFrame = window[vendors[x] + \"RequestAnimationFrame\"];\n  \t\t}\n\n  \t\tif (!window.requestAnimationFrame) {\n  \t\t\tsetTimeout = window.setTimeout;\n\n  \t\t\twindow.requestAnimationFrame = function (callback) {\n  \t\t\t\tvar currTime, timeToCall, id;\n\n  \t\t\t\tcurrTime = Date.now();\n  \t\t\t\ttimeToCall = Math.max(0, 16 - (currTime - lastTime));\n  \t\t\t\tid = setTimeout(function () {\n  \t\t\t\t\tcallback(currTime + timeToCall);\n  \t\t\t\t}, timeToCall);\n\n  \t\t\t\tlastTime = currTime + timeToCall;\n  \t\t\t\treturn id;\n  \t\t\t};\n  \t\t}\n  \t})(vendors, 0, window);\n\n  \trequestAnimationFrame = window.requestAnimationFrame;\n  }\n\n  var rAF = requestAnimationFrame;\n\n  var getTime;\n\n  if (typeof window !== \"undefined\" && window.performance && typeof window.performance.now === \"function\") {\n  \tgetTime = function () {\n  \t\treturn window.performance.now();\n  \t};\n  } else {\n  \tgetTime = function () {\n  \t\treturn Date.now();\n  \t};\n  }\n\n  var utils_getTime = getTime;\n\n  var deprecations = {\n  \tconstruct: {\n  \t\tdeprecated: \"beforeInit\",\n  \t\treplacement: \"onconstruct\"\n  \t},\n  \trender: {\n  \t\tdeprecated: \"init\",\n  \t\tmessage: \"The \\\"init\\\" method has been deprecated \" + \"and will likely be removed in a future release. \" + \"You can either use the \\\"oninit\\\" method which will fire \" + \"only once prior to, and regardless of, any eventual ractive \" + \"instance being rendered, or if you need to access the \" + \"rendered DOM, use \\\"onrender\\\" instead. \" + \"See http://docs.ractivejs.org/latest/migrating for more information.\"\n  \t},\n  \tcomplete: {\n  \t\tdeprecated: \"complete\",\n  \t\treplacement: \"oncomplete\"\n  \t}\n  };\n\n  function Hook(event) {\n  \tthis.event = event;\n  \tthis.method = \"on\" + event;\n  \tthis.deprecate = deprecations[event];\n  }\n\n  Hook.prototype.fire = function (ractive, arg) {\n  \tfunction call(method) {\n  \t\tif (ractive[method]) {\n  \t\t\targ ? ractive[method](arg) : ractive[method]();\n  \t\t\treturn true;\n  \t\t}\n  \t}\n\n  \tcall(this.method);\n\n  \tif (!ractive[this.method] && this.deprecate && call(this.deprecate.deprecated)) {\n  \t\tif (this.deprecate.message) {\n  \t\t\twarnIfDebug(this.deprecate.message);\n  \t\t} else {\n  \t\t\twarnIfDebug(\"The method \\\"%s\\\" has been deprecated in favor of \\\"%s\\\" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.\", this.deprecate.deprecated, this.deprecate.replacement);\n  \t\t}\n  \t}\n\n  \targ ? ractive.fire(this.event, arg) : ractive.fire(this.event);\n  };\n\n  var hooks_Hook = Hook;\n\n  function addToArray(array, value) {\n  \tvar index = array.indexOf(value);\n\n  \tif (index === -1) {\n  \t\tarray.push(value);\n  \t}\n  }\n\n  function arrayContains(array, value) {\n  \tfor (var i = 0, c = array.length; i < c; i++) {\n  \t\tif (array[i] == value) {\n  \t\t\treturn true;\n  \t\t}\n  \t}\n\n  \treturn false;\n  }\n\n  function arrayContentsMatch(a, b) {\n  \tvar i;\n\n  \tif (!isArray(a) || !isArray(b)) {\n  \t\treturn false;\n  \t}\n\n  \tif (a.length !== b.length) {\n  \t\treturn false;\n  \t}\n\n  \ti = a.length;\n  \twhile (i--) {\n  \t\tif (a[i] !== b[i]) {\n  \t\t\treturn false;\n  \t\t}\n  \t}\n\n  \treturn true;\n  }\n\n  function ensureArray(x) {\n  \tif (typeof x === \"string\") {\n  \t\treturn [x];\n  \t}\n\n  \tif (x === undefined) {\n  \t\treturn [];\n  \t}\n\n  \treturn x;\n  }\n\n  function lastItem(array) {\n  \treturn array[array.length - 1];\n  }\n\n  function removeFromArray(array, member) {\n  \tvar index = array.indexOf(member);\n\n  \tif (index !== -1) {\n  \t\tarray.splice(index, 1);\n  \t}\n  }\n\n  function toArray(arrayLike) {\n  \tvar array = [],\n  \t    i = arrayLike.length;\n  \twhile (i--) {\n  \t\tarray[i] = arrayLike[i];\n  \t}\n\n  \treturn array;\n  }\n\n  var _Promise,\n      PENDING = {},\n      FULFILLED = {},\n      REJECTED = {};\n\n  if (typeof Promise === \"function\") {\n  \t// use native Promise\n  \t_Promise = Promise;\n  } else {\n  \t_Promise = function (callback) {\n  \t\tvar fulfilledHandlers = [],\n  \t\t    rejectedHandlers = [],\n  \t\t    state = PENDING,\n  \t\t    result,\n  \t\t    dispatchHandlers,\n  \t\t    makeResolver,\n  \t\t    fulfil,\n  \t\t    reject,\n  \t\t    promise;\n\n  \t\tmakeResolver = function (newState) {\n  \t\t\treturn function (value) {\n  \t\t\t\tif (state !== PENDING) {\n  \t\t\t\t\treturn;\n  \t\t\t\t}\n\n  \t\t\t\tresult = value;\n  \t\t\t\tstate = newState;\n\n  \t\t\t\tdispatchHandlers = makeDispatcher(state === FULFILLED ? fulfilledHandlers : rejectedHandlers, result);\n\n  \t\t\t\t// dispatch onFulfilled and onRejected handlers asynchronously\n  \t\t\t\twait(dispatchHandlers);\n  \t\t\t};\n  \t\t};\n\n  \t\tfulfil = makeResolver(FULFILLED);\n  \t\treject = makeResolver(REJECTED);\n\n  \t\ttry {\n  \t\t\tcallback(fulfil, reject);\n  \t\t} catch (err) {\n  \t\t\treject(err);\n  \t\t}\n\n  \t\tpromise = {\n  \t\t\t// `then()` returns a Promise - 2.2.7\n  \t\t\tthen: function (onFulfilled, onRejected) {\n  \t\t\t\tvar promise2 = new _Promise(function (fulfil, reject) {\n\n  \t\t\t\t\tvar processResolutionHandler = function (handler, handlers, forward) {\n\n  \t\t\t\t\t\t// 2.2.1.1\n  \t\t\t\t\t\tif (typeof handler === \"function\") {\n  \t\t\t\t\t\t\thandlers.push(function (p1result) {\n  \t\t\t\t\t\t\t\tvar x;\n\n  \t\t\t\t\t\t\t\ttry {\n  \t\t\t\t\t\t\t\t\tx = handler(p1result);\n  \t\t\t\t\t\t\t\t\tutils_Promise__resolve(promise2, x, fulfil, reject);\n  \t\t\t\t\t\t\t\t} catch (err) {\n  \t\t\t\t\t\t\t\t\treject(err);\n  \t\t\t\t\t\t\t\t}\n  \t\t\t\t\t\t\t});\n  \t\t\t\t\t\t} else {\n  \t\t\t\t\t\t\t// Forward the result of promise1 to promise2, if resolution handlers\n  \t\t\t\t\t\t\t// are not given\n  \t\t\t\t\t\t\thandlers.push(forward);\n  \t\t\t\t\t\t}\n  \t\t\t\t\t};\n\n  \t\t\t\t\t// 2.2\n  \t\t\t\t\tprocessResolutionHandler(onFulfilled, fulfilledHandlers, fulfil);\n  \t\t\t\t\tprocessResolutionHandler(onRejected, rejectedHandlers, reject);\n\n  \t\t\t\t\tif (state !== PENDING) {\n  \t\t\t\t\t\t// If the promise has resolved already, dispatch the appropriate handlers asynchronously\n  \t\t\t\t\t\twait(dispatchHandlers);\n  \t\t\t\t\t}\n  \t\t\t\t});\n\n  \t\t\t\treturn promise2;\n  \t\t\t}\n  \t\t};\n\n  \t\tpromise[\"catch\"] = function (onRejected) {\n  \t\t\treturn this.then(null, onRejected);\n  \t\t};\n\n  \t\treturn promise;\n  \t};\n\n  \t_Promise.all = function (promises) {\n  \t\treturn new _Promise(function (fulfil, reject) {\n  \t\t\tvar result = [],\n  \t\t\t    pending,\n  \t\t\t    i,\n  \t\t\t    processPromise;\n\n  \t\t\tif (!promises.length) {\n  \t\t\t\tfulfil(result);\n  \t\t\t\treturn;\n  \t\t\t}\n\n  \t\t\tprocessPromise = function (promise, i) {\n  \t\t\t\tif (promise && typeof promise.then === \"function\") {\n  \t\t\t\t\tpromise.then(function (value) {\n  \t\t\t\t\t\tresult[i] = value;\n  \t\t\t\t\t\t--pending || fulfil(result);\n  \t\t\t\t\t}, reject);\n  \t\t\t\t} else {\n  \t\t\t\t\tresult[i] = promise;\n  \t\t\t\t\t--pending || fulfil(result);\n  \t\t\t\t}\n  \t\t\t};\n\n  \t\t\tpending = i = promises.length;\n  \t\t\twhile (i--) {\n  \t\t\t\tprocessPromise(promises[i], i);\n  \t\t\t}\n  \t\t});\n  \t};\n\n  \t_Promise.resolve = function (value) {\n  \t\treturn new _Promise(function (fulfil) {\n  \t\t\tfulfil(value);\n  \t\t});\n  \t};\n\n  \t_Promise.reject = function (reason) {\n  \t\treturn new _Promise(function (fulfil, reject) {\n  \t\t\treject(reason);\n  \t\t});\n  \t};\n  }\n\n  var utils_Promise = _Promise;\n\n  // TODO use MutationObservers or something to simulate setImmediate\n  function wait(callback) {\n  \tsetTimeout(callback, 0);\n  }\n\n  function makeDispatcher(handlers, result) {\n  \treturn function () {\n  \t\tvar handler;\n\n  \t\twhile (handler = handlers.shift()) {\n  \t\t\thandler(result);\n  \t\t}\n  \t};\n  }\n\n  function utils_Promise__resolve(promise, x, fulfil, reject) {\n  \t// Promise Resolution Procedure\n  \tvar then;\n\n  \t// 2.3.1\n  \tif (x === promise) {\n  \t\tthrow new TypeError(\"A promise's fulfillment handler cannot return the same promise\");\n  \t}\n\n  \t// 2.3.2\n  \tif (x instanceof _Promise) {\n  \t\tx.then(fulfil, reject);\n  \t}\n\n  \t// 2.3.3\n  \telse if (x && (typeof x === \"object\" || typeof x === \"function\")) {\n  \t\ttry {\n  \t\t\tthen = x.then; // 2.3.3.1\n  \t\t} catch (e) {\n  \t\t\treject(e); // 2.3.3.2\n  \t\t\treturn;\n  \t\t}\n\n  \t\t// 2.3.3.3\n  \t\tif (typeof then === \"function\") {\n  \t\t\tvar called, resolvePromise, rejectPromise;\n\n  \t\t\tresolvePromise = function (y) {\n  \t\t\t\tif (called) {\n  \t\t\t\t\treturn;\n  \t\t\t\t}\n  \t\t\t\tcalled = true;\n  \t\t\t\tutils_Promise__resolve(promise, y, fulfil, reject);\n  \t\t\t};\n\n  \t\t\trejectPromise = function (r) {\n  \t\t\t\tif (called) {\n  \t\t\t\t\treturn;\n  \t\t\t\t}\n  \t\t\t\tcalled = true;\n  \t\t\t\treject(r);\n  \t\t\t};\n\n  \t\t\ttry {\n  \t\t\t\tthen.call(x, resolvePromise, rejectPromise);\n  \t\t\t} catch (e) {\n  \t\t\t\tif (!called) {\n  \t\t\t\t\t// 2.3.3.3.4.1\n  \t\t\t\t\treject(e); // 2.3.3.3.4.2\n  \t\t\t\t\tcalled = true;\n  \t\t\t\t\treturn;\n  \t\t\t\t}\n  \t\t\t}\n  \t\t} else {\n  \t\t\tfulfil(x);\n  \t\t}\n  \t} else {\n  \t\tfulfil(x);\n  \t}\n  }\n\n  var getInnerContext = function (fragment) {\n  \tdo {\n  \t\tif (fragment.context !== undefined) {\n  \t\t\treturn fragment.context;\n  \t\t}\n  \t} while (fragment = fragment.parent);\n\n  \treturn rootKeypath;\n  };\n\n  var shared_resolveRef = resolveRef;\n\n  function resolveRef(ractive, ref, fragment) {\n  \tvar keypath;\n\n  \tref = normalise(ref);\n\n  \t// If a reference begins '~/', it's a top-level reference\n  \tif (ref.substr(0, 2) === \"~/\") {\n  \t\tkeypath = getKeypath(ref.substring(2));\n  \t\tcreateMappingIfNecessary(ractive, keypath.firstKey, fragment);\n  \t}\n\n  \t// If a reference begins with '.', it's either a restricted reference or\n  \t// an ancestor reference...\n  \telse if (ref[0] === \".\") {\n  \t\tkeypath = resolveAncestorRef(getInnerContext(fragment), ref);\n\n  \t\tif (keypath) {\n  \t\t\tcreateMappingIfNecessary(ractive, keypath.firstKey, fragment);\n  \t\t}\n  \t}\n\n  \t// ...otherwise we need to figure out the keypath based on context\n  \telse {\n  \t\tkeypath = resolveAmbiguousReference(ractive, getKeypath(ref), fragment);\n  \t}\n\n  \treturn keypath;\n  }\n\n  function resolveAncestorRef(baseContext, ref) {\n  \tvar contextKeys;\n\n  \t// TODO...\n  \tif (baseContext != undefined && typeof baseContext !== \"string\") {\n  \t\tbaseContext = baseContext.str;\n  \t}\n\n  \t// {{.}} means 'current context'\n  \tif (ref === \".\") return getKeypath(baseContext);\n\n  \tcontextKeys = baseContext ? baseContext.split(\".\") : [];\n\n  \t// ancestor references (starting \"../\") go up the tree\n  \tif (ref.substr(0, 3) === \"../\") {\n  \t\twhile (ref.substr(0, 3) === \"../\") {\n  \t\t\tif (!contextKeys.length) {\n  \t\t\t\tthrow new Error(\"Could not resolve reference - too many \\\"../\\\" prefixes\");\n  \t\t\t}\n\n  \t\t\tcontextKeys.pop();\n  \t\t\tref = ref.substring(3);\n  \t\t}\n\n  \t\tcontextKeys.push(ref);\n  \t\treturn getKeypath(contextKeys.join(\".\"));\n  \t}\n\n  \t// not an ancestor reference - must be a restricted reference (prepended with \".\" or \"./\")\n  \tif (!baseContext) {\n  \t\treturn getKeypath(ref.replace(/^\\.\\/?/, \"\"));\n  \t}\n\n  \treturn getKeypath(baseContext + ref.replace(/^\\.\\//, \".\"));\n  }\n\n  function resolveAmbiguousReference(ractive, ref, fragment, isParentLookup) {\n  \tvar context, key, parentValue, hasContextChain, parentKeypath;\n\n  \tif (ref.isRoot) {\n  \t\treturn ref;\n  \t}\n\n  \tkey = ref.firstKey;\n\n  \twhile (fragment) {\n  \t\tcontext = fragment.context;\n  \t\tfragment = fragment.parent;\n\n  \t\tif (!context) {\n  \t\t\tcontinue;\n  \t\t}\n\n  \t\thasContextChain = true;\n  \t\tparentValue = ractive.viewmodel.get(context);\n\n  \t\tif (parentValue && (typeof parentValue === \"object\" || typeof parentValue === \"function\") && key in parentValue) {\n  \t\t\treturn context.join(ref.str);\n  \t\t}\n  \t}\n\n  \t// Root/computed/mapped property?\n  \tif (isRootProperty(ractive.viewmodel, key)) {\n  \t\treturn ref;\n  \t}\n\n  \t// If this is an inline component, and it's not isolated, we\n  \t// can try going up the scope chain\n  \tif (ractive.parent && !ractive.isolated) {\n  \t\thasContextChain = true;\n  \t\tfragment = ractive.component.parentFragment;\n\n  \t\tkey = getKeypath(key);\n\n  \t\tif (parentKeypath = resolveAmbiguousReference(ractive.parent, key, fragment, true)) {\n  \t\t\t// We need to create an inter-component binding\n  \t\t\tractive.viewmodel.map(key, {\n  \t\t\t\torigin: ractive.parent.viewmodel,\n  \t\t\t\tkeypath: parentKeypath\n  \t\t\t});\n\n  \t\t\treturn ref;\n  \t\t}\n  \t}\n\n  \t// If there's no context chain, and the instance is either a) isolated or\n  \t// b) an orphan, then we know that the keypath is identical to the reference\n  \tif (!isParentLookup && !hasContextChain) {\n  \t\t// the data object needs to have a property by this name,\n  \t\t// to prevent future failed lookups\n  \t\tractive.viewmodel.set(ref, undefined);\n  \t\treturn ref;\n  \t}\n  }\n\n  function createMappingIfNecessary(ractive, key) {\n  \tvar parentKeypath;\n\n  \tif (!ractive.parent || ractive.isolated || isRootProperty(ractive.viewmodel, key)) {\n  \t\treturn;\n  \t}\n\n  \tkey = getKeypath(key);\n\n  \tif (parentKeypath = resolveAmbiguousReference(ractive.parent, key, ractive.component.parentFragment, true)) {\n  \t\tractive.viewmodel.map(key, {\n  \t\t\torigin: ractive.parent.viewmodel,\n  \t\t\tkeypath: parentKeypath\n  \t\t});\n  \t}\n  }\n\n  function isRootProperty(viewmodel, key) {\n  \t// special case for reference to root\n  \treturn key === \"\" || key in viewmodel.data || key in viewmodel.computations || key in viewmodel.mappings;\n  }\n\n  function teardown(x) {\n    x.teardown();\n  }\n\n  function methodCallers__unbind(x) {\n    x.unbind();\n  }\n\n  function methodCallers__unrender(x) {\n    x.unrender();\n  }\n\n  function cancel(x) {\n    x.cancel();\n  }\n\n  var TransitionManager = function (callback, parent) {\n  \tthis.callback = callback;\n  \tthis.parent = parent;\n\n  \tthis.intros = [];\n  \tthis.outros = [];\n\n  \tthis.children = [];\n  \tthis.totalChildren = this.outroChildren = 0;\n\n  \tthis.detachQueue = [];\n  \tthis.decoratorQueue = [];\n  \tthis.outrosComplete = false;\n\n  \tif (parent) {\n  \t\tparent.addChild(this);\n  \t}\n  };\n\n  TransitionManager.prototype = {\n  \taddChild: function (child) {\n  \t\tthis.children.push(child);\n\n  \t\tthis.totalChildren += 1;\n  \t\tthis.outroChildren += 1;\n  \t},\n\n  \tdecrementOutros: function () {\n  \t\tthis.outroChildren -= 1;\n  \t\tcheck(this);\n  \t},\n\n  \tdecrementTotal: function () {\n  \t\tthis.totalChildren -= 1;\n  \t\tcheck(this);\n  \t},\n\n  \tadd: function (transition) {\n  \t\tvar list = transition.isIntro ? this.intros : this.outros;\n  \t\tlist.push(transition);\n  \t},\n\n  \taddDecorator: function (decorator) {\n  \t\tthis.decoratorQueue.push(decorator);\n  \t},\n\n  \tremove: function (transition) {\n  \t\tvar list = transition.isIntro ? this.intros : this.outros;\n  \t\tremoveFromArray(list, transition);\n  \t\tcheck(this);\n  \t},\n\n  \tinit: function () {\n  \t\tthis.ready = true;\n  \t\tcheck(this);\n  \t},\n\n  \tdetachNodes: function () {\n  \t\tthis.decoratorQueue.forEach(teardown);\n  \t\tthis.detachQueue.forEach(detach);\n  \t\tthis.children.forEach(detachNodes);\n  \t}\n  };\n\n  function detach(element) {\n  \telement.detach();\n  }\n\n  function detachNodes(tm) {\n  \ttm.detachNodes();\n  }\n\n  function check(tm) {\n  \tif (!tm.ready || tm.outros.length || tm.outroChildren) return;\n\n  \t// If all outros are complete, and we haven't already done this,\n  \t// we notify the parent if there is one, otherwise\n  \t// start detaching nodes\n  \tif (!tm.outrosComplete) {\n  \t\tif (tm.parent) {\n  \t\t\ttm.parent.decrementOutros(tm);\n  \t\t} else {\n  \t\t\ttm.detachNodes();\n  \t\t}\n\n  \t\ttm.outrosComplete = true;\n  \t}\n\n  \t// Once everything is done, we can notify parent transition\n  \t// manager and call the callback\n  \tif (!tm.intros.length && !tm.totalChildren) {\n  \t\tif (typeof tm.callback === \"function\") {\n  \t\t\ttm.callback();\n  \t\t}\n\n  \t\tif (tm.parent) {\n  \t\t\ttm.parent.decrementTotal();\n  \t\t}\n  \t}\n  }\n\n  var global_TransitionManager = TransitionManager;\n\n  var batch,\n      runloop,\n      unresolved = [],\n      changeHook = new hooks_Hook(\"change\");\n\n  runloop = {\n  \tstart: function (instance, returnPromise) {\n  \t\tvar promise, fulfilPromise;\n\n  \t\tif (returnPromise) {\n  \t\t\tpromise = new utils_Promise(function (f) {\n  \t\t\t\treturn fulfilPromise = f;\n  \t\t\t});\n  \t\t}\n\n  \t\tbatch = {\n  \t\t\tpreviousBatch: batch,\n  \t\t\ttransitionManager: new global_TransitionManager(fulfilPromise, batch && batch.transitionManager),\n  \t\t\tviews: [],\n  \t\t\ttasks: [],\n  \t\t\tractives: [],\n  \t\t\tinstance: instance\n  \t\t};\n\n  \t\tif (instance) {\n  \t\t\tbatch.ractives.push(instance);\n  \t\t}\n\n  \t\treturn promise;\n  \t},\n\n  \tend: function () {\n  \t\tflushChanges();\n\n  \t\tbatch.transitionManager.init();\n  \t\tif (!batch.previousBatch && !!batch.instance) batch.instance.viewmodel.changes = [];\n  \t\tbatch = batch.previousBatch;\n  \t},\n\n  \taddRactive: function (ractive) {\n  \t\tif (batch) {\n  \t\t\taddToArray(batch.ractives, ractive);\n  \t\t}\n  \t},\n\n  \tregisterTransition: function (transition) {\n  \t\ttransition._manager = batch.transitionManager;\n  \t\tbatch.transitionManager.add(transition);\n  \t},\n\n  \tregisterDecorator: function (decorator) {\n  \t\tbatch.transitionManager.addDecorator(decorator);\n  \t},\n\n  \taddView: function (view) {\n  \t\tbatch.views.push(view);\n  \t},\n\n  \taddUnresolved: function (thing) {\n  \t\tunresolved.push(thing);\n  \t},\n\n  \tremoveUnresolved: function (thing) {\n  \t\tremoveFromArray(unresolved, thing);\n  \t},\n\n  \t// synchronise node detachments with transition ends\n  \tdetachWhenReady: function (thing) {\n  \t\tbatch.transitionManager.detachQueue.push(thing);\n  \t},\n\n  \tscheduleTask: function (task, postRender) {\n  \t\tvar _batch;\n\n  \t\tif (!batch) {\n  \t\t\ttask();\n  \t\t} else {\n  \t\t\t_batch = batch;\n  \t\t\twhile (postRender && _batch.previousBatch) {\n  \t\t\t\t// this can't happen until the DOM has been fully updated\n  \t\t\t\t// otherwise in some situations (with components inside elements)\n  \t\t\t\t// transitions and decorators will initialise prematurely\n  \t\t\t\t_batch = _batch.previousBatch;\n  \t\t\t}\n\n  \t\t\t_batch.tasks.push(task);\n  \t\t}\n  \t}\n  };\n\n  var global_runloop = runloop;\n\n  function flushChanges() {\n  \tvar i, thing, changeHash;\n\n  \twhile (batch.ractives.length) {\n  \t\tthing = batch.ractives.pop();\n  \t\tchangeHash = thing.viewmodel.applyChanges();\n\n  \t\tif (changeHash) {\n  \t\t\tchangeHook.fire(thing, changeHash);\n  \t\t}\n  \t}\n\n  \tattemptKeypathResolution();\n\n  \t// Now that changes have been fully propagated, we can update the DOM\n  \t// and complete other tasks\n  \tfor (i = 0; i < batch.views.length; i += 1) {\n  \t\tbatch.views[i].update();\n  \t}\n  \tbatch.views.length = 0;\n\n  \tfor (i = 0; i < batch.tasks.length; i += 1) {\n  \t\tbatch.tasks[i]();\n  \t}\n  \tbatch.tasks.length = 0;\n\n  \t// If updating the view caused some model blowback - e.g. a triple\n  \t// containing <option> elements caused the binding on the <select>\n  \t// to update - then we start over\n  \tif (batch.ractives.length) return flushChanges();\n  }\n\n  function attemptKeypathResolution() {\n  \tvar i, item, keypath, resolved;\n\n  \ti = unresolved.length;\n\n  \t// see if we can resolve any unresolved references\n  \twhile (i--) {\n  \t\titem = unresolved[i];\n\n  \t\tif (item.keypath) {\n  \t\t\t// it resolved some other way. TODO how? two-way binding? Seems\n  \t\t\t// weird that we'd still end up here\n  \t\t\tunresolved.splice(i, 1);\n  \t\t\tcontinue; // avoid removing the wrong thing should the next condition be true\n  \t\t}\n\n  \t\tif (keypath = shared_resolveRef(item.root, item.ref, item.parentFragment)) {\n  \t\t\t(resolved || (resolved = [])).push({\n  \t\t\t\titem: item,\n  \t\t\t\tkeypath: keypath\n  \t\t\t});\n\n  \t\t\tunresolved.splice(i, 1);\n  \t\t}\n  \t}\n\n  \tif (resolved) {\n  \t\tresolved.forEach(global_runloop__resolve);\n  \t}\n  }\n\n  function global_runloop__resolve(resolved) {\n  \tresolved.item.resolve(resolved.keypath);\n  }\n\n  var queue = [];\n\n  var animations = {\n  \ttick: function () {\n  \t\tvar i, animation, now;\n\n  \t\tnow = utils_getTime();\n\n  \t\tglobal_runloop.start();\n\n  \t\tfor (i = 0; i < queue.length; i += 1) {\n  \t\t\tanimation = queue[i];\n\n  \t\t\tif (!animation.tick(now)) {\n  \t\t\t\t// animation is complete, remove it from the stack, and decrement i so we don't miss one\n  \t\t\t\tqueue.splice(i--, 1);\n  \t\t\t}\n  \t\t}\n\n  \t\tglobal_runloop.end();\n\n  \t\tif (queue.length) {\n  \t\t\trAF(animations.tick);\n  \t\t} else {\n  \t\t\tanimations.running = false;\n  \t\t}\n  \t},\n\n  \tadd: function (animation) {\n  \t\tqueue.push(animation);\n\n  \t\tif (!animations.running) {\n  \t\t\tanimations.running = true;\n  \t\t\trAF(animations.tick);\n  \t\t}\n  \t},\n\n  \t// TODO optimise this\n  \tabort: function (keypath, root) {\n  \t\tvar i = queue.length,\n  \t\t    animation;\n\n  \t\twhile (i--) {\n  \t\t\tanimation = queue[i];\n\n  \t\t\tif (animation.root === root && animation.keypath === keypath) {\n  \t\t\t\tanimation.stop();\n  \t\t\t}\n  \t\t}\n  \t}\n  };\n\n  var shared_animations = animations;\n\n  var Animation = function (options) {\n  \tvar key;\n\n  \tthis.startTime = Date.now();\n\n  \t// from and to\n  \tfor (key in options) {\n  \t\tif (options.hasOwnProperty(key)) {\n  \t\t\tthis[key] = options[key];\n  \t\t}\n  \t}\n\n  \tthis.interpolator = shared_interpolate(this.from, this.to, this.root, this.interpolator);\n  \tthis.running = true;\n\n  \tthis.tick();\n  };\n\n  Animation.prototype = {\n  \ttick: function () {\n  \t\tvar elapsed, t, value, timeNow, index, keypath;\n\n  \t\tkeypath = this.keypath;\n\n  \t\tif (this.running) {\n  \t\t\ttimeNow = Date.now();\n  \t\t\telapsed = timeNow - this.startTime;\n\n  \t\t\tif (elapsed >= this.duration) {\n  \t\t\t\tif (keypath !== null) {\n  \t\t\t\t\tglobal_runloop.start(this.root);\n  \t\t\t\t\tthis.root.viewmodel.set(keypath, this.to);\n  \t\t\t\t\tglobal_runloop.end();\n  \t\t\t\t}\n\n  \t\t\t\tif (this.step) {\n  \t\t\t\t\tthis.step(1, this.to);\n  \t\t\t\t}\n\n  \t\t\t\tthis.complete(this.to);\n\n  \t\t\t\tindex = this.root._animations.indexOf(this);\n\n  \t\t\t\t// TODO investigate why this happens\n  \t\t\t\tif (index === -1) {\n  \t\t\t\t\twarnIfDebug(\"Animation was not found\");\n  \t\t\t\t}\n\n  \t\t\t\tthis.root._animations.splice(index, 1);\n\n  \t\t\t\tthis.running = false;\n  \t\t\t\treturn false; // remove from the stack\n  \t\t\t}\n\n  \t\t\tt = this.easing ? this.easing(elapsed / this.duration) : elapsed / this.duration;\n\n  \t\t\tif (keypath !== null) {\n  \t\t\t\tvalue = this.interpolator(t);\n  \t\t\t\tglobal_runloop.start(this.root);\n  \t\t\t\tthis.root.viewmodel.set(keypath, value);\n  \t\t\t\tglobal_runloop.end();\n  \t\t\t}\n\n  \t\t\tif (this.step) {\n  \t\t\t\tthis.step(t, value);\n  \t\t\t}\n\n  \t\t\treturn true; // keep in the stack\n  \t\t}\n\n  \t\treturn false; // remove from the stack\n  \t},\n\n  \tstop: function () {\n  \t\tvar index;\n\n  \t\tthis.running = false;\n\n  \t\tindex = this.root._animations.indexOf(this);\n\n  \t\t// TODO investigate why this happens\n  \t\tif (index === -1) {\n  \t\t\twarnIfDebug(\"Animation was not found\");\n  \t\t}\n\n  \t\tthis.root._animations.splice(index, 1);\n  \t}\n  };\n\n  var animate_Animation = Animation;\n\n  var prototype_animate = Ractive$animate;\n\n  var noAnimation = { stop: noop };\n  function Ractive$animate(keypath, to, options) {\n  \tvar promise, fulfilPromise, k, animation, animations, easing, duration, step, complete, makeValueCollector, currentValues, collectValue, dummy, dummyOptions;\n\n  \tpromise = new utils_Promise(function (fulfil) {\n  \t\treturn fulfilPromise = fulfil;\n  \t});\n\n  \t// animate multiple keypaths\n  \tif (typeof keypath === \"object\") {\n  \t\toptions = to || {};\n  \t\teasing = options.easing;\n  \t\tduration = options.duration;\n\n  \t\tanimations = [];\n\n  \t\t// we don't want to pass the `step` and `complete` handlers, as they will\n  \t\t// run for each animation! So instead we'll store the handlers and create\n  \t\t// our own...\n  \t\tstep = options.step;\n  \t\tcomplete = options.complete;\n\n  \t\tif (step || complete) {\n  \t\t\tcurrentValues = {};\n\n  \t\t\toptions.step = null;\n  \t\t\toptions.complete = null;\n\n  \t\t\tmakeValueCollector = function (keypath) {\n  \t\t\t\treturn function (t, value) {\n  \t\t\t\t\tcurrentValues[keypath] = value;\n  \t\t\t\t};\n  \t\t\t};\n  \t\t}\n\n  \t\tfor (k in keypath) {\n  \t\t\tif (keypath.hasOwnProperty(k)) {\n  \t\t\t\tif (step || complete) {\n  \t\t\t\t\tcollectValue = makeValueCollector(k);\n  \t\t\t\t\toptions = { easing: easing, duration: duration };\n\n  \t\t\t\t\tif (step) {\n  \t\t\t\t\t\toptions.step = collectValue;\n  \t\t\t\t\t}\n  \t\t\t\t}\n\n  \t\t\t\toptions.complete = complete ? collectValue : noop;\n  \t\t\t\tanimations.push(animate(this, k, keypath[k], options));\n  \t\t\t}\n  \t\t}\n\n  \t\t// Create a dummy animation, to facilitate step/complete\n  \t\t// callbacks, and Promise fulfilment\n  \t\tdummyOptions = { easing: easing, duration: duration };\n\n  \t\tif (step) {\n  \t\t\tdummyOptions.step = function (t) {\n  \t\t\t\treturn step(t, currentValues);\n  \t\t\t};\n  \t\t}\n\n  \t\tif (complete) {\n  \t\t\tpromise.then(function (t) {\n  \t\t\t\treturn complete(t, currentValues);\n  \t\t\t});\n  \t\t}\n\n  \t\tdummyOptions.complete = fulfilPromise;\n\n  \t\tdummy = animate(this, null, null, dummyOptions);\n  \t\tanimations.push(dummy);\n\n  \t\tpromise.stop = function () {\n  \t\t\tvar animation;\n\n  \t\t\twhile (animation = animations.pop()) {\n  \t\t\t\tanimation.stop();\n  \t\t\t}\n\n  \t\t\tif (dummy) {\n  \t\t\t\tdummy.stop();\n  \t\t\t}\n  \t\t};\n\n  \t\treturn promise;\n  \t}\n\n  \t// animate a single keypath\n  \toptions = options || {};\n\n  \tif (options.complete) {\n  \t\tpromise.then(options.complete);\n  \t}\n\n  \toptions.complete = fulfilPromise;\n  \tanimation = animate(this, keypath, to, options);\n\n  \tpromise.stop = function () {\n  \t\treturn animation.stop();\n  \t};\n  \treturn promise;\n  }\n\n  function animate(root, keypath, to, options) {\n  \tvar easing, duration, animation, from;\n\n  \tif (keypath) {\n  \t\tkeypath = getKeypath(normalise(keypath));\n  \t}\n\n  \tif (keypath !== null) {\n  \t\tfrom = root.viewmodel.get(keypath);\n  \t}\n\n  \t// cancel any existing animation\n  \t// TODO what about upstream/downstream keypaths?\n  \tshared_animations.abort(keypath, root);\n\n  \t// don't bother animating values that stay the same\n  \tif (isEqual(from, to)) {\n  \t\tif (options.complete) {\n  \t\t\toptions.complete(options.to);\n  \t\t}\n\n  \t\treturn noAnimation;\n  \t}\n\n  \t// easing function\n  \tif (options.easing) {\n  \t\tif (typeof options.easing === \"function\") {\n  \t\t\teasing = options.easing;\n  \t\t} else {\n  \t\t\teasing = root.easing[options.easing];\n  \t\t}\n\n  \t\tif (typeof easing !== \"function\") {\n  \t\t\teasing = null;\n  \t\t}\n  \t}\n\n  \t// duration\n  \tduration = options.duration === undefined ? 400 : options.duration;\n\n  \t// TODO store keys, use an internal set method\n  \tanimation = new animate_Animation({\n  \t\tkeypath: keypath,\n  \t\tfrom: from,\n  \t\tto: to,\n  \t\troot: root,\n  \t\tduration: duration,\n  \t\teasing: easing,\n  \t\tinterpolator: options.interpolator,\n\n  \t\t// TODO wrap callbacks if necessary, to use instance as context\n  \t\tstep: options.step,\n  \t\tcomplete: options.complete\n  \t});\n\n  \tshared_animations.add(animation);\n  \troot._animations.push(animation);\n\n  \treturn animation;\n  }\n\n  var prototype_detach = Ractive$detach;\n  var prototype_detach__detachHook = new hooks_Hook(\"detach\");\n  function Ractive$detach() {\n  \tif (this.detached) {\n  \t\treturn this.detached;\n  \t}\n\n  \tif (this.el) {\n  \t\tremoveFromArray(this.el.__ractive_instances__, this);\n  \t}\n  \tthis.detached = this.fragment.detach();\n  \tprototype_detach__detachHook.fire(this);\n  \treturn this.detached;\n  }\n\n  var prototype_find = Ractive$find;\n\n  function Ractive$find(selector) {\n  \tif (!this.el) {\n  \t\treturn null;\n  \t}\n\n  \treturn this.fragment.find(selector);\n  }\n\n  var test = Query$test;\n  function Query$test(item, noDirty) {\n  \tvar itemMatches;\n\n  \tif (this._isComponentQuery) {\n  \t\titemMatches = !this.selector || item.name === this.selector;\n  \t} else {\n  \t\titemMatches = item.node ? matches(item.node, this.selector) : null;\n  \t}\n\n  \tif (itemMatches) {\n  \t\tthis.push(item.node || item.instance);\n\n  \t\tif (!noDirty) {\n  \t\t\tthis._makeDirty();\n  \t\t}\n\n  \t\treturn true;\n  \t}\n  }\n\n  var makeQuery_cancel = function () {\n  \tvar liveQueries, selector, index;\n\n  \tliveQueries = this._root[this._isComponentQuery ? \"liveComponentQueries\" : \"liveQueries\"];\n  \tselector = this.selector;\n\n  \tindex = liveQueries.indexOf(selector);\n\n  \tif (index !== -1) {\n  \t\tliveQueries.splice(index, 1);\n  \t\tliveQueries[selector] = null;\n  \t}\n  };\n\n  var sortByItemPosition = function (a, b) {\n  \tvar ancestryA, ancestryB, oldestA, oldestB, mutualAncestor, indexA, indexB, fragments, fragmentA, fragmentB;\n\n  \tancestryA = getAncestry(a.component || a._ractive.proxy);\n  \tancestryB = getAncestry(b.component || b._ractive.proxy);\n\n  \toldestA = lastItem(ancestryA);\n  \toldestB = lastItem(ancestryB);\n\n  \t// remove items from the end of both ancestries as long as they are identical\n  \t// - the final one removed is the closest mutual ancestor\n  \twhile (oldestA && oldestA === oldestB) {\n  \t\tancestryA.pop();\n  \t\tancestryB.pop();\n\n  \t\tmutualAncestor = oldestA;\n\n  \t\toldestA = lastItem(ancestryA);\n  \t\toldestB = lastItem(ancestryB);\n  \t}\n\n  \t// now that we have the mutual ancestor, we can find which is earliest\n  \toldestA = oldestA.component || oldestA;\n  \toldestB = oldestB.component || oldestB;\n\n  \tfragmentA = oldestA.parentFragment;\n  \tfragmentB = oldestB.parentFragment;\n\n  \t// if both items share a parent fragment, our job is easy\n  \tif (fragmentA === fragmentB) {\n  \t\tindexA = fragmentA.items.indexOf(oldestA);\n  \t\tindexB = fragmentB.items.indexOf(oldestB);\n\n  \t\t// if it's the same index, it means one contains the other,\n  \t\t// so we see which has the longest ancestry\n  \t\treturn indexA - indexB || ancestryA.length - ancestryB.length;\n  \t}\n\n  \t// if mutual ancestor is a section, we first test to see which section\n  \t// fragment comes first\n  \tif (fragments = mutualAncestor.fragments) {\n  \t\tindexA = fragments.indexOf(fragmentA);\n  \t\tindexB = fragments.indexOf(fragmentB);\n\n  \t\treturn indexA - indexB || ancestryA.length - ancestryB.length;\n  \t}\n\n  \tthrow new Error(\"An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!\");\n  };\n\n  function getParent(item) {\n  \tvar parentFragment;\n\n  \tif (parentFragment = item.parentFragment) {\n  \t\treturn parentFragment.owner;\n  \t}\n\n  \tif (item.component && (parentFragment = item.component.parentFragment)) {\n  \t\treturn parentFragment.owner;\n  \t}\n  }\n\n  function getAncestry(item) {\n  \tvar ancestry, ancestor;\n\n  \tancestry = [item];\n\n  \tancestor = getParent(item);\n\n  \twhile (ancestor) {\n  \t\tancestry.push(ancestor);\n  \t\tancestor = getParent(ancestor);\n  \t}\n\n  \treturn ancestry;\n  }\n\n  var sortByDocumentPosition = function (node, otherNode) {\n  \tvar bitmask;\n\n  \tif (node.compareDocumentPosition) {\n  \t\tbitmask = node.compareDocumentPosition(otherNode);\n  \t\treturn bitmask & 2 ? 1 : -1;\n  \t}\n\n  \t// In old IE, we can piggy back on the mechanism for\n  \t// comparing component positions\n  \treturn sortByItemPosition(node, otherNode);\n  };\n\n  var sort = function () {\n  \tthis.sort(this._isComponentQuery ? sortByItemPosition : sortByDocumentPosition);\n  \tthis._dirty = false;\n  };\n\n  var makeQuery_dirty = function () {\n  \tvar _this = this;\n\n  \tif (!this._dirty) {\n  \t\tthis._dirty = true;\n\n  \t\t// Once the DOM has been updated, ensure the query\n  \t\t// is correctly ordered\n  \t\tglobal_runloop.scheduleTask(function () {\n  \t\t\t_this._sort();\n  \t\t});\n  \t}\n  };\n\n  var remove = function (nodeOrComponent) {\n  \tvar index = this.indexOf(this._isComponentQuery ? nodeOrComponent.instance : nodeOrComponent);\n\n  \tif (index !== -1) {\n  \t\tthis.splice(index, 1);\n  \t}\n  };\n\n  var _makeQuery = makeQuery;\n  function makeQuery(ractive, selector, live, isComponentQuery) {\n  \tvar query = [];\n\n  \tdefineProperties(query, {\n  \t\tselector: { value: selector },\n  \t\tlive: { value: live },\n\n  \t\t_isComponentQuery: { value: isComponentQuery },\n  \t\t_test: { value: test }\n  \t});\n\n  \tif (!live) {\n  \t\treturn query;\n  \t}\n\n  \tdefineProperties(query, {\n  \t\tcancel: { value: makeQuery_cancel },\n\n  \t\t_root: { value: ractive },\n  \t\t_sort: { value: sort },\n  \t\t_makeDirty: { value: makeQuery_dirty },\n  \t\t_remove: { value: remove },\n\n  \t\t_dirty: { value: false, writable: true }\n  \t});\n\n  \treturn query;\n  }\n\n  var prototype_findAll = Ractive$findAll;\n  function Ractive$findAll(selector, options) {\n  \tvar liveQueries, query;\n\n  \tif (!this.el) {\n  \t\treturn [];\n  \t}\n\n  \toptions = options || {};\n  \tliveQueries = this._liveQueries;\n\n  \t// Shortcut: if we're maintaining a live query with this\n  \t// selector, we don't need to traverse the parallel DOM\n  \tif (query = liveQueries[selector]) {\n\n  \t\t// Either return the exact same query, or (if not live) a snapshot\n  \t\treturn options && options.live ? query : query.slice();\n  \t}\n\n  \tquery = _makeQuery(this, selector, !!options.live, false);\n\n  \t// Add this to the list of live queries Ractive needs to maintain,\n  \t// if applicable\n  \tif (query.live) {\n  \t\tliveQueries.push(selector);\n  \t\tliveQueries[\"_\" + selector] = query;\n  \t}\n\n  \tthis.fragment.findAll(selector, query);\n  \treturn query;\n  }\n\n  var prototype_findAllComponents = Ractive$findAllComponents;\n  function Ractive$findAllComponents(selector, options) {\n  \tvar liveQueries, query;\n\n  \toptions = options || {};\n  \tliveQueries = this._liveComponentQueries;\n\n  \t// Shortcut: if we're maintaining a live query with this\n  \t// selector, we don't need to traverse the parallel DOM\n  \tif (query = liveQueries[selector]) {\n\n  \t\t// Either return the exact same query, or (if not live) a snapshot\n  \t\treturn options && options.live ? query : query.slice();\n  \t}\n\n  \tquery = _makeQuery(this, selector, !!options.live, true);\n\n  \t// Add this to the list of live queries Ractive needs to maintain,\n  \t// if applicable\n  \tif (query.live) {\n  \t\tliveQueries.push(selector);\n  \t\tliveQueries[\"_\" + selector] = query;\n  \t}\n\n  \tthis.fragment.findAllComponents(selector, query);\n  \treturn query;\n  }\n\n  var prototype_findComponent = Ractive$findComponent;\n\n  function Ractive$findComponent(selector) {\n  \treturn this.fragment.findComponent(selector);\n  }\n\n  var findContainer = Ractive$findContainer;\n\n  function Ractive$findContainer(selector) {\n  \tif (this.container) {\n  \t\tif (this.container.component && this.container.component.name === selector) {\n  \t\t\treturn this.container;\n  \t\t} else {\n  \t\t\treturn this.container.findContainer(selector);\n  \t\t}\n  \t}\n\n  \treturn null;\n  }\n\n  var findParent = Ractive$findParent;\n\n  function Ractive$findParent(selector) {\n\n  \tif (this.parent) {\n  \t\tif (this.parent.component && this.parent.component.name === selector) {\n  \t\t\treturn this.parent;\n  \t\t} else {\n  \t\t\treturn this.parent.findParent(selector);\n  \t\t}\n  \t}\n\n  \treturn null;\n  }\n\n  var eventStack = {\n  \tenqueue: function (ractive, event) {\n  \t\tif (ractive.event) {\n  \t\t\tractive._eventQueue = ractive._eventQueue || [];\n  \t\t\tractive._eventQueue.push(ractive.event);\n  \t\t}\n  \t\tractive.event = event;\n  \t},\n  \tdequeue: function (ractive) {\n  \t\tif (ractive._eventQueue && ractive._eventQueue.length) {\n  \t\t\tractive.event = ractive._eventQueue.pop();\n  \t\t} else {\n  \t\t\tdelete ractive.event;\n  \t\t}\n  \t}\n  };\n\n  var shared_eventStack = eventStack;\n\n  var shared_fireEvent = fireEvent;\n\n  function fireEvent(ractive, eventName) {\n  \tvar options = arguments[2] === undefined ? {} : arguments[2];\n\n  \tif (!eventName) {\n  \t\treturn;\n  \t}\n\n  \tif (!options.event) {\n  \t\toptions.event = {\n  \t\t\tname: eventName,\n  \t\t\t// until event not included as argument default\n  \t\t\t_noArg: true\n  \t\t};\n  \t} else {\n  \t\toptions.event.name = eventName;\n  \t}\n\n  \tvar eventNames = getKeypath(eventName).wildcardMatches();\n  \tfireEventAs(ractive, eventNames, options.event, options.args, true);\n  }\n\n  function fireEventAs(ractive, eventNames, event, args) {\n  \tvar initialFire = arguments[4] === undefined ? false : arguments[4];\n\n  \tvar subscribers,\n  \t    i,\n  \t    bubble = true;\n\n  \tshared_eventStack.enqueue(ractive, event);\n\n  \tfor (i = eventNames.length; i >= 0; i--) {\n  \t\tsubscribers = ractive._subs[eventNames[i]];\n\n  \t\tif (subscribers) {\n  \t\t\tbubble = notifySubscribers(ractive, subscribers, event, args) && bubble;\n  \t\t}\n  \t}\n\n  \tshared_eventStack.dequeue(ractive);\n\n  \tif (ractive.parent && bubble) {\n\n  \t\tif (initialFire && ractive.component) {\n  \t\t\tvar fullName = ractive.component.name + \".\" + eventNames[eventNames.length - 1];\n  \t\t\teventNames = getKeypath(fullName).wildcardMatches();\n\n  \t\t\tif (event) {\n  \t\t\t\tevent.component = ractive;\n  \t\t\t}\n  \t\t}\n\n  \t\tfireEventAs(ractive.parent, eventNames, event, args);\n  \t}\n  }\n\n  function notifySubscribers(ractive, subscribers, event, args) {\n  \tvar originalEvent = null,\n  \t    stopEvent = false;\n\n  \tif (event && !event._noArg) {\n  \t\targs = [event].concat(args);\n  \t}\n\n  \t// subscribers can be modified inflight, e.g. \"once\" functionality\n  \t// so we need to copy to make sure everyone gets called\n  \tsubscribers = subscribers.slice();\n\n  \tfor (var i = 0, len = subscribers.length; i < len; i += 1) {\n  \t\tif (subscribers[i].apply(ractive, args) === false) {\n  \t\t\tstopEvent = true;\n  \t\t}\n  \t}\n\n  \tif (event && !event._noArg && stopEvent && (originalEvent = event.original)) {\n  \t\toriginalEvent.preventDefault && originalEvent.preventDefault();\n  \t\toriginalEvent.stopPropagation && originalEvent.stopPropagation();\n  \t}\n\n  \treturn !stopEvent;\n  }\n\n  var prototype_fire = Ractive$fire;\n  function Ractive$fire(eventName) {\n\n  \tvar options = {\n  \t\targs: Array.prototype.slice.call(arguments, 1)\n  \t};\n\n  \tshared_fireEvent(this, eventName, options);\n  }\n\n  var prototype_get = Ractive$get;\n  var options = {\n  \tcapture: true, // top-level calls should be intercepted\n  \tnoUnwrap: true, // wrapped values should NOT be unwrapped\n  \tfullRootGet: true // root get should return mappings\n  };\n  function Ractive$get(keypath) {\n  \tvar value;\n\n  \tkeypath = getKeypath(normalise(keypath));\n  \tvalue = this.viewmodel.get(keypath, options);\n\n  \t// Create inter-component binding, if necessary\n  \tif (value === undefined && this.parent && !this.isolated) {\n  \t\tif (shared_resolveRef(this, keypath.str, this.component.parentFragment)) {\n  \t\t\t// creates binding as side-effect, if appropriate\n  \t\t\tvalue = this.viewmodel.get(keypath);\n  \t\t}\n  \t}\n\n  \treturn value;\n  }\n\n  var insert = Ractive$insert;\n\n  var insertHook = new hooks_Hook(\"insert\");\n  function Ractive$insert(target, anchor) {\n  \tif (!this.fragment.rendered) {\n  \t\t// TODO create, and link to, documentation explaining this\n  \t\tthrow new Error(\"The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.\");\n  \t}\n\n  \ttarget = getElement(target);\n  \tanchor = getElement(anchor) || null;\n\n  \tif (!target) {\n  \t\tthrow new Error(\"You must specify a valid target to insert into\");\n  \t}\n\n  \ttarget.insertBefore(this.detach(), anchor);\n  \tthis.el = target;\n\n  \t(target.__ractive_instances__ || (target.__ractive_instances__ = [])).push(this);\n  \tthis.detached = null;\n\n  \tfireInsertHook(this);\n  }\n\n  function fireInsertHook(ractive) {\n  \tinsertHook.fire(ractive);\n\n  \tractive.findAllComponents(\"*\").forEach(function (child) {\n  \t\tfireInsertHook(child.instance);\n  \t});\n  }\n\n  var prototype_merge = Ractive$merge;\n  function Ractive$merge(keypath, array, options) {\n  \tvar currentArray, promise;\n\n  \tkeypath = getKeypath(normalise(keypath));\n  \tcurrentArray = this.viewmodel.get(keypath);\n\n  \t// If either the existing value or the new value isn't an\n  \t// array, just do a regular set\n  \tif (!isArray(currentArray) || !isArray(array)) {\n  \t\treturn this.set(keypath, array, options && options.complete);\n  \t}\n\n  \t// Manage transitions\n  \tpromise = global_runloop.start(this, true);\n  \tthis.viewmodel.merge(keypath, currentArray, array, options);\n  \tglobal_runloop.end();\n\n  \treturn promise;\n  }\n\n  var Observer = function (ractive, keypath, callback, options) {\n  \tthis.root = ractive;\n  \tthis.keypath = keypath;\n  \tthis.callback = callback;\n  \tthis.defer = options.defer;\n\n  \t// default to root as context, but allow it to be overridden\n  \tthis.context = options && options.context ? options.context : ractive;\n  };\n\n  Observer.prototype = {\n  \tinit: function (immediate) {\n  \t\tthis.value = this.root.get(this.keypath.str);\n\n  \t\tif (immediate !== false) {\n  \t\t\tthis.update();\n  \t\t} else {\n  \t\t\tthis.oldValue = this.value;\n  \t\t}\n  \t},\n\n  \tsetValue: function (value) {\n  \t\tvar _this = this;\n\n  \t\tif (!isEqual(value, this.value)) {\n  \t\t\tthis.value = value;\n\n  \t\t\tif (this.defer && this.ready) {\n  \t\t\t\tglobal_runloop.scheduleTask(function () {\n  \t\t\t\t\treturn _this.update();\n  \t\t\t\t});\n  \t\t\t} else {\n  \t\t\t\tthis.update();\n  \t\t\t}\n  \t\t}\n  \t},\n\n  \tupdate: function () {\n  \t\t// Prevent infinite loops\n  \t\tif (this.updating) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tthis.updating = true;\n\n  \t\tthis.callback.call(this.context, this.value, this.oldValue, this.keypath.str);\n  \t\tthis.oldValue = this.value;\n\n  \t\tthis.updating = false;\n  \t}\n  };\n\n  var observe_Observer = Observer;\n\n  var observe_getPattern = getPattern;\n  function getPattern(ractive, pattern) {\n  \tvar matchingKeypaths, values;\n\n  \tmatchingKeypaths = getMatchingKeypaths(ractive, pattern);\n\n  \tvalues = {};\n  \tmatchingKeypaths.forEach(function (keypath) {\n  \t\tvalues[keypath.str] = ractive.get(keypath.str);\n  \t});\n\n  \treturn values;\n  }\n\n  var PatternObserver,\n      slice = Array.prototype.slice;\n\n  PatternObserver = function (ractive, keypath, callback, options) {\n  \tthis.root = ractive;\n\n  \tthis.callback = callback;\n  \tthis.defer = options.defer;\n\n  \tthis.keypath = keypath;\n  \tthis.regex = new RegExp(\"^\" + keypath.str.replace(/\\./g, \"\\\\.\").replace(/\\*/g, \"([^\\\\.]+)\") + \"$\");\n  \tthis.values = {};\n\n  \tif (this.defer) {\n  \t\tthis.proxies = [];\n  \t}\n\n  \t// default to root as context, but allow it to be overridden\n  \tthis.context = options && options.context ? options.context : ractive;\n  };\n\n  PatternObserver.prototype = {\n  \tinit: function (immediate) {\n  \t\tvar values, keypath;\n\n  \t\tvalues = observe_getPattern(this.root, this.keypath);\n\n  \t\tif (immediate !== false) {\n  \t\t\tfor (keypath in values) {\n  \t\t\t\tif (values.hasOwnProperty(keypath)) {\n  \t\t\t\t\tthis.update(getKeypath(keypath));\n  \t\t\t\t}\n  \t\t\t}\n  \t\t} else {\n  \t\t\tthis.values = values;\n  \t\t}\n  \t},\n\n  \tupdate: function (keypath) {\n  \t\tvar _this = this;\n\n  \t\tvar values;\n\n  \t\tif (keypath.isPattern) {\n  \t\t\tvalues = observe_getPattern(this.root, keypath);\n\n  \t\t\tfor (keypath in values) {\n  \t\t\t\tif (values.hasOwnProperty(keypath)) {\n  \t\t\t\t\tthis.update(getKeypath(keypath));\n  \t\t\t\t}\n  \t\t\t}\n\n  \t\t\treturn;\n  \t\t}\n\n  \t\t// special case - array mutation should not trigger `array.*`\n  \t\t// pattern observer with `array.length`\n  \t\tif (this.root.viewmodel.implicitChanges[keypath.str]) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tif (this.defer && this.ready) {\n  \t\t\tglobal_runloop.scheduleTask(function () {\n  \t\t\t\treturn _this.getProxy(keypath).update();\n  \t\t\t});\n  \t\t\treturn;\n  \t\t}\n\n  \t\tthis.reallyUpdate(keypath);\n  \t},\n\n  \treallyUpdate: function (keypath) {\n  \t\tvar keypathStr, value, keys, args;\n\n  \t\tkeypathStr = keypath.str;\n  \t\tvalue = this.root.viewmodel.get(keypath);\n\n  \t\t// Prevent infinite loops\n  \t\tif (this.updating) {\n  \t\t\tthis.values[keypathStr] = value;\n  \t\t\treturn;\n  \t\t}\n\n  \t\tthis.updating = true;\n\n  \t\tif (!isEqual(value, this.values[keypathStr]) || !this.ready) {\n  \t\t\tkeys = slice.call(this.regex.exec(keypathStr), 1);\n  \t\t\targs = [value, this.values[keypathStr], keypathStr].concat(keys);\n\n  \t\t\tthis.values[keypathStr] = value;\n  \t\t\tthis.callback.apply(this.context, args);\n  \t\t}\n\n  \t\tthis.updating = false;\n  \t},\n\n  \tgetProxy: function (keypath) {\n  \t\tvar _this = this;\n\n  \t\tif (!this.proxies[keypath.str]) {\n  \t\t\tthis.proxies[keypath.str] = {\n  \t\t\t\tupdate: function () {\n  \t\t\t\t\treturn _this.reallyUpdate(keypath);\n  \t\t\t\t}\n  \t\t\t};\n  \t\t}\n\n  \t\treturn this.proxies[keypath.str];\n  \t}\n  };\n\n  var observe_PatternObserver = PatternObserver;\n\n  var observe_getObserverFacade = getObserverFacade;\n  var emptyObject = {};\n  function getObserverFacade(ractive, keypath, callback, options) {\n  \tvar observer, isPatternObserver, cancelled;\n\n  \tkeypath = getKeypath(normalise(keypath));\n  \toptions = options || emptyObject;\n\n  \t// pattern observers are treated differently\n  \tif (keypath.isPattern) {\n  \t\tobserver = new observe_PatternObserver(ractive, keypath, callback, options);\n  \t\tractive.viewmodel.patternObservers.push(observer);\n  \t\tisPatternObserver = true;\n  \t} else {\n  \t\tobserver = new observe_Observer(ractive, keypath, callback, options);\n  \t}\n\n  \tobserver.init(options.init);\n  \tractive.viewmodel.register(keypath, observer, isPatternObserver ? \"patternObservers\" : \"observers\");\n\n  \t// This flag allows observers to initialise even with undefined values\n  \tobserver.ready = true;\n\n  \tvar facade = {\n  \t\tcancel: function () {\n  \t\t\tvar index;\n\n  \t\t\tif (cancelled) {\n  \t\t\t\treturn;\n  \t\t\t}\n\n  \t\t\tif (isPatternObserver) {\n  \t\t\t\tindex = ractive.viewmodel.patternObservers.indexOf(observer);\n\n  \t\t\t\tractive.viewmodel.patternObservers.splice(index, 1);\n  \t\t\t\tractive.viewmodel.unregister(keypath, observer, \"patternObservers\");\n  \t\t\t} else {\n  \t\t\t\tractive.viewmodel.unregister(keypath, observer, \"observers\");\n  \t\t\t}\n  \t\t\tcancelled = true;\n  \t\t}\n  \t};\n\n  \tractive._observers.push(facade);\n  \treturn facade;\n  }\n\n  var observe = Ractive$observe;\n  function Ractive$observe(keypath, callback, options) {\n\n  \tvar observers, map, keypaths, i;\n\n  \t// Allow a map of keypaths to handlers\n  \tif (isObject(keypath)) {\n  \t\toptions = callback;\n  \t\tmap = keypath;\n\n  \t\tobservers = [];\n\n  \t\tfor (keypath in map) {\n  \t\t\tif (map.hasOwnProperty(keypath)) {\n  \t\t\t\tcallback = map[keypath];\n  \t\t\t\tobservers.push(this.observe(keypath, callback, options));\n  \t\t\t}\n  \t\t}\n\n  \t\treturn {\n  \t\t\tcancel: function () {\n  \t\t\t\twhile (observers.length) {\n  \t\t\t\t\tobservers.pop().cancel();\n  \t\t\t\t}\n  \t\t\t}\n  \t\t};\n  \t}\n\n  \t// Allow `ractive.observe( callback )` - i.e. observe entire model\n  \tif (typeof keypath === \"function\") {\n  \t\toptions = callback;\n  \t\tcallback = keypath;\n  \t\tkeypath = \"\";\n\n  \t\treturn observe_getObserverFacade(this, keypath, callback, options);\n  \t}\n\n  \tkeypaths = keypath.split(\" \");\n\n  \t// Single keypath\n  \tif (keypaths.length === 1) {\n  \t\treturn observe_getObserverFacade(this, keypath, callback, options);\n  \t}\n\n  \t// Multiple space-separated keypaths\n  \tobservers = [];\n\n  \ti = keypaths.length;\n  \twhile (i--) {\n  \t\tkeypath = keypaths[i];\n\n  \t\tif (keypath) {\n  \t\t\tobservers.push(observe_getObserverFacade(this, keypath, callback, options));\n  \t\t}\n  \t}\n\n  \treturn {\n  \t\tcancel: function () {\n  \t\t\twhile (observers.length) {\n  \t\t\t\tobservers.pop().cancel();\n  \t\t\t}\n  \t\t}\n  \t};\n  }\n\n  var observeOnce = Ractive$observeOnce;\n\n  function Ractive$observeOnce(property, callback, options) {\n\n  \tvar observer = this.observe(property, function () {\n  \t\tcallback.apply(this, arguments);\n  \t\tobserver.cancel();\n  \t}, { init: false, defer: options && options.defer });\n\n  \treturn observer;\n  }\n\n  var shared_trim = function (str) {\n    return str.trim();\n  };\n\n  var notEmptyString = function (str) {\n    return str !== \"\";\n  };\n\n  var off = Ractive$off;\n  function Ractive$off(eventName, callback) {\n  \tvar _this = this;\n\n  \tvar eventNames;\n\n  \t// if no arguments specified, remove all callbacks\n  \tif (!eventName) {\n  \t\t// TODO use this code instead, once the following issue has been resolved\n  \t\t// in PhantomJS (tests are unpassable otherwise!)\n  \t\t// https://github.com/ariya/phantomjs/issues/11856\n  \t\t// defineProperty( this, '_subs', { value: create( null ), configurable: true });\n  \t\tfor (eventName in this._subs) {\n  \t\t\tdelete this._subs[eventName];\n  \t\t}\n  \t} else {\n  \t\t// Handle multiple space-separated event names\n  \t\teventNames = eventName.split(\" \").map(shared_trim).filter(notEmptyString);\n\n  \t\teventNames.forEach(function (eventName) {\n  \t\t\tvar subscribers, index;\n\n  \t\t\t// If we have subscribers for this event...\n  \t\t\tif (subscribers = _this._subs[eventName]) {\n  \t\t\t\t// ...if a callback was specified, only remove that\n  \t\t\t\tif (callback) {\n  \t\t\t\t\tindex = subscribers.indexOf(callback);\n  \t\t\t\t\tif (index !== -1) {\n  \t\t\t\t\t\tsubscribers.splice(index, 1);\n  \t\t\t\t\t}\n  \t\t\t\t}\n\n  \t\t\t\t// ...otherwise remove all callbacks\n  \t\t\t\telse {\n  \t\t\t\t\t_this._subs[eventName] = [];\n  \t\t\t\t}\n  \t\t\t}\n  \t\t});\n  \t}\n\n  \treturn this;\n  }\n\n  var on = Ractive$on;\n  function Ractive$on(eventName, callback) {\n  \tvar _this = this;\n\n  \tvar listeners, n, eventNames;\n\n  \t// allow mutliple listeners to be bound in one go\n  \tif (typeof eventName === \"object\") {\n  \t\tlisteners = [];\n\n  \t\tfor (n in eventName) {\n  \t\t\tif (eventName.hasOwnProperty(n)) {\n  \t\t\t\tlisteners.push(this.on(n, eventName[n]));\n  \t\t\t}\n  \t\t}\n\n  \t\treturn {\n  \t\t\tcancel: function () {\n  \t\t\t\tvar listener;\n\n  \t\t\t\twhile (listener = listeners.pop()) {\n  \t\t\t\t\tlistener.cancel();\n  \t\t\t\t}\n  \t\t\t}\n  \t\t};\n  \t}\n\n  \t// Handle multiple space-separated event names\n  \teventNames = eventName.split(\" \").map(shared_trim).filter(notEmptyString);\n\n  \teventNames.forEach(function (eventName) {\n  \t\t(_this._subs[eventName] || (_this._subs[eventName] = [])).push(callback);\n  \t});\n\n  \treturn {\n  \t\tcancel: function () {\n  \t\t\treturn _this.off(eventName, callback);\n  \t\t}\n  \t};\n  }\n\n  var once = Ractive$once;\n\n  function Ractive$once(eventName, handler) {\n\n  \tvar listener = this.on(eventName, function () {\n  \t\thandler.apply(this, arguments);\n  \t\tlistener.cancel();\n  \t});\n\n  \t// so we can still do listener.cancel() manually\n  \treturn listener;\n  }\n\n  // This function takes an array, the name of a mutator method, and the\n  // arguments to call that mutator method with, and returns an array that\n  // maps the old indices to their new indices.\n\n  // So if you had something like this...\n  //\n  //     array = [ 'a', 'b', 'c', 'd' ];\n  //     array.push( 'e' );\n  //\n  // ...you'd get `[ 0, 1, 2, 3 ]` - in other words, none of the old indices\n  // have changed. If you then did this...\n  //\n  //     array.unshift( 'z' );\n  //\n  // ...the indices would be `[ 1, 2, 3, 4, 5 ]` - every item has been moved\n  // one higher to make room for the 'z'. If you removed an item, the new index\n  // would be -1...\n  //\n  //     array.splice( 2, 2 );\n  //\n  // ...this would result in [ 0, 1, -1, -1, 2, 3 ].\n  //\n  // This information is used to enable fast, non-destructive shuffling of list\n  // sections when you do e.g. `ractive.splice( 'items', 2, 2 );\n\n  var shared_getNewIndices = getNewIndices;\n\n  function getNewIndices(array, methodName, args) {\n  \tvar spliceArguments,\n  \t    len,\n  \t    newIndices = [],\n  \t    removeStart,\n  \t    removeEnd,\n  \t    balance,\n  \t    i;\n\n  \tspliceArguments = getSpliceEquivalent(array, methodName, args);\n\n  \tif (!spliceArguments) {\n  \t\treturn null; // TODO support reverse and sort?\n  \t}\n\n  \tlen = array.length;\n  \tbalance = spliceArguments.length - 2 - spliceArguments[1];\n\n  \tremoveStart = Math.min(len, spliceArguments[0]);\n  \tremoveEnd = removeStart + spliceArguments[1];\n\n  \tfor (i = 0; i < removeStart; i += 1) {\n  \t\tnewIndices.push(i);\n  \t}\n\n  \tfor (; i < removeEnd; i += 1) {\n  \t\tnewIndices.push(-1);\n  \t}\n\n  \tfor (; i < len; i += 1) {\n  \t\tnewIndices.push(i + balance);\n  \t}\n\n  \t// there is a net shift for the rest of the array starting with index + balance\n  \tif (balance !== 0) {\n  \t\tnewIndices.touchedFrom = spliceArguments[0];\n  \t} else {\n  \t\tnewIndices.touchedFrom = array.length;\n  \t}\n\n  \treturn newIndices;\n  }\n\n  // The pop, push, shift an unshift methods can all be represented\n  // as an equivalent splice\n  function getSpliceEquivalent(array, methodName, args) {\n  \tswitch (methodName) {\n  \t\tcase \"splice\":\n  \t\t\tif (args[0] !== undefined && args[0] < 0) {\n  \t\t\t\targs[0] = array.length + Math.max(args[0], -array.length);\n  \t\t\t}\n\n  \t\t\twhile (args.length < 2) {\n  \t\t\t\targs.push(0);\n  \t\t\t}\n\n  \t\t\t// ensure we only remove elements that exist\n  \t\t\targs[1] = Math.min(args[1], array.length - args[0]);\n\n  \t\t\treturn args;\n\n  \t\tcase \"sort\":\n  \t\tcase \"reverse\":\n  \t\t\treturn null;\n\n  \t\tcase \"pop\":\n  \t\t\tif (array.length) {\n  \t\t\t\treturn [array.length - 1, 1];\n  \t\t\t}\n  \t\t\treturn [0, 0];\n\n  \t\tcase \"push\":\n  \t\t\treturn [array.length, 0].concat(args);\n\n  \t\tcase \"shift\":\n  \t\t\treturn [0, array.length ? 1 : 0];\n\n  \t\tcase \"unshift\":\n  \t\t\treturn [0, 0].concat(args);\n  \t}\n  }\n\n  var arrayProto = Array.prototype;\n\n  var makeArrayMethod = function (methodName) {\n  \treturn function (keypath) {\n  \t\tfor (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n  \t\t\targs[_key - 1] = arguments[_key];\n  \t\t}\n\n  \t\tvar array,\n  \t\t    newIndices = [],\n  \t\t    len,\n  \t\t    promise,\n  \t\t    result;\n\n  \t\tkeypath = getKeypath(normalise(keypath));\n\n  \t\tarray = this.viewmodel.get(keypath);\n  \t\tlen = array.length;\n\n  \t\tif (!isArray(array)) {\n  \t\t\tthrow new Error(\"Called ractive.\" + methodName + \"('\" + keypath.str + \"'), but '\" + keypath.str + \"' does not refer to an array\");\n  \t\t}\n\n  \t\tnewIndices = shared_getNewIndices(array, methodName, args);\n\n  \t\tresult = arrayProto[methodName].apply(array, args);\n  \t\tpromise = global_runloop.start(this, true).then(function () {\n  \t\t\treturn result;\n  \t\t});\n\n  \t\tif (!!newIndices) {\n  \t\t\tthis.viewmodel.smartUpdate(keypath, array, newIndices);\n  \t\t} else {\n  \t\t\tthis.viewmodel.mark(keypath);\n  \t\t}\n\n  \t\tglobal_runloop.end();\n\n  \t\treturn promise;\n  \t};\n  };\n\n  var pop = makeArrayMethod(\"pop\");\n\n  var push = makeArrayMethod(\"push\");\n\n  var css,\n      update,\n      styleElement,\n      head,\n      styleSheet,\n      inDom,\n      global_css__prefix = \"/* Ractive.js component styles */\\n\",\n      styles = [],\n      dirty = false;\n\n  if (!isClient) {\n  \t// TODO handle encapsulated CSS in server-rendered HTML!\n  \tcss = {\n  \t\tadd: noop,\n  \t\tapply: noop\n  \t};\n  } else {\n  \tstyleElement = document.createElement(\"style\");\n  \tstyleElement.type = \"text/css\";\n\n  \thead = document.getElementsByTagName(\"head\")[0];\n\n  \tinDom = false;\n\n  \t// Internet Exploder won't let you use styleSheet.innerHTML - we have to\n  \t// use styleSheet.cssText instead\n  \tstyleSheet = styleElement.styleSheet;\n\n  \tupdate = function () {\n  \t\tvar css = global_css__prefix + styles.map(function (s) {\n  \t\t\treturn \"\\n/* {\" + s.id + \"} */\\n\" + s.styles;\n  \t\t}).join(\"\\n\");\n\n  \t\tif (styleSheet) {\n  \t\t\tstyleSheet.cssText = css;\n  \t\t} else {\n  \t\t\tstyleElement.innerHTML = css;\n  \t\t}\n\n  \t\tif (!inDom) {\n  \t\t\thead.appendChild(styleElement);\n  \t\t\tinDom = true;\n  \t\t}\n  \t};\n\n  \tcss = {\n  \t\tadd: function (s) {\n  \t\t\tstyles.push(s);\n  \t\t\tdirty = true;\n  \t\t},\n\n  \t\tapply: function () {\n  \t\t\tif (dirty) {\n  \t\t\t\tupdate();\n  \t\t\t\tdirty = false;\n  \t\t\t}\n  \t\t}\n  \t};\n  }\n\n  var global_css = css;\n\n  var prototype_render = Ractive$render;\n\n  var renderHook = new hooks_Hook(\"render\"),\n      completeHook = new hooks_Hook(\"complete\");\n  function Ractive$render(target, anchor) {\n  \tvar _this = this;\n\n  \tvar promise, instances, transitionsEnabled;\n\n  \t// if `noIntro` is `true`, temporarily disable transitions\n  \ttransitionsEnabled = this.transitionsEnabled;\n  \tif (this.noIntro) {\n  \t\tthis.transitionsEnabled = false;\n  \t}\n\n  \tpromise = global_runloop.start(this, true);\n  \tglobal_runloop.scheduleTask(function () {\n  \t\treturn renderHook.fire(_this);\n  \t}, true);\n\n  \tif (this.fragment.rendered) {\n  \t\tthrow new Error(\"You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first\");\n  \t}\n\n  \ttarget = getElement(target) || this.el;\n  \tanchor = getElement(anchor) || this.anchor;\n\n  \tthis.el = target;\n  \tthis.anchor = anchor;\n\n  \tif (!this.append && target) {\n  \t\t// Teardown any existing instances *before* trying to set up the new one -\n  \t\t// avoids certain weird bugs\n  \t\tvar others = target.__ractive_instances__;\n  \t\tif (others && others.length) {\n  \t\t\tremoveOtherInstances(others);\n  \t\t}\n\n  \t\t// make sure we are the only occupants\n  \t\ttarget.innerHTML = \"\"; // TODO is this quicker than removeChild? Initial research inconclusive\n  \t}\n\n  \tif (this.cssId) {\n  \t\t// ensure encapsulated CSS is up-to-date\n  \t\tglobal_css.apply();\n  \t}\n\n  \tif (target) {\n  \t\tif (!(instances = target.__ractive_instances__)) {\n  \t\t\ttarget.__ractive_instances__ = [this];\n  \t\t} else {\n  \t\t\tinstances.push(this);\n  \t\t}\n\n  \t\tif (anchor) {\n  \t\t\ttarget.insertBefore(this.fragment.render(), anchor);\n  \t\t} else {\n  \t\t\ttarget.appendChild(this.fragment.render());\n  \t\t}\n  \t}\n\n  \tglobal_runloop.end();\n\n  \tthis.transitionsEnabled = transitionsEnabled;\n\n  \treturn promise.then(function () {\n  \t\treturn completeHook.fire(_this);\n  \t});\n  }\n\n  function removeOtherInstances(others) {\n  \tothers.splice(0, others.length).forEach(teardown);\n  }\n\n  var adaptConfigurator = {\n  \textend: function (Parent, proto, options) {\n  \t\tproto.adapt = custom_adapt__combine(proto.adapt, ensureArray(options.adapt));\n  \t},\n\n  \tinit: function () {}\n  };\n\n  var custom_adapt = adaptConfigurator;\n\n  function custom_adapt__combine(a, b) {\n  \tvar c = a.slice(),\n  \t    i = b.length;\n\n  \twhile (i--) {\n  \t\tif (! ~c.indexOf(b[i])) {\n  \t\t\tc.push(b[i]);\n  \t\t}\n  \t}\n\n  \treturn c;\n  }\n\n  var transform = transformCss;\n\n  var selectorsPattern = /(?:^|\\})?\\s*([^\\{\\}]+)\\s*\\{/g,\n      commentsPattern = /\\/\\*.*?\\*\\//g,\n      selectorUnitPattern = /((?:(?:\\[[^\\]+]\\])|(?:[^\\s\\+\\>\\~:]))+)((?::[^\\s\\+\\>\\~\\(]+(?:\\([^\\)]+\\))?)?\\s*[\\s\\+\\>\\~]?)\\s*/g,\n      mediaQueryPattern = /^@media/,\n      dataRvcGuidPattern = /\\[data-ractive-css~=\"\\{[a-z0-9-]+\\}\"]/g;\n  function transformCss(css, id) {\n  \tvar transformed, dataAttr, addGuid;\n\n  \tdataAttr = \"[data-ractive-css~=\\\"{\" + id + \"}\\\"]\";\n\n  \taddGuid = function (selector) {\n  \t\tvar selectorUnits,\n  \t\t    match,\n  \t\t    unit,\n  \t\t    base,\n  \t\t    prepended,\n  \t\t    appended,\n  \t\t    i,\n  \t\t    transformed = [];\n\n  \t\tselectorUnits = [];\n\n  \t\twhile (match = selectorUnitPattern.exec(selector)) {\n  \t\t\tselectorUnits.push({\n  \t\t\t\tstr: match[0],\n  \t\t\t\tbase: match[1],\n  \t\t\t\tmodifiers: match[2]\n  \t\t\t});\n  \t\t}\n\n  \t\t// For each simple selector within the selector, we need to create a version\n  \t\t// that a) combines with the id, and b) is inside the id\n  \t\tbase = selectorUnits.map(extractString);\n\n  \t\ti = selectorUnits.length;\n  \t\twhile (i--) {\n  \t\t\tappended = base.slice();\n\n  \t\t\t// Pseudo-selectors should go after the attribute selector\n  \t\t\tunit = selectorUnits[i];\n  \t\t\tappended[i] = unit.base + dataAttr + unit.modifiers || \"\";\n\n  \t\t\tprepended = base.slice();\n  \t\t\tprepended[i] = dataAttr + \" \" + prepended[i];\n\n  \t\t\ttransformed.push(appended.join(\" \"), prepended.join(\" \"));\n  \t\t}\n\n  \t\treturn transformed.join(\", \");\n  \t};\n\n  \tif (dataRvcGuidPattern.test(css)) {\n  \t\ttransformed = css.replace(dataRvcGuidPattern, dataAttr);\n  \t} else {\n  \t\ttransformed = css.replace(commentsPattern, \"\").replace(selectorsPattern, function (match, $1) {\n  \t\t\tvar selectors, transformed;\n\n  \t\t\t// don't transform media queries!\n  \t\t\tif (mediaQueryPattern.test($1)) return match;\n\n  \t\t\tselectors = $1.split(\",\").map(trim);\n  \t\t\ttransformed = selectors.map(addGuid).join(\", \") + \" \";\n\n  \t\t\treturn match.replace($1, transformed);\n  \t\t});\n  \t}\n\n  \treturn transformed;\n  }\n\n  function trim(str) {\n  \tif (str.trim) {\n  \t\treturn str.trim();\n  \t}\n\n  \treturn str.replace(/^\\s+/, \"\").replace(/\\s+$/, \"\");\n  }\n\n  function extractString(unit) {\n  \treturn unit.str;\n  }\n\n  var css_css__uid = 1;\n\n  var cssConfigurator = {\n  \tname: \"css\",\n\n  \textend: function (Parent, proto, options) {\n  \t\tif (options.css) {\n  \t\t\tvar id = css_css__uid++;\n  \t\t\tvar styles = options.noCssTransform ? options.css : transform(options.css, id);\n\n  \t\t\tproto.cssId = id;\n  \t\t\tglobal_css.add({ id: id, styles: styles });\n  \t\t}\n  \t},\n\n  \tinit: function () {}\n  };\n\n  var css_css = cssConfigurator;\n\n  function validate(data) {\n  \t// Warn if userOptions.data is a non-POJO\n  \tif (data && data.constructor !== Object) {\n  \t\tif (typeof data === \"function\") {} else if (typeof data !== \"object\") {\n  \t\t\tfatal(\"data option must be an object or a function, `\" + data + \"` is not valid\");\n  \t\t} else {\n  \t\t\twarnIfDebug(\"If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged\");\n  \t\t}\n  \t}\n  }\n\n  var dataConfigurator = {\n  \tname: \"data\",\n\n  \textend: function (Parent, proto, options) {\n  \t\tvar key = undefined,\n  \t\t    value = undefined;\n\n  \t\t// check for non-primitives, which could cause mutation-related bugs\n  \t\tif (options.data && isObject(options.data)) {\n  \t\t\tfor (key in options.data) {\n  \t\t\t\tvalue = options.data[key];\n\n  \t\t\t\tif (value && typeof value === \"object\") {\n  \t\t\t\t\tif (isObject(value) || isArray(value)) {\n  \t\t\t\t\t\twarnIfDebug(\"Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\\n\\n  // this...\\n  data: function () {\\n    return {\\n      myObject: {}\\n    };\\n  })\\n\\n  // instead of this:\\n  data: {\\n    myObject: {}\\n  }\");\n  \t\t\t\t\t}\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n\n  \t\tproto.data = custom_data__combine(proto.data, options.data);\n  \t},\n\n  \tinit: function (Parent, ractive, options) {\n  \t\tvar result = custom_data__combine(Parent.prototype.data, options.data);\n\n  \t\tif (typeof result === \"function\") {\n  \t\t\tresult = result.call(ractive);\n  \t\t}\n\n  \t\treturn result || {};\n  \t},\n\n  \treset: function (ractive) {\n  \t\tvar result = this.init(ractive.constructor, ractive, ractive.viewmodel);\n\n  \t\tractive.viewmodel.reset(result);\n  \t\treturn true;\n  \t}\n  };\n\n  var custom_data = dataConfigurator;\n\n  function custom_data__combine(parentValue, childValue) {\n  \tvalidate(childValue);\n\n  \tvar parentIsFn = typeof parentValue === \"function\";\n  \tvar childIsFn = typeof childValue === \"function\";\n\n  \t// Very important, otherwise child instance can become\n  \t// the default data object on Ractive or a component.\n  \t// then ractive.set() ends up setting on the prototype!\n  \tif (!childValue && !parentIsFn) {\n  \t\tchildValue = {};\n  \t}\n\n  \t// Fast path, where we just need to copy properties from\n  \t// parent to child\n  \tif (!parentIsFn && !childIsFn) {\n  \t\treturn fromProperties(childValue, parentValue);\n  \t}\n\n  \treturn function () {\n  \t\tvar child = childIsFn ? callDataFunction(childValue, this) : childValue;\n  \t\tvar parent = parentIsFn ? callDataFunction(parentValue, this) : parentValue;\n\n  \t\treturn fromProperties(child, parent);\n  \t};\n  }\n\n  function callDataFunction(fn, context) {\n  \tvar data = fn.call(context);\n\n  \tif (!data) return;\n\n  \tif (typeof data !== \"object\") {\n  \t\tfatal(\"Data function must return an object\");\n  \t}\n\n  \tif (data.constructor !== Object) {\n  \t\twarnOnceIfDebug(\"Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged\");\n  \t}\n\n  \treturn data;\n  }\n\n  function fromProperties(primary, secondary) {\n  \tif (primary && secondary) {\n  \t\tfor (var key in secondary) {\n  \t\t\tif (!(key in primary)) {\n  \t\t\t\tprimary[key] = secondary[key];\n  \t\t\t}\n  \t\t}\n\n  \t\treturn primary;\n  \t}\n\n  \treturn primary || secondary;\n  }\n\n  // TODO do we need to support this in the new Ractive() case?\n\n  var Parser,\n      ParseError,\n      parse_Parser__leadingWhitespace = /^\\s+/;\n\n  ParseError = function (message) {\n  \tthis.name = \"ParseError\";\n  \tthis.message = message;\n  \ttry {\n  \t\tthrow new Error(message);\n  \t} catch (e) {\n  \t\tthis.stack = e.stack;\n  \t}\n  };\n\n  ParseError.prototype = Error.prototype;\n\n  Parser = function (str, options) {\n  \tvar items,\n  \t    item,\n  \t    lineStart = 0;\n\n  \tthis.str = str;\n  \tthis.options = options || {};\n  \tthis.pos = 0;\n\n  \tthis.lines = this.str.split(\"\\n\");\n  \tthis.lineEnds = this.lines.map(function (line) {\n  \t\tvar lineEnd = lineStart + line.length + 1; // +1 for the newline\n\n  \t\tlineStart = lineEnd;\n  \t\treturn lineEnd;\n  \t}, 0);\n\n  \t// Custom init logic\n  \tif (this.init) this.init(str, options);\n\n  \titems = [];\n\n  \twhile (this.pos < this.str.length && (item = this.read())) {\n  \t\titems.push(item);\n  \t}\n\n  \tthis.leftover = this.remaining();\n  \tthis.result = this.postProcess ? this.postProcess(items, options) : items;\n  };\n\n  Parser.prototype = {\n  \tread: function (converters) {\n  \t\tvar pos, i, len, item;\n\n  \t\tif (!converters) converters = this.converters;\n\n  \t\tpos = this.pos;\n\n  \t\tlen = converters.length;\n  \t\tfor (i = 0; i < len; i += 1) {\n  \t\t\tthis.pos = pos; // reset for each attempt\n\n  \t\t\tif (item = converters[i](this)) {\n  \t\t\t\treturn item;\n  \t\t\t}\n  \t\t}\n\n  \t\treturn null;\n  \t},\n\n  \tgetLinePos: function (char) {\n  \t\tvar lineNum = 0,\n  \t\t    lineStart = 0,\n  \t\t    columnNum;\n\n  \t\twhile (char >= this.lineEnds[lineNum]) {\n  \t\t\tlineStart = this.lineEnds[lineNum];\n  \t\t\tlineNum += 1;\n  \t\t}\n\n  \t\tcolumnNum = char - lineStart;\n  \t\treturn [lineNum + 1, columnNum + 1, char]; // line/col should be one-based, not zero-based!\n  \t},\n\n  \terror: function (message) {\n  \t\tvar pos = this.getLinePos(this.pos);\n  \t\tvar lineNum = pos[0];\n  \t\tvar columnNum = pos[1];\n\n  \t\tvar line = this.lines[pos[0] - 1];\n  \t\tvar numTabs = 0;\n  \t\tvar annotation = line.replace(/\\t/g, function (match, char) {\n  \t\t\tif (char < pos[1]) {\n  \t\t\t\tnumTabs += 1;\n  \t\t\t}\n\n  \t\t\treturn \"  \";\n  \t\t}) + \"\\n\" + new Array(pos[1] + numTabs).join(\" \") + \"^----\";\n\n  \t\tvar error = new ParseError(\"\" + message + \" at line \" + lineNum + \" character \" + columnNum + \":\\n\" + annotation);\n\n  \t\terror.line = pos[0];\n  \t\terror.character = pos[1];\n  \t\terror.shortMessage = message;\n\n  \t\tthrow error;\n  \t},\n\n  \tmatchString: function (string) {\n  \t\tif (this.str.substr(this.pos, string.length) === string) {\n  \t\t\tthis.pos += string.length;\n  \t\t\treturn string;\n  \t\t}\n  \t},\n\n  \tmatchPattern: function (pattern) {\n  \t\tvar match;\n\n  \t\tif (match = pattern.exec(this.remaining())) {\n  \t\t\tthis.pos += match[0].length;\n  \t\t\treturn match[1] || match[0];\n  \t\t}\n  \t},\n\n  \tallowWhitespace: function () {\n  \t\tthis.matchPattern(parse_Parser__leadingWhitespace);\n  \t},\n\n  \tremaining: function () {\n  \t\treturn this.str.substring(this.pos);\n  \t},\n\n  \tnextChar: function () {\n  \t\treturn this.str.charAt(this.pos);\n  \t}\n  };\n\n  Parser.extend = function (proto) {\n  \tvar Parent = this,\n  \t    Child,\n  \t    key;\n\n  \tChild = function (str, options) {\n  \t\tParser.call(this, str, options);\n  \t};\n\n  \tChild.prototype = create(Parent.prototype);\n\n  \tfor (key in proto) {\n  \t\tif (hasOwn.call(proto, key)) {\n  \t\t\tChild.prototype[key] = proto[key];\n  \t\t}\n  \t}\n\n  \tChild.extend = Parser.extend;\n  \treturn Child;\n  };\n\n  var parse_Parser = Parser;\n\n  var TEXT = 1;\n  var INTERPOLATOR = 2;\n  var TRIPLE = 3;\n  var SECTION = 4;\n  var INVERTED = 5;\n  var CLOSING = 6;\n  var ELEMENT = 7;\n  var PARTIAL = 8;\n  var COMMENT = 9;\n  var DELIMCHANGE = 10;\n  var ATTRIBUTE = 13;\n  var CLOSING_TAG = 14;\n  var COMPONENT = 15;\n  var YIELDER = 16;\n  var INLINE_PARTIAL = 17;\n  var DOCTYPE = 18;\n\n  var NUMBER_LITERAL = 20;\n  var STRING_LITERAL = 21;\n  var ARRAY_LITERAL = 22;\n  var OBJECT_LITERAL = 23;\n  var BOOLEAN_LITERAL = 24;\n  var REGEXP_LITERAL = 25;\n\n  var GLOBAL = 26;\n  var KEY_VALUE_PAIR = 27;\n\n  var REFERENCE = 30;\n  var REFINEMENT = 31;\n  var MEMBER = 32;\n  var PREFIX_OPERATOR = 33;\n  var BRACKETED = 34;\n  var CONDITIONAL = 35;\n  var INFIX_OPERATOR = 36;\n\n  var INVOCATION = 40;\n\n  var SECTION_IF = 50;\n  var SECTION_UNLESS = 51;\n  var SECTION_EACH = 52;\n  var SECTION_WITH = 53;\n  var SECTION_IF_WITH = 54;\n\n  var ELSE = 60;\n  var ELSEIF = 61;\n\n  var mustache_readDelimiterChange = readDelimiterChange;\n  var delimiterChangePattern = /^[^\\s=]+/,\n      whitespacePattern = /^\\s+/;\n  function readDelimiterChange(parser) {\n  \tvar start, opening, closing;\n\n  \tif (!parser.matchString(\"=\")) {\n  \t\treturn null;\n  \t}\n\n  \tstart = parser.pos;\n\n  \t// allow whitespace before new opening delimiter\n  \tparser.allowWhitespace();\n\n  \topening = parser.matchPattern(delimiterChangePattern);\n  \tif (!opening) {\n  \t\tparser.pos = start;\n  \t\treturn null;\n  \t}\n\n  \t// allow whitespace (in fact, it's necessary...)\n  \tif (!parser.matchPattern(whitespacePattern)) {\n  \t\treturn null;\n  \t}\n\n  \tclosing = parser.matchPattern(delimiterChangePattern);\n  \tif (!closing) {\n  \t\tparser.pos = start;\n  \t\treturn null;\n  \t}\n\n  \t// allow whitespace before closing '='\n  \tparser.allowWhitespace();\n\n  \tif (!parser.matchString(\"=\")) {\n  \t\tparser.pos = start;\n  \t\treturn null;\n  \t}\n\n  \treturn [opening, closing];\n  }\n\n  var readRegexpLiteral = readRegexpLiteral__readNumberLiteral;\n  var regexpPattern = /^(\\/(?:[^\\n\\r\\u2028\\u2029/\\\\[]|\\\\.|\\[(?:[^\\n\\r\\u2028\\u2029\\]\\\\]|\\\\.)*])+\\/(?:([gimuy])(?![a-z]*\\2))*(?![a-zA-Z_$0-9]))/;\n  function readRegexpLiteral__readNumberLiteral(parser) {\n  \tvar result;\n\n  \tif (result = parser.matchPattern(regexpPattern)) {\n  \t\treturn {\n  \t\t\tt: REGEXP_LITERAL,\n  \t\t\tv: result\n  \t\t};\n  \t}\n\n  \treturn null;\n  }\n\n  var converters_readMustache = readMustache;\n\n  var delimiterChangeToken = { t: DELIMCHANGE, exclude: true };\n  function readMustache(parser) {\n  \tvar mustache, i;\n\n  \t// If we're inside a <script> or <style> tag, and we're not\n  \t// interpolating, bug out\n  \tif (parser.interpolate[parser.inside] === false) {\n  \t\treturn null;\n  \t}\n\n  \tfor (i = 0; i < parser.tags.length; i += 1) {\n  \t\tif (mustache = readMustacheOfType(parser, parser.tags[i])) {\n  \t\t\treturn mustache;\n  \t\t}\n  \t}\n  }\n\n  function readMustacheOfType(parser, tag) {\n  \tvar start, mustache, reader, i;\n\n  \tstart = parser.pos;\n\n  \tif (parser.matchString(\"\\\\\" + tag.open)) {\n  \t\tif (start === 0 || parser.str[start - 1] !== \"\\\\\") {\n  \t\t\treturn tag.open;\n  \t\t}\n  \t} else if (!parser.matchString(tag.open)) {\n  \t\treturn null;\n  \t}\n\n  \t// delimiter change?\n  \tif (mustache = mustache_readDelimiterChange(parser)) {\n  \t\t// find closing delimiter or abort...\n  \t\tif (!parser.matchString(tag.close)) {\n  \t\t\treturn null;\n  \t\t}\n\n  \t\t// ...then make the switch\n  \t\ttag.open = mustache[0];\n  \t\ttag.close = mustache[1];\n  \t\tparser.sortMustacheTags();\n\n  \t\treturn delimiterChangeToken;\n  \t}\n\n  \tparser.allowWhitespace();\n\n  \t// illegal section closer\n  \tif (parser.matchString(\"/\")) {\n  \t\tparser.pos -= 1;\n  \t\tvar rewind = parser.pos;\n  \t\tif (!readRegexpLiteral(parser)) {\n  \t\t\tparser.pos = rewind - tag.close.length;\n  \t\t\tparser.error(\"Attempted to close a section that wasn't open\");\n  \t\t} else {\n  \t\t\tparser.pos = rewind;\n  \t\t}\n  \t}\n\n  \tfor (i = 0; i < tag.readers.length; i += 1) {\n  \t\treader = tag.readers[i];\n\n  \t\tif (mustache = reader(parser, tag)) {\n  \t\t\tif (tag.isStatic) {\n  \t\t\t\tmustache.s = true; // TODO make this `1` instead - more compact\n  \t\t\t}\n\n  \t\t\tif (parser.includeLinePositions) {\n  \t\t\t\tmustache.p = parser.getLinePos(start);\n  \t\t\t}\n\n  \t\t\treturn mustache;\n  \t\t}\n  \t}\n\n  \tparser.pos = start;\n  \treturn null;\n  }\n\n  var expectedExpression = \"Expected a JavaScript expression\";\n  var expectedParen = \"Expected closing paren\";\n\n  var literal_readNumberLiteral = literal_readNumberLiteral__readNumberLiteral;\n  var literal_readNumberLiteral__numberPattern = /^(?:[+-]?)0*(?:(?:(?:[1-9]\\d*)?\\.\\d+)|(?:(?:0|[1-9]\\d*)\\.)|(?:0|[1-9]\\d*))(?:[eE][+-]?\\d+)?/;\n  function literal_readNumberLiteral__readNumberLiteral(parser) {\n  \tvar result;\n\n  \tif (result = parser.matchPattern(literal_readNumberLiteral__numberPattern)) {\n  \t\treturn {\n  \t\t\tt: NUMBER_LITERAL,\n  \t\t\tv: result\n  \t\t};\n  \t}\n\n  \treturn null;\n  }\n\n  var literal_readBooleanLiteral = readBooleanLiteral;\n  function readBooleanLiteral(parser) {\n  \tvar remaining = parser.remaining();\n\n  \tif (remaining.substr(0, 4) === \"true\") {\n  \t\tparser.pos += 4;\n  \t\treturn {\n  \t\t\tt: BOOLEAN_LITERAL,\n  \t\t\tv: \"true\"\n  \t\t};\n  \t}\n\n  \tif (remaining.substr(0, 5) === \"false\") {\n  \t\tparser.pos += 5;\n  \t\treturn {\n  \t\t\tt: BOOLEAN_LITERAL,\n  \t\t\tv: \"false\"\n  \t\t};\n  \t}\n\n  \treturn null;\n  }\n\n  var stringMiddlePattern, escapeSequencePattern, lineContinuationPattern;\n\n  // Match one or more characters until: \", ', \\, or EOL/EOF.\n  // EOL/EOF is written as (?!.) (meaning there's no non-newline char next).\n  stringMiddlePattern = /^(?=.)[^\"'\\\\]+?(?:(?!.)|(?=[\"'\\\\]))/;\n\n  // Match one escape sequence, including the backslash.\n  escapeSequencePattern = /^\\\\(?:['\"\\\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/;\n\n  // Match one ES5 line continuation (backslash + line terminator).\n  lineContinuationPattern = /^\\\\(?:\\r\\n|[\\u000A\\u000D\\u2028\\u2029])/;\n\n  // Helper for defining getDoubleQuotedString and getSingleQuotedString.\n  var makeQuotedStringMatcher = function (okQuote) {\n  \treturn function (parser) {\n  \t\tvar start, literal, done, next;\n\n  \t\tstart = parser.pos;\n  \t\tliteral = \"\\\"\";\n  \t\tdone = false;\n\n  \t\twhile (!done) {\n  \t\t\tnext = parser.matchPattern(stringMiddlePattern) || parser.matchPattern(escapeSequencePattern) || parser.matchString(okQuote);\n  \t\t\tif (next) {\n  \t\t\t\tif (next === \"\\\"\") {\n  \t\t\t\t\tliteral += \"\\\\\\\"\";\n  \t\t\t\t} else if (next === \"\\\\'\") {\n  \t\t\t\t\tliteral += \"'\";\n  \t\t\t\t} else {\n  \t\t\t\t\tliteral += next;\n  \t\t\t\t}\n  \t\t\t} else {\n  \t\t\t\tnext = parser.matchPattern(lineContinuationPattern);\n  \t\t\t\tif (next) {\n  \t\t\t\t\t// convert \\(newline-like) into a \\u escape, which is allowed in JSON\n  \t\t\t\t\tliteral += \"\\\\u\" + (\"000\" + next.charCodeAt(1).toString(16)).slice(-4);\n  \t\t\t\t} else {\n  \t\t\t\t\tdone = true;\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n\n  \t\tliteral += \"\\\"\";\n\n  \t\t// use JSON.parse to interpret escapes\n  \t\treturn JSON.parse(literal);\n  \t};\n  };\n\n  var getSingleQuotedString = makeQuotedStringMatcher(\"\\\"\");\n  var getDoubleQuotedString = makeQuotedStringMatcher(\"'\");\n\n  var readStringLiteral = function (parser) {\n  \tvar start, string;\n\n  \tstart = parser.pos;\n\n  \tif (parser.matchString(\"\\\"\")) {\n  \t\tstring = getDoubleQuotedString(parser);\n\n  \t\tif (!parser.matchString(\"\\\"\")) {\n  \t\t\tparser.pos = start;\n  \t\t\treturn null;\n  \t\t}\n\n  \t\treturn {\n  \t\t\tt: STRING_LITERAL,\n  \t\t\tv: string\n  \t\t};\n  \t}\n\n  \tif (parser.matchString(\"'\")) {\n  \t\tstring = getSingleQuotedString(parser);\n\n  \t\tif (!parser.matchString(\"'\")) {\n  \t\t\tparser.pos = start;\n  \t\t\treturn null;\n  \t\t}\n\n  \t\treturn {\n  \t\t\tt: STRING_LITERAL,\n  \t\t\tv: string\n  \t\t};\n  \t}\n\n  \treturn null;\n  };\n\n  var patterns__name = /^[a-zA-Z_$][a-zA-Z_$0-9]*/;\n\n  // http://mathiasbynens.be/notes/javascript-properties\n  // can be any name, string literal, or number literal\n  var shared_readKey = readKey;\n  var identifier = /^[a-zA-Z_$][a-zA-Z_$0-9]*$/;\n  function readKey(parser) {\n  \tvar token;\n\n  \tif (token = readStringLiteral(parser)) {\n  \t\treturn identifier.test(token.v) ? token.v : \"\\\"\" + token.v.replace(/\"/g, \"\\\\\\\"\") + \"\\\"\";\n  \t}\n\n  \tif (token = literal_readNumberLiteral(parser)) {\n  \t\treturn token.v;\n  \t}\n\n  \tif (token = parser.matchPattern(patterns__name)) {\n  \t\treturn token;\n  \t}\n  }\n\n  var keyValuePair = readKeyValuePair;\n  function readKeyValuePair(parser) {\n  \tvar start, key, value;\n\n  \tstart = parser.pos;\n\n  \t// allow whitespace between '{' and key\n  \tparser.allowWhitespace();\n\n  \tkey = shared_readKey(parser);\n  \tif (key === null) {\n  \t\tparser.pos = start;\n  \t\treturn null;\n  \t}\n\n  \t// allow whitespace between key and ':'\n  \tparser.allowWhitespace();\n\n  \t// next character must be ':'\n  \tif (!parser.matchString(\":\")) {\n  \t\tparser.pos = start;\n  \t\treturn null;\n  \t}\n\n  \t// allow whitespace between ':' and value\n  \tparser.allowWhitespace();\n\n  \t// next expression must be a, well... expression\n  \tvalue = converters_readExpression(parser);\n  \tif (value === null) {\n  \t\tparser.pos = start;\n  \t\treturn null;\n  \t}\n\n  \treturn {\n  \t\tt: KEY_VALUE_PAIR,\n  \t\tk: key,\n  \t\tv: value\n  \t};\n  }\n\n  var objectLiteral_keyValuePairs = readKeyValuePairs;\n  function readKeyValuePairs(parser) {\n  \tvar start, pairs, pair, keyValuePairs;\n\n  \tstart = parser.pos;\n\n  \tpair = keyValuePair(parser);\n  \tif (pair === null) {\n  \t\treturn null;\n  \t}\n\n  \tpairs = [pair];\n\n  \tif (parser.matchString(\",\")) {\n  \t\tkeyValuePairs = readKeyValuePairs(parser);\n\n  \t\tif (!keyValuePairs) {\n  \t\t\tparser.pos = start;\n  \t\t\treturn null;\n  \t\t}\n\n  \t\treturn pairs.concat(keyValuePairs);\n  \t}\n\n  \treturn pairs;\n  }\n\n  var readObjectLiteral = function (parser) {\n  \tvar start, keyValuePairs;\n\n  \tstart = parser.pos;\n\n  \t// allow whitespace\n  \tparser.allowWhitespace();\n\n  \tif (!parser.matchString(\"{\")) {\n  \t\tparser.pos = start;\n  \t\treturn null;\n  \t}\n\n  \tkeyValuePairs = objectLiteral_keyValuePairs(parser);\n\n  \t// allow whitespace between final value and '}'\n  \tparser.allowWhitespace();\n\n  \tif (!parser.matchString(\"}\")) {\n  \t\tparser.pos = start;\n  \t\treturn null;\n  \t}\n\n  \treturn {\n  \t\tt: OBJECT_LITERAL,\n  \t\tm: keyValuePairs\n  \t};\n  };\n\n  var shared_readExpressionList = readExpressionList;\n  function readExpressionList(parser) {\n  \tvar start, expressions, expr, next;\n\n  \tstart = parser.pos;\n\n  \tparser.allowWhitespace();\n\n  \texpr = converters_readExpression(parser);\n\n  \tif (expr === null) {\n  \t\treturn null;\n  \t}\n\n  \texpressions = [expr];\n\n  \t// allow whitespace between expression and ','\n  \tparser.allowWhitespace();\n\n  \tif (parser.matchString(\",\")) {\n  \t\tnext = readExpressionList(parser);\n  \t\tif (next === null) {\n  \t\t\tparser.error(expectedExpression);\n  \t\t}\n\n  \t\tnext.forEach(append);\n  \t}\n\n  \tfunction append(expression) {\n  \t\texpressions.push(expression);\n  \t}\n\n  \treturn expressions;\n  }\n\n  var readArrayLiteral = function (parser) {\n  \tvar start, expressionList;\n\n  \tstart = parser.pos;\n\n  \t// allow whitespace before '['\n  \tparser.allowWhitespace();\n\n  \tif (!parser.matchString(\"[\")) {\n  \t\tparser.pos = start;\n  \t\treturn null;\n  \t}\n\n  \texpressionList = shared_readExpressionList(parser);\n\n  \tif (!parser.matchString(\"]\")) {\n  \t\tparser.pos = start;\n  \t\treturn null;\n  \t}\n\n  \treturn {\n  \t\tt: ARRAY_LITERAL,\n  \t\tm: expressionList\n  \t};\n  };\n\n  var primary_readLiteral = readLiteral;\n  function readLiteral(parser) {\n  \treturn literal_readNumberLiteral(parser) || literal_readBooleanLiteral(parser) || readStringLiteral(parser) || readObjectLiteral(parser) || readArrayLiteral(parser) || readRegexpLiteral(parser);\n  }\n\n  var primary_readReference = readReference;\n  var prefixPattern = /^(?:~\\/|(?:\\.\\.\\/)+|\\.\\/(?:\\.\\.\\/)*|\\.)/,\n      globals,\n      keywords;\n\n  // if a reference is a browser global, we don't deference it later, so it needs special treatment\n  globals = /^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\\b/;\n\n  // keywords are not valid references, with the exception of `this`\n  keywords = /^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;\n\n  var legalReference = /^[a-zA-Z$_0-9]+(?:(?:\\.[a-zA-Z$_0-9]+)|(?:\\[[0-9]+\\]))*/;\n  var relaxedName = /^[a-zA-Z_$][-a-zA-Z_$0-9]*/;\n  function readReference(parser) {\n  \tvar startPos, prefix, name, global, reference, lastDotIndex;\n\n  \tstartPos = parser.pos;\n\n  \tname = parser.matchPattern(/^@(?:keypath|index|key)/);\n\n  \tif (!name) {\n  \t\tprefix = parser.matchPattern(prefixPattern) || \"\";\n  \t\tname = !prefix && parser.relaxedNames && parser.matchPattern(relaxedName) || parser.matchPattern(legalReference);\n\n  \t\tif (!name && prefix === \".\") {\n  \t\t\tprefix = \"\";\n  \t\t\tname = \".\";\n  \t\t}\n  \t}\n\n  \tif (!name) {\n  \t\treturn null;\n  \t}\n\n  \t// bug out if it's a keyword (exception for ancestor/restricted refs - see https://github.com/ractivejs/ractive/issues/1497)\n  \tif (!prefix && !parser.relaxedNames && keywords.test(name)) {\n  \t\tparser.pos = startPos;\n  \t\treturn null;\n  \t}\n\n  \t// if this is a browser global, stop here\n  \tif (!prefix && globals.test(name)) {\n  \t\tglobal = globals.exec(name)[0];\n  \t\tparser.pos = startPos + global.length;\n\n  \t\treturn {\n  \t\t\tt: GLOBAL,\n  \t\t\tv: global\n  \t\t};\n  \t}\n\n  \treference = (prefix || \"\") + normalise(name);\n\n  \tif (parser.matchString(\"(\")) {\n  \t\t// if this is a method invocation (as opposed to a function) we need\n  \t\t// to strip the method name from the reference combo, else the context\n  \t\t// will be wrong\n  \t\tlastDotIndex = reference.lastIndexOf(\".\");\n  \t\tif (lastDotIndex !== -1) {\n  \t\t\treference = reference.substr(0, lastDotIndex);\n  \t\t\tparser.pos = startPos + reference.length;\n  \t\t} else {\n  \t\t\tparser.pos -= 1;\n  \t\t}\n  \t}\n\n  \treturn {\n  \t\tt: REFERENCE,\n  \t\tn: reference.replace(/^this\\./, \"./\").replace(/^this$/, \".\")\n  \t};\n  }\n\n  var primary_readBracketedExpression = readBracketedExpression;\n  function readBracketedExpression(parser) {\n  \tvar start, expr;\n\n  \tstart = parser.pos;\n\n  \tif (!parser.matchString(\"(\")) {\n  \t\treturn null;\n  \t}\n\n  \tparser.allowWhitespace();\n\n  \texpr = converters_readExpression(parser);\n  \tif (!expr) {\n  \t\tparser.error(expectedExpression);\n  \t}\n\n  \tparser.allowWhitespace();\n\n  \tif (!parser.matchString(\")\")) {\n  \t\tparser.error(expectedParen);\n  \t}\n\n  \treturn {\n  \t\tt: BRACKETED,\n  \t\tx: expr\n  \t};\n  }\n\n  var readPrimary = function (parser) {\n  \treturn primary_readLiteral(parser) || primary_readReference(parser) || primary_readBracketedExpression(parser);\n  };\n\n  var shared_readRefinement = readRefinement;\n  function readRefinement(parser) {\n  \tvar start, name, expr;\n\n  \tstart = parser.pos;\n\n  \tparser.allowWhitespace();\n\n  \t// \".\" name\n  \tif (parser.matchString(\".\")) {\n  \t\tparser.allowWhitespace();\n\n  \t\tif (name = parser.matchPattern(patterns__name)) {\n  \t\t\treturn {\n  \t\t\t\tt: REFINEMENT,\n  \t\t\t\tn: name\n  \t\t\t};\n  \t\t}\n\n  \t\tparser.error(\"Expected a property name\");\n  \t}\n\n  \t// \"[\" expression \"]\"\n  \tif (parser.matchString(\"[\")) {\n  \t\tparser.allowWhitespace();\n\n  \t\texpr = converters_readExpression(parser);\n  \t\tif (!expr) {\n  \t\t\tparser.error(expectedExpression);\n  \t\t}\n\n  \t\tparser.allowWhitespace();\n\n  \t\tif (!parser.matchString(\"]\")) {\n  \t\t\tparser.error(\"Expected ']'\");\n  \t\t}\n\n  \t\treturn {\n  \t\t\tt: REFINEMENT,\n  \t\t\tx: expr\n  \t\t};\n  \t}\n\n  \treturn null;\n  }\n\n  var readMemberOrInvocation = function (parser) {\n  \tvar current, expression, refinement, expressionList;\n\n  \texpression = readPrimary(parser);\n\n  \tif (!expression) {\n  \t\treturn null;\n  \t}\n\n  \twhile (expression) {\n  \t\tcurrent = parser.pos;\n\n  \t\tif (refinement = shared_readRefinement(parser)) {\n  \t\t\texpression = {\n  \t\t\t\tt: MEMBER,\n  \t\t\t\tx: expression,\n  \t\t\t\tr: refinement\n  \t\t\t};\n  \t\t} else if (parser.matchString(\"(\")) {\n  \t\t\tparser.allowWhitespace();\n  \t\t\texpressionList = shared_readExpressionList(parser);\n\n  \t\t\tparser.allowWhitespace();\n\n  \t\t\tif (!parser.matchString(\")\")) {\n  \t\t\t\tparser.error(expectedParen);\n  \t\t\t}\n\n  \t\t\texpression = {\n  \t\t\t\tt: INVOCATION,\n  \t\t\t\tx: expression\n  \t\t\t};\n\n  \t\t\tif (expressionList) {\n  \t\t\t\texpression.o = expressionList;\n  \t\t\t}\n  \t\t} else {\n  \t\t\tbreak;\n  \t\t}\n  \t}\n\n  \treturn expression;\n  };\n\n  var readTypeOf, makePrefixSequenceMatcher;\n\n  makePrefixSequenceMatcher = function (symbol, fallthrough) {\n  \treturn function (parser) {\n  \t\tvar expression;\n\n  \t\tif (expression = fallthrough(parser)) {\n  \t\t\treturn expression;\n  \t\t}\n\n  \t\tif (!parser.matchString(symbol)) {\n  \t\t\treturn null;\n  \t\t}\n\n  \t\tparser.allowWhitespace();\n\n  \t\texpression = converters_readExpression(parser);\n  \t\tif (!expression) {\n  \t\t\tparser.error(expectedExpression);\n  \t\t}\n\n  \t\treturn {\n  \t\t\ts: symbol,\n  \t\t\to: expression,\n  \t\t\tt: PREFIX_OPERATOR\n  \t\t};\n  \t};\n  };\n\n  // create all prefix sequence matchers, return readTypeOf\n  (function () {\n  \tvar i, len, matcher, prefixOperators, fallthrough;\n\n  \tprefixOperators = \"! ~ + - typeof\".split(\" \");\n\n  \tfallthrough = readMemberOrInvocation;\n  \tfor (i = 0, len = prefixOperators.length; i < len; i += 1) {\n  \t\tmatcher = makePrefixSequenceMatcher(prefixOperators[i], fallthrough);\n  \t\tfallthrough = matcher;\n  \t}\n\n  \t// typeof operator is higher precedence than multiplication, so provides the\n  \t// fallthrough for the multiplication sequence matcher we're about to create\n  \t// (we're skipping void and delete)\n  \treadTypeOf = fallthrough;\n  })();\n\n  var readTypeof = readTypeOf;\n\n  var readLogicalOr, makeInfixSequenceMatcher;\n\n  makeInfixSequenceMatcher = function (symbol, fallthrough) {\n  \treturn function (parser) {\n  \t\tvar start, left, right;\n\n  \t\tleft = fallthrough(parser);\n  \t\tif (!left) {\n  \t\t\treturn null;\n  \t\t}\n\n  \t\t// Loop to handle left-recursion in a case like `a * b * c` and produce\n  \t\t// left association, i.e. `(a * b) * c`.  The matcher can't call itself\n  \t\t// to parse `left` because that would be infinite regress.\n  \t\twhile (true) {\n  \t\t\tstart = parser.pos;\n\n  \t\t\tparser.allowWhitespace();\n\n  \t\t\tif (!parser.matchString(symbol)) {\n  \t\t\t\tparser.pos = start;\n  \t\t\t\treturn left;\n  \t\t\t}\n\n  \t\t\t// special case - in operator must not be followed by [a-zA-Z_$0-9]\n  \t\t\tif (symbol === \"in\" && /[a-zA-Z_$0-9]/.test(parser.remaining().charAt(0))) {\n  \t\t\t\tparser.pos = start;\n  \t\t\t\treturn left;\n  \t\t\t}\n\n  \t\t\tparser.allowWhitespace();\n\n  \t\t\t// right operand must also consist of only higher-precedence operators\n  \t\t\tright = fallthrough(parser);\n  \t\t\tif (!right) {\n  \t\t\t\tparser.pos = start;\n  \t\t\t\treturn left;\n  \t\t\t}\n\n  \t\t\tleft = {\n  \t\t\t\tt: INFIX_OPERATOR,\n  \t\t\t\ts: symbol,\n  \t\t\t\to: [left, right]\n  \t\t\t};\n\n  \t\t\t// Loop back around.  If we don't see another occurrence of the symbol,\n  \t\t\t// we'll return left.\n  \t\t}\n  \t};\n  };\n\n  // create all infix sequence matchers, and return readLogicalOr\n  (function () {\n  \tvar i, len, matcher, infixOperators, fallthrough;\n\n  \t// All the infix operators on order of precedence (source: https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)\n  \t// Each sequence matcher will initially fall through to its higher precedence\n  \t// neighbour, and only attempt to match if one of the higher precedence operators\n  \t// (or, ultimately, a literal, reference, or bracketed expression) already matched\n  \tinfixOperators = \"* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||\".split(\" \");\n\n  \t// A typeof operator is higher precedence than multiplication\n  \tfallthrough = readTypeof;\n  \tfor (i = 0, len = infixOperators.length; i < len; i += 1) {\n  \t\tmatcher = makeInfixSequenceMatcher(infixOperators[i], fallthrough);\n  \t\tfallthrough = matcher;\n  \t}\n\n  \t// Logical OR is the fallthrough for the conditional matcher\n  \treadLogicalOr = fallthrough;\n  })();\n\n  var expressions_readLogicalOr = readLogicalOr;\n\n  // The conditional operator is the lowest precedence operator, so we start here\n  var readConditional = getConditional;\n  function getConditional(parser) {\n  \tvar start, expression, ifTrue, ifFalse;\n\n  \texpression = expressions_readLogicalOr(parser);\n  \tif (!expression) {\n  \t\treturn null;\n  \t}\n\n  \tstart = parser.pos;\n\n  \tparser.allowWhitespace();\n\n  \tif (!parser.matchString(\"?\")) {\n  \t\tparser.pos = start;\n  \t\treturn expression;\n  \t}\n\n  \tparser.allowWhitespace();\n\n  \tifTrue = converters_readExpression(parser);\n  \tif (!ifTrue) {\n  \t\tparser.error(expectedExpression);\n  \t}\n\n  \tparser.allowWhitespace();\n\n  \tif (!parser.matchString(\":\")) {\n  \t\tparser.error(\"Expected \\\":\\\"\");\n  \t}\n\n  \tparser.allowWhitespace();\n\n  \tifFalse = converters_readExpression(parser);\n  \tif (!ifFalse) {\n  \t\tparser.error(expectedExpression);\n  \t}\n\n  \treturn {\n  \t\tt: CONDITIONAL,\n  \t\to: [expression, ifTrue, ifFalse]\n  \t};\n  }\n\n  var converters_readExpression = readExpression;\n  function readExpression(parser) {\n  \t// The conditional operator is the lowest precedence operator (except yield,\n  \t// assignment operators, and commas, none of which are supported), so we\n  \t// start there. If it doesn't match, it 'falls through' to progressively\n  \t// higher precedence operators, until it eventually matches (or fails to\n  \t// match) a 'primary' - a literal or a reference. This way, the abstract syntax\n  \t// tree has everything in its proper place, i.e. 2 + 3 * 4 === 14, not 20.\n  \treturn readConditional(parser);\n  }\n\n  var utils_flattenExpression = flattenExpression;\n\n  function flattenExpression(expression) {\n  \tvar refs;\n\n  \textractRefs(expression, refs = []);\n\n  \treturn {\n  \t\tr: refs,\n  \t\ts: stringify(expression)\n  \t};\n\n  \tfunction stringify(node) {\n  \t\tswitch (node.t) {\n  \t\t\tcase BOOLEAN_LITERAL:\n  \t\t\tcase GLOBAL:\n  \t\t\tcase NUMBER_LITERAL:\n  \t\t\tcase REGEXP_LITERAL:\n  \t\t\t\treturn node.v;\n\n  \t\t\tcase STRING_LITERAL:\n  \t\t\t\treturn JSON.stringify(String(node.v));\n\n  \t\t\tcase ARRAY_LITERAL:\n  \t\t\t\treturn \"[\" + (node.m ? node.m.map(stringify).join(\",\") : \"\") + \"]\";\n\n  \t\t\tcase OBJECT_LITERAL:\n  \t\t\t\treturn \"{\" + (node.m ? node.m.map(stringify).join(\",\") : \"\") + \"}\";\n\n  \t\t\tcase KEY_VALUE_PAIR:\n  \t\t\t\treturn node.k + \":\" + stringify(node.v);\n\n  \t\t\tcase PREFIX_OPERATOR:\n  \t\t\t\treturn (node.s === \"typeof\" ? \"typeof \" : node.s) + stringify(node.o);\n\n  \t\t\tcase INFIX_OPERATOR:\n  \t\t\t\treturn stringify(node.o[0]) + (node.s.substr(0, 2) === \"in\" ? \" \" + node.s + \" \" : node.s) + stringify(node.o[1]);\n\n  \t\t\tcase INVOCATION:\n  \t\t\t\treturn stringify(node.x) + \"(\" + (node.o ? node.o.map(stringify).join(\",\") : \"\") + \")\";\n\n  \t\t\tcase BRACKETED:\n  \t\t\t\treturn \"(\" + stringify(node.x) + \")\";\n\n  \t\t\tcase MEMBER:\n  \t\t\t\treturn stringify(node.x) + stringify(node.r);\n\n  \t\t\tcase REFINEMENT:\n  \t\t\t\treturn node.n ? \".\" + node.n : \"[\" + stringify(node.x) + \"]\";\n\n  \t\t\tcase CONDITIONAL:\n  \t\t\t\treturn stringify(node.o[0]) + \"?\" + stringify(node.o[1]) + \":\" + stringify(node.o[2]);\n\n  \t\t\tcase REFERENCE:\n  \t\t\t\treturn \"_\" + refs.indexOf(node.n);\n\n  \t\t\tdefault:\n  \t\t\t\tthrow new Error(\"Expected legal JavaScript\");\n  \t\t}\n  \t}\n  }\n\n  // TODO maybe refactor this?\n  function extractRefs(node, refs) {\n  \tvar i, list;\n\n  \tif (node.t === REFERENCE) {\n  \t\tif (refs.indexOf(node.n) === -1) {\n  \t\t\trefs.unshift(node.n);\n  \t\t}\n  \t}\n\n  \tlist = node.o || node.m;\n  \tif (list) {\n  \t\tif (isObject(list)) {\n  \t\t\textractRefs(list, refs);\n  \t\t} else {\n  \t\t\ti = list.length;\n  \t\t\twhile (i--) {\n  \t\t\t\textractRefs(list[i], refs);\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \tif (node.x) {\n  \t\textractRefs(node.x, refs);\n  \t}\n\n  \tif (node.r) {\n  \t\textractRefs(node.r, refs);\n  \t}\n\n  \tif (node.v) {\n  \t\textractRefs(node.v, refs);\n  \t}\n  }\n\n  var utils_refineExpression = refineExpression;\n\n  var arrayMemberPattern = /^[0-9][1-9]*$/;\n  function refineExpression(expression, mustache) {\n  \tvar referenceExpression;\n\n  \tif (expression) {\n  \t\twhile (expression.t === BRACKETED && expression.x) {\n  \t\t\texpression = expression.x;\n  \t\t}\n\n  \t\t// special case - integers should be treated as array members references,\n  \t\t// rather than as expressions in their own right\n  \t\tif (expression.t === REFERENCE) {\n  \t\t\tmustache.r = expression.n;\n  \t\t} else {\n  \t\t\tif (expression.t === NUMBER_LITERAL && arrayMemberPattern.test(expression.v)) {\n  \t\t\t\tmustache.r = expression.v;\n  \t\t\t} else if (referenceExpression = getReferenceExpression(expression)) {\n  \t\t\t\tmustache.rx = referenceExpression;\n  \t\t\t} else {\n  \t\t\t\tmustache.x = utils_flattenExpression(expression);\n  \t\t\t}\n  \t\t}\n\n  \t\treturn mustache;\n  \t}\n  }\n\n  // TODO refactor this! it's bewildering\n  function getReferenceExpression(expression) {\n  \tvar members = [],\n  \t    refinement;\n\n  \twhile (expression.t === MEMBER && expression.r.t === REFINEMENT) {\n  \t\trefinement = expression.r;\n\n  \t\tif (refinement.x) {\n  \t\t\tif (refinement.x.t === REFERENCE) {\n  \t\t\t\tmembers.unshift(refinement.x);\n  \t\t\t} else {\n  \t\t\t\tmembers.unshift(utils_flattenExpression(refinement.x));\n  \t\t\t}\n  \t\t} else {\n  \t\t\tmembers.unshift(refinement.n);\n  \t\t}\n\n  \t\texpression = expression.x;\n  \t}\n\n  \tif (expression.t !== REFERENCE) {\n  \t\treturn null;\n  \t}\n\n  \treturn {\n  \t\tr: expression.n,\n  \t\tm: members\n  \t};\n  }\n\n  var mustache_readTriple = readTriple;\n  function readTriple(parser, tag) {\n  \tvar expression = converters_readExpression(parser),\n  \t    triple;\n\n  \tif (!expression) {\n  \t\treturn null;\n  \t}\n\n  \tif (!parser.matchString(tag.close)) {\n  \t\tparser.error(\"Expected closing delimiter '\" + tag.close + \"'\");\n  \t}\n\n  \ttriple = { t: TRIPLE };\n  \tutils_refineExpression(expression, triple); // TODO handle this differently - it's mysterious\n\n  \treturn triple;\n  }\n\n  var mustache_readUnescaped = readUnescaped;\n  function readUnescaped(parser, tag) {\n  \tvar expression, triple;\n\n  \tif (!parser.matchString(\"&\")) {\n  \t\treturn null;\n  \t}\n\n  \tparser.allowWhitespace();\n\n  \texpression = converters_readExpression(parser);\n\n  \tif (!expression) {\n  \t\treturn null;\n  \t}\n\n  \tif (!parser.matchString(tag.close)) {\n  \t\tparser.error(\"Expected closing delimiter '\" + tag.close + \"'\");\n  \t}\n\n  \ttriple = { t: TRIPLE };\n  \tutils_refineExpression(expression, triple); // TODO handle this differently - it's mysterious\n\n  \treturn triple;\n  }\n\n  var mustache_readPartial = readPartial;\n  function readPartial(parser, tag) {\n  \tvar start, nameStart, expression, context, partial;\n\n  \tstart = parser.pos;\n\n  \tif (!parser.matchString(\">\")) {\n  \t\treturn null;\n  \t}\n\n  \tparser.allowWhitespace();\n  \tnameStart = parser.pos;\n\n  \t// Partial names can include hyphens, so we can't use readExpression\n  \t// blindly. Instead, we use the `relaxedNames` flag to indicate that\n  \t// `foo-bar` should be read as a single name, rather than 'subtract\n  \t// bar from foo'\n  \tparser.relaxedNames = true;\n  \texpression = converters_readExpression(parser);\n  \tparser.relaxedNames = false;\n\n  \tparser.allowWhitespace();\n  \tcontext = converters_readExpression(parser);\n  \tparser.allowWhitespace();\n\n  \tif (!expression) {\n  \t\treturn null;\n  \t}\n\n  \tpartial = { t: PARTIAL };\n  \tutils_refineExpression(expression, partial); // TODO...\n\n  \tparser.allowWhitespace();\n\n  \t// if we have another expression - e.g. `{{>foo bar}}` - then\n  \t// we turn it into `{{#with bar}}{{>foo}}{{/with}}`\n  \tif (context) {\n  \t\tpartial = {\n  \t\t\tt: SECTION,\n  \t\t\tn: SECTION_WITH,\n  \t\t\tf: [partial]\n  \t\t};\n\n  \t\tutils_refineExpression(context, partial);\n  \t}\n\n  \tif (!parser.matchString(tag.close)) {\n  \t\tparser.error(\"Expected closing delimiter '\" + tag.close + \"'\");\n  \t}\n\n  \treturn partial;\n  }\n\n  var readMustacheComment = readComment;\n  function readComment(parser, tag) {\n  \tvar index;\n\n  \tif (!parser.matchString(\"!\")) {\n  \t\treturn null;\n  \t}\n\n  \tindex = parser.remaining().indexOf(tag.close);\n\n  \tif (index !== -1) {\n  \t\tparser.pos += index + tag.close.length;\n  \t\treturn { t: COMMENT };\n  \t}\n  }\n\n  var converters_readExpressionOrReference = readExpressionOrReference;\n  function readExpressionOrReference(parser, expectedFollowers) {\n  \tvar start, expression, i;\n\n  \tstart = parser.pos;\n  \texpression = converters_readExpression(parser);\n\n  \tif (!expression) {\n  \t\treturn null;\n  \t}\n\n  \tfor (i = 0; i < expectedFollowers.length; i += 1) {\n  \t\tif (parser.remaining().substr(0, expectedFollowers[i].length) === expectedFollowers[i]) {\n  \t\t\treturn expression;\n  \t\t}\n  \t}\n\n  \tparser.pos = start;\n  \treturn primary_readReference(parser);\n  }\n\n  var mustache_readInterpolator = readInterpolator;\n  function readInterpolator(parser, tag) {\n  \tvar start, expression, interpolator, err;\n\n  \tstart = parser.pos;\n\n  \t// TODO would be good for perf if we could do away with the try-catch\n  \ttry {\n  \t\texpression = converters_readExpressionOrReference(parser, [tag.close]);\n  \t} catch (e) {\n  \t\terr = e;\n  \t}\n\n  \tif (!expression) {\n  \t\tif (parser.str.charAt(start) === \"!\") {\n  \t\t\t// special case - comment\n  \t\t\tparser.pos = start;\n  \t\t\treturn null;\n  \t\t}\n\n  \t\tif (err) {\n  \t\t\tthrow err;\n  \t\t}\n  \t}\n\n  \tif (!parser.matchString(tag.close)) {\n  \t\tparser.error(\"Expected closing delimiter '\" + tag.close + \"' after reference\");\n\n  \t\tif (!expression) {\n  \t\t\t// special case - comment\n  \t\t\tif (parser.nextChar() === \"!\") {\n  \t\t\t\treturn null;\n  \t\t\t}\n\n  \t\t\tparser.error(\"Expected expression or legal reference\");\n  \t\t}\n  \t}\n\n  \tinterpolator = { t: INTERPOLATOR };\n  \tutils_refineExpression(expression, interpolator); // TODO handle this differently - it's mysterious\n\n  \treturn interpolator;\n  }\n\n  var mustache_readYielder = readYielder;\n  var yieldPattern = /^yield\\s*/;\n  function readYielder(parser, tag) {\n  \tvar start, name, yielder;\n\n  \tif (!parser.matchPattern(yieldPattern)) {\n  \t\treturn null;\n  \t}\n\n  \tstart = parser.pos;\n  \tname = parser.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\\-]*/);\n\n  \tparser.allowWhitespace();\n\n  \tif (!parser.matchString(tag.close)) {\n  \t\tparser.error(\"expected legal partial name\");\n  \t}\n\n  \tyielder = { t: YIELDER };\n\n  \tif (name) {\n  \t\tyielder.n = name;\n  \t}\n\n  \treturn yielder;\n  }\n\n  var section_readClosing = readClosing;\n  function readClosing(parser, tag) {\n  \tvar start, remaining, index, closing;\n\n  \tstart = parser.pos;\n\n  \tif (!parser.matchString(tag.open)) {\n  \t\treturn null;\n  \t}\n\n  \tparser.allowWhitespace();\n\n  \tif (!parser.matchString(\"/\")) {\n  \t\tparser.pos = start;\n  \t\treturn null;\n  \t}\n\n  \tparser.allowWhitespace();\n\n  \tremaining = parser.remaining();\n  \tindex = remaining.indexOf(tag.close);\n\n  \tif (index !== -1) {\n  \t\tclosing = {\n  \t\t\tt: CLOSING,\n  \t\t\tr: remaining.substr(0, index).split(\" \")[0]\n  \t\t};\n\n  \t\tparser.pos += index;\n\n  \t\tif (!parser.matchString(tag.close)) {\n  \t\t\tparser.error(\"Expected closing delimiter '\" + tag.close + \"'\");\n  \t\t}\n\n  \t\treturn closing;\n  \t}\n\n  \tparser.pos = start;\n  \treturn null;\n  }\n\n  var section_readElse = section_readElse__readElse;\n  var section_readElse__elsePattern = /^\\s*else\\s*/;\n  function section_readElse__readElse(parser, tag) {\n  \tvar start = parser.pos;\n\n  \tif (!parser.matchString(tag.open)) {\n  \t\treturn null;\n  \t}\n\n  \tif (!parser.matchPattern(section_readElse__elsePattern)) {\n  \t\tparser.pos = start;\n  \t\treturn null;\n  \t}\n\n  \tif (!parser.matchString(tag.close)) {\n  \t\tparser.error(\"Expected closing delimiter '\" + tag.close + \"'\");\n  \t}\n\n  \treturn {\n  \t\tt: ELSE\n  \t};\n  }\n\n  var readElseIf = readElseIf__readElse;\n  var readElseIf__elsePattern = /^\\s*elseif\\s+/;\n  function readElseIf__readElse(parser, tag) {\n  \tvar start = parser.pos,\n  \t    expression;\n\n  \tif (!parser.matchString(tag.open)) {\n  \t\treturn null;\n  \t}\n\n  \tif (!parser.matchPattern(readElseIf__elsePattern)) {\n  \t\tparser.pos = start;\n  \t\treturn null;\n  \t}\n\n  \texpression = converters_readExpression(parser);\n\n  \tif (!parser.matchString(tag.close)) {\n  \t\tparser.error(\"Expected closing delimiter '\" + tag.close + \"'\");\n  \t}\n\n  \treturn {\n  \t\tt: ELSEIF,\n  \t\tx: expression\n  \t};\n  }\n\n  var handlebarsBlockCodes = {\n  \teach: SECTION_EACH,\n  \t\"if\": SECTION_IF,\n  \t\"if-with\": SECTION_IF_WITH,\n  \t\"with\": SECTION_WITH,\n  \tunless: SECTION_UNLESS\n  };\n\n  var mustache_readSection = readSection;\n\n  var indexRefPattern = /^\\s*:\\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,\n      keyIndexRefPattern = /^\\s*,\\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,\n      handlebarsBlockPattern = new RegExp(\"^(\" + Object.keys(handlebarsBlockCodes).join(\"|\") + \")\\\\b\");\n  function readSection(parser, tag) {\n  \tvar start, expression, section, child, children, hasElse, block, unlessBlock, conditions, closed, i, expectedClose;\n\n  \tstart = parser.pos;\n\n  \tif (parser.matchString(\"^\")) {\n  \t\tsection = { t: SECTION, f: [], n: SECTION_UNLESS };\n  \t} else if (parser.matchString(\"#\")) {\n  \t\tsection = { t: SECTION, f: [] };\n\n  \t\tif (parser.matchString(\"partial\")) {\n  \t\t\tparser.pos = start - parser.standardDelimiters[0].length;\n  \t\t\tparser.error(\"Partial definitions can only be at the top level of the template, or immediately inside components\");\n  \t\t}\n\n  \t\tif (block = parser.matchPattern(handlebarsBlockPattern)) {\n  \t\t\texpectedClose = block;\n  \t\t\tsection.n = handlebarsBlockCodes[block];\n  \t\t}\n  \t} else {\n  \t\treturn null;\n  \t}\n\n  \tparser.allowWhitespace();\n\n  \texpression = converters_readExpression(parser);\n\n  \tif (!expression) {\n  \t\tparser.error(\"Expected expression\");\n  \t}\n\n  \t// optional index and key references\n  \tif (i = parser.matchPattern(indexRefPattern)) {\n  \t\tvar extra = undefined;\n\n  \t\tif (extra = parser.matchPattern(keyIndexRefPattern)) {\n  \t\t\tsection.i = i + \",\" + extra;\n  \t\t} else {\n  \t\t\tsection.i = i;\n  \t\t}\n  \t}\n\n  \tparser.allowWhitespace();\n\n  \tif (!parser.matchString(tag.close)) {\n  \t\tparser.error(\"Expected closing delimiter '\" + tag.close + \"'\");\n  \t}\n\n  \tparser.sectionDepth += 1;\n  \tchildren = section.f;\n\n  \tconditions = [];\n\n  \tdo {\n  \t\tif (child = section_readClosing(parser, tag)) {\n  \t\t\tif (expectedClose && child.r !== expectedClose) {\n  \t\t\t\tparser.error(\"Expected \" + tag.open + \"/\" + expectedClose + \"\" + tag.close);\n  \t\t\t}\n\n  \t\t\tparser.sectionDepth -= 1;\n  \t\t\tclosed = true;\n  \t\t} else if (child = readElseIf(parser, tag)) {\n  \t\t\tif (section.n === SECTION_UNLESS) {\n  \t\t\t\tparser.error(\"{{else}} not allowed in {{#unless}}\");\n  \t\t\t}\n\n  \t\t\tif (hasElse) {\n  \t\t\t\tparser.error(\"illegal {{elseif...}} after {{else}}\");\n  \t\t\t}\n\n  \t\t\tif (!unlessBlock) {\n  \t\t\t\tunlessBlock = createUnlessBlock(expression, section.n);\n  \t\t\t}\n\n  \t\t\tunlessBlock.f.push({\n  \t\t\t\tt: SECTION,\n  \t\t\t\tn: SECTION_IF,\n  \t\t\t\tx: utils_flattenExpression(mustache_readSection__combine(conditions.concat(child.x))),\n  \t\t\t\tf: children = []\n  \t\t\t});\n\n  \t\t\tconditions.push(invert(child.x));\n  \t\t} else if (child = section_readElse(parser, tag)) {\n  \t\t\tif (section.n === SECTION_UNLESS) {\n  \t\t\t\tparser.error(\"{{else}} not allowed in {{#unless}}\");\n  \t\t\t}\n\n  \t\t\tif (hasElse) {\n  \t\t\t\tparser.error(\"there can only be one {{else}} block, at the end of a section\");\n  \t\t\t}\n\n  \t\t\thasElse = true;\n\n  \t\t\t// use an unless block if there's no elseif\n  \t\t\tif (!unlessBlock) {\n  \t\t\t\tunlessBlock = createUnlessBlock(expression, section.n);\n  \t\t\t\tchildren = unlessBlock.f;\n  \t\t\t} else {\n  \t\t\t\tunlessBlock.f.push({\n  \t\t\t\t\tt: SECTION,\n  \t\t\t\t\tn: SECTION_IF,\n  \t\t\t\t\tx: utils_flattenExpression(mustache_readSection__combine(conditions)),\n  \t\t\t\t\tf: children = []\n  \t\t\t\t});\n  \t\t\t}\n  \t\t} else {\n  \t\t\tchild = parser.read(READERS);\n\n  \t\t\tif (!child) {\n  \t\t\t\tbreak;\n  \t\t\t}\n\n  \t\t\tchildren.push(child);\n  \t\t}\n  \t} while (!closed);\n\n  \tif (unlessBlock) {\n  \t\t// special case - `with` should become `if-with` (TODO is this right?\n  \t\t// seems to me that `with` ought to behave consistently, regardless\n  \t\t// of the presence/absence of `else`. In other words should always\n  \t\t// be `if-with`\n  \t\tif (section.n === SECTION_WITH) {\n  \t\t\tsection.n = SECTION_IF_WITH;\n  \t\t}\n\n  \t\tsection.l = unlessBlock;\n  \t}\n\n  \tutils_refineExpression(expression, section);\n\n  \t// TODO if a section is empty it should be discarded. Don't do\n  \t// that here though - we need to clean everything up first, as\n  \t// it may contain removeable whitespace. As a temporary measure,\n  \t// to pass the existing tests, remove empty `f` arrays\n  \tif (!section.f.length) {\n  \t\tdelete section.f;\n  \t}\n\n  \treturn section;\n  }\n\n  function createUnlessBlock(expression, sectionType) {\n  \tvar unlessBlock;\n\n  \tif (sectionType === SECTION_WITH) {\n  \t\t// special case - a `{{#with foo}}` section will render if `foo` is\n  \t\t// truthy, so the `{{else}}` section needs to render if `foo` is falsy,\n  \t\t// rather than adhering to the normal `{{#unless foo}}` logic (which\n  \t\t// treats empty arrays/objects as falsy)\n  \t\tunlessBlock = {\n  \t\t\tt: SECTION,\n  \t\t\tn: SECTION_IF,\n  \t\t\tf: []\n  \t\t};\n\n  \t\tutils_refineExpression(invert(expression), unlessBlock);\n  \t} else {\n  \t\tunlessBlock = {\n  \t\t\tt: SECTION,\n  \t\t\tn: SECTION_UNLESS,\n  \t\t\tf: []\n  \t\t};\n\n  \t\tutils_refineExpression(expression, unlessBlock);\n  \t}\n\n  \treturn unlessBlock;\n  }\n\n  function invert(expression) {\n  \tif (expression.t === PREFIX_OPERATOR && expression.s === \"!\") {\n  \t\treturn expression.o;\n  \t}\n\n  \treturn {\n  \t\tt: PREFIX_OPERATOR,\n  \t\ts: \"!\",\n  \t\to: parensIfNecessary(expression)\n  \t};\n  }\n\n  function mustache_readSection__combine(expressions) {\n  \tif (expressions.length === 1) {\n  \t\treturn expressions[0];\n  \t}\n\n  \treturn {\n  \t\tt: INFIX_OPERATOR,\n  \t\ts: \"&&\",\n  \t\to: [parensIfNecessary(expressions[0]), parensIfNecessary(mustache_readSection__combine(expressions.slice(1)))]\n  \t};\n  }\n\n  function parensIfNecessary(expression) {\n  \t// TODO only wrap if necessary\n  \treturn {\n  \t\tt: BRACKETED,\n  \t\tx: expression\n  \t};\n  }\n\n  var converters_readHtmlComment = readHtmlComment;\n  var OPEN_COMMENT = \"<!--\",\n      CLOSE_COMMENT = \"-->\";\n  function readHtmlComment(parser) {\n  \tvar start, content, remaining, endIndex, comment;\n\n  \tstart = parser.pos;\n\n  \tif (!parser.matchString(OPEN_COMMENT)) {\n  \t\treturn null;\n  \t}\n\n  \tremaining = parser.remaining();\n  \tendIndex = remaining.indexOf(CLOSE_COMMENT);\n\n  \tif (endIndex === -1) {\n  \t\tparser.error(\"Illegal HTML - expected closing comment sequence ('-->')\");\n  \t}\n\n  \tcontent = remaining.substr(0, endIndex);\n  \tparser.pos += endIndex + 3;\n\n  \tcomment = {\n  \t\tt: COMMENT,\n  \t\tc: content\n  \t};\n\n  \tif (parser.includeLinePositions) {\n  \t\tcomment.p = parser.getLinePos(start);\n  \t}\n\n  \treturn comment;\n  }\n\n  var booleanAttributes, voidElementNames, htmlEntities, controlCharacters, entityPattern, lessThan, greaterThan, amp;\n\n  // https://github.com/kangax/html-minifier/issues/63#issuecomment-37763316\n  booleanAttributes = /^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i;\n  voidElementNames = /^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;\n\n  htmlEntities = { quot: 34, amp: 38, apos: 39, lt: 60, gt: 62, nbsp: 160, iexcl: 161, cent: 162, pound: 163, curren: 164, yen: 165, brvbar: 166, sect: 167, uml: 168, copy: 169, ordf: 170, laquo: 171, not: 172, shy: 173, reg: 174, macr: 175, deg: 176, plusmn: 177, sup2: 178, sup3: 179, acute: 180, micro: 181, para: 182, middot: 183, cedil: 184, sup1: 185, ordm: 186, raquo: 187, frac14: 188, frac12: 189, frac34: 190, iquest: 191, Agrave: 192, Aacute: 193, Acirc: 194, Atilde: 195, Auml: 196, Aring: 197, AElig: 198, Ccedil: 199, Egrave: 200, Eacute: 201, Ecirc: 202, Euml: 203, Igrave: 204, Iacute: 205, Icirc: 206, Iuml: 207, ETH: 208, Ntilde: 209, Ograve: 210, Oacute: 211, Ocirc: 212, Otilde: 213, Ouml: 214, times: 215, Oslash: 216, Ugrave: 217, Uacute: 218, Ucirc: 219, Uuml: 220, Yacute: 221, THORN: 222, szlig: 223, agrave: 224, aacute: 225, acirc: 226, atilde: 227, auml: 228, aring: 229, aelig: 230, ccedil: 231, egrave: 232, eacute: 233, ecirc: 234, euml: 235, igrave: 236, iacute: 237, icirc: 238, iuml: 239, eth: 240, ntilde: 241, ograve: 242, oacute: 243, ocirc: 244, otilde: 245, ouml: 246, divide: 247, oslash: 248, ugrave: 249, uacute: 250, ucirc: 251, uuml: 252, yacute: 253, thorn: 254, yuml: 255, OElig: 338, oelig: 339, Scaron: 352, scaron: 353, Yuml: 376, fnof: 402, circ: 710, tilde: 732, Alpha: 913, Beta: 914, Gamma: 915, Delta: 916, Epsilon: 917, Zeta: 918, Eta: 919, Theta: 920, Iota: 921, Kappa: 922, Lambda: 923, Mu: 924, Nu: 925, Xi: 926, Omicron: 927, Pi: 928, Rho: 929, Sigma: 931, Tau: 932, Upsilon: 933, Phi: 934, Chi: 935, Psi: 936, Omega: 937, alpha: 945, beta: 946, gamma: 947, delta: 948, epsilon: 949, zeta: 950, eta: 951, theta: 952, iota: 953, kappa: 954, lambda: 955, mu: 956, nu: 957, xi: 958, omicron: 959, pi: 960, rho: 961, sigmaf: 962, sigma: 963, tau: 964, upsilon: 965, phi: 966, chi: 967, psi: 968, omega: 969, thetasym: 977, upsih: 978, piv: 982, ensp: 8194, emsp: 8195, thinsp: 8201, zwnj: 8204, zwj: 8205, lrm: 8206, rlm: 8207, ndash: 8211, mdash: 8212, lsquo: 8216, rsquo: 8217, sbquo: 8218, ldquo: 8220, rdquo: 8221, bdquo: 8222, dagger: 8224, Dagger: 8225, bull: 8226, hellip: 8230, permil: 8240, prime: 8242, Prime: 8243, lsaquo: 8249, rsaquo: 8250, oline: 8254, frasl: 8260, euro: 8364, image: 8465, weierp: 8472, real: 8476, trade: 8482, alefsym: 8501, larr: 8592, uarr: 8593, rarr: 8594, darr: 8595, harr: 8596, crarr: 8629, lArr: 8656, uArr: 8657, rArr: 8658, dArr: 8659, hArr: 8660, forall: 8704, part: 8706, exist: 8707, empty: 8709, nabla: 8711, isin: 8712, notin: 8713, ni: 8715, prod: 8719, sum: 8721, minus: 8722, lowast: 8727, radic: 8730, prop: 8733, infin: 8734, ang: 8736, and: 8743, or: 8744, cap: 8745, cup: 8746, int: 8747, there4: 8756, sim: 8764, cong: 8773, asymp: 8776, ne: 8800, equiv: 8801, le: 8804, ge: 8805, sub: 8834, sup: 8835, nsub: 8836, sube: 8838, supe: 8839, oplus: 8853, otimes: 8855, perp: 8869, sdot: 8901, lceil: 8968, rceil: 8969, lfloor: 8970, rfloor: 8971, lang: 9001, rang: 9002, loz: 9674, spades: 9824, clubs: 9827, hearts: 9829, diams: 9830 };\n  controlCharacters = [8364, 129, 8218, 402, 8222, 8230, 8224, 8225, 710, 8240, 352, 8249, 338, 141, 381, 143, 144, 8216, 8217, 8220, 8221, 8226, 8211, 8212, 732, 8482, 353, 8250, 339, 157, 382, 376];\n  entityPattern = new RegExp(\"&(#?(?:x[\\\\w\\\\d]+|\\\\d+|\" + Object.keys(htmlEntities).join(\"|\") + \"));?\", \"g\");\n\n  function decodeCharacterReferences(html) {\n  \treturn html.replace(entityPattern, function (match, entity) {\n  \t\tvar code;\n\n  \t\t// Handle named entities\n  \t\tif (entity[0] !== \"#\") {\n  \t\t\tcode = htmlEntities[entity];\n  \t\t} else if (entity[1] === \"x\") {\n  \t\t\tcode = parseInt(entity.substring(2), 16);\n  \t\t} else {\n  \t\t\tcode = parseInt(entity.substring(1), 10);\n  \t\t}\n\n  \t\tif (!code) {\n  \t\t\treturn match;\n  \t\t}\n\n  \t\treturn String.fromCharCode(validateCode(code));\n  \t});\n  }\n\n  // some code points are verboten. If we were inserting HTML, the browser would replace the illegal\n  // code points with alternatives in some cases - since we're bypassing that mechanism, we need\n  // to replace them ourselves\n  //\n  // Source: http://en.wikipedia.org/wiki/Character_encodings_in_HTML#Illegal_characters\n  function validateCode(code) {\n  \tif (!code) {\n  \t\treturn 65533;\n  \t}\n\n  \t// line feed becomes generic whitespace\n  \tif (code === 10) {\n  \t\treturn 32;\n  \t}\n\n  \t// ASCII range. (Why someone would use HTML entities for ASCII characters I don't know, but...)\n  \tif (code < 128) {\n  \t\treturn code;\n  \t}\n\n  \t// code points 128-159 are dealt with leniently by browsers, but they're incorrect. We need\n  \t// to correct the mistake or we'll end up with missing  signs and so on\n  \tif (code <= 159) {\n  \t\treturn controlCharacters[code - 128];\n  \t}\n\n  \t// basic multilingual plane\n  \tif (code < 55296) {\n  \t\treturn code;\n  \t}\n\n  \t// UTF-16 surrogate halves\n  \tif (code <= 57343) {\n  \t\treturn 65533;\n  \t}\n\n  \t// rest of the basic multilingual plane\n  \tif (code <= 65535) {\n  \t\treturn code;\n  \t}\n\n  \treturn 65533;\n  }\n\n  lessThan = /</g;\n  greaterThan = />/g;\n  amp = /&/g;\n\n  function escapeHtml(str) {\n  \treturn str.replace(amp, \"&amp;\").replace(lessThan, \"&lt;\").replace(greaterThan, \"&gt;\");\n  }\n\n  var leadingLinebreak = /^\\s*\\r?\\n/,\n      trailingLinebreak = /\\r?\\n\\s*$/;\n\n  var stripStandalones = function (items) {\n  \tvar i, current, backOne, backTwo, lastSectionItem;\n\n  \tfor (i = 1; i < items.length; i += 1) {\n  \t\tcurrent = items[i];\n  \t\tbackOne = items[i - 1];\n  \t\tbackTwo = items[i - 2];\n\n  \t\t// if we're at the end of a [text][comment][text] sequence...\n  \t\tif (isString(current) && isComment(backOne) && isString(backTwo)) {\n\n  \t\t\t// ... and the comment is a standalone (i.e. line breaks either side)...\n  \t\t\tif (trailingLinebreak.test(backTwo) && leadingLinebreak.test(current)) {\n\n  \t\t\t\t// ... then we want to remove the whitespace after the first line break\n  \t\t\t\titems[i - 2] = backTwo.replace(trailingLinebreak, \"\\n\");\n\n  \t\t\t\t// and the leading line break of the second text token\n  \t\t\t\titems[i] = current.replace(leadingLinebreak, \"\");\n  \t\t\t}\n  \t\t}\n\n  \t\t// if the current item is a section, and it is preceded by a linebreak, and\n  \t\t// its first item is a linebreak...\n  \t\tif (isSection(current) && isString(backOne)) {\n  \t\t\tif (trailingLinebreak.test(backOne) && isString(current.f[0]) && leadingLinebreak.test(current.f[0])) {\n  \t\t\t\titems[i - 1] = backOne.replace(trailingLinebreak, \"\\n\");\n  \t\t\t\tcurrent.f[0] = current.f[0].replace(leadingLinebreak, \"\");\n  \t\t\t}\n  \t\t}\n\n  \t\t// if the last item was a section, and it is followed by a linebreak, and\n  \t\t// its last item is a linebreak...\n  \t\tif (isString(current) && isSection(backOne)) {\n  \t\t\tlastSectionItem = lastItem(backOne.f);\n\n  \t\t\tif (isString(lastSectionItem) && trailingLinebreak.test(lastSectionItem) && leadingLinebreak.test(current)) {\n  \t\t\t\tbackOne.f[backOne.f.length - 1] = lastSectionItem.replace(trailingLinebreak, \"\\n\");\n  \t\t\t\titems[i] = current.replace(leadingLinebreak, \"\");\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \treturn items;\n  };\n\n  function isString(item) {\n  \treturn typeof item === \"string\";\n  }\n\n  function isComment(item) {\n  \treturn item.t === COMMENT || item.t === DELIMCHANGE;\n  }\n\n  function isSection(item) {\n  \treturn (item.t === SECTION || item.t === INVERTED) && item.f;\n  }\n\n  var trimWhitespace = function (items, leadingPattern, trailingPattern) {\n  \tvar item;\n\n  \tif (leadingPattern) {\n  \t\titem = items[0];\n  \t\tif (typeof item === \"string\") {\n  \t\t\titem = item.replace(leadingPattern, \"\");\n\n  \t\t\tif (!item) {\n  \t\t\t\titems.shift();\n  \t\t\t} else {\n  \t\t\t\titems[0] = item;\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \tif (trailingPattern) {\n  \t\titem = lastItem(items);\n  \t\tif (typeof item === \"string\") {\n  \t\t\titem = item.replace(trailingPattern, \"\");\n\n  \t\t\tif (!item) {\n  \t\t\t\titems.pop();\n  \t\t\t} else {\n  \t\t\t\titems[items.length - 1] = item;\n  \t\t\t}\n  \t\t}\n  \t}\n  };\n\n  var utils_cleanup = cleanup;\n  var contiguousWhitespace = /[ \\t\\f\\r\\n]+/g;\n  var preserveWhitespaceElements = /^(?:pre|script|style|textarea)$/i;\n  var utils_cleanup__leadingWhitespace = /^[ \\t\\f\\r\\n]+/;\n  var trailingWhitespace = /[ \\t\\f\\r\\n]+$/;\n  var leadingNewLine = /^(?:\\r\\n|\\r|\\n)/;\n  var trailingNewLine = /(?:\\r\\n|\\r|\\n)$/;\n  function cleanup(items, stripComments, preserveWhitespace, removeLeadingWhitespace, removeTrailingWhitespace) {\n  \tvar i, item, previousItem, nextItem, preserveWhitespaceInsideFragment, removeLeadingWhitespaceInsideFragment, removeTrailingWhitespaceInsideFragment, key;\n\n  \t// First pass - remove standalones and comments etc\n  \tstripStandalones(items);\n\n  \ti = items.length;\n  \twhile (i--) {\n  \t\titem = items[i];\n\n  \t\t// Remove delimiter changes, unsafe elements etc\n  \t\tif (item.exclude) {\n  \t\t\titems.splice(i, 1);\n  \t\t}\n\n  \t\t// Remove comments, unless we want to keep them\n  \t\telse if (stripComments && item.t === COMMENT) {\n  \t\t\titems.splice(i, 1);\n  \t\t}\n  \t}\n\n  \t// If necessary, remove leading and trailing whitespace\n  \ttrimWhitespace(items, removeLeadingWhitespace ? utils_cleanup__leadingWhitespace : null, removeTrailingWhitespace ? trailingWhitespace : null);\n\n  \ti = items.length;\n  \twhile (i--) {\n  \t\titem = items[i];\n\n  \t\t// Recurse\n  \t\tif (item.f) {\n  \t\t\tvar isPreserveWhitespaceElement = item.t === ELEMENT && preserveWhitespaceElements.test(item.e);\n  \t\t\tpreserveWhitespaceInsideFragment = preserveWhitespace || isPreserveWhitespaceElement;\n\n  \t\t\tif (!preserveWhitespace && isPreserveWhitespaceElement) {\n  \t\t\t\ttrimWhitespace(item.f, leadingNewLine, trailingNewLine);\n  \t\t\t}\n\n  \t\t\tif (!preserveWhitespaceInsideFragment) {\n  \t\t\t\tpreviousItem = items[i - 1];\n  \t\t\t\tnextItem = items[i + 1];\n\n  \t\t\t\t// if the previous item was a text item with trailing whitespace,\n  \t\t\t\t// remove leading whitespace inside the fragment\n  \t\t\t\tif (!previousItem || typeof previousItem === \"string\" && trailingWhitespace.test(previousItem)) {\n  \t\t\t\t\tremoveLeadingWhitespaceInsideFragment = true;\n  \t\t\t\t}\n\n  \t\t\t\t// and vice versa\n  \t\t\t\tif (!nextItem || typeof nextItem === \"string\" && utils_cleanup__leadingWhitespace.test(nextItem)) {\n  \t\t\t\t\tremoveTrailingWhitespaceInsideFragment = true;\n  \t\t\t\t}\n  \t\t\t}\n\n  \t\t\tcleanup(item.f, stripComments, preserveWhitespaceInsideFragment, removeLeadingWhitespaceInsideFragment, removeTrailingWhitespaceInsideFragment);\n  \t\t}\n\n  \t\t// Split if-else blocks into two (an if, and an unless)\n  \t\tif (item.l) {\n  \t\t\tcleanup(item.l.f, stripComments, preserveWhitespace, removeLeadingWhitespaceInsideFragment, removeTrailingWhitespaceInsideFragment);\n\n  \t\t\titems.splice(i + 1, 0, item.l);\n  \t\t\tdelete item.l; // TODO would be nice if there was a way around this\n  \t\t}\n\n  \t\t// Clean up element attributes\n  \t\tif (item.a) {\n  \t\t\tfor (key in item.a) {\n  \t\t\t\tif (item.a.hasOwnProperty(key) && typeof item.a[key] !== \"string\") {\n  \t\t\t\t\tcleanup(item.a[key], stripComments, preserveWhitespace, removeLeadingWhitespaceInsideFragment, removeTrailingWhitespaceInsideFragment);\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n\n  \t\t// Clean up conditional attributes\n  \t\tif (item.m) {\n  \t\t\tcleanup(item.m, stripComments, preserveWhitespace, removeLeadingWhitespaceInsideFragment, removeTrailingWhitespaceInsideFragment);\n  \t\t}\n\n  \t\t// Clean up event handlers\n  \t\tif (item.v) {\n  \t\t\tfor (key in item.v) {\n  \t\t\t\tif (item.v.hasOwnProperty(key)) {\n  \t\t\t\t\t// clean up names\n  \t\t\t\t\tif (isArray(item.v[key].n)) {\n  \t\t\t\t\t\tcleanup(item.v[key].n, stripComments, preserveWhitespace, removeLeadingWhitespaceInsideFragment, removeTrailingWhitespaceInsideFragment);\n  \t\t\t\t\t}\n\n  \t\t\t\t\t// clean up params\n  \t\t\t\t\tif (isArray(item.v[key].d)) {\n  \t\t\t\t\t\tcleanup(item.v[key].d, stripComments, preserveWhitespace, removeLeadingWhitespaceInsideFragment, removeTrailingWhitespaceInsideFragment);\n  \t\t\t\t\t}\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \t// final pass - fuse text nodes together\n  \ti = items.length;\n  \twhile (i--) {\n  \t\tif (typeof items[i] === \"string\") {\n  \t\t\tif (typeof items[i + 1] === \"string\") {\n  \t\t\t\titems[i] = items[i] + items[i + 1];\n  \t\t\t\titems.splice(i + 1, 1);\n  \t\t\t}\n\n  \t\t\tif (!preserveWhitespace) {\n  \t\t\t\titems[i] = items[i].replace(contiguousWhitespace, \" \");\n  \t\t\t}\n\n  \t\t\tif (items[i] === \"\") {\n  \t\t\t\titems.splice(i, 1);\n  \t\t\t}\n  \t\t}\n  \t}\n  }\n\n  var element_readClosingTag = readClosingTag;\n  var closingTagPattern = /^([a-zA-Z]{1,}:?[a-zA-Z0-9\\-]*)\\s*\\>/;\n  function readClosingTag(parser) {\n  \tvar start, tag;\n\n  \tstart = parser.pos;\n\n  \t// are we looking at a closing tag?\n  \tif (!parser.matchString(\"</\")) {\n  \t\treturn null;\n  \t}\n\n  \tif (tag = parser.matchPattern(closingTagPattern)) {\n  \t\tif (parser.inside && tag !== parser.inside) {\n  \t\t\tparser.pos = start;\n  \t\t\treturn null;\n  \t\t}\n\n  \t\treturn {\n  \t\t\tt: CLOSING_TAG,\n  \t\t\te: tag\n  \t\t};\n  \t}\n\n  \t// We have an illegal closing tag, report it\n  \tparser.pos -= 2;\n  \tparser.error(\"Illegal closing tag\");\n  }\n\n  var getLowestIndex = function (haystack, needles) {\n  \tvar i, index, lowest;\n\n  \ti = needles.length;\n  \twhile (i--) {\n  \t\tindex = haystack.indexOf(needles[i]);\n\n  \t\t// short circuit\n  \t\tif (!index) {\n  \t\t\treturn 0;\n  \t\t}\n\n  \t\tif (index === -1) {\n  \t\t\tcontinue;\n  \t\t}\n\n  \t\tif (!lowest || index < lowest) {\n  \t\t\tlowest = index;\n  \t\t}\n  \t}\n\n  \treturn lowest || -1;\n  };\n\n  var element_readAttribute = readAttribute;\n\n  var attributeNamePattern = /^[^\\s\"'>\\/=]+/,\n      unquotedAttributeValueTextPattern = /^[^\\s\"'=<>`]+/;\n  function readAttribute(parser) {\n  \tvar attr, name, value;\n\n  \tparser.allowWhitespace();\n\n  \tname = parser.matchPattern(attributeNamePattern);\n  \tif (!name) {\n  \t\treturn null;\n  \t}\n\n  \tattr = { name: name };\n\n  \tvalue = readAttributeValue(parser);\n  \tif (value != null) {\n  \t\t// not null/undefined\n  \t\tattr.value = value;\n  \t}\n\n  \treturn attr;\n  }\n\n  function readAttributeValue(parser) {\n  \tvar start, valueStart, startDepth, value;\n\n  \tstart = parser.pos;\n\n  \t// next character must be `=`, `/`, `>` or whitespace\n  \tif (!/[=\\/>\\s]/.test(parser.nextChar())) {\n  \t\tparser.error(\"Expected `=`, `/`, `>` or whitespace\");\n  \t}\n\n  \tparser.allowWhitespace();\n\n  \tif (!parser.matchString(\"=\")) {\n  \t\tparser.pos = start;\n  \t\treturn null;\n  \t}\n\n  \tparser.allowWhitespace();\n\n  \tvalueStart = parser.pos;\n  \tstartDepth = parser.sectionDepth;\n\n  \tvalue = readQuotedAttributeValue(parser, \"'\") || readQuotedAttributeValue(parser, \"\\\"\") || readUnquotedAttributeValue(parser);\n\n  \tif (value === null) {\n  \t\tparser.error(\"Expected valid attribute value\");\n  \t}\n\n  \tif (parser.sectionDepth !== startDepth) {\n  \t\tparser.pos = valueStart;\n  \t\tparser.error(\"An attribute value must contain as many opening section tags as closing section tags\");\n  \t}\n\n  \tif (!value.length) {\n  \t\treturn \"\";\n  \t}\n\n  \tif (value.length === 1 && typeof value[0] === \"string\") {\n  \t\treturn decodeCharacterReferences(value[0]);\n  \t}\n\n  \treturn value;\n  }\n\n  function readUnquotedAttributeValueToken(parser) {\n  \tvar start, text, haystack, needles, index;\n\n  \tstart = parser.pos;\n\n  \ttext = parser.matchPattern(unquotedAttributeValueTextPattern);\n\n  \tif (!text) {\n  \t\treturn null;\n  \t}\n\n  \thaystack = text;\n  \tneedles = parser.tags.map(function (t) {\n  \t\treturn t.open;\n  \t}); // TODO refactor... we do this in readText.js as well\n\n  \tif ((index = getLowestIndex(haystack, needles)) !== -1) {\n  \t\ttext = text.substr(0, index);\n  \t\tparser.pos = start + text.length;\n  \t}\n\n  \treturn text;\n  }\n\n  function readUnquotedAttributeValue(parser) {\n  \tvar tokens, token;\n\n  \tparser.inAttribute = true;\n\n  \ttokens = [];\n\n  \ttoken = converters_readMustache(parser) || readUnquotedAttributeValueToken(parser);\n  \twhile (token !== null) {\n  \t\ttokens.push(token);\n  \t\ttoken = converters_readMustache(parser) || readUnquotedAttributeValueToken(parser);\n  \t}\n\n  \tif (!tokens.length) {\n  \t\treturn null;\n  \t}\n\n  \tparser.inAttribute = false;\n  \treturn tokens;\n  }\n\n  function readQuotedAttributeValue(parser, quoteMark) {\n  \tvar start, tokens, token;\n\n  \tstart = parser.pos;\n\n  \tif (!parser.matchString(quoteMark)) {\n  \t\treturn null;\n  \t}\n\n  \tparser.inAttribute = quoteMark;\n\n  \ttokens = [];\n\n  \ttoken = converters_readMustache(parser) || readQuotedStringToken(parser, quoteMark);\n  \twhile (token !== null) {\n  \t\ttokens.push(token);\n  \t\ttoken = converters_readMustache(parser) || readQuotedStringToken(parser, quoteMark);\n  \t}\n\n  \tif (!parser.matchString(quoteMark)) {\n  \t\tparser.pos = start;\n  \t\treturn null;\n  \t}\n\n  \tparser.inAttribute = false;\n\n  \treturn tokens;\n  }\n\n  function readQuotedStringToken(parser, quoteMark) {\n  \tvar start, index, haystack, needles;\n\n  \tstart = parser.pos;\n  \thaystack = parser.remaining();\n\n  \tneedles = parser.tags.map(function (t) {\n  \t\treturn t.open;\n  \t}); // TODO refactor... we do this in readText.js as well\n  \tneedles.push(quoteMark);\n\n  \tindex = getLowestIndex(haystack, needles);\n\n  \tif (index === -1) {\n  \t\tparser.error(\"Quoted attribute value must have a closing quote\");\n  \t}\n\n  \tif (!index) {\n  \t\treturn null;\n  \t}\n\n  \tparser.pos += index;\n  \treturn haystack.substr(0, index);\n  }\n\n  var JsonParser, specials, specialsPattern, parseJSON__numberPattern, placeholderPattern, placeholderAtStartPattern, onlyWhitespace;\n\n  specials = {\n  \t\"true\": true,\n  \t\"false\": false,\n  \tundefined: undefined,\n  \t\"null\": null\n  };\n\n  specialsPattern = new RegExp(\"^(?:\" + Object.keys(specials).join(\"|\") + \")\");\n  parseJSON__numberPattern = /^(?:[+-]?)(?:(?:(?:0|[1-9]\\d*)?\\.\\d+)|(?:(?:0|[1-9]\\d*)\\.)|(?:0|[1-9]\\d*))(?:[eE][+-]?\\d+)?/;\n  placeholderPattern = /\\$\\{([^\\}]+)\\}/g;\n  placeholderAtStartPattern = /^\\$\\{([^\\}]+)\\}/;\n  onlyWhitespace = /^\\s*$/;\n\n  JsonParser = parse_Parser.extend({\n  \tinit: function (str, options) {\n  \t\tthis.values = options.values;\n  \t\tthis.allowWhitespace();\n  \t},\n\n  \tpostProcess: function (result) {\n  \t\tif (result.length !== 1 || !onlyWhitespace.test(this.leftover)) {\n  \t\t\treturn null;\n  \t\t}\n\n  \t\treturn { value: result[0].v };\n  \t},\n\n  \tconverters: [function getPlaceholder(parser) {\n  \t\tvar placeholder;\n\n  \t\tif (!parser.values) {\n  \t\t\treturn null;\n  \t\t}\n\n  \t\tplaceholder = parser.matchPattern(placeholderAtStartPattern);\n\n  \t\tif (placeholder && parser.values.hasOwnProperty(placeholder)) {\n  \t\t\treturn { v: parser.values[placeholder] };\n  \t\t}\n  \t}, function getSpecial(parser) {\n  \t\tvar special;\n\n  \t\tif (special = parser.matchPattern(specialsPattern)) {\n  \t\t\treturn { v: specials[special] };\n  \t\t}\n  \t}, function getNumber(parser) {\n  \t\tvar number;\n\n  \t\tif (number = parser.matchPattern(parseJSON__numberPattern)) {\n  \t\t\treturn { v: +number };\n  \t\t}\n  \t}, function getString(parser) {\n  \t\tvar stringLiteral = readStringLiteral(parser),\n  \t\t    values;\n\n  \t\tif (stringLiteral && (values = parser.values)) {\n  \t\t\treturn {\n  \t\t\t\tv: stringLiteral.v.replace(placeholderPattern, function (match, $1) {\n  \t\t\t\t\treturn $1 in values ? values[$1] : $1;\n  \t\t\t\t})\n  \t\t\t};\n  \t\t}\n\n  \t\treturn stringLiteral;\n  \t}, function getObject(parser) {\n  \t\tvar result, pair;\n\n  \t\tif (!parser.matchString(\"{\")) {\n  \t\t\treturn null;\n  \t\t}\n\n  \t\tresult = {};\n\n  \t\tparser.allowWhitespace();\n\n  \t\tif (parser.matchString(\"}\")) {\n  \t\t\treturn { v: result };\n  \t\t}\n\n  \t\twhile (pair = getKeyValuePair(parser)) {\n  \t\t\tresult[pair.key] = pair.value;\n\n  \t\t\tparser.allowWhitespace();\n\n  \t\t\tif (parser.matchString(\"}\")) {\n  \t\t\t\treturn { v: result };\n  \t\t\t}\n\n  \t\t\tif (!parser.matchString(\",\")) {\n  \t\t\t\treturn null;\n  \t\t\t}\n  \t\t}\n\n  \t\treturn null;\n  \t}, function getArray(parser) {\n  \t\tvar result, valueToken;\n\n  \t\tif (!parser.matchString(\"[\")) {\n  \t\t\treturn null;\n  \t\t}\n\n  \t\tresult = [];\n\n  \t\tparser.allowWhitespace();\n\n  \t\tif (parser.matchString(\"]\")) {\n  \t\t\treturn { v: result };\n  \t\t}\n\n  \t\twhile (valueToken = parser.read()) {\n  \t\t\tresult.push(valueToken.v);\n\n  \t\t\tparser.allowWhitespace();\n\n  \t\t\tif (parser.matchString(\"]\")) {\n  \t\t\t\treturn { v: result };\n  \t\t\t}\n\n  \t\t\tif (!parser.matchString(\",\")) {\n  \t\t\t\treturn null;\n  \t\t\t}\n\n  \t\t\tparser.allowWhitespace();\n  \t\t}\n\n  \t\treturn null;\n  \t}]\n  });\n\n  function getKeyValuePair(parser) {\n  \tvar key, valueToken, pair;\n\n  \tparser.allowWhitespace();\n\n  \tkey = shared_readKey(parser);\n\n  \tif (!key) {\n  \t\treturn null;\n  \t}\n\n  \tpair = { key: key };\n\n  \tparser.allowWhitespace();\n  \tif (!parser.matchString(\":\")) {\n  \t\treturn null;\n  \t}\n  \tparser.allowWhitespace();\n\n  \tvalueToken = parser.read();\n  \tif (!valueToken) {\n  \t\treturn null;\n  \t}\n\n  \tpair.value = valueToken.v;\n\n  \treturn pair;\n  }\n\n  var parseJSON = function (str, values) {\n  \tvar parser = new JsonParser(str, {\n  \t\tvalues: values\n  \t});\n\n  \treturn parser.result;\n  };\n\n  // TODO clean this up, it's shocking\n  var element_processDirective = processDirective;\n  var methodCallPattern = /^([a-zA-Z_$][a-zA-Z_$0-9]*)\\(/,\n      methodCallExcessPattern = /\\)\\s*$/,\n      ExpressionParser;\n\n  ExpressionParser = parse_Parser.extend({\n  \tconverters: [converters_readExpression]\n  });\n  function processDirective(tokens, parentParser) {\n  \tvar result, match, parser, args, token, colonIndex, directiveName, directiveArgs, parsed;\n\n  \tif (typeof tokens === \"string\") {\n  \t\tif (match = methodCallPattern.exec(tokens)) {\n  \t\t\tvar end = tokens.lastIndexOf(\")\");\n\n  \t\t\t// check for invalid method calls\n  \t\t\tif (!methodCallExcessPattern.test(tokens)) {\n  \t\t\t\tparentParser.error(\"Invalid input after method call expression '\" + tokens.slice(end + 1) + \"'\");\n  \t\t\t}\n\n  \t\t\tresult = { m: match[1] };\n  \t\t\targs = \"[\" + tokens.slice(result.m.length + 1, end) + \"]\";\n\n  \t\t\tparser = new ExpressionParser(args);\n  \t\t\tresult.a = utils_flattenExpression(parser.result[0]);\n\n  \t\t\treturn result;\n  \t\t}\n\n  \t\tif (tokens.indexOf(\":\") === -1) {\n  \t\t\treturn tokens.trim();\n  \t\t}\n\n  \t\ttokens = [tokens];\n  \t}\n\n  \tresult = {};\n\n  \tdirectiveName = [];\n  \tdirectiveArgs = [];\n\n  \tif (tokens) {\n  \t\twhile (tokens.length) {\n  \t\t\ttoken = tokens.shift();\n\n  \t\t\tif (typeof token === \"string\") {\n  \t\t\t\tcolonIndex = token.indexOf(\":\");\n\n  \t\t\t\tif (colonIndex === -1) {\n  \t\t\t\t\tdirectiveName.push(token);\n  \t\t\t\t} else {\n\n  \t\t\t\t\t// is the colon the first character?\n  \t\t\t\t\tif (colonIndex) {\n  \t\t\t\t\t\t// no\n  \t\t\t\t\t\tdirectiveName.push(token.substr(0, colonIndex));\n  \t\t\t\t\t}\n\n  \t\t\t\t\t// if there is anything after the colon in this token, treat\n  \t\t\t\t\t// it as the first token of the directiveArgs fragment\n  \t\t\t\t\tif (token.length > colonIndex + 1) {\n  \t\t\t\t\t\tdirectiveArgs[0] = token.substring(colonIndex + 1);\n  \t\t\t\t\t}\n\n  \t\t\t\t\tbreak;\n  \t\t\t\t}\n  \t\t\t} else {\n  \t\t\t\tdirectiveName.push(token);\n  \t\t\t}\n  \t\t}\n\n  \t\tdirectiveArgs = directiveArgs.concat(tokens);\n  \t}\n\n  \tif (!directiveName.length) {\n  \t\tresult = \"\";\n  \t} else if (directiveArgs.length || typeof directiveName !== \"string\") {\n  \t\tresult = {\n  \t\t\t// TODO is this really necessary? just use the array\n  \t\t\tn: directiveName.length === 1 && typeof directiveName[0] === \"string\" ? directiveName[0] : directiveName\n  \t\t};\n\n  \t\tif (directiveArgs.length === 1 && typeof directiveArgs[0] === \"string\") {\n  \t\t\tparsed = parseJSON(\"[\" + directiveArgs[0] + \"]\");\n  \t\t\tresult.a = parsed ? parsed.value : directiveArgs[0].trim();\n  \t\t} else {\n  \t\t\tresult.d = directiveArgs;\n  \t\t}\n  \t} else {\n  \t\tresult = directiveName;\n  \t}\n\n  \treturn result;\n  }\n\n  var tagNamePattern = /^[a-zA-Z]{1,}:?[a-zA-Z0-9\\-]*/,\n      validTagNameFollower = /^[\\s\\n\\/>]/,\n      onPattern = /^on/,\n      proxyEventPattern = /^on-([a-zA-Z\\\\*\\\\.$_][a-zA-Z\\\\*\\\\.$_0-9\\-]+)$/,\n      reservedEventNames = /^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,\n      directives = { \"intro-outro\": \"t0\", intro: \"t1\", outro: \"t2\", decorator: \"o\" },\n      exclude = { exclude: true },\n      disallowedContents;\n\n  // based on http://developers.whatwg.org/syntax.html#syntax-tag-omission\n  disallowedContents = {\n  \tli: [\"li\"],\n  \tdt: [\"dt\", \"dd\"],\n  \tdd: [\"dt\", \"dd\"],\n  \tp: \"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul\".split(\" \"),\n  \trt: [\"rt\", \"rp\"],\n  \trp: [\"rt\", \"rp\"],\n  \toptgroup: [\"optgroup\"],\n  \toption: [\"option\", \"optgroup\"],\n  \tthead: [\"tbody\", \"tfoot\"],\n  \ttbody: [\"tbody\", \"tfoot\"],\n  \ttfoot: [\"tbody\"],\n  \ttr: [\"tr\", \"tbody\"],\n  \ttd: [\"td\", \"th\", \"tr\"],\n  \tth: [\"td\", \"th\", \"tr\"]\n  };\n\n  var converters_readElement = readElement;\n\n  function readElement(parser) {\n  \tvar start, element, directiveName, match, addProxyEvent, attribute, directive, selfClosing, children, partials, hasPartials, child, closed, pos, remaining, closingTag;\n\n  \tstart = parser.pos;\n\n  \tif (parser.inside || parser.inAttribute) {\n  \t\treturn null;\n  \t}\n\n  \tif (!parser.matchString(\"<\")) {\n  \t\treturn null;\n  \t}\n\n  \t// if this is a closing tag, abort straight away\n  \tif (parser.nextChar() === \"/\") {\n  \t\treturn null;\n  \t}\n\n  \telement = {};\n  \tif (parser.includeLinePositions) {\n  \t\telement.p = parser.getLinePos(start);\n  \t}\n\n  \tif (parser.matchString(\"!\")) {\n  \t\telement.t = DOCTYPE;\n  \t\tif (!parser.matchPattern(/^doctype/i)) {\n  \t\t\tparser.error(\"Expected DOCTYPE declaration\");\n  \t\t}\n\n  \t\telement.a = parser.matchPattern(/^(.+?)>/);\n  \t\treturn element;\n  \t}\n\n  \telement.t = ELEMENT;\n\n  \t// element name\n  \telement.e = parser.matchPattern(tagNamePattern);\n  \tif (!element.e) {\n  \t\treturn null;\n  \t}\n\n  \t// next character must be whitespace, closing solidus or '>'\n  \tif (!validTagNameFollower.test(parser.nextChar())) {\n  \t\tparser.error(\"Illegal tag name\");\n  \t}\n\n  \taddProxyEvent = function (name, directive) {\n  \t\tvar directiveName = directive.n || directive;\n\n  \t\tif (reservedEventNames.test(directiveName)) {\n  \t\t\tparser.pos -= directiveName.length;\n  \t\t\tparser.error(\"Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)\");\n  \t\t}\n\n  \t\telement.v[name] = directive;\n  \t};\n\n  \tparser.allowWhitespace();\n\n  \t// directives and attributes\n  \twhile (attribute = converters_readMustache(parser) || element_readAttribute(parser)) {\n  \t\t// regular attributes\n  \t\tif (attribute.name) {\n  \t\t\t// intro, outro, decorator\n  \t\t\tif (directiveName = directives[attribute.name]) {\n  \t\t\t\telement[directiveName] = element_processDirective(attribute.value, parser);\n  \t\t\t}\n\n  \t\t\t// on-click etc\n  \t\t\telse if (match = proxyEventPattern.exec(attribute.name)) {\n  \t\t\t\tif (!element.v) element.v = {};\n  \t\t\t\tdirective = element_processDirective(attribute.value, parser);\n  \t\t\t\taddProxyEvent(match[1], directive);\n  \t\t\t} else {\n  \t\t\t\tif (!parser.sanitizeEventAttributes || !onPattern.test(attribute.name)) {\n  \t\t\t\t\tif (!element.a) element.a = {};\n  \t\t\t\t\telement.a[attribute.name] = attribute.value || (attribute.value === \"\" ? \"\" : 0);\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n\n  \t\t// {{#if foo}}class='foo'{{/if}}\n  \t\telse {\n  \t\t\tif (!element.m) element.m = [];\n  \t\t\telement.m.push(attribute);\n  \t\t}\n\n  \t\tparser.allowWhitespace();\n  \t}\n\n  \t// allow whitespace before closing solidus\n  \tparser.allowWhitespace();\n\n  \t// self-closing solidus?\n  \tif (parser.matchString(\"/\")) {\n  \t\tselfClosing = true;\n  \t}\n\n  \t// closing angle bracket\n  \tif (!parser.matchString(\">\")) {\n  \t\treturn null;\n  \t}\n\n  \tvar lowerCaseName = element.e.toLowerCase();\n  \tvar preserveWhitespace = parser.preserveWhitespace;\n\n  \tif (!selfClosing && !voidElementNames.test(element.e)) {\n  \t\tparser.elementStack.push(lowerCaseName);\n\n  \t\t// Special case - if we open a script element, further tags should\n  \t\t// be ignored unless they're a closing script element\n  \t\tif (lowerCaseName === \"script\" || lowerCaseName === \"style\") {\n  \t\t\tparser.inside = lowerCaseName;\n  \t\t}\n\n  \t\tchildren = [];\n  \t\tpartials = create(null);\n\n  \t\tdo {\n  \t\t\tpos = parser.pos;\n  \t\t\tremaining = parser.remaining();\n\n  \t\t\t// if for example we're in an <li> element, and we see another\n  \t\t\t// <li> tag, close the first so they become siblings\n  \t\t\tif (!canContain(lowerCaseName, remaining)) {\n  \t\t\t\tclosed = true;\n  \t\t\t}\n\n  \t\t\t// closing tag\n  \t\t\telse if (closingTag = element_readClosingTag(parser)) {\n  \t\t\t\tclosed = true;\n\n  \t\t\t\tvar closingTagName = closingTag.e.toLowerCase();\n\n  \t\t\t\t// if this *isn't* the closing tag for the current element...\n  \t\t\t\tif (closingTagName !== lowerCaseName) {\n  \t\t\t\t\t// rewind parser\n  \t\t\t\t\tparser.pos = pos;\n\n  \t\t\t\t\t// if it doesn't close a parent tag, error\n  \t\t\t\t\tif (! ~parser.elementStack.indexOf(closingTagName)) {\n  \t\t\t\t\t\tvar errorMessage = \"Unexpected closing tag\";\n\n  \t\t\t\t\t\t// add additional help for void elements, since component names\n  \t\t\t\t\t\t// might clash with them\n  \t\t\t\t\t\tif (voidElementNames.test(closingTagName)) {\n  \t\t\t\t\t\t\terrorMessage += \" (<\" + closingTagName + \"> is a void element - it cannot contain children)\";\n  \t\t\t\t\t\t}\n\n  \t\t\t\t\t\tparser.error(errorMessage);\n  \t\t\t\t\t}\n  \t\t\t\t}\n  \t\t\t}\n\n  \t\t\t// implicit close by closing section tag. TODO clean this up\n  \t\t\telse if (child = section_readClosing(parser, { open: parser.standardDelimiters[0], close: parser.standardDelimiters[1] })) {\n  \t\t\t\tclosed = true;\n  \t\t\t\tparser.pos = pos;\n  \t\t\t} else {\n  \t\t\t\tif (child = parser.read(PARTIAL_READERS)) {\n  \t\t\t\t\tif (partials[child.n]) {\n  \t\t\t\t\t\tparser.pos = pos;\n  \t\t\t\t\t\tparser.error(\"Duplicate partial definition\");\n  \t\t\t\t\t}\n\n  \t\t\t\t\tutils_cleanup(child.f, parser.stripComments, preserveWhitespace, !preserveWhitespace, !preserveWhitespace);\n\n  \t\t\t\t\tpartials[child.n] = child.f;\n  \t\t\t\t\thasPartials = true;\n  \t\t\t\t} else {\n  \t\t\t\t\tif (child = parser.read(READERS)) {\n  \t\t\t\t\t\tchildren.push(child);\n  \t\t\t\t\t} else {\n  \t\t\t\t\t\tclosed = true;\n  \t\t\t\t\t}\n  \t\t\t\t}\n  \t\t\t}\n  \t\t} while (!closed);\n\n  \t\tif (children.length) {\n  \t\t\telement.f = children;\n  \t\t}\n\n  \t\tif (hasPartials) {\n  \t\t\telement.p = partials;\n  \t\t}\n\n  \t\tparser.elementStack.pop();\n  \t}\n\n  \tparser.inside = null;\n\n  \tif (parser.sanitizeElements && parser.sanitizeElements.indexOf(lowerCaseName) !== -1) {\n  \t\treturn exclude;\n  \t}\n\n  \treturn element;\n  }\n\n  function canContain(name, remaining) {\n  \tvar match, disallowed;\n\n  \tmatch = /^<([a-zA-Z][a-zA-Z0-9]*)/.exec(remaining);\n  \tdisallowed = disallowedContents[name];\n\n  \tif (!match || !disallowed) {\n  \t\treturn true;\n  \t}\n\n  \treturn ! ~disallowed.indexOf(match[1].toLowerCase());\n  }\n\n  var converters_readText = readText;\n  function readText(parser) {\n  \tvar index, remaining, disallowed, barrier;\n\n  \tremaining = parser.remaining();\n\n  \tbarrier = parser.inside ? \"</\" + parser.inside : \"<\";\n\n  \tif (parser.inside && !parser.interpolate[parser.inside]) {\n  \t\tindex = remaining.indexOf(barrier);\n  \t} else {\n  \t\tdisallowed = parser.tags.map(function (t) {\n  \t\t\treturn t.open;\n  \t\t});\n  \t\tdisallowed = disallowed.concat(parser.tags.map(function (t) {\n  \t\t\treturn \"\\\\\" + t.open;\n  \t\t}));\n\n  \t\t// http://developers.whatwg.org/syntax.html#syntax-attributes\n  \t\tif (parser.inAttribute === true) {\n  \t\t\t// we're inside an unquoted attribute value\n  \t\t\tdisallowed.push(\"\\\"\", \"'\", \"=\", \"<\", \">\", \"`\");\n  \t\t} else if (parser.inAttribute) {\n  \t\t\t// quoted attribute value\n  \t\t\tdisallowed.push(parser.inAttribute);\n  \t\t} else {\n  \t\t\tdisallowed.push(barrier);\n  \t\t}\n\n  \t\tindex = getLowestIndex(remaining, disallowed);\n  \t}\n\n  \tif (!index) {\n  \t\treturn null;\n  \t}\n\n  \tif (index === -1) {\n  \t\tindex = remaining.length;\n  \t}\n\n  \tparser.pos += index;\n\n  \treturn parser.inside ? remaining.substr(0, index) : decodeCharacterReferences(remaining.substr(0, index));\n  }\n\n  var utils_escapeRegExp = escapeRegExp;\n  var utils_escapeRegExp__pattern = /[-/\\\\^$*+?.()|[\\]{}]/g;\n  function escapeRegExp(str) {\n  \treturn str.replace(utils_escapeRegExp__pattern, \"\\\\$&\");\n  }\n\n  var converters_readPartialDefinitionComment = readPartialDefinitionComment;\n\n  var startPattern = /^<!--\\s*/,\n      namePattern = /s*>\\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\\s*/,\n      finishPattern = /\\s*-->/,\n      child;\n\n  function readPartialDefinitionComment(parser) {\n  \tvar firstPos = parser.pos,\n  \t    open = parser.standardDelimiters[0],\n  \t    close = parser.standardDelimiters[1],\n  \t    content = undefined,\n  \t    closed = undefined;\n\n  \tif (!parser.matchPattern(startPattern) || !parser.matchString(open)) {\n  \t\tparser.pos = firstPos;\n  \t\treturn null;\n  \t}\n\n  \tvar name = parser.matchPattern(namePattern);\n\n  \twarnOnceIfDebug(\"Inline partial comments are deprecated.\\nUse this...\\n  {{#partial \" + name + \"}} ... {{/partial}}\\n\\n...instead of this:\\n  <!-- {{>\" + name + \"}} --> ... <!-- {{/\" + name + \"}} -->'\");\n\n  \t// make sure the rest of the comment is in the correct place\n  \tif (!parser.matchString(close) || !parser.matchPattern(finishPattern)) {\n  \t\tparser.pos = firstPos;\n  \t\treturn null;\n  \t}\n\n  \tcontent = [];\n\n  \tvar endPattern = new RegExp(\"^<!--\\\\s*\" + utils_escapeRegExp(open) + \"\\\\s*\\\\/\\\\s*\" + name + \"\\\\s*\" + utils_escapeRegExp(close) + \"\\\\s*-->\");\n\n  \tdo {\n  \t\tif (parser.matchPattern(endPattern)) {\n  \t\t\tclosed = true;\n  \t\t} else {\n  \t\t\tchild = parser.read(READERS);\n  \t\t\tif (!child) {\n  \t\t\t\tparser.error(\"expected closing comment ('<!-- \" + open + \"/\" + name + \"\" + close + \" -->')\");\n  \t\t\t}\n\n  \t\t\tcontent.push(child);\n  \t\t}\n  \t} while (!closed);\n\n  \treturn {\n  \t\tt: INLINE_PARTIAL,\n  \t\tf: content,\n  \t\tn: name\n  \t};\n  }\n\n  var converters_readPartialDefinitionSection = readPartialDefinitionSection;\n  var partialDefinitionSectionPattern = /^#\\s*partial\\s+/;\n  function readPartialDefinitionSection(parser) {\n  \tvar start, name, content, child, closed;\n\n  \tstart = parser.pos;\n\n  \tvar delimiters = parser.standardDelimiters;\n\n  \tif (!parser.matchString(delimiters[0])) {\n  \t\treturn null;\n  \t}\n\n  \tif (!parser.matchPattern(partialDefinitionSectionPattern)) {\n  \t\tparser.pos = start;\n  \t\treturn null;\n  \t}\n\n  \tname = parser.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\\-]*/);\n\n  \tif (!name) {\n  \t\tparser.error(\"expected legal partial name\");\n  \t}\n\n  \tif (!parser.matchString(delimiters[1])) {\n  \t\tparser.error(\"Expected closing delimiter '\" + delimiters[1] + \"'\");\n  \t}\n\n  \tcontent = [];\n\n  \tdo {\n  \t\t// TODO clean this up\n  \t\tif (child = section_readClosing(parser, { open: parser.standardDelimiters[0], close: parser.standardDelimiters[1] })) {\n  \t\t\tif (!child.r === \"partial\") {\n  \t\t\t\tparser.error(\"Expected \" + delimiters[0] + \"/partial\" + delimiters[1]);\n  \t\t\t}\n\n  \t\t\tclosed = true;\n  \t\t} else {\n  \t\t\tchild = parser.read(READERS);\n\n  \t\t\tif (!child) {\n  \t\t\t\tparser.error(\"Expected \" + delimiters[0] + \"/partial\" + delimiters[1]);\n  \t\t\t}\n\n  \t\t\tcontent.push(child);\n  \t\t}\n  \t} while (!closed);\n\n  \treturn {\n  \t\tt: INLINE_PARTIAL,\n  \t\tn: name,\n  \t\tf: content\n  \t};\n  }\n\n  var converters_readTemplate = readTemplate;\n  function readTemplate(parser) {\n  \tvar fragment = [];\n  \tvar partials = create(null);\n  \tvar hasPartials = false;\n\n  \tvar preserveWhitespace = parser.preserveWhitespace;\n\n  \twhile (parser.pos < parser.str.length) {\n  \t\tvar pos = parser.pos,\n  \t\t    item = undefined,\n  \t\t    partial = undefined;\n\n  \t\tif (partial = parser.read(PARTIAL_READERS)) {\n  \t\t\tif (partials[partial.n]) {\n  \t\t\t\tparser.pos = pos;\n  \t\t\t\tparser.error(\"Duplicated partial definition\");\n  \t\t\t}\n\n  \t\t\tutils_cleanup(partial.f, parser.stripComments, preserveWhitespace, !preserveWhitespace, !preserveWhitespace);\n\n  \t\t\tpartials[partial.n] = partial.f;\n  \t\t\thasPartials = true;\n  \t\t} else if (item = parser.read(READERS)) {\n  \t\t\tfragment.push(item);\n  \t\t} else {\n  \t\t\tparser.error(\"Unexpected template content\");\n  \t\t}\n  \t}\n\n  \tvar result = {\n  \t\tv: TEMPLATE_VERSION,\n  \t\tt: fragment\n  \t};\n\n  \tif (hasPartials) {\n  \t\tresult.p = partials;\n  \t}\n\n  \treturn result;\n  }\n\n  var _parse = parse;\n\n  var STANDARD_READERS = [mustache_readPartial, mustache_readUnescaped, mustache_readSection, mustache_readYielder, mustache_readInterpolator, readMustacheComment];\n  var TRIPLE_READERS = [mustache_readTriple];\n  var STATIC_READERS = [mustache_readUnescaped, mustache_readSection, mustache_readInterpolator]; // TODO does it make sense to have a static section?\n\n  var StandardParser = undefined;\n  function parse(template, options) {\n  \treturn new StandardParser(template, options || {}).result;\n  }\n\n  var READERS = [converters_readMustache, converters_readHtmlComment, converters_readElement, converters_readText];\n  var PARTIAL_READERS = [converters_readPartialDefinitionComment, converters_readPartialDefinitionSection];\n\n  StandardParser = parse_Parser.extend({\n  \tinit: function (str, options) {\n  \t\tvar tripleDelimiters = options.tripleDelimiters || [\"{{{\", \"}}}\"],\n  \t\t    staticDelimiters = options.staticDelimiters || [\"[[\", \"]]\"],\n  \t\t    staticTripleDelimiters = options.staticTripleDelimiters || [\"[[[\", \"]]]\"];\n\n  \t\tthis.standardDelimiters = options.delimiters || [\"{{\", \"}}\"];\n\n  \t\tthis.tags = [{ isStatic: false, isTriple: false, open: this.standardDelimiters[0], close: this.standardDelimiters[1], readers: STANDARD_READERS }, { isStatic: false, isTriple: true, open: tripleDelimiters[0], close: tripleDelimiters[1], readers: TRIPLE_READERS }, { isStatic: true, isTriple: false, open: staticDelimiters[0], close: staticDelimiters[1], readers: STATIC_READERS }, { isStatic: true, isTriple: true, open: staticTripleDelimiters[0], close: staticTripleDelimiters[1], readers: TRIPLE_READERS }];\n\n  \t\tthis.sortMustacheTags();\n\n  \t\tthis.sectionDepth = 0;\n  \t\tthis.elementStack = [];\n\n  \t\tthis.interpolate = {\n  \t\t\tscript: !options.interpolate || options.interpolate.script !== false,\n  \t\t\tstyle: !options.interpolate || options.interpolate.style !== false\n  \t\t};\n\n  \t\tif (options.sanitize === true) {\n  \t\t\toptions.sanitize = {\n  \t\t\t\t// blacklist from https://code.google.com/p/google-caja/source/browse/trunk/src/com/google/caja/lang/html/html4-elements-whitelist.json\n  \t\t\t\telements: \"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title\".split(\" \"),\n  \t\t\t\teventAttributes: true\n  \t\t\t};\n  \t\t}\n\n  \t\tthis.stripComments = options.stripComments !== false;\n  \t\tthis.preserveWhitespace = options.preserveWhitespace;\n  \t\tthis.sanitizeElements = options.sanitize && options.sanitize.elements;\n  \t\tthis.sanitizeEventAttributes = options.sanitize && options.sanitize.eventAttributes;\n  \t\tthis.includeLinePositions = options.includeLinePositions;\n  \t},\n\n  \tpostProcess: function (result) {\n  \t\t// special case - empty string\n  \t\tif (!result.length) {\n  \t\t\treturn { t: [], v: TEMPLATE_VERSION };\n  \t\t}\n\n  \t\tif (this.sectionDepth > 0) {\n  \t\t\tthis.error(\"A section was left open\");\n  \t\t}\n\n  \t\tutils_cleanup(result[0].t, this.stripComments, this.preserveWhitespace, !this.preserveWhitespace, !this.preserveWhitespace);\n\n  \t\treturn result[0];\n  \t},\n\n  \tconverters: [converters_readTemplate],\n\n  \tsortMustacheTags: function () {\n  \t\t// Sort in order of descending opening delimiter length (longer first),\n  \t\t// to protect against opening delimiters being substrings of each other\n  \t\tthis.tags.sort(function (a, b) {\n  \t\t\treturn b.open.length - a.open.length;\n  \t\t});\n  \t}\n  });\n\n  var parseOptions = [\"preserveWhitespace\", \"sanitize\", \"stripComments\", \"delimiters\", \"tripleDelimiters\", \"interpolate\"];\n\n  var parser = {\n  \tfromId: fromId, isHashedId: isHashedId, isParsed: isParsed, getParseOptions: getParseOptions, createHelper: template_parser__createHelper,\n  \tparse: doParse\n  };\n\n  function template_parser__createHelper(parseOptions) {\n  \tvar helper = create(parser);\n  \thelper.parse = function (template, options) {\n  \t\treturn doParse(template, options || parseOptions);\n  \t};\n  \treturn helper;\n  }\n\n  function doParse(template, parseOptions) {\n  \tif (!_parse) {\n  \t\tthrow new Error(\"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser\");\n  \t}\n\n  \treturn _parse(template, parseOptions || this.options);\n  }\n\n  function fromId(id, options) {\n  \tvar template;\n\n  \tif (!isClient) {\n  \t\tif (options && options.noThrow) {\n  \t\t\treturn;\n  \t\t}\n  \t\tthrow new Error(\"Cannot retrieve template #\" + id + \" as Ractive is not running in a browser.\");\n  \t}\n\n  \tif (isHashedId(id)) {\n  \t\tid = id.substring(1);\n  \t}\n\n  \tif (!(template = document.getElementById(id))) {\n  \t\tif (options && options.noThrow) {\n  \t\t\treturn;\n  \t\t}\n  \t\tthrow new Error(\"Could not find template element with id #\" + id);\n  \t}\n\n  \tif (template.tagName.toUpperCase() !== \"SCRIPT\") {\n  \t\tif (options && options.noThrow) {\n  \t\t\treturn;\n  \t\t}\n  \t\tthrow new Error(\"Template element with id #\" + id + \", must be a <script> element\");\n  \t}\n\n  \treturn \"textContent\" in template ? template.textContent : template.innerHTML;\n  }\n\n  function isHashedId(id) {\n  \treturn id && id[0] === \"#\";\n  }\n\n  function isParsed(template) {\n  \treturn !(typeof template === \"string\");\n  }\n\n  function getParseOptions(ractive) {\n  \t// Could be Ractive or a Component\n  \tif (ractive.defaults) {\n  \t\tractive = ractive.defaults;\n  \t}\n\n  \treturn parseOptions.reduce(function (val, key) {\n  \t\tval[key] = ractive[key];\n  \t\treturn val;\n  \t}, {});\n  }\n\n  var template_parser = parser;\n\n  var templateConfigurator = {\n  \tname: \"template\",\n\n  \textend: function extend(Parent, proto, options) {\n  \t\tvar template;\n\n  \t\t// only assign if exists\n  \t\tif (\"template\" in options) {\n  \t\t\ttemplate = options.template;\n\n  \t\t\tif (typeof template === \"function\") {\n  \t\t\t\tproto.template = template;\n  \t\t\t} else {\n  \t\t\t\tproto.template = parseIfString(template, proto);\n  \t\t\t}\n  \t\t}\n  \t},\n\n  \tinit: function init(Parent, ractive, options) {\n  \t\tvar template, fn;\n\n  \t\t// TODO because of prototypal inheritance, we might just be able to use\n  \t\t// ractive.template, and not bother passing through the Parent object.\n  \t\t// At present that breaks the test mocks' expectations\n  \t\ttemplate = \"template\" in options ? options.template : Parent.prototype.template;\n\n  \t\tif (typeof template === \"function\") {\n  \t\t\tfn = template;\n  \t\t\ttemplate = getDynamicTemplate(ractive, fn);\n\n  \t\t\tractive._config.template = {\n  \t\t\t\tfn: fn,\n  \t\t\t\tresult: template\n  \t\t\t};\n  \t\t}\n\n  \t\ttemplate = parseIfString(template, ractive);\n\n  \t\t// TODO the naming of this is confusing - ractive.template refers to [...],\n  \t\t// but Component.prototype.template refers to {v:1,t:[],p:[]}...\n  \t\t// it's unnecessary, because the developer never needs to access\n  \t\t// ractive.template\n  \t\tractive.template = template.t;\n\n  \t\tif (template.p) {\n  \t\t\textendPartials(ractive.partials, template.p);\n  \t\t}\n  \t},\n\n  \treset: function (ractive) {\n  \t\tvar result = resetValue(ractive),\n  \t\t    parsed;\n\n  \t\tif (result) {\n  \t\t\tparsed = parseIfString(result, ractive);\n\n  \t\t\tractive.template = parsed.t;\n  \t\t\textendPartials(ractive.partials, parsed.p, true);\n\n  \t\t\treturn true;\n  \t\t}\n  \t}\n  };\n\n  function resetValue(ractive) {\n  \tvar initial = ractive._config.template,\n  \t    result;\n\n  \t// If this isn't a dynamic template, there's nothing to do\n  \tif (!initial || !initial.fn) {\n  \t\treturn;\n  \t}\n\n  \tresult = getDynamicTemplate(ractive, initial.fn);\n\n  \t// TODO deep equality check to prevent unnecessary re-rendering\n  \t// in the case of already-parsed templates\n  \tif (result !== initial.result) {\n  \t\tinitial.result = result;\n  \t\tresult = parseIfString(result, ractive);\n  \t\treturn result;\n  \t}\n  }\n\n  function getDynamicTemplate(ractive, fn) {\n  \tvar helper = template_template__createHelper(template_parser.getParseOptions(ractive));\n  \treturn fn.call(ractive, helper);\n  }\n\n  function template_template__createHelper(parseOptions) {\n  \tvar helper = create(template_parser);\n  \thelper.parse = function (template, options) {\n  \t\treturn template_parser.parse(template, options || parseOptions);\n  \t};\n  \treturn helper;\n  }\n\n  function parseIfString(template, ractive) {\n  \tif (typeof template === \"string\") {\n  \t\t// ID of an element containing the template?\n  \t\tif (template[0] === \"#\") {\n  \t\t\ttemplate = template_parser.fromId(template);\n  \t\t}\n\n  \t\ttemplate = _parse(template, template_parser.getParseOptions(ractive));\n  \t}\n\n  \t// Check that the template even exists\n  \telse if (template == undefined) {\n  \t\tthrow new Error(\"The template cannot be \" + template + \".\");\n  \t}\n\n  \t// Check the parsed template has a version at all\n  \telse if (typeof template.v !== \"number\") {\n  \t\tthrow new Error(\"The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.\");\n  \t}\n\n  \t// Check we're using the correct version\n  \telse if (template.v !== TEMPLATE_VERSION) {\n  \t\tthrow new Error(\"Mismatched template version (expected \" + TEMPLATE_VERSION + \", got \" + template.v + \") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app\");\n  \t}\n\n  \treturn template;\n  }\n\n  function extendPartials(existingPartials, newPartials, overwrite) {\n  \tif (!newPartials) return;\n\n  \t// TODO there's an ambiguity here - we need to overwrite in the `reset()`\n  \t// case, but not initially...\n\n  \tfor (var key in newPartials) {\n  \t\tif (overwrite || !existingPartials.hasOwnProperty(key)) {\n  \t\t\texistingPartials[key] = newPartials[key];\n  \t\t}\n  \t}\n  }\n\n  var template_template = templateConfigurator;\n\n  var config_registries__registryNames, Registry, registries;\n\n  config_registries__registryNames = [\"adaptors\", \"components\", \"computed\", \"decorators\", \"easing\", \"events\", \"interpolators\", \"partials\", \"transitions\"];\n\n  Registry = function (name, useDefaults) {\n  \tthis.name = name;\n  \tthis.useDefaults = useDefaults;\n  };\n\n  Registry.prototype = {\n  \tconstructor: Registry,\n\n  \textend: function (Parent, proto, options) {\n  \t\tthis.configure(this.useDefaults ? Parent.defaults : Parent, this.useDefaults ? proto : proto.constructor, options);\n  \t},\n\n  \tinit: function () {},\n\n  \tconfigure: function (Parent, target, options) {\n  \t\tvar name = this.name,\n  \t\t    option = options[name],\n  \t\t    registry;\n\n  \t\tregistry = create(Parent[name]);\n\n  \t\tfor (var key in option) {\n  \t\t\tregistry[key] = option[key];\n  \t\t}\n\n  \t\ttarget[name] = registry;\n  \t},\n\n  \treset: function (ractive) {\n  \t\tvar registry = ractive[this.name];\n  \t\tvar changed = false;\n  \t\tObject.keys(registry).forEach(function (key) {\n  \t\t\tvar item = registry[key];\n  \t\t\tif (item._fn) {\n  \t\t\t\tif (item._fn.isOwner) {\n  \t\t\t\t\tregistry[key] = item._fn;\n  \t\t\t\t} else {\n  \t\t\t\t\tdelete registry[key];\n  \t\t\t\t}\n  \t\t\t\tchanged = true;\n  \t\t\t}\n  \t\t});\n  \t\treturn changed;\n  \t}\n  };\n\n  registries = config_registries__registryNames.map(function (name) {\n  \treturn new Registry(name, name === \"computed\");\n  });\n\n  var config_registries = registries;\n\n  /*this.configure(\n  \tthis.useDefaults ? Parent.defaults : Parent,\n  \tractive,\n  \toptions );*/\n\n  var wrapPrototype = wrap;\n\n  function wrap(parent, name, method) {\n  \tif (!/_super/.test(method)) {\n  \t\treturn method;\n  \t}\n\n  \tvar wrapper = function wrapSuper() {\n  \t\tvar superMethod = getSuperMethod(wrapper._parent, name),\n  \t\t    hasSuper = (\"_super\" in this),\n  \t\t    oldSuper = this._super,\n  \t\t    result;\n\n  \t\tthis._super = superMethod;\n\n  \t\tresult = method.apply(this, arguments);\n\n  \t\tif (hasSuper) {\n  \t\t\tthis._super = oldSuper;\n  \t\t} else {\n  \t\t\tdelete this._super;\n  \t\t}\n\n  \t\treturn result;\n  \t};\n\n  \twrapper._parent = parent;\n  \twrapper._method = method;\n\n  \treturn wrapper;\n  }\n\n  function getSuperMethod(parent, name) {\n  \tvar value, method;\n\n  \tif (name in parent) {\n  \t\tvalue = parent[name];\n\n  \t\tif (typeof value === \"function\") {\n  \t\t\tmethod = value;\n  \t\t} else {\n  \t\t\tmethod = function returnValue() {\n  \t\t\t\treturn value;\n  \t\t\t};\n  \t\t}\n  \t} else {\n  \t\tmethod = noop;\n  \t}\n\n  \treturn method;\n  }\n\n  var config_deprecate = deprecate;\n  function getMessage(deprecated, correct, isError) {\n  \treturn \"options.\" + deprecated + \" has been deprecated in favour of options.\" + correct + \".\" + (isError ? \" You cannot specify both options, please use options.\" + correct + \".\" : \"\");\n  }\n\n  function deprecateOption(options, deprecatedOption, correct) {\n  \tif (deprecatedOption in options) {\n  \t\tif (!(correct in options)) {\n  \t\t\twarnIfDebug(getMessage(deprecatedOption, correct));\n  \t\t\toptions[correct] = options[deprecatedOption];\n  \t\t} else {\n  \t\t\tthrow new Error(getMessage(deprecatedOption, correct, true));\n  \t\t}\n  \t}\n  }\n  function deprecate(options) {\n  \tdeprecateOption(options, \"beforeInit\", \"onconstruct\");\n  \tdeprecateOption(options, \"init\", \"onrender\");\n  \tdeprecateOption(options, \"complete\", \"oncomplete\");\n  \tdeprecateOption(options, \"eventDefinitions\", \"events\");\n\n  \t// Using extend with Component instead of options,\n  \t// like Human.extend( Spider ) means adaptors as a registry\n  \t// gets copied to options. So we have to check if actually an array\n  \tif (isArray(options.adaptors)) {\n  \t\tdeprecateOption(options, \"adaptors\", \"adapt\");\n  \t}\n  }\n\n  var config, order, defaultKeys, custom, isBlacklisted, isStandardKey;\n\n  custom = {\n  \tadapt: custom_adapt,\n  \tcss: css_css,\n  \tdata: custom_data,\n  \ttemplate: template_template\n  };\n\n  defaultKeys = Object.keys(config_defaults);\n\n  isStandardKey = makeObj(defaultKeys.filter(function (key) {\n  \treturn !custom[key];\n  }));\n\n  // blacklisted keys that we don't double extend\n  isBlacklisted = makeObj(defaultKeys.concat(config_registries.map(function (r) {\n  \treturn r.name;\n  })));\n\n  order = [].concat(defaultKeys.filter(function (key) {\n  \treturn !config_registries[key] && !custom[key];\n  }), config_registries, custom.data, custom.template, custom.css);\n\n  config = {\n  \textend: function (Parent, proto, options) {\n  \t\treturn configure(\"extend\", Parent, proto, options);\n  \t},\n\n  \tinit: function (Parent, ractive, options) {\n  \t\treturn configure(\"init\", Parent, ractive, options);\n  \t},\n\n  \treset: function (ractive) {\n  \t\treturn order.filter(function (c) {\n  \t\t\treturn c.reset && c.reset(ractive);\n  \t\t}).map(function (c) {\n  \t\t\treturn c.name;\n  \t\t});\n  \t},\n\n  \t// this defines the order. TODO this isn't used anywhere in the codebase,\n  \t// only in the test suite - should get rid of it\n  \torder: order };\n\n  function configure(method, Parent, target, options) {\n  \tconfig_deprecate(options);\n\n  \tfor (var key in options) {\n  \t\tif (isStandardKey.hasOwnProperty(key)) {\n  \t\t\tvar value = options[key];\n\n  \t\t\t// warn the developer if they passed a function and ignore its value\n\n  \t\t\t// NOTE: we allow some functions on \"el\" because we duck type element lists\n  \t\t\t// and some libraries or ef'ed-up virtual browsers (phantomJS) return a\n  \t\t\t// function object as the result of querySelector methods\n  \t\t\tif (key !== \"el\" && typeof value === \"function\") {\n  \t\t\t\twarnIfDebug(\"\" + key + \" is a Ractive option that does not expect a function and will be ignored\", method === \"init\" ? target : null);\n  \t\t\t} else {\n  \t\t\t\ttarget[key] = value;\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \tconfig_registries.forEach(function (registry) {\n  \t\tregistry[method](Parent, target, options);\n  \t});\n\n  \tcustom_adapt[method](Parent, target, options);\n  \ttemplate_template[method](Parent, target, options);\n  \tcss_css[method](Parent, target, options);\n\n  \textendOtherMethods(Parent.prototype, target, options);\n  }\n\n  function extendOtherMethods(parent, target, options) {\n  \tfor (var key in options) {\n  \t\tif (!isBlacklisted[key] && options.hasOwnProperty(key)) {\n  \t\t\tvar member = options[key];\n\n  \t\t\t// if this is a method that overwrites a method, wrap it:\n  \t\t\tif (typeof member === \"function\") {\n  \t\t\t\tmember = wrapPrototype(parent, key, member);\n  \t\t\t}\n\n  \t\t\ttarget[key] = member;\n  \t\t}\n  \t}\n  }\n\n  function makeObj(array) {\n  \tvar obj = {};\n  \tarray.forEach(function (x) {\n  \t\treturn obj[x] = true;\n  \t});\n  \treturn obj;\n  }\n\n  var config_config = config;\n\n  var prototype_bubble = Fragment$bubble;\n\n  function Fragment$bubble() {\n  \tthis.dirtyValue = this.dirtyArgs = true;\n\n  \tif (this.bound && typeof this.owner.bubble === \"function\") {\n  \t\tthis.owner.bubble();\n  \t}\n  }\n\n  var Fragment_prototype_detach = Fragment$detach;\n\n  function Fragment$detach() {\n  \tvar docFrag;\n\n  \tif (this.items.length === 1) {\n  \t\treturn this.items[0].detach();\n  \t}\n\n  \tdocFrag = document.createDocumentFragment();\n\n  \tthis.items.forEach(function (item) {\n  \t\tvar node = item.detach();\n\n  \t\t// TODO The if {...} wasn't previously required - it is now, because we're\n  \t\t// forcibly detaching everything to reorder sections after an update. That's\n  \t\t// a non-ideal brute force approach, implemented to get all the tests to pass\n  \t\t// - as soon as it's replaced with something more elegant, this should\n  \t\t// revert to `docFrag.appendChild( item.detach() )`\n  \t\tif (node) {\n  \t\t\tdocFrag.appendChild(node);\n  \t\t}\n  \t});\n\n  \treturn docFrag;\n  }\n\n  var Fragment_prototype_find = Fragment$find;\n\n  function Fragment$find(selector) {\n  \tvar i, len, item, queryResult;\n\n  \tif (this.items) {\n  \t\tlen = this.items.length;\n  \t\tfor (i = 0; i < len; i += 1) {\n  \t\t\titem = this.items[i];\n\n  \t\t\tif (item.find && (queryResult = item.find(selector))) {\n  \t\t\t\treturn queryResult;\n  \t\t\t}\n  \t\t}\n\n  \t\treturn null;\n  \t}\n  }\n\n  var Fragment_prototype_findAll = Fragment$findAll;\n\n  function Fragment$findAll(selector, query) {\n  \tvar i, len, item;\n\n  \tif (this.items) {\n  \t\tlen = this.items.length;\n  \t\tfor (i = 0; i < len; i += 1) {\n  \t\t\titem = this.items[i];\n\n  \t\t\tif (item.findAll) {\n  \t\t\t\titem.findAll(selector, query);\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \treturn query;\n  }\n\n  var Fragment_prototype_findAllComponents = Fragment$findAllComponents;\n\n  function Fragment$findAllComponents(selector, query) {\n  \tvar i, len, item;\n\n  \tif (this.items) {\n  \t\tlen = this.items.length;\n  \t\tfor (i = 0; i < len; i += 1) {\n  \t\t\titem = this.items[i];\n\n  \t\t\tif (item.findAllComponents) {\n  \t\t\t\titem.findAllComponents(selector, query);\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \treturn query;\n  }\n\n  var Fragment_prototype_findComponent = Fragment$findComponent;\n\n  function Fragment$findComponent(selector) {\n  \tvar len, i, item, queryResult;\n\n  \tif (this.items) {\n  \t\tlen = this.items.length;\n  \t\tfor (i = 0; i < len; i += 1) {\n  \t\t\titem = this.items[i];\n\n  \t\t\tif (item.findComponent && (queryResult = item.findComponent(selector))) {\n  \t\t\t\treturn queryResult;\n  \t\t\t}\n  \t\t}\n\n  \t\treturn null;\n  \t}\n  }\n\n  var prototype_findNextNode = Fragment$findNextNode;\n\n  function Fragment$findNextNode(item) {\n  \tvar index = item.index,\n  \t    node;\n\n  \tif (this.items[index + 1]) {\n  \t\tnode = this.items[index + 1].firstNode();\n  \t}\n\n  \t// if this is the root fragment, and there are no more items,\n  \t// it means we're at the end...\n  \telse if (this.owner === this.root) {\n  \t\tif (!this.owner.component) {\n  \t\t\t// TODO but something else could have been appended to\n  \t\t\t// this.root.el, no?\n  \t\t\tnode = null;\n  \t\t}\n\n  \t\t// ...unless this is a component\n  \t\telse {\n  \t\t\tnode = this.owner.component.findNextNode();\n  \t\t}\n  \t} else {\n  \t\tnode = this.owner.findNextNode(this);\n  \t}\n\n  \treturn node;\n  }\n\n  var prototype_firstNode = Fragment$firstNode;\n\n  function Fragment$firstNode() {\n  \tif (this.items && this.items[0]) {\n  \t\treturn this.items[0].firstNode();\n  \t}\n\n  \treturn null;\n  }\n\n  var shared_processItems = processItems;\n\n  function processItems(items, values, guid, counter) {\n  \tcounter = counter || 0;\n\n  \treturn items.map(function (item) {\n  \t\tvar placeholderId, wrapped, value;\n\n  \t\tif (item.text) {\n  \t\t\treturn item.text;\n  \t\t}\n\n  \t\tif (item.fragments) {\n  \t\t\treturn item.fragments.map(function (fragment) {\n  \t\t\t\treturn processItems(fragment.items, values, guid, counter);\n  \t\t\t}).join(\"\");\n  \t\t}\n\n  \t\tplaceholderId = guid + \"-\" + counter++;\n\n  \t\tif (item.keypath && (wrapped = item.root.viewmodel.wrapped[item.keypath.str])) {\n  \t\t\tvalue = wrapped.value;\n  \t\t} else {\n  \t\t\tvalue = item.getValue();\n  \t\t}\n\n  \t\tvalues[placeholderId] = value;\n\n  \t\treturn \"${\" + placeholderId + \"}\";\n  \t}).join(\"\");\n  }\n\n  var getArgsList = Fragment$getArgsList;\n  function Fragment$getArgsList() {\n  \tvar values, source, parsed, result;\n\n  \tif (this.dirtyArgs) {\n  \t\tsource = shared_processItems(this.items, values = {}, this.root._guid);\n  \t\tparsed = parseJSON(\"[\" + source + \"]\", values);\n\n  \t\tif (!parsed) {\n  \t\t\tresult = [this.toString()];\n  \t\t} else {\n  \t\t\tresult = parsed.value;\n  \t\t}\n\n  \t\tthis.argsList = result;\n  \t\tthis.dirtyArgs = false;\n  \t}\n\n  \treturn this.argsList;\n  }\n\n  var getNode = Fragment$getNode;\n\n  function Fragment$getNode() {\n  \tvar fragment = this;\n\n  \tdo {\n  \t\tif (fragment.pElement) {\n  \t\t\treturn fragment.pElement.node;\n  \t\t}\n  \t} while (fragment = fragment.parent);\n\n  \treturn this.root.detached || this.root.el;\n  }\n\n  var prototype_getValue = Fragment$getValue;\n  function Fragment$getValue() {\n  \tvar values, source, parsed, result;\n\n  \tif (this.dirtyValue) {\n  \t\tsource = shared_processItems(this.items, values = {}, this.root._guid);\n  \t\tparsed = parseJSON(source, values);\n\n  \t\tif (!parsed) {\n  \t\t\tresult = this.toString();\n  \t\t} else {\n  \t\t\tresult = parsed.value;\n  \t\t}\n\n  \t\tthis.value = result;\n  \t\tthis.dirtyValue = false;\n  \t}\n\n  \treturn this.value;\n  }\n\n  var shared_detach = function () {\n  \treturn detachNode(this.node);\n  };\n\n  var Text = function (options) {\n  \tthis.type = TEXT;\n  \tthis.text = options.template;\n  };\n\n  Text.prototype = {\n  \tdetach: shared_detach,\n\n  \tfirstNode: function () {\n  \t\treturn this.node;\n  \t},\n\n  \trender: function () {\n  \t\tif (!this.node) {\n  \t\t\tthis.node = document.createTextNode(this.text);\n  \t\t}\n\n  \t\treturn this.node;\n  \t},\n\n  \ttoString: function (escape) {\n  \t\treturn escape ? escapeHtml(this.text) : this.text;\n  \t},\n\n  \tunrender: function (shouldDestroy) {\n  \t\tif (shouldDestroy) {\n  \t\t\treturn this.detach();\n  \t\t}\n  \t}\n  };\n\n  var items_Text = Text;\n\n  var shared_unbind = shared_unbind__unbind;\n\n  function shared_unbind__unbind() {\n  \tif (this.registered) {\n  \t\t// this was registered as a dependant\n  \t\tthis.root.viewmodel.unregister(this.keypath, this);\n  \t}\n\n  \tif (this.resolver) {\n  \t\tthis.resolver.unbind();\n  \t}\n  }\n\n  var Mustache_getValue = Mustache$getValue;\n\n  function Mustache$getValue() {\n  \treturn this.value;\n  }\n\n  var ReferenceResolver = function (owner, ref, callback) {\n  \tvar keypath;\n\n  \tthis.ref = ref;\n  \tthis.resolved = false;\n\n  \tthis.root = owner.root;\n  \tthis.parentFragment = owner.parentFragment;\n  \tthis.callback = callback;\n\n  \tkeypath = shared_resolveRef(owner.root, ref, owner.parentFragment);\n  \tif (keypath != undefined) {\n  \t\tthis.resolve(keypath);\n  \t} else {\n  \t\tglobal_runloop.addUnresolved(this);\n  \t}\n  };\n\n  ReferenceResolver.prototype = {\n  \tresolve: function (keypath) {\n  \t\tif (this.keypath && !keypath) {\n  \t\t\t// it was resolved, and now it's not. Can happen if e.g. `bar` in\n  \t\t\t// `{{foo[bar]}}` becomes undefined\n  \t\t\tglobal_runloop.addUnresolved(this);\n  \t\t}\n\n  \t\tthis.resolved = true;\n\n  \t\tthis.keypath = keypath;\n  \t\tthis.callback(keypath);\n  \t},\n\n  \tforceResolution: function () {\n  \t\tthis.resolve(getKeypath(this.ref));\n  \t},\n\n  \trebind: function (oldKeypath, newKeypath) {\n  \t\tvar keypath;\n\n  \t\tif (this.keypath != undefined) {\n  \t\t\tkeypath = this.keypath.replace(oldKeypath, newKeypath);\n  \t\t\t// was a new keypath created?\n  \t\t\tif (keypath !== undefined) {\n  \t\t\t\t// resolve it\n  \t\t\t\tthis.resolve(keypath);\n  \t\t\t}\n  \t\t}\n  \t},\n\n  \tunbind: function () {\n  \t\tif (!this.resolved) {\n  \t\t\tglobal_runloop.removeUnresolved(this);\n  \t\t}\n  \t}\n  };\n\n  var Resolvers_ReferenceResolver = ReferenceResolver;\n\n  var SpecialResolver = function (owner, ref, callback) {\n  \tthis.parentFragment = owner.parentFragment;\n  \tthis.ref = ref;\n  \tthis.callback = callback;\n\n  \tthis.rebind();\n  };\n\n  var props = {\n  \t\"@keypath\": { prefix: \"c\", prop: [\"context\"] },\n  \t\"@index\": { prefix: \"i\", prop: [\"index\"] },\n  \t\"@key\": { prefix: \"k\", prop: [\"key\", \"index\"] }\n  };\n\n  function getProp(target, prop) {\n  \tvar value;\n  \tfor (var i = 0; i < prop.prop.length; i++) {\n  \t\tif ((value = target[prop.prop[i]]) !== undefined) {\n  \t\t\treturn value;\n  \t\t}\n  \t}\n  }\n\n  SpecialResolver.prototype = {\n  \trebind: function () {\n  \t\tvar ref = this.ref,\n  \t\t    fragment = this.parentFragment,\n  \t\t    prop = props[ref],\n  \t\t    value;\n\n  \t\tif (!prop) {\n  \t\t\tthrow new Error(\"Unknown special reference \\\"\" + ref + \"\\\" - valid references are @index, @key and @keypath\");\n  \t\t}\n\n  \t\t// have we already found the nearest parent?\n  \t\tif (this.cached) {\n  \t\t\treturn this.callback(getKeypath(\"@\" + prop.prefix + getProp(this.cached, prop)));\n  \t\t}\n\n  \t\t// special case for indices, which may cross component boundaries\n  \t\tif (prop.prop.indexOf(\"index\") !== -1 || prop.prop.indexOf(\"key\") !== -1) {\n  \t\t\twhile (fragment) {\n  \t\t\t\tif (fragment.owner.currentSubtype === SECTION_EACH && (value = getProp(fragment, prop)) !== undefined) {\n  \t\t\t\t\tthis.cached = fragment;\n\n  \t\t\t\t\tfragment.registerIndexRef(this);\n\n  \t\t\t\t\treturn this.callback(getKeypath(\"@\" + prop.prefix + value));\n  \t\t\t\t}\n\n  \t\t\t\t// watch for component boundaries\n  \t\t\t\tif (!fragment.parent && fragment.owner && fragment.owner.component && fragment.owner.component.parentFragment && !fragment.owner.component.instance.isolated) {\n  \t\t\t\t\tfragment = fragment.owner.component.parentFragment;\n  \t\t\t\t} else {\n  \t\t\t\t\tfragment = fragment.parent;\n  \t\t\t\t}\n  \t\t\t}\n  \t\t} else {\n  \t\t\twhile (fragment) {\n  \t\t\t\tif ((value = getProp(fragment, prop)) !== undefined) {\n  \t\t\t\t\treturn this.callback(getKeypath(\"@\" + prop.prefix + value.str));\n  \t\t\t\t}\n\n  \t\t\t\tfragment = fragment.parent;\n  \t\t\t}\n  \t\t}\n  \t},\n\n  \tunbind: function () {\n  \t\tif (this.cached) {\n  \t\t\tthis.cached.unregisterIndexRef(this);\n  \t\t}\n  \t}\n  };\n\n  var Resolvers_SpecialResolver = SpecialResolver;\n\n  var IndexResolver = function (owner, ref, callback) {\n  \tthis.parentFragment = owner.parentFragment;\n  \tthis.ref = ref;\n  \tthis.callback = callback;\n\n  \tref.ref.fragment.registerIndexRef(this);\n\n  \tthis.rebind();\n  };\n\n  IndexResolver.prototype = {\n  \trebind: function () {\n  \t\tvar index,\n  \t\t    ref = this.ref.ref;\n\n  \t\tif (ref.ref.t === \"k\") {\n  \t\t\tindex = \"k\" + ref.fragment.key;\n  \t\t} else {\n  \t\t\tindex = \"i\" + ref.fragment.index;\n  \t\t}\n\n  \t\tif (index !== undefined) {\n  \t\t\tthis.callback(getKeypath(\"@\" + index));\n  \t\t}\n  \t},\n\n  \tunbind: function () {\n  \t\tthis.ref.ref.fragment.unregisterIndexRef(this);\n  \t}\n  };\n\n  var Resolvers_IndexResolver = IndexResolver;\n\n  var Resolvers_findIndexRefs = findIndexRefs;\n\n  function findIndexRefs(fragment, refName) {\n  \tvar result = {},\n  \t    refs,\n  \t    fragRefs,\n  \t    ref,\n  \t    i,\n  \t    owner,\n  \t    hit = false;\n\n  \tif (!refName) {\n  \t\tresult.refs = refs = {};\n  \t}\n\n  \twhile (fragment) {\n  \t\tif ((owner = fragment.owner) && (fragRefs = owner.indexRefs)) {\n\n  \t\t\t// we're looking for a particular ref, and it's here\n  \t\t\tif (refName && (ref = owner.getIndexRef(refName))) {\n  \t\t\t\tresult.ref = {\n  \t\t\t\t\tfragment: fragment,\n  \t\t\t\t\tref: ref\n  \t\t\t\t};\n  \t\t\t\treturn result;\n  \t\t\t}\n\n  \t\t\t// we're collecting refs up-tree\n  \t\t\telse if (!refName) {\n  \t\t\t\tfor (i in fragRefs) {\n  \t\t\t\t\tref = fragRefs[i];\n\n  \t\t\t\t\t// don't overwrite existing refs - they should shadow parents\n  \t\t\t\t\tif (!refs[ref.n]) {\n  \t\t\t\t\t\thit = true;\n  \t\t\t\t\t\trefs[ref.n] = {\n  \t\t\t\t\t\t\tfragment: fragment,\n  \t\t\t\t\t\t\tref: ref\n  \t\t\t\t\t\t};\n  \t\t\t\t\t}\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n\n  \t\t// watch for component boundaries\n  \t\tif (!fragment.parent && fragment.owner && fragment.owner.component && fragment.owner.component.parentFragment && !fragment.owner.component.instance.isolated) {\n  \t\t\tresult.componentBoundary = true;\n  \t\t\tfragment = fragment.owner.component.parentFragment;\n  \t\t} else {\n  \t\t\tfragment = fragment.parent;\n  \t\t}\n  \t}\n\n  \tif (!hit) {\n  \t\treturn undefined;\n  \t} else {\n  \t\treturn result;\n  \t}\n  }\n\n  findIndexRefs.resolve = function resolve(indices) {\n  \tvar refs = {},\n  \t    k,\n  \t    ref;\n\n  \tfor (k in indices.refs) {\n  \t\tref = indices.refs[k];\n  \t\trefs[ref.ref.n] = ref.ref.t === \"k\" ? ref.fragment.key : ref.fragment.index;\n  \t}\n\n  \treturn refs;\n  };\n\n  var Resolvers_createReferenceResolver = createReferenceResolver;\n  function createReferenceResolver(owner, ref, callback) {\n  \tvar indexRef;\n\n  \tif (ref.charAt(0) === \"@\") {\n  \t\treturn new Resolvers_SpecialResolver(owner, ref, callback);\n  \t}\n\n  \tif (indexRef = Resolvers_findIndexRefs(owner.parentFragment, ref)) {\n  \t\treturn new Resolvers_IndexResolver(owner, indexRef, callback);\n  \t}\n\n  \treturn new Resolvers_ReferenceResolver(owner, ref, callback);\n  }\n\n  var shared_getFunctionFromString = getFunctionFromString;\n  var cache = {};\n  function getFunctionFromString(str, i) {\n  \tvar fn, args;\n\n  \tif (cache[str]) {\n  \t\treturn cache[str];\n  \t}\n\n  \targs = [];\n  \twhile (i--) {\n  \t\targs[i] = \"_\" + i;\n  \t}\n\n  \tfn = new Function(args.join(\",\"), \"return(\" + str + \")\");\n\n  \tcache[str] = fn;\n  \treturn fn;\n  }\n\n  var ExpressionResolver,\n      Resolvers_ExpressionResolver__bind = Function.prototype.bind;\n\n  ExpressionResolver = function (owner, parentFragment, expression, callback) {\n  \tvar _this = this;\n\n  \tvar ractive;\n\n  \tractive = owner.root;\n\n  \tthis.root = ractive;\n  \tthis.parentFragment = parentFragment;\n  \tthis.callback = callback;\n  \tthis.owner = owner;\n  \tthis.str = expression.s;\n  \tthis.keypaths = [];\n\n  \t// Create resolvers for each reference\n  \tthis.pending = expression.r.length;\n  \tthis.refResolvers = expression.r.map(function (ref, i) {\n  \t\treturn Resolvers_createReferenceResolver(_this, ref, function (keypath) {\n  \t\t\t_this.resolve(i, keypath);\n  \t\t});\n  \t});\n\n  \tthis.ready = true;\n  \tthis.bubble();\n  };\n\n  ExpressionResolver.prototype = {\n  \tbubble: function () {\n  \t\tif (!this.ready) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tthis.uniqueString = getUniqueString(this.str, this.keypaths);\n  \t\tthis.keypath = createExpressionKeypath(this.uniqueString);\n\n  \t\tthis.createEvaluator();\n  \t\tthis.callback(this.keypath);\n  \t},\n\n  \tunbind: function () {\n  \t\tvar resolver;\n\n  \t\twhile (resolver = this.refResolvers.pop()) {\n  \t\t\tresolver.unbind();\n  \t\t}\n  \t},\n\n  \tresolve: function (index, keypath) {\n  \t\tthis.keypaths[index] = keypath;\n  \t\tthis.bubble();\n  \t},\n\n  \tcreateEvaluator: function () {\n  \t\tvar _this = this;\n\n  \t\tvar computation, valueGetters, signature, keypath, fn;\n\n  \t\tkeypath = this.keypath;\n  \t\tcomputation = this.root.viewmodel.computations[keypath.str];\n\n  \t\t// only if it doesn't exist yet!\n  \t\tif (!computation) {\n  \t\t\tfn = shared_getFunctionFromString(this.str, this.refResolvers.length);\n\n  \t\t\tvalueGetters = this.keypaths.map(function (keypath) {\n  \t\t\t\tvar value;\n\n  \t\t\t\tif (keypath === \"undefined\") {\n  \t\t\t\t\treturn function () {\n  \t\t\t\t\t\treturn undefined;\n  \t\t\t\t\t};\n  \t\t\t\t}\n\n  \t\t\t\t// 'special' keypaths encode a value\n  \t\t\t\tif (keypath.isSpecial) {\n  \t\t\t\t\tvalue = keypath.value;\n  \t\t\t\t\treturn function () {\n  \t\t\t\t\t\treturn value;\n  \t\t\t\t\t};\n  \t\t\t\t}\n\n  \t\t\t\treturn function () {\n  \t\t\t\t\tvar value = _this.root.viewmodel.get(keypath, { noUnwrap: true, fullRootGet: true });\n  \t\t\t\t\tif (typeof value === \"function\") {\n  \t\t\t\t\t\tvalue = wrapFunction(value, _this.root);\n  \t\t\t\t\t}\n  \t\t\t\t\treturn value;\n  \t\t\t\t};\n  \t\t\t});\n\n  \t\t\tsignature = {\n  \t\t\t\tdeps: this.keypaths.filter(isValidDependency),\n  \t\t\t\tgetter: function () {\n  \t\t\t\t\tvar args = valueGetters.map(call);\n  \t\t\t\t\treturn fn.apply(null, args);\n  \t\t\t\t}\n  \t\t\t};\n\n  \t\t\tcomputation = this.root.viewmodel.compute(keypath, signature);\n  \t\t} else {\n  \t\t\tthis.root.viewmodel.mark(keypath);\n  \t\t}\n  \t},\n\n  \trebind: function (oldKeypath, newKeypath) {\n  \t\t// TODO only bubble once, no matter how many references are affected by the rebind\n  \t\tthis.refResolvers.forEach(function (r) {\n  \t\t\treturn r.rebind(oldKeypath, newKeypath);\n  \t\t});\n  \t}\n  };\n\n  var Resolvers_ExpressionResolver = ExpressionResolver;\n\n  function call(value) {\n  \treturn value.call();\n  }\n\n  function getUniqueString(str, keypaths) {\n  \t// get string that is unique to this expression\n  \treturn str.replace(/_([0-9]+)/g, function (match, $1) {\n  \t\tvar keypath, value;\n\n  \t\t// make sure we're not replacing a non-keypath _[0-9]\n  \t\tif (+$1 >= keypaths.length) {\n  \t\t\treturn \"_\" + $1;\n  \t\t}\n\n  \t\tkeypath = keypaths[$1];\n\n  \t\tif (keypath === undefined) {\n  \t\t\treturn \"undefined\";\n  \t\t}\n\n  \t\tif (keypath.isSpecial) {\n  \t\t\tvalue = keypath.value;\n  \t\t\treturn typeof value === \"number\" ? value : \"\\\"\" + value + \"\\\"\";\n  \t\t}\n\n  \t\treturn keypath.str;\n  \t});\n  }\n\n  function createExpressionKeypath(uniqueString) {\n  \t// Sanitize by removing any periods or square brackets. Otherwise\n  \t// we can't split the keypath into keys!\n  \t// Remove asterisks too, since they mess with pattern observers\n  \treturn getKeypath(\"${\" + uniqueString.replace(/[\\.\\[\\]]/g, \"-\").replace(/\\*/, \"#MUL#\") + \"}\");\n  }\n\n  function isValidDependency(keypath) {\n  \treturn keypath !== undefined && keypath[0] !== \"@\";\n  }\n\n  function wrapFunction(fn, ractive) {\n  \tvar wrapped, prop, key;\n\n  \tif (fn.__ractive_nowrap) {\n  \t\treturn fn;\n  \t}\n\n  \tprop = \"__ractive_\" + ractive._guid;\n  \twrapped = fn[prop];\n\n  \tif (wrapped) {\n  \t\treturn wrapped;\n  \t} else if (/this/.test(fn.toString())) {\n  \t\tdefineProperty(fn, prop, {\n  \t\t\tvalue: Resolvers_ExpressionResolver__bind.call(fn, ractive),\n  \t\t\tconfigurable: true\n  \t\t});\n\n  \t\t// Add properties/methods to wrapped function\n  \t\tfor (key in fn) {\n  \t\t\tif (fn.hasOwnProperty(key)) {\n  \t\t\t\tfn[prop][key] = fn[key];\n  \t\t\t}\n  \t\t}\n\n  \t\tractive._boundFunctions.push({\n  \t\t\tfn: fn,\n  \t\t\tprop: prop\n  \t\t});\n\n  \t\treturn fn[prop];\n  \t}\n\n  \tdefineProperty(fn, \"__ractive_nowrap\", {\n  \t\tvalue: fn\n  \t});\n\n  \treturn fn.__ractive_nowrap;\n  }\n\n  var MemberResolver = function (template, resolver, parentFragment) {\n  \tvar _this = this;\n\n  \tthis.resolver = resolver;\n  \tthis.root = resolver.root;\n  \tthis.parentFragment = parentFragment;\n  \tthis.viewmodel = resolver.root.viewmodel;\n\n  \tif (typeof template === \"string\") {\n  \t\tthis.value = template;\n  \t}\n\n  \t// Simple reference?\n  \telse if (template.t === REFERENCE) {\n  \t\tthis.refResolver = Resolvers_createReferenceResolver(this, template.n, function (keypath) {\n  \t\t\t_this.resolve(keypath);\n  \t\t});\n  \t}\n\n  \t// Otherwise we have an expression in its own right\n  \telse {\n  \t\tnew Resolvers_ExpressionResolver(resolver, parentFragment, template, function (keypath) {\n  \t\t\t_this.resolve(keypath);\n  \t\t});\n  \t}\n  };\n\n  MemberResolver.prototype = {\n  \tresolve: function (keypath) {\n  \t\tif (this.keypath) {\n  \t\t\tthis.viewmodel.unregister(this.keypath, this);\n  \t\t}\n\n  \t\tthis.keypath = keypath;\n  \t\tthis.value = this.viewmodel.get(keypath);\n\n  \t\tthis.bind();\n\n  \t\tthis.resolver.bubble();\n  \t},\n\n  \tbind: function () {\n  \t\tthis.viewmodel.register(this.keypath, this);\n  \t},\n\n  \trebind: function (oldKeypath, newKeypath) {\n  \t\tif (this.refResolver) {\n  \t\t\tthis.refResolver.rebind(oldKeypath, newKeypath);\n  \t\t}\n  \t},\n\n  \tsetValue: function (value) {\n  \t\tthis.value = value;\n  \t\tthis.resolver.bubble();\n  \t},\n\n  \tunbind: function () {\n  \t\tif (this.keypath) {\n  \t\t\tthis.viewmodel.unregister(this.keypath, this);\n  \t\t}\n\n  \t\tif (this.refResolver) {\n  \t\t\tthis.refResolver.unbind();\n  \t\t}\n  \t},\n\n  \tforceResolution: function () {\n  \t\tif (this.refResolver) {\n  \t\t\tthis.refResolver.forceResolution();\n  \t\t}\n  \t}\n  };\n\n  var ReferenceExpressionResolver_MemberResolver = MemberResolver;\n\n  var ReferenceExpressionResolver = function (mustache, template, callback) {\n  \tvar _this = this;\n\n  \tvar ractive, ref, keypath, parentFragment;\n\n  \tthis.parentFragment = parentFragment = mustache.parentFragment;\n  \tthis.root = ractive = mustache.root;\n  \tthis.mustache = mustache;\n\n  \tthis.ref = ref = template.r;\n  \tthis.callback = callback;\n\n  \tthis.unresolved = [];\n\n  \t// Find base keypath\n  \tif (keypath = shared_resolveRef(ractive, ref, parentFragment)) {\n  \t\tthis.base = keypath;\n  \t} else {\n  \t\tthis.baseResolver = new Resolvers_ReferenceResolver(this, ref, function (keypath) {\n  \t\t\t_this.base = keypath;\n  \t\t\t_this.baseResolver = null;\n  \t\t\t_this.bubble();\n  \t\t});\n  \t}\n\n  \t// Find values for members, or mark them as unresolved\n  \tthis.members = template.m.map(function (template) {\n  \t\treturn new ReferenceExpressionResolver_MemberResolver(template, _this, parentFragment);\n  \t});\n\n  \tthis.ready = true;\n  \tthis.bubble(); // trigger initial resolution if possible\n  };\n\n  ReferenceExpressionResolver.prototype = {\n  \tgetKeypath: function () {\n  \t\tvar values = this.members.map(ReferenceExpressionResolver_ReferenceExpressionResolver__getValue);\n\n  \t\tif (!values.every(isDefined) || this.baseResolver) {\n  \t\t\treturn null;\n  \t\t}\n\n  \t\treturn this.base.join(values.join(\".\"));\n  \t},\n\n  \tbubble: function () {\n  \t\tif (!this.ready || this.baseResolver) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tthis.callback(this.getKeypath());\n  \t},\n\n  \tunbind: function () {\n  \t\tthis.members.forEach(methodCallers__unbind);\n  \t},\n\n  \trebind: function (oldKeypath, newKeypath) {\n  \t\tvar changed;\n\n  \t\tif (this.base) {\n  \t\t\tvar newBase = this.base.replace(oldKeypath, newKeypath);\n  \t\t\tif (newBase && newBase !== this.base) {\n  \t\t\t\tthis.base = newBase;\n  \t\t\t\tchanged = true;\n  \t\t\t}\n  \t\t}\n\n  \t\tthis.members.forEach(function (members) {\n  \t\t\tif (members.rebind(oldKeypath, newKeypath)) {\n  \t\t\t\tchanged = true;\n  \t\t\t}\n  \t\t});\n\n  \t\tif (changed) {\n  \t\t\tthis.bubble();\n  \t\t}\n  \t},\n\n  \tforceResolution: function () {\n  \t\tif (this.baseResolver) {\n  \t\t\tthis.base = getKeypath(this.ref);\n\n  \t\t\tthis.baseResolver.unbind();\n  \t\t\tthis.baseResolver = null;\n  \t\t}\n\n  \t\tthis.members.forEach(forceResolution);\n  \t\tthis.bubble();\n  \t}\n  };\n\n  function ReferenceExpressionResolver_ReferenceExpressionResolver__getValue(member) {\n  \treturn member.value;\n  }\n\n  function isDefined(value) {\n  \treturn value != undefined;\n  }\n\n  function forceResolution(member) {\n  \tmember.forceResolution();\n  }\n\n  var ReferenceExpressionResolver_ReferenceExpressionResolver = ReferenceExpressionResolver;\n\n  var Mustache_initialise = Mustache$init;\n  function Mustache$init(mustache, options) {\n\n  \tvar ref, parentFragment, template;\n\n  \tparentFragment = options.parentFragment;\n  \ttemplate = options.template;\n\n  \tmustache.root = parentFragment.root;\n  \tmustache.parentFragment = parentFragment;\n  \tmustache.pElement = parentFragment.pElement;\n\n  \tmustache.template = options.template;\n  \tmustache.index = options.index || 0;\n  \tmustache.isStatic = options.template.s;\n\n  \tmustache.type = options.template.t;\n\n  \tmustache.registered = false;\n\n  \t// if this is a simple mustache, with a reference, we just need to resolve\n  \t// the reference to a keypath\n  \tif (ref = template.r) {\n  \t\tmustache.resolver = Resolvers_createReferenceResolver(mustache, ref, resolve);\n  \t}\n\n  \t// if it's an expression, we have a bit more work to do\n  \tif (options.template.x) {\n  \t\tmustache.resolver = new Resolvers_ExpressionResolver(mustache, parentFragment, options.template.x, resolveAndRebindChildren);\n  \t}\n\n  \tif (options.template.rx) {\n  \t\tmustache.resolver = new ReferenceExpressionResolver_ReferenceExpressionResolver(mustache, options.template.rx, resolveAndRebindChildren);\n  \t}\n\n  \t// Special case - inverted sections\n  \tif (mustache.template.n === SECTION_UNLESS && !mustache.hasOwnProperty(\"value\")) {\n  \t\tmustache.setValue(undefined);\n  \t}\n\n  \tfunction resolve(keypath) {\n  \t\tmustache.resolve(keypath);\n  \t}\n\n  \tfunction resolveAndRebindChildren(newKeypath) {\n  \t\tvar oldKeypath = mustache.keypath;\n\n  \t\tif (newKeypath != oldKeypath) {\n  \t\t\tmustache.resolve(newKeypath);\n\n  \t\t\tif (oldKeypath !== undefined) {\n  \t\t\t\tmustache.fragments && mustache.fragments.forEach(function (f) {\n  \t\t\t\t\tf.rebind(oldKeypath, newKeypath);\n  \t\t\t\t});\n  \t\t\t}\n  \t\t}\n  \t}\n  }\n\n  var Mustache_resolve = Mustache$resolve;\n\n  function Mustache$resolve(keypath) {\n  \tvar wasResolved, value, twowayBinding;\n\n  \t// 'Special' keypaths, e.g. @foo or @7, encode a value\n  \tif (keypath && keypath.isSpecial) {\n  \t\tthis.keypath = keypath;\n  \t\tthis.setValue(keypath.value);\n  \t\treturn;\n  \t}\n\n  \t// If we resolved previously, we need to unregister\n  \tif (this.registered) {\n  \t\t// undefined or null\n  \t\tthis.root.viewmodel.unregister(this.keypath, this);\n  \t\tthis.registered = false;\n\n  \t\twasResolved = true;\n  \t}\n\n  \tthis.keypath = keypath;\n\n  \t// If the new keypath exists, we need to register\n  \t// with the viewmodel\n  \tif (keypath != undefined) {\n  \t\t// undefined or null\n  \t\tvalue = this.root.viewmodel.get(keypath);\n  \t\tthis.root.viewmodel.register(keypath, this);\n\n  \t\tthis.registered = true;\n  \t}\n\n  \t// Either way we need to queue up a render (`value`\n  \t// will be `undefined` if there's no keypath)\n  \tthis.setValue(value);\n\n  \t// Two-way bindings need to point to their new target keypath\n  \tif (wasResolved && (twowayBinding = this.twowayBinding)) {\n  \t\ttwowayBinding.rebound();\n  \t}\n  }\n\n  var Mustache_rebind = Mustache$rebind;\n\n  function Mustache$rebind(oldKeypath, newKeypath) {\n  \t// Children first\n  \tif (this.fragments) {\n  \t\tthis.fragments.forEach(function (f) {\n  \t\t\treturn f.rebind(oldKeypath, newKeypath);\n  \t\t});\n  \t}\n\n  \t// Expression mustache?\n  \tif (this.resolver) {\n  \t\tthis.resolver.rebind(oldKeypath, newKeypath);\n  \t}\n  }\n\n  var Mustache = {\n  \tgetValue: Mustache_getValue,\n  \tinit: Mustache_initialise,\n  \tresolve: Mustache_resolve,\n  \trebind: Mustache_rebind\n  };\n\n  var Interpolator = function (options) {\n  \tthis.type = INTERPOLATOR;\n  \tMustache.init(this, options);\n  };\n\n  Interpolator.prototype = {\n  \tupdate: function () {\n  \t\tthis.node.data = this.value == undefined ? \"\" : this.value;\n  \t},\n  \tresolve: Mustache.resolve,\n  \trebind: Mustache.rebind,\n  \tdetach: shared_detach,\n\n  \tunbind: shared_unbind,\n\n  \trender: function () {\n  \t\tif (!this.node) {\n  \t\t\tthis.node = document.createTextNode(safeToStringValue(this.value));\n  \t\t}\n\n  \t\treturn this.node;\n  \t},\n\n  \tunrender: function (shouldDestroy) {\n  \t\tif (shouldDestroy) {\n  \t\t\tdetachNode(this.node);\n  \t\t}\n  \t},\n\n  \tgetValue: Mustache.getValue,\n\n  \t// TEMP\n  \tsetValue: function (value) {\n  \t\tvar wrapper;\n\n  \t\t// TODO is there a better way to approach this?\n  \t\tif (this.keypath && (wrapper = this.root.viewmodel.wrapped[this.keypath.str])) {\n  \t\t\tvalue = wrapper.get();\n  \t\t}\n\n  \t\tif (!isEqual(value, this.value)) {\n  \t\t\tthis.value = value;\n  \t\t\tthis.parentFragment.bubble();\n\n  \t\t\tif (this.node) {\n  \t\t\t\tglobal_runloop.addView(this);\n  \t\t\t}\n  \t\t}\n  \t},\n\n  \tfirstNode: function () {\n  \t\treturn this.node;\n  \t},\n\n  \ttoString: function (escape) {\n  \t\tvar string = \"\" + safeToStringValue(this.value);\n  \t\treturn escape ? escapeHtml(string) : string;\n  \t}\n  };\n\n  var items_Interpolator = Interpolator;\n\n  var Section_prototype_bubble = Section$bubble;\n\n  function Section$bubble() {\n  \tthis.parentFragment.bubble();\n  }\n\n  var Section_prototype_detach = Section$detach;\n\n  function Section$detach() {\n  \tvar docFrag;\n\n  \tif (this.fragments.length === 1) {\n  \t\treturn this.fragments[0].detach();\n  \t}\n\n  \tdocFrag = document.createDocumentFragment();\n\n  \tthis.fragments.forEach(function (item) {\n  \t\tdocFrag.appendChild(item.detach());\n  \t});\n\n  \treturn docFrag;\n  }\n\n  var find = Section$find;\n\n  function Section$find(selector) {\n  \tvar i, len, queryResult;\n\n  \tlen = this.fragments.length;\n  \tfor (i = 0; i < len; i += 1) {\n  \t\tif (queryResult = this.fragments[i].find(selector)) {\n  \t\t\treturn queryResult;\n  \t\t}\n  \t}\n\n  \treturn null;\n  }\n\n  var findAll = Section$findAll;\n\n  function Section$findAll(selector, query) {\n  \tvar i, len;\n\n  \tlen = this.fragments.length;\n  \tfor (i = 0; i < len; i += 1) {\n  \t\tthis.fragments[i].findAll(selector, query);\n  \t}\n  }\n\n  var findAllComponents = Section$findAllComponents;\n\n  function Section$findAllComponents(selector, query) {\n  \tvar i, len;\n\n  \tlen = this.fragments.length;\n  \tfor (i = 0; i < len; i += 1) {\n  \t\tthis.fragments[i].findAllComponents(selector, query);\n  \t}\n  }\n\n  var findComponent = Section$findComponent;\n\n  function Section$findComponent(selector) {\n  \tvar i, len, queryResult;\n\n  \tlen = this.fragments.length;\n  \tfor (i = 0; i < len; i += 1) {\n  \t\tif (queryResult = this.fragments[i].findComponent(selector)) {\n  \t\t\treturn queryResult;\n  \t\t}\n  \t}\n\n  \treturn null;\n  }\n\n  var findNextNode = Section$findNextNode;\n\n  function Section$findNextNode(fragment) {\n  \tif (this.fragments[fragment.index + 1]) {\n  \t\treturn this.fragments[fragment.index + 1].firstNode();\n  \t}\n\n  \treturn this.parentFragment.findNextNode(this);\n  }\n\n  var firstNode = Section$firstNode;\n\n  function Section$firstNode() {\n  \tvar len, i, node;\n\n  \tif (len = this.fragments.length) {\n  \t\tfor (i = 0; i < len; i += 1) {\n  \t\t\tif (node = this.fragments[i].firstNode()) {\n  \t\t\t\treturn node;\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \treturn this.parentFragment.findNextNode(this);\n  }\n\n  var shuffle = Section$shuffle;\n\n  function Section$shuffle(newIndices) {\n  \tvar _this = this;\n\n  \tvar parentFragment, firstChange, i, newLength, reboundFragments, fragmentOptions, fragment;\n\n  \t// short circuit any double-updates, and ensure that this isn't applied to\n  \t// non-list sections\n  \tif (this.shuffling || this.unbound || this.currentSubtype !== SECTION_EACH) {\n  \t\treturn;\n  \t}\n\n  \tthis.shuffling = true;\n  \tglobal_runloop.scheduleTask(function () {\n  \t\treturn _this.shuffling = false;\n  \t});\n\n  \tparentFragment = this.parentFragment;\n\n  \treboundFragments = [];\n\n  \t// TODO: need to update this\n  \t// first, rebind existing fragments\n  \tnewIndices.forEach(function (newIndex, oldIndex) {\n  \t\tvar fragment, by, oldKeypath, newKeypath, deps;\n\n  \t\tif (newIndex === oldIndex) {\n  \t\t\treboundFragments[newIndex] = _this.fragments[oldIndex];\n  \t\t\treturn;\n  \t\t}\n\n  \t\tfragment = _this.fragments[oldIndex];\n\n  \t\tif (firstChange === undefined) {\n  \t\t\tfirstChange = oldIndex;\n  \t\t}\n\n  \t\t// does this fragment need to be torn down?\n  \t\tif (newIndex === -1) {\n  \t\t\t_this.fragmentsToUnrender.push(fragment);\n  \t\t\tfragment.unbind();\n  \t\t\treturn;\n  \t\t}\n\n  \t\t// Otherwise, it needs to be rebound to a new index\n  \t\tby = newIndex - oldIndex;\n  \t\toldKeypath = _this.keypath.join(oldIndex);\n  \t\tnewKeypath = _this.keypath.join(newIndex);\n\n  \t\tfragment.index = newIndex;\n\n  \t\t// notify any registered index refs directly\n  \t\tif (deps = fragment.registeredIndexRefs) {\n  \t\t\tdeps.forEach(shuffle__blindRebind);\n  \t\t}\n\n  \t\tfragment.rebind(oldKeypath, newKeypath);\n  \t\treboundFragments[newIndex] = fragment;\n  \t});\n\n  \tnewLength = this.root.viewmodel.get(this.keypath).length;\n\n  \t// If nothing changed with the existing fragments, then we start adding\n  \t// new fragments at the end...\n  \tif (firstChange === undefined) {\n  \t\t// ...unless there are no new fragments to add\n  \t\tif (this.length === newLength) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tfirstChange = this.length;\n  \t}\n\n  \tthis.length = this.fragments.length = newLength;\n\n  \tif (this.rendered) {\n  \t\tglobal_runloop.addView(this);\n  \t}\n\n  \t// Prepare new fragment options\n  \tfragmentOptions = {\n  \t\ttemplate: this.template.f,\n  \t\troot: this.root,\n  \t\towner: this\n  \t};\n\n  \t// Add as many new fragments as we need to, or add back existing\n  \t// (detached) fragments\n  \tfor (i = firstChange; i < newLength; i += 1) {\n  \t\tfragment = reboundFragments[i];\n\n  \t\tif (!fragment) {\n  \t\t\tthis.fragmentsToCreate.push(i);\n  \t\t}\n\n  \t\tthis.fragments[i] = fragment;\n  \t}\n  }\n\n  function shuffle__blindRebind(dep) {\n  \t// the keypath doesn't actually matter here as it won't have changed\n  \tdep.rebind(\"\", \"\");\n  }\n\n  var prototype_rebind = function (oldKeypath, newKeypath) {\n  \tMustache.rebind.call(this, oldKeypath, newKeypath);\n  };\n\n  var Section_prototype_render = Section$render;\n\n  function Section$render() {\n  \tvar _this = this;\n\n  \tthis.docFrag = document.createDocumentFragment();\n\n  \tthis.fragments.forEach(function (f) {\n  \t\treturn _this.docFrag.appendChild(f.render());\n  \t});\n\n  \tthis.renderedFragments = this.fragments.slice();\n  \tthis.fragmentsToRender = [];\n\n  \tthis.rendered = true;\n  \treturn this.docFrag;\n  }\n\n  var setValue = Section$setValue;\n\n  function Section$setValue(value) {\n  \tvar _this = this;\n\n  \tvar wrapper, fragmentOptions;\n\n  \tif (this.updating) {\n  \t\t// If a child of this section causes a re-evaluation - for example, an\n  \t\t// expression refers to a function that mutates the array that this\n  \t\t// section depends on - we'll end up with a double rendering bug (see\n  \t\t// https://github.com/ractivejs/ractive/issues/748). This prevents it.\n  \t\treturn;\n  \t}\n\n  \tthis.updating = true;\n\n  \t// with sections, we need to get the fake value if we have a wrapped object\n  \tif (this.keypath && (wrapper = this.root.viewmodel.wrapped[this.keypath.str])) {\n  \t\tvalue = wrapper.get();\n  \t}\n\n  \t// If any fragments are awaiting creation after a splice,\n  \t// this is the place to do it\n  \tif (this.fragmentsToCreate.length) {\n  \t\tfragmentOptions = {\n  \t\t\ttemplate: this.template.f || [],\n  \t\t\troot: this.root,\n  \t\t\tpElement: this.pElement,\n  \t\t\towner: this\n  \t\t};\n\n  \t\tthis.fragmentsToCreate.forEach(function (index) {\n  \t\t\tvar fragment;\n\n  \t\t\tfragmentOptions.context = _this.keypath.join(index);\n  \t\t\tfragmentOptions.index = index;\n\n  \t\t\tfragment = new virtualdom_Fragment(fragmentOptions);\n  \t\t\t_this.fragmentsToRender.push(_this.fragments[index] = fragment);\n  \t\t});\n\n  \t\tthis.fragmentsToCreate.length = 0;\n  \t} else if (reevaluateSection(this, value)) {\n  \t\tthis.bubble();\n\n  \t\tif (this.rendered) {\n  \t\t\tglobal_runloop.addView(this);\n  \t\t}\n  \t}\n\n  \tthis.value = value;\n  \tthis.updating = false;\n  }\n\n  function changeCurrentSubtype(section, value, obj) {\n  \tif (value === SECTION_EACH) {\n  \t\t// make sure ref type is up to date for key or value indices\n  \t\tif (section.indexRefs && section.indexRefs[0]) {\n  \t\t\tvar ref = section.indexRefs[0];\n\n  \t\t\t// when switching flavors, make sure the section gets updated\n  \t\t\tif (obj && ref.t === \"i\" || !obj && ref.t === \"k\") {\n  \t\t\t\t// if switching from object to list, unbind all of the old fragments\n  \t\t\t\tif (!obj) {\n  \t\t\t\t\tsection.length = 0;\n  \t\t\t\t\tsection.fragmentsToUnrender = section.fragments.slice(0);\n  \t\t\t\t\tsection.fragmentsToUnrender.forEach(function (f) {\n  \t\t\t\t\t\treturn f.unbind();\n  \t\t\t\t\t});\n  \t\t\t\t}\n  \t\t\t}\n\n  \t\t\tref.t = obj ? \"k\" : \"i\";\n  \t\t}\n  \t}\n\n  \tsection.currentSubtype = value;\n  }\n\n  function reevaluateSection(section, value) {\n  \tvar fragmentOptions = {\n  \t\ttemplate: section.template.f || [],\n  \t\troot: section.root,\n  \t\tpElement: section.parentFragment.pElement,\n  \t\towner: section\n  \t};\n\n  \tsection.hasContext = true;\n\n  \t// If we already know the section type, great\n  \t// TODO can this be optimised? i.e. pick an reevaluateSection function during init\n  \t// and avoid doing this each time?\n  \tif (section.subtype) {\n  \t\tswitch (section.subtype) {\n  \t\t\tcase SECTION_IF:\n  \t\t\t\tsection.hasContext = false;\n  \t\t\t\treturn reevaluateConditionalSection(section, value, false, fragmentOptions);\n\n  \t\t\tcase SECTION_UNLESS:\n  \t\t\t\tsection.hasContext = false;\n  \t\t\t\treturn reevaluateConditionalSection(section, value, true, fragmentOptions);\n\n  \t\t\tcase SECTION_WITH:\n  \t\t\t\treturn reevaluateContextSection(section, fragmentOptions);\n\n  \t\t\tcase SECTION_IF_WITH:\n  \t\t\t\treturn reevaluateConditionalContextSection(section, value, fragmentOptions);\n\n  \t\t\tcase SECTION_EACH:\n  \t\t\t\tif (isObject(value)) {\n  \t\t\t\t\tchangeCurrentSubtype(section, section.subtype, true);\n  \t\t\t\t\treturn reevaluateListObjectSection(section, value, fragmentOptions);\n  \t\t\t\t}\n\n  \t\t\t\t// Fallthrough - if it's a conditional or an array we need to continue\n  \t\t}\n  \t}\n\n  \t// Otherwise we need to work out what sort of section we're dealing with\n  \tsection.ordered = !!isArrayLike(value);\n\n  \t// Ordered list section\n  \tif (section.ordered) {\n  \t\tchangeCurrentSubtype(section, SECTION_EACH, false);\n  \t\treturn reevaluateListSection(section, value, fragmentOptions);\n  \t}\n\n  \t// Unordered list, or context\n  \tif (isObject(value) || typeof value === \"function\") {\n  \t\t// Index reference indicates section should be treated as a list\n  \t\tif (section.template.i) {\n  \t\t\tchangeCurrentSubtype(section, SECTION_EACH, true);\n  \t\t\treturn reevaluateListObjectSection(section, value, fragmentOptions);\n  \t\t}\n\n  \t\t// Otherwise, object provides context for contents\n  \t\tchangeCurrentSubtype(section, SECTION_WITH, false);\n  \t\treturn reevaluateContextSection(section, fragmentOptions);\n  \t}\n\n  \t// Conditional section\n  \tchangeCurrentSubtype(section, SECTION_IF, false);\n  \tsection.hasContext = false;\n  \treturn reevaluateConditionalSection(section, value, false, fragmentOptions);\n  }\n\n  function reevaluateListSection(section, value, fragmentOptions) {\n  \tvar i, length, fragment;\n\n  \tlength = value.length;\n\n  \tif (length === section.length) {\n  \t\t// Nothing to do\n  \t\treturn false;\n  \t}\n\n  \t// if the array is shorter than it was previously, remove items\n  \tif (length < section.length) {\n  \t\tsection.fragmentsToUnrender = section.fragments.splice(length, section.length - length);\n  \t\tsection.fragmentsToUnrender.forEach(methodCallers__unbind);\n  \t}\n\n  \t// otherwise...\n  \telse {\n  \t\tif (length > section.length) {\n  \t\t\t// add any new ones\n  \t\t\tfor (i = section.length; i < length; i += 1) {\n  \t\t\t\t// append list item to context stack\n  \t\t\t\tfragmentOptions.context = section.keypath.join(i);\n  \t\t\t\tfragmentOptions.index = i;\n\n  \t\t\t\tfragment = new virtualdom_Fragment(fragmentOptions);\n  \t\t\t\tsection.fragmentsToRender.push(section.fragments[i] = fragment);\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \tsection.length = length;\n  \treturn true;\n  }\n\n  function reevaluateListObjectSection(section, value, fragmentOptions) {\n  \tvar id, i, hasKey, fragment, changed, deps;\n\n  \thasKey = section.hasKey || (section.hasKey = {});\n\n  \t// remove any fragments that should no longer exist\n  \ti = section.fragments.length;\n  \twhile (i--) {\n  \t\tfragment = section.fragments[i];\n\n  \t\tif (!(fragment.key in value)) {\n  \t\t\tchanged = true;\n\n  \t\t\tfragment.unbind();\n  \t\t\tsection.fragmentsToUnrender.push(fragment);\n  \t\t\tsection.fragments.splice(i, 1);\n\n  \t\t\thasKey[fragment.key] = false;\n  \t\t}\n  \t}\n\n  \t// notify any dependents about changed indices\n  \ti = section.fragments.length;\n  \twhile (i--) {\n  \t\tfragment = section.fragments[i];\n\n  \t\tif (fragment.index !== i) {\n  \t\t\tfragment.index = i;\n  \t\t\tif (deps = fragment.registeredIndexRefs) {\n  \t\t\t\tdeps.forEach(setValue__blindRebind);\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \t// add any that haven't been created yet\n  \ti = section.fragments.length;\n  \tfor (id in value) {\n  \t\tif (!hasKey[id]) {\n  \t\t\tchanged = true;\n\n  \t\t\tfragmentOptions.context = section.keypath.join(id);\n  \t\t\tfragmentOptions.key = id;\n  \t\t\tfragmentOptions.index = i++;\n\n  \t\t\tfragment = new virtualdom_Fragment(fragmentOptions);\n\n  \t\t\tsection.fragmentsToRender.push(fragment);\n  \t\t\tsection.fragments.push(fragment);\n  \t\t\thasKey[id] = true;\n  \t\t}\n  \t}\n\n  \tsection.length = section.fragments.length;\n  \treturn changed;\n  }\n\n  function reevaluateConditionalContextSection(section, value, fragmentOptions) {\n  \tif (value) {\n  \t\treturn reevaluateContextSection(section, fragmentOptions);\n  \t} else {\n  \t\treturn removeSectionFragments(section);\n  \t}\n  }\n\n  function reevaluateContextSection(section, fragmentOptions) {\n  \tvar fragment;\n\n  \t// ...then if it isn't rendered, render it, adding section.keypath to the context stack\n  \t// (if it is already rendered, then any children dependent on the context stack\n  \t// will update themselves without any prompting)\n  \tif (!section.length) {\n  \t\t// append this section to the context stack\n  \t\tfragmentOptions.context = section.keypath;\n  \t\tfragmentOptions.index = 0;\n\n  \t\tfragment = new virtualdom_Fragment(fragmentOptions);\n\n  \t\tsection.fragmentsToRender.push(section.fragments[0] = fragment);\n  \t\tsection.length = 1;\n\n  \t\treturn true;\n  \t}\n  }\n\n  function reevaluateConditionalSection(section, value, inverted, fragmentOptions) {\n  \tvar doRender, emptyArray, emptyObject, fragment, name;\n\n  \temptyArray = isArrayLike(value) && value.length === 0;\n  \temptyObject = false;\n  \tif (!isArrayLike(value) && isObject(value)) {\n  \t\temptyObject = true;\n  \t\tfor (name in value) {\n  \t\t\temptyObject = false;\n  \t\t\tbreak;\n  \t\t}\n  \t}\n\n  \tif (inverted) {\n  \t\tdoRender = emptyArray || emptyObject || !value;\n  \t} else {\n  \t\tdoRender = value && !emptyArray && !emptyObject;\n  \t}\n\n  \tif (doRender) {\n  \t\tif (!section.length) {\n  \t\t\t// no change to context stack\n  \t\t\tfragmentOptions.index = 0;\n\n  \t\t\tfragment = new virtualdom_Fragment(fragmentOptions);\n  \t\t\tsection.fragmentsToRender.push(section.fragments[0] = fragment);\n  \t\t\tsection.length = 1;\n\n  \t\t\treturn true;\n  \t\t}\n\n  \t\tif (section.length > 1) {\n  \t\t\tsection.fragmentsToUnrender = section.fragments.splice(1);\n  \t\t\tsection.fragmentsToUnrender.forEach(methodCallers__unbind);\n\n  \t\t\treturn true;\n  \t\t}\n  \t} else {\n  \t\treturn removeSectionFragments(section);\n  \t}\n  }\n\n  function removeSectionFragments(section) {\n  \tif (section.length) {\n  \t\tsection.fragmentsToUnrender = section.fragments.splice(0, section.fragments.length).filter(isRendered);\n  \t\tsection.fragmentsToUnrender.forEach(methodCallers__unbind);\n  \t\tsection.length = section.fragmentsToRender.length = 0;\n  \t\treturn true;\n  \t}\n  }\n\n  function isRendered(fragment) {\n  \treturn fragment.rendered;\n  }\n\n  function setValue__blindRebind(dep) {\n  \t// the keypath doesn't actually matter here as it won't have changed\n  \tdep.rebind(\"\", \"\");\n  }\n\n  var prototype_toString = Section$toString;\n\n  function Section$toString(escape) {\n  \tvar str, i, len;\n\n  \tstr = \"\";\n\n  \ti = 0;\n  \tlen = this.length;\n\n  \tfor (i = 0; i < len; i += 1) {\n  \t\tstr += this.fragments[i].toString(escape);\n  \t}\n\n  \treturn str;\n  }\n\n  var prototype_unbind = Section$unbind;\n  function Section$unbind() {\n  \tvar _this = this;\n\n  \tthis.fragments.forEach(methodCallers__unbind);\n  \tthis.fragmentsToRender.forEach(function (f) {\n  \t\treturn removeFromArray(_this.fragments, f);\n  \t});\n  \tthis.fragmentsToRender = [];\n  \tshared_unbind.call(this);\n\n  \tthis.length = 0;\n  \tthis.unbound = true;\n  }\n\n  var prototype_unrender = Section$unrender;\n\n  function Section$unrender(shouldDestroy) {\n  \tthis.fragments.forEach(shouldDestroy ? unrenderAndDestroy : prototype_unrender__unrender);\n  \tthis.renderedFragments = [];\n  \tthis.rendered = false;\n  }\n\n  function unrenderAndDestroy(fragment) {\n  \tfragment.unrender(true);\n  }\n\n  function prototype_unrender__unrender(fragment) {\n  \tfragment.unrender(false);\n  }\n\n  var prototype_update = Section$update;\n\n  function Section$update() {\n  \tvar fragment, renderIndex, renderedFragments, anchor, target, i, len;\n\n  \t// `this.renderedFragments` is in the order of the previous render.\n  \t// If fragments have shuffled about, this allows us to quickly\n  \t// reinsert them in the correct place\n  \trenderedFragments = this.renderedFragments;\n\n  \t// Remove fragments that have been marked for destruction\n  \twhile (fragment = this.fragmentsToUnrender.pop()) {\n  \t\tfragment.unrender(true);\n  \t\trenderedFragments.splice(renderedFragments.indexOf(fragment), 1);\n  \t}\n\n  \t// Render new fragments (but don't insert them yet)\n  \twhile (fragment = this.fragmentsToRender.shift()) {\n  \t\tfragment.render();\n  \t}\n\n  \tif (this.rendered) {\n  \t\ttarget = this.parentFragment.getNode();\n  \t}\n\n  \tlen = this.fragments.length;\n  \tfor (i = 0; i < len; i += 1) {\n  \t\tfragment = this.fragments[i];\n  \t\trenderIndex = renderedFragments.indexOf(fragment, i); // search from current index - it's guaranteed to be the same or higher\n\n  \t\tif (renderIndex === i) {\n  \t\t\t// already in the right place. insert accumulated nodes (if any) and carry on\n  \t\t\tif (this.docFrag.childNodes.length) {\n  \t\t\t\tanchor = fragment.firstNode();\n  \t\t\t\ttarget.insertBefore(this.docFrag, anchor);\n  \t\t\t}\n\n  \t\t\tcontinue;\n  \t\t}\n\n  \t\tthis.docFrag.appendChild(fragment.detach());\n\n  \t\t// update renderedFragments\n  \t\tif (renderIndex !== -1) {\n  \t\t\trenderedFragments.splice(renderIndex, 1);\n  \t\t}\n  \t\trenderedFragments.splice(i, 0, fragment);\n  \t}\n\n  \tif (this.rendered && this.docFrag.childNodes.length) {\n  \t\tanchor = this.parentFragment.findNextNode(this);\n  \t\ttarget.insertBefore(this.docFrag, anchor);\n  \t}\n\n  \t// Save the rendering order for next time\n  \tthis.renderedFragments = this.fragments.slice();\n  }\n\n  var Section = function (options) {\n  \tthis.type = SECTION;\n  \tthis.subtype = this.currentSubtype = options.template.n;\n  \tthis.inverted = this.subtype === SECTION_UNLESS;\n\n  \tthis.pElement = options.pElement;\n\n  \tthis.fragments = [];\n  \tthis.fragmentsToCreate = [];\n  \tthis.fragmentsToRender = [];\n  \tthis.fragmentsToUnrender = [];\n\n  \tif (options.template.i) {\n  \t\tthis.indexRefs = options.template.i.split(\",\").map(function (k, i) {\n  \t\t\treturn { n: k, t: i === 0 ? \"k\" : \"i\" };\n  \t\t});\n  \t}\n\n  \tthis.renderedFragments = [];\n\n  \tthis.length = 0; // number of times this section is rendered\n\n  \tMustache.init(this, options);\n  };\n\n  Section.prototype = {\n  \tbubble: Section_prototype_bubble,\n  \tdetach: Section_prototype_detach,\n  \tfind: find,\n  \tfindAll: findAll,\n  \tfindAllComponents: findAllComponents,\n  \tfindComponent: findComponent,\n  \tfindNextNode: findNextNode,\n  \tfirstNode: firstNode,\n  \tgetIndexRef: function (name) {\n  \t\tif (this.indexRefs) {\n  \t\t\tvar i = this.indexRefs.length;\n  \t\t\twhile (i--) {\n  \t\t\t\tvar ref = this.indexRefs[i];\n  \t\t\t\tif (ref.n === name) {\n  \t\t\t\t\treturn ref;\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n  \t},\n  \tgetValue: Mustache.getValue,\n  \tshuffle: shuffle,\n  \trebind: prototype_rebind,\n  \trender: Section_prototype_render,\n  \tresolve: Mustache.resolve,\n  \tsetValue: setValue,\n  \ttoString: prototype_toString,\n  \tunbind: prototype_unbind,\n  \tunrender: prototype_unrender,\n  \tupdate: prototype_update\n  };\n\n  var _Section = Section;\n\n  var Triple_prototype_detach = Triple$detach;\n\n  function Triple$detach() {\n  \tvar len, i;\n\n  \tif (this.docFrag) {\n  \t\tlen = this.nodes.length;\n  \t\tfor (i = 0; i < len; i += 1) {\n  \t\t\tthis.docFrag.appendChild(this.nodes[i]);\n  \t\t}\n\n  \t\treturn this.docFrag;\n  \t}\n  }\n\n  var Triple_prototype_find = Triple$find;\n  function Triple$find(selector) {\n  \tvar i, len, node, queryResult;\n\n  \tlen = this.nodes.length;\n  \tfor (i = 0; i < len; i += 1) {\n  \t\tnode = this.nodes[i];\n\n  \t\tif (node.nodeType !== 1) {\n  \t\t\tcontinue;\n  \t\t}\n\n  \t\tif (matches(node, selector)) {\n  \t\t\treturn node;\n  \t\t}\n\n  \t\tif (queryResult = node.querySelector(selector)) {\n  \t\t\treturn queryResult;\n  \t\t}\n  \t}\n\n  \treturn null;\n  }\n\n  var Triple_prototype_findAll = Triple$findAll;\n  function Triple$findAll(selector, queryResult) {\n  \tvar i, len, node, queryAllResult, numNodes, j;\n\n  \tlen = this.nodes.length;\n  \tfor (i = 0; i < len; i += 1) {\n  \t\tnode = this.nodes[i];\n\n  \t\tif (node.nodeType !== 1) {\n  \t\t\tcontinue;\n  \t\t}\n\n  \t\tif (matches(node, selector)) {\n  \t\t\tqueryResult.push(node);\n  \t\t}\n\n  \t\tif (queryAllResult = node.querySelectorAll(selector)) {\n  \t\t\tnumNodes = queryAllResult.length;\n  \t\t\tfor (j = 0; j < numNodes; j += 1) {\n  \t\t\t\tqueryResult.push(queryAllResult[j]);\n  \t\t\t}\n  \t\t}\n  \t}\n  }\n\n  var Triple_prototype_firstNode = Triple$firstNode;\n\n  function Triple$firstNode() {\n  \tif (this.rendered && this.nodes[0]) {\n  \t\treturn this.nodes[0];\n  \t}\n\n  \treturn this.parentFragment.findNextNode(this);\n  }\n\n  var elementCache = {},\n      ieBug,\n      ieBlacklist;\n\n  try {\n  \tcreateElement(\"table\").innerHTML = \"foo\";\n  } catch (err) {\n  \tieBug = true;\n\n  \tieBlacklist = {\n  \t\tTABLE: [\"<table class=\\\"x\\\">\", \"</table>\"],\n  \t\tTHEAD: [\"<table><thead class=\\\"x\\\">\", \"</thead></table>\"],\n  \t\tTBODY: [\"<table><tbody class=\\\"x\\\">\", \"</tbody></table>\"],\n  \t\tTR: [\"<table><tr class=\\\"x\\\">\", \"</tr></table>\"],\n  \t\tSELECT: [\"<select class=\\\"x\\\">\", \"</select>\"]\n  \t};\n  }\n\n  var insertHtml = function (html, node, docFrag) {\n  \tvar container,\n  \t    nodes = [],\n  \t    wrapper,\n  \t    selectedOption,\n  \t    child,\n  \t    i;\n\n  \t// render 0 and false\n  \tif (html != null && html !== \"\") {\n  \t\tif (ieBug && (wrapper = ieBlacklist[node.tagName])) {\n  \t\t\tcontainer = element(\"DIV\");\n  \t\t\tcontainer.innerHTML = wrapper[0] + html + wrapper[1];\n  \t\t\tcontainer = container.querySelector(\".x\");\n\n  \t\t\tif (container.tagName === \"SELECT\") {\n  \t\t\t\tselectedOption = container.options[container.selectedIndex];\n  \t\t\t}\n  \t\t} else if (node.namespaceURI === namespaces.svg) {\n  \t\t\tcontainer = element(\"DIV\");\n  \t\t\tcontainer.innerHTML = \"<svg class=\\\"x\\\">\" + html + \"</svg>\";\n  \t\t\tcontainer = container.querySelector(\".x\");\n  \t\t} else {\n  \t\t\tcontainer = element(node.tagName);\n  \t\t\tcontainer.innerHTML = html;\n\n  \t\t\tif (container.tagName === \"SELECT\") {\n  \t\t\t\tselectedOption = container.options[container.selectedIndex];\n  \t\t\t}\n  \t\t}\n\n  \t\twhile (child = container.firstChild) {\n  \t\t\tnodes.push(child);\n  \t\t\tdocFrag.appendChild(child);\n  \t\t}\n\n  \t\t// This is really annoying. Extracting <option> nodes from the\n  \t\t// temporary container <select> causes the remaining ones to\n  \t\t// become selected. So now we have to deselect them. IE8, you\n  \t\t// amaze me. You really do\n  \t\t// ...and now Chrome too\n  \t\tif (node.tagName === \"SELECT\") {\n  \t\t\ti = nodes.length;\n  \t\t\twhile (i--) {\n  \t\t\t\tif (nodes[i] !== selectedOption) {\n  \t\t\t\t\tnodes[i].selected = false;\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \treturn nodes;\n  };\n\n  function element(tagName) {\n  \treturn elementCache[tagName] || (elementCache[tagName] = createElement(tagName));\n  }\n\n  var helpers_updateSelect = updateSelect;\n\n  function updateSelect(parentElement) {\n  \tvar selectedOptions, option, value;\n\n  \tif (!parentElement || parentElement.name !== \"select\" || !parentElement.binding) {\n  \t\treturn;\n  \t}\n\n  \tselectedOptions = toArray(parentElement.node.options).filter(isSelected);\n\n  \t// If one of them had a `selected` attribute, we need to sync\n  \t// the model to the view\n  \tif (parentElement.getAttribute(\"multiple\")) {\n  \t\tvalue = selectedOptions.map(function (o) {\n  \t\t\treturn o.value;\n  \t\t});\n  \t} else if (option = selectedOptions[0]) {\n  \t\tvalue = option.value;\n  \t}\n\n  \tif (value !== undefined) {\n  \t\tparentElement.binding.setValue(value);\n  \t}\n\n  \tparentElement.bubble();\n  }\n\n  function isSelected(option) {\n  \treturn option.selected;\n  }\n\n  var Triple_prototype_render = Triple$render;\n  function Triple$render() {\n  \tif (this.rendered) {\n  \t\tthrow new Error(\"Attempted to render an item that was already rendered\");\n  \t}\n\n  \tthis.docFrag = document.createDocumentFragment();\n  \tthis.nodes = insertHtml(this.value, this.parentFragment.getNode(), this.docFrag);\n\n  \t// Special case - we're inserting the contents of a <select>\n  \thelpers_updateSelect(this.pElement);\n\n  \tthis.rendered = true;\n  \treturn this.docFrag;\n  }\n\n  var prototype_setValue = Triple$setValue;\n  function Triple$setValue(value) {\n  \tvar wrapper;\n\n  \t// TODO is there a better way to approach this?\n  \tif (wrapper = this.root.viewmodel.wrapped[this.keypath.str]) {\n  \t\tvalue = wrapper.get();\n  \t}\n\n  \tif (value !== this.value) {\n  \t\tthis.value = value;\n  \t\tthis.parentFragment.bubble();\n\n  \t\tif (this.rendered) {\n  \t\t\tglobal_runloop.addView(this);\n  \t\t}\n  \t}\n  }\n\n  var Triple_prototype_toString = Triple$toString;\n  function Triple$toString() {\n  \treturn this.value != undefined ? decodeCharacterReferences(\"\" + this.value) : \"\";\n  }\n\n  var Triple_prototype_unrender = Triple$unrender;\n  function Triple$unrender(shouldDestroy) {\n  \tif (this.rendered && shouldDestroy) {\n  \t\tthis.nodes.forEach(detachNode);\n  \t\tthis.rendered = false;\n  \t}\n\n  \t// TODO update live queries\n  }\n\n  var Triple_prototype_update = Triple$update;\n  function Triple$update() {\n  \tvar node, parentNode;\n\n  \tif (!this.rendered) {\n  \t\treturn;\n  \t}\n\n  \t// Remove existing nodes\n  \twhile (this.nodes && this.nodes.length) {\n  \t\tnode = this.nodes.pop();\n  \t\tnode.parentNode.removeChild(node);\n  \t}\n\n  \t// Insert new nodes\n  \tparentNode = this.parentFragment.getNode();\n\n  \tthis.nodes = insertHtml(this.value, parentNode, this.docFrag);\n  \tparentNode.insertBefore(this.docFrag, this.parentFragment.findNextNode(this));\n\n  \t// Special case - we're inserting the contents of a <select>\n  \thelpers_updateSelect(this.pElement);\n  }\n\n  var Triple = function (options) {\n  \tthis.type = TRIPLE;\n  \tMustache.init(this, options);\n  };\n\n  Triple.prototype = {\n  \tdetach: Triple_prototype_detach,\n  \tfind: Triple_prototype_find,\n  \tfindAll: Triple_prototype_findAll,\n  \tfirstNode: Triple_prototype_firstNode,\n  \tgetValue: Mustache.getValue,\n  \trebind: Mustache.rebind,\n  \trender: Triple_prototype_render,\n  \tresolve: Mustache.resolve,\n  \tsetValue: prototype_setValue,\n  \ttoString: Triple_prototype_toString,\n  \tunbind: shared_unbind,\n  \tunrender: Triple_prototype_unrender,\n  \tupdate: Triple_prototype_update\n  };\n\n  var _Triple = Triple;\n\n  var Element_prototype_bubble = function () {\n  \tthis.parentFragment.bubble();\n  };\n\n  var Element_prototype_detach = Element$detach;\n\n  function Element$detach() {\n  \tvar node = this.node,\n  \t    parentNode;\n\n  \tif (node) {\n  \t\t// need to check for parent node - DOM may have been altered\n  \t\t// by something other than Ractive! e.g. jQuery UI...\n  \t\tif (parentNode = node.parentNode) {\n  \t\t\tparentNode.removeChild(node);\n  \t\t}\n\n  \t\treturn node;\n  \t}\n  }\n\n  var Element_prototype_find = function (selector) {\n  \tif (!this.node) {\n  \t\t// this element hasn't been rendered yet\n  \t\treturn null;\n  \t}\n\n  \tif (matches(this.node, selector)) {\n  \t\treturn this.node;\n  \t}\n\n  \tif (this.fragment && this.fragment.find) {\n  \t\treturn this.fragment.find(selector);\n  \t}\n  };\n\n  var Element_prototype_findAll = function (selector, query) {\n  \t// Add this node to the query, if applicable, and register the\n  \t// query on this element\n  \tif (query._test(this, true) && query.live) {\n  \t\t(this.liveQueries || (this.liveQueries = [])).push(query);\n  \t}\n\n  \tif (this.fragment) {\n  \t\tthis.fragment.findAll(selector, query);\n  \t}\n  };\n\n  var Element_prototype_findAllComponents = function (selector, query) {\n  \tif (this.fragment) {\n  \t\tthis.fragment.findAllComponents(selector, query);\n  \t}\n  };\n\n  var Element_prototype_findComponent = function (selector) {\n  \tif (this.fragment) {\n  \t\treturn this.fragment.findComponent(selector);\n  \t}\n  };\n\n  var Element_prototype_findNextNode = Element$findNextNode;\n\n  function Element$findNextNode() {\n  \treturn null;\n  }\n\n  var Element_prototype_firstNode = Element$firstNode;\n\n  function Element$firstNode() {\n  \treturn this.node;\n  }\n\n  var getAttribute = Element$getAttribute;\n\n  function Element$getAttribute(name) {\n  \tif (!this.attributes || !this.attributes[name]) {\n  \t\treturn;\n  \t}\n\n  \treturn this.attributes[name].value;\n  }\n\n  var truthy = /^true|on|yes|1$/i;\n  var processBindingAttributes__isNumeric = /^[0-9]+$/;\n\n  var processBindingAttributes = function (element, template) {\n  \tvar val, attrs, attributes;\n\n  \tattributes = template.a || {};\n  \tattrs = {};\n\n  \t// attributes that are present but don't have a value (=)\n  \t// will be set to the number 0, which we condider to be true\n  \t// the string '0', however is false\n\n  \tval = attributes.twoway;\n  \tif (val !== undefined) {\n  \t\tattrs.twoway = val === 0 || truthy.test(val);\n  \t}\n\n  \tval = attributes.lazy;\n  \tif (val !== undefined) {\n  \t\t// check for timeout value\n  \t\tif (val !== 0 && processBindingAttributes__isNumeric.test(val)) {\n  \t\t\tattrs.lazy = parseInt(val);\n  \t\t} else {\n  \t\t\tattrs.lazy = val === 0 || truthy.test(val);\n  \t\t}\n  \t}\n\n  \treturn attrs;\n  };\n\n  var Attribute_prototype_bubble = Attribute$bubble;\n  function Attribute$bubble() {\n  \tvar value = this.useProperty || !this.rendered ? this.fragment.getValue() : this.fragment.toString();\n\n  \t// TODO this can register the attribute multiple times (see render test\n  \t// 'Attribute with nested mustaches')\n  \tif (!isEqual(value, this.value)) {\n\n  \t\t// Need to clear old id from ractive.nodes\n  \t\tif (this.name === \"id\" && this.value) {\n  \t\t\tdelete this.root.nodes[this.value];\n  \t\t}\n\n  \t\tthis.value = value;\n\n  \t\tif (this.name === \"value\" && this.node) {\n  \t\t\t// We need to store the value on the DOM like this so we\n  \t\t\t// can retrieve it later without it being coerced to a string\n  \t\t\tthis.node._ractive.value = value;\n  \t\t}\n\n  \t\tif (this.rendered) {\n  \t\t\tglobal_runloop.addView(this);\n  \t\t}\n  \t}\n  }\n\n  var svgCamelCaseElements, svgCamelCaseAttributes, createMap, map;\n  svgCamelCaseElements = \"altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern\".split(\" \");\n  svgCamelCaseAttributes = \"attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan\".split(\" \");\n\n  createMap = function (items) {\n  \tvar map = {},\n  \t    i = items.length;\n  \twhile (i--) {\n  \t\tmap[items[i].toLowerCase()] = items[i];\n  \t}\n  \treturn map;\n  };\n\n  map = createMap(svgCamelCaseElements.concat(svgCamelCaseAttributes));\n\n  var enforceCase = function (elementName) {\n  \tvar lowerCaseElementName = elementName.toLowerCase();\n  \treturn map[lowerCaseElementName] || lowerCaseElementName;\n  };\n\n  var determineNameAndNamespace = function (attribute, name) {\n  \tvar colonIndex, namespacePrefix;\n\n  \t// are we dealing with a namespaced attribute, e.g. xlink:href?\n  \tcolonIndex = name.indexOf(\":\");\n  \tif (colonIndex !== -1) {\n\n  \t\t// looks like we are, yes...\n  \t\tnamespacePrefix = name.substr(0, colonIndex);\n\n  \t\t// ...unless it's a namespace *declaration*, which we ignore (on the assumption\n  \t\t// that only valid namespaces will be used)\n  \t\tif (namespacePrefix !== \"xmlns\") {\n  \t\t\tname = name.substring(colonIndex + 1);\n\n  \t\t\tattribute.name = enforceCase(name);\n  \t\t\tattribute.namespace = namespaces[namespacePrefix.toLowerCase()];\n  \t\t\tattribute.namespacePrefix = namespacePrefix;\n\n  \t\t\tif (!attribute.namespace) {\n  \t\t\t\tthrow \"Unknown namespace (\\\"\" + namespacePrefix + \"\\\")\";\n  \t\t\t}\n\n  \t\t\treturn;\n  \t\t}\n  \t}\n\n  \t// SVG attribute names are case sensitive\n  \tattribute.name = attribute.element.namespace !== namespaces.html ? enforceCase(name) : name;\n  };\n\n  var helpers_getInterpolator = getInterpolator;\n  function getInterpolator(attribute) {\n  \tvar items = attribute.fragment.items;\n\n  \tif (items.length !== 1) {\n  \t\treturn;\n  \t}\n\n  \tif (items[0].type === INTERPOLATOR) {\n  \t\treturn items[0];\n  \t}\n  }\n\n  var prototype_init = Attribute$init;\n  function Attribute$init(options) {\n  \tthis.type = ATTRIBUTE;\n  \tthis.element = options.element;\n  \tthis.root = options.root;\n\n  \tdetermineNameAndNamespace(this, options.name);\n  \tthis.isBoolean = booleanAttributes.test(this.name);\n\n  \t// if it's an empty attribute, or just a straight key-value pair, with no\n  \t// mustache shenanigans, set the attribute accordingly and go home\n  \tif (!options.value || typeof options.value === \"string\") {\n  \t\tthis.value = this.isBoolean ? true : options.value || \"\";\n  \t\treturn;\n  \t}\n\n  \t// otherwise we need to do some work\n\n  \t// share parentFragment with parent element\n  \tthis.parentFragment = this.element.parentFragment;\n\n  \tthis.fragment = new virtualdom_Fragment({\n  \t\ttemplate: options.value,\n  \t\troot: this.root,\n  \t\towner: this\n  \t});\n\n  \t// TODO can we use this.fragment.toString() in some cases? It's quicker\n  \tthis.value = this.fragment.getValue();\n\n  \t// Store a reference to this attribute's interpolator, if its fragment\n  \t// takes the form `{{foo}}`. This is necessary for two-way binding and\n  \t// for correctly rendering HTML later\n  \tthis.interpolator = helpers_getInterpolator(this);\n  \tthis.isBindable = !!this.interpolator && !this.interpolator.isStatic;\n\n  \t// mark as ready\n  \tthis.ready = true;\n  }\n\n  var Attribute_prototype_rebind = Attribute$rebind;\n\n  function Attribute$rebind(oldKeypath, newKeypath) {\n  \tif (this.fragment) {\n  \t\tthis.fragment.rebind(oldKeypath, newKeypath);\n  \t}\n  }\n\n  var Attribute_prototype_render = Attribute$render;\n  var propertyNames = {\n  \t\"accept-charset\": \"acceptCharset\",\n  \taccesskey: \"accessKey\",\n  \tbgcolor: \"bgColor\",\n  \t\"class\": \"className\",\n  \tcodebase: \"codeBase\",\n  \tcolspan: \"colSpan\",\n  \tcontenteditable: \"contentEditable\",\n  \tdatetime: \"dateTime\",\n  \tdirname: \"dirName\",\n  \t\"for\": \"htmlFor\",\n  \t\"http-equiv\": \"httpEquiv\",\n  \tismap: \"isMap\",\n  \tmaxlength: \"maxLength\",\n  \tnovalidate: \"noValidate\",\n  \tpubdate: \"pubDate\",\n  \treadonly: \"readOnly\",\n  \trowspan: \"rowSpan\",\n  \ttabindex: \"tabIndex\",\n  \tusemap: \"useMap\"\n  };\n  function Attribute$render(node) {\n  \tvar propertyName;\n\n  \tthis.node = node;\n\n  \t// should we use direct property access, or setAttribute?\n  \tif (!node.namespaceURI || node.namespaceURI === namespaces.html) {\n  \t\tpropertyName = propertyNames[this.name] || this.name;\n\n  \t\tif (node[propertyName] !== undefined) {\n  \t\t\tthis.propertyName = propertyName;\n  \t\t}\n\n  \t\t// is attribute a boolean attribute or 'value'? If so we're better off doing e.g.\n  \t\t// node.selected = true rather than node.setAttribute( 'selected', '' )\n  \t\tif (this.isBoolean || this.isTwoway) {\n  \t\t\tthis.useProperty = true;\n  \t\t}\n\n  \t\tif (propertyName === \"value\") {\n  \t\t\tnode._ractive.value = this.value;\n  \t\t}\n  \t}\n\n  \tthis.rendered = true;\n  \tthis.update();\n  }\n\n  var Attribute_prototype_toString = Attribute$toString;\n\n  function Attribute$toString() {\n  \tvar _ref = this;\n\n  \tvar name = _ref.name;\n  \tvar namespacePrefix = _ref.namespacePrefix;\n  \tvar value = _ref.value;\n  \tvar interpolator = _ref.interpolator;\n  \tvar fragment = _ref.fragment;\n\n  \t// Special case - select and textarea values (should not be stringified)\n  \tif (name === \"value\" && (this.element.name === \"select\" || this.element.name === \"textarea\")) {\n  \t\treturn;\n  \t}\n\n  \t// Special case - content editable\n  \tif (name === \"value\" && this.element.getAttribute(\"contenteditable\") !== undefined) {\n  \t\treturn;\n  \t}\n\n  \t// Special case - radio names\n  \tif (name === \"name\" && this.element.name === \"input\" && interpolator) {\n  \t\treturn \"name={{\" + (interpolator.keypath.str || interpolator.ref) + \"}}\";\n  \t}\n\n  \t// Boolean attributes\n  \tif (this.isBoolean) {\n  \t\treturn value ? name : \"\";\n  \t}\n\n  \tif (fragment) {\n  \t\t// special case - this catches undefined/null values (#1211)\n  \t\tif (fragment.items.length === 1 && fragment.items[0].value == null) {\n  \t\t\treturn \"\";\n  \t\t}\n\n  \t\tvalue = fragment.toString();\n  \t}\n\n  \tif (namespacePrefix) {\n  \t\tname = namespacePrefix + \":\" + name;\n  \t}\n\n  \treturn value ? name + \"=\\\"\" + Attribute_prototype_toString__escape(value) + \"\\\"\" : name;\n  }\n\n  function Attribute_prototype_toString__escape(value) {\n  \treturn value.replace(/&/g, \"&amp;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#39;\");\n  }\n\n  var Attribute_prototype_unbind = Attribute$unbind;\n\n  function Attribute$unbind() {\n  \t// ignore non-dynamic attributes\n  \tif (this.fragment) {\n  \t\tthis.fragment.unbind();\n  \t}\n\n  \tif (this.name === \"id\") {\n  \t\tdelete this.root.nodes[this.value];\n  \t}\n  }\n\n  var updateSelectValue = Attribute$updateSelect;\n\n  function Attribute$updateSelect() {\n  \tvar value = this.value,\n  \t    options,\n  \t    option,\n  \t    optionValue,\n  \t    i;\n\n  \tif (!this.locked) {\n  \t\tthis.node._ractive.value = value;\n\n  \t\toptions = this.node.options;\n  \t\ti = options.length;\n\n  \t\twhile (i--) {\n  \t\t\toption = options[i];\n  \t\t\toptionValue = option._ractive ? option._ractive.value : option.value; // options inserted via a triple don't have _ractive\n\n  \t\t\tif (optionValue == value) {\n  \t\t\t\t// double equals as we may be comparing numbers with strings\n  \t\t\t\toption.selected = true;\n  \t\t\t\tbreak;\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \t// if we're still here, it means the new value didn't match any of the options...\n  \t// TODO figure out what to do in this situation\n  }\n\n  var updateMultipleSelectValue = Attribute$updateMultipleSelect;\n  function Attribute$updateMultipleSelect() {\n  \tvar value = this.value,\n  \t    options,\n  \t    i,\n  \t    option,\n  \t    optionValue;\n\n  \tif (!isArray(value)) {\n  \t\tvalue = [value];\n  \t}\n\n  \toptions = this.node.options;\n  \ti = options.length;\n\n  \twhile (i--) {\n  \t\toption = options[i];\n  \t\toptionValue = option._ractive ? option._ractive.value : option.value; // options inserted via a triple don't have _ractive\n  \t\toption.selected = arrayContains(value, optionValue);\n  \t}\n  }\n\n  var updateRadioName = Attribute$updateRadioName;\n\n  function Attribute$updateRadioName() {\n  \tvar _ref = this;\n\n  \tvar node = _ref.node;\n  \tvar value = _ref.value;\n\n  \tnode.checked = value == node._ractive.value;\n  }\n\n  var updateRadioValue = Attribute$updateRadioValue;\n  function Attribute$updateRadioValue() {\n  \tvar wasChecked,\n  \t    node = this.node,\n  \t    binding,\n  \t    bindings,\n  \t    i;\n\n  \twasChecked = node.checked;\n\n  \tnode.value = this.element.getAttribute(\"value\");\n  \tnode.checked = this.element.getAttribute(\"value\") === this.element.getAttribute(\"name\");\n\n  \t// This is a special case - if the input was checked, and the value\n  \t// changed so that it's no longer checked, the twoway binding is\n  \t// most likely out of date. To fix it we have to jump through some\n  \t// hoops... this is a little kludgy but it works\n  \tif (wasChecked && !node.checked && this.element.binding) {\n  \t\tbindings = this.element.binding.siblings;\n\n  \t\tif (i = bindings.length) {\n  \t\t\twhile (i--) {\n  \t\t\t\tbinding = bindings[i];\n\n  \t\t\t\tif (!binding.element.node) {\n  \t\t\t\t\t// this is the initial render, siblings are still rendering!\n  \t\t\t\t\t// we'll come back later...\n  \t\t\t\t\treturn;\n  \t\t\t\t}\n\n  \t\t\t\tif (binding.element.node.checked) {\n  \t\t\t\t\tglobal_runloop.addRactive(binding.root);\n  \t\t\t\t\treturn binding.handleChange();\n  \t\t\t\t}\n  \t\t\t}\n\n  \t\t\tthis.root.viewmodel.set(binding.keypath, undefined);\n  \t\t}\n  \t}\n  }\n\n  var updateCheckboxName = Attribute$updateCheckboxName;\n  function Attribute$updateCheckboxName() {\n  \tvar _ref = this;\n\n  \tvar element = _ref.element;\n  \tvar node = _ref.node;\n  \tvar value = _ref.value;var binding = element.binding;var valueAttribute;var i;\n\n  \tvalueAttribute = element.getAttribute(\"value\");\n\n  \tif (!isArray(value)) {\n  \t\tbinding.isChecked = node.checked = value == valueAttribute;\n  \t} else {\n  \t\ti = value.length;\n  \t\twhile (i--) {\n  \t\t\tif (valueAttribute == value[i]) {\n  \t\t\t\tbinding.isChecked = node.checked = true;\n  \t\t\t\treturn;\n  \t\t\t}\n  \t\t}\n  \t\tbinding.isChecked = node.checked = false;\n  \t}\n  }\n\n  var updateClassName = Attribute$updateClassName;\n  function Attribute$updateClassName() {\n  \tthis.node.className = safeToStringValue(this.value);\n  }\n\n  var updateIdAttribute = Attribute$updateIdAttribute;\n\n  function Attribute$updateIdAttribute() {\n  \tvar _ref = this;\n\n  \tvar node = _ref.node;\n  \tvar value = _ref.value;\n\n  \tthis.root.nodes[value] = node;\n  \tnode.id = value;\n  }\n\n  var updateIEStyleAttribute = Attribute$updateIEStyleAttribute;\n\n  function Attribute$updateIEStyleAttribute() {\n  \tvar node, value;\n\n  \tnode = this.node;\n  \tvalue = this.value;\n\n  \tif (value === undefined) {\n  \t\tvalue = \"\";\n  \t}\n\n  \tnode.style.setAttribute(\"cssText\", value);\n  }\n\n  var updateContentEditableValue = Attribute$updateContentEditableValue;\n\n  function Attribute$updateContentEditableValue() {\n  \tvar value = this.value;\n\n  \tif (value === undefined) {\n  \t\tvalue = \"\";\n  \t}\n\n  \tif (!this.locked) {\n  \t\tthis.node.innerHTML = value;\n  \t}\n  }\n\n  var updateValue = Attribute$updateValue;\n\n  function Attribute$updateValue() {\n  \tvar _ref = this;\n\n  \tvar node = _ref.node;\n  \tvar value = _ref.value;\n\n  \t// store actual value, so it doesn't get coerced to a string\n  \tnode._ractive.value = value;\n\n  \t// with two-way binding, only update if the change wasn't initiated by the user\n  \t// otherwise the cursor will often be sent to the wrong place\n  \tif (!this.locked) {\n  \t\tnode.value = value == undefined ? \"\" : value;\n  \t}\n  }\n\n  var updateBoolean = Attribute$updateBooleanAttribute;\n\n  function Attribute$updateBooleanAttribute() {\n  \t// with two-way binding, only update if the change wasn't initiated by the user\n  \t// otherwise the cursor will often be sent to the wrong place\n  \tif (!this.locked) {\n  \t\tthis.node[this.propertyName] = this.value;\n  \t}\n  }\n\n  var updateEverythingElse = Attribute$updateEverythingElse;\n\n  function Attribute$updateEverythingElse() {\n  \tvar _ref = this;\n\n  \tvar node = _ref.node;\n  \tvar namespace = _ref.namespace;\n  \tvar name = _ref.name;\n  \tvar value = _ref.value;\n  \tvar fragment = _ref.fragment;\n\n  \tif (namespace) {\n  \t\tnode.setAttributeNS(namespace, name, (fragment || value).toString());\n  \t} else if (!this.isBoolean) {\n  \t\tif (value == null) {\n  \t\t\tnode.removeAttribute(name);\n  \t\t} else {\n  \t\t\tnode.setAttribute(name, (fragment || value).toString());\n  \t\t}\n  \t}\n\n  \t// Boolean attributes - truthy becomes '', falsy means 'remove attribute'\n  \telse {\n  \t\tif (value) {\n  \t\t\tnode.setAttribute(name, \"\");\n  \t\t} else {\n  \t\t\tnode.removeAttribute(name);\n  \t\t}\n  \t}\n  }\n\n  // There are a few special cases when it comes to updating attributes. For this reason,\n  // the prototype .update() method points to this method, which waits until the\n  // attribute has finished initialising, then replaces the prototype method with a more\n  // suitable one. That way, we save ourselves doing a bunch of tests on each call\n  var Attribute_prototype_update = Attribute$update;\n  function Attribute$update() {\n  \tvar _ref = this;\n\n  \tvar name = _ref.name;\n  \tvar element = _ref.element;\n  \tvar node = _ref.node;var type;var updateMethod;\n\n  \tif (name === \"id\") {\n  \t\tupdateMethod = updateIdAttribute;\n  \t} else if (name === \"value\") {\n  \t\t// special case - selects\n  \t\tif (element.name === \"select\" && name === \"value\") {\n  \t\t\tupdateMethod = element.getAttribute(\"multiple\") ? updateMultipleSelectValue : updateSelectValue;\n  \t\t} else if (element.name === \"textarea\") {\n  \t\t\tupdateMethod = updateValue;\n  \t\t}\n\n  \t\t// special case - contenteditable\n  \t\telse if (element.getAttribute(\"contenteditable\") != null) {\n  \t\t\tupdateMethod = updateContentEditableValue;\n  \t\t}\n\n  \t\t// special case - <input>\n  \t\telse if (element.name === \"input\") {\n  \t\t\ttype = element.getAttribute(\"type\");\n\n  \t\t\t// type='file' value='{{fileList}}'>\n  \t\t\tif (type === \"file\") {\n  \t\t\t\tupdateMethod = noop; // read-only\n  \t\t\t}\n\n  \t\t\t// type='radio' name='{{twoway}}'\n  \t\t\telse if (type === \"radio\" && element.binding && element.binding.name === \"name\") {\n  \t\t\t\tupdateMethod = updateRadioValue;\n  \t\t\t} else {\n  \t\t\t\tupdateMethod = updateValue;\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \t// special case - <input type='radio' name='{{twoway}}' value='foo'>\n  \telse if (this.isTwoway && name === \"name\") {\n  \t\tif (node.type === \"radio\") {\n  \t\t\tupdateMethod = updateRadioName;\n  \t\t} else if (node.type === \"checkbox\") {\n  \t\t\tupdateMethod = updateCheckboxName;\n  \t\t}\n  \t}\n\n  \t// special case - style attributes in Internet Exploder\n  \telse if (name === \"style\" && node.style.setAttribute) {\n  \t\tupdateMethod = updateIEStyleAttribute;\n  \t}\n\n  \t// special case - class names. IE fucks things up, again\n  \telse if (name === \"class\" && (!node.namespaceURI || node.namespaceURI === namespaces.html)) {\n  \t\tupdateMethod = updateClassName;\n  \t} else if (this.useProperty) {\n  \t\tupdateMethod = updateBoolean;\n  \t}\n\n  \tif (!updateMethod) {\n  \t\tupdateMethod = updateEverythingElse;\n  \t}\n\n  \tthis.update = updateMethod;\n  \tthis.update();\n  }\n\n  var Attribute = function (options) {\n  \tthis.init(options);\n  };\n\n  Attribute.prototype = {\n  \tbubble: Attribute_prototype_bubble,\n  \tinit: prototype_init,\n  \trebind: Attribute_prototype_rebind,\n  \trender: Attribute_prototype_render,\n  \ttoString: Attribute_prototype_toString,\n  \tunbind: Attribute_prototype_unbind,\n  \tupdate: Attribute_prototype_update\n  };\n\n  var _Attribute = Attribute;\n\n  var createAttributes = function (element, attributes) {\n  \tvar name,\n  \t    attribute,\n  \t    result = [];\n\n  \tfor (name in attributes) {\n  \t\t// skip binding attributes\n  \t\tif (name === \"twoway\" || name === \"lazy\") {\n  \t\t\tcontinue;\n  \t\t}\n\n  \t\tif (attributes.hasOwnProperty(name)) {\n  \t\t\tattribute = new _Attribute({\n  \t\t\t\telement: element,\n  \t\t\t\tname: name,\n  \t\t\t\tvalue: attributes[name],\n  \t\t\t\troot: element.root\n  \t\t\t});\n\n  \t\t\tresult[name] = attribute;\n\n  \t\t\tif (name !== \"value\") {\n  \t\t\t\tresult.push(attribute);\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \t// value attribute goes last. This is because it\n  \t// may get clamped on render otherwise, e.g. in\n  \t// `<input type='range' value='999' min='0' max='1000'>`\n  \t// since default max is 100\n  \tif (attribute = result.value) {\n  \t\tresult.push(attribute);\n  \t}\n\n  \treturn result;\n  };\n\n  var _ConditionalAttribute__div;\n\n  if (typeof document !== \"undefined\") {\n  \t_ConditionalAttribute__div = createElement(\"div\");\n  }\n\n  var ConditionalAttribute = function (element, template) {\n  \tthis.element = element;\n  \tthis.root = element.root;\n  \tthis.parentFragment = element.parentFragment;\n\n  \tthis.attributes = [];\n\n  \tthis.fragment = new virtualdom_Fragment({\n  \t\troot: element.root,\n  \t\towner: this,\n  \t\ttemplate: [template]\n  \t});\n  };\n\n  ConditionalAttribute.prototype = {\n  \tbubble: function () {\n  \t\tif (this.node) {\n  \t\t\tthis.update();\n  \t\t}\n\n  \t\tthis.element.bubble();\n  \t},\n\n  \trebind: function (oldKeypath, newKeypath) {\n  \t\tthis.fragment.rebind(oldKeypath, newKeypath);\n  \t},\n\n  \trender: function (node) {\n  \t\tthis.node = node;\n  \t\tthis.isSvg = node.namespaceURI === namespaces.svg;\n\n  \t\tthis.update();\n  \t},\n\n  \tunbind: function () {\n  \t\tthis.fragment.unbind();\n  \t},\n\n  \tupdate: function () {\n  \t\tvar _this = this;\n\n  \t\tvar str, attrs;\n\n  \t\tstr = this.fragment.toString();\n  \t\tattrs = parseAttributes(str, this.isSvg);\n\n  \t\t// any attributes that previously existed but no longer do\n  \t\t// must be removed\n  \t\tthis.attributes.filter(function (a) {\n  \t\t\treturn notIn(attrs, a);\n  \t\t}).forEach(function (a) {\n  \t\t\t_this.node.removeAttribute(a.name);\n  \t\t});\n\n  \t\tattrs.forEach(function (a) {\n  \t\t\t_this.node.setAttribute(a.name, a.value);\n  \t\t});\n\n  \t\tthis.attributes = attrs;\n  \t},\n\n  \ttoString: function () {\n  \t\treturn this.fragment.toString();\n  \t}\n  };\n\n  var _ConditionalAttribute = ConditionalAttribute;\n\n  function parseAttributes(str, isSvg) {\n  \tvar tag = isSvg ? \"svg\" : \"div\";\n  \t_ConditionalAttribute__div.innerHTML = \"<\" + tag + \" \" + str + \"></\" + tag + \">\";\n\n  \treturn toArray(_ConditionalAttribute__div.childNodes[0].attributes);\n  }\n\n  function notIn(haystack, needle) {\n  \tvar i = haystack.length;\n\n  \twhile (i--) {\n  \t\tif (haystack[i].name === needle.name) {\n  \t\t\treturn false;\n  \t\t}\n  \t}\n\n  \treturn true;\n  }\n\n  var createConditionalAttributes = function (element, attributes) {\n  \tif (!attributes) {\n  \t\treturn [];\n  \t}\n\n  \treturn attributes.map(function (a) {\n  \t\treturn new _ConditionalAttribute(element, a);\n  \t});\n  };\n\n  var Binding = function (element) {\n  \tvar interpolator, keypath, value, parentForm;\n\n  \tthis.element = element;\n  \tthis.root = element.root;\n  \tthis.attribute = element.attributes[this.name || \"value\"];\n\n  \tinterpolator = this.attribute.interpolator;\n  \tinterpolator.twowayBinding = this;\n\n  \tif (keypath = interpolator.keypath) {\n  \t\tif (keypath.str.slice(-1) === \"}\") {\n  \t\t\twarnOnceIfDebug(\"Two-way binding does not work with expressions (`%s` on <%s>)\", interpolator.resolver.uniqueString, element.name, { ractive: this.root });\n  \t\t\treturn false;\n  \t\t}\n\n  \t\tif (keypath.isSpecial) {\n  \t\t\twarnOnceIfDebug(\"Two-way binding does not work with %s\", interpolator.resolver.ref, { ractive: this.root });\n  \t\t\treturn false;\n  \t\t}\n  \t} else {\n  \t\t// A mustache may be *ambiguous*. Let's say we were given\n  \t\t// `value=\"{{bar}}\"`. If the context was `foo`, and `foo.bar`\n  \t\t// *wasn't* `undefined`, the keypath would be `foo.bar`.\n  \t\t// Then, any user input would result in `foo.bar` being updated.\n  \t\t//\n  \t\t// If, however, `foo.bar` *was* undefined, and so was `bar`, we would be\n  \t\t// left with an unresolved partial keypath - so we are forced to make an\n  \t\t// assumption. That assumption is that the input in question should\n  \t\t// be forced to resolve to `bar`, and any user input would affect `bar`\n  \t\t// and not `foo.bar`.\n  \t\t//\n  \t\t// Did that make any sense? No? Oh. Sorry. Well the moral of the story is\n  \t\t// be explicit when using two-way data-binding about what keypath you're\n  \t\t// updating. Using it in lists is probably a recipe for confusion...\n  \t\tvar ref = interpolator.template.r ? \"'\" + interpolator.template.r + \"' reference\" : \"expression\";\n  \t\twarnIfDebug(\"The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity\", ref, { ractive: this.root });\n  \t\tinterpolator.resolver.forceResolution();\n  \t\tkeypath = interpolator.keypath;\n  \t}\n\n  \tthis.attribute.isTwoway = true;\n  \tthis.keypath = keypath;\n\n  \t// initialise value, if it's undefined\n  \tvalue = this.root.viewmodel.get(keypath);\n\n  \tif (value === undefined && this.getInitialValue) {\n  \t\tvalue = this.getInitialValue();\n\n  \t\tif (value !== undefined) {\n  \t\t\tthis.root.viewmodel.set(keypath, value);\n  \t\t}\n  \t}\n\n  \tif (parentForm = findParentForm(element)) {\n  \t\tthis.resetValue = value;\n  \t\tparentForm.formBindings.push(this);\n  \t}\n  };\n\n  Binding.prototype = {\n  \thandleChange: function () {\n  \t\tvar _this = this;\n\n  \t\tglobal_runloop.start(this.root);\n  \t\tthis.attribute.locked = true;\n  \t\tthis.root.viewmodel.set(this.keypath, this.getValue());\n  \t\tglobal_runloop.scheduleTask(function () {\n  \t\t\treturn _this.attribute.locked = false;\n  \t\t});\n  \t\tglobal_runloop.end();\n  \t},\n\n  \trebound: function () {\n  \t\tvar bindings, oldKeypath, newKeypath;\n\n  \t\toldKeypath = this.keypath;\n  \t\tnewKeypath = this.attribute.interpolator.keypath;\n\n  \t\t// The attribute this binding is linked to has already done the work\n  \t\tif (oldKeypath === newKeypath) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tremoveFromArray(this.root._twowayBindings[oldKeypath.str], this);\n\n  \t\tthis.keypath = newKeypath;\n\n  \t\tbindings = this.root._twowayBindings[newKeypath.str] || (this.root._twowayBindings[newKeypath.str] = []);\n  \t\tbindings.push(this);\n  \t},\n\n  \tunbind: function () {}\n  };\n\n  Binding.extend = function (properties) {\n  \tvar Parent = this,\n  \t    SpecialisedBinding;\n\n  \tSpecialisedBinding = function (element) {\n  \t\tBinding.call(this, element);\n\n  \t\tif (this.init) {\n  \t\t\tthis.init();\n  \t\t}\n  \t};\n\n  \tSpecialisedBinding.prototype = create(Parent.prototype);\n  \tutils_object__extend(SpecialisedBinding.prototype, properties);\n\n  \tSpecialisedBinding.extend = Binding.extend;\n\n  \treturn SpecialisedBinding;\n  };\n\n  var Binding_Binding = Binding;\n\n  function findParentForm(element) {\n  \twhile (element = element.parent) {\n  \t\tif (element.name === \"form\") {\n  \t\t\treturn element;\n  \t\t}\n  \t}\n  }\n\n  // this is called when the element is unbound.\n  // Specialised bindings can override it\n\n  // This is the handler for DOM events that would lead to a change in the model\n  // (i.e. change, sometimes, input, and occasionally click and keyup)\n  var handleDomEvent = handleChange;\n\n  function handleChange() {\n  \tthis._ractive.binding.handleChange();\n  }\n\n  var GenericBinding;\n\n  GenericBinding = Binding_Binding.extend({\n  \tgetInitialValue: function () {\n  \t\treturn \"\";\n  \t},\n\n  \tgetValue: function () {\n  \t\treturn this.element.node.value;\n  \t},\n\n  \trender: function () {\n  \t\tvar node = this.element.node,\n  \t\t    lazy,\n  \t\t    timeout = false;\n  \t\tthis.rendered = true;\n\n  \t\t// any lazy setting for this element overrides the root\n  \t\t// if the value is a number, it's a timeout\n  \t\tlazy = this.root.lazy;\n  \t\tif (this.element.lazy === true) {\n  \t\t\tlazy = true;\n  \t\t} else if (this.element.lazy === false) {\n  \t\t\tlazy = false;\n  \t\t} else if (is__isNumeric(this.element.lazy)) {\n  \t\t\tlazy = false;\n  \t\t\ttimeout = +this.element.lazy;\n  \t\t} else if (is__isNumeric(lazy || \"\")) {\n  \t\t\ttimeout = +lazy;\n  \t\t\tlazy = false;\n\n  \t\t\t// make sure the timeout is available to the handler\n  \t\t\tthis.element.lazy = timeout;\n  \t\t}\n\n  \t\tthis.handler = timeout ? handleDelay : handleDomEvent;\n\n  \t\tnode.addEventListener(\"change\", handleDomEvent, false);\n\n  \t\tif (!lazy) {\n  \t\t\tnode.addEventListener(\"input\", this.handler, false);\n\n  \t\t\tif (node.attachEvent) {\n  \t\t\t\tnode.addEventListener(\"keyup\", this.handler, false);\n  \t\t\t}\n  \t\t}\n\n  \t\tnode.addEventListener(\"blur\", handleBlur, false);\n  \t},\n\n  \tunrender: function () {\n  \t\tvar node = this.element.node;\n  \t\tthis.rendered = false;\n\n  \t\tnode.removeEventListener(\"change\", handleDomEvent, false);\n  \t\tnode.removeEventListener(\"input\", this.handler, false);\n  \t\tnode.removeEventListener(\"keyup\", this.handler, false);\n  \t\tnode.removeEventListener(\"blur\", handleBlur, false);\n  \t}\n  });\n\n  var Binding_GenericBinding = GenericBinding;\n\n  function handleBlur() {\n  \tvar value;\n\n  \thandleDomEvent.call(this);\n\n  \tvalue = this._ractive.root.viewmodel.get(this._ractive.binding.keypath);\n  \tthis.value = value == undefined ? \"\" : value;\n  }\n\n  function handleDelay() {\n  \tvar binding = this._ractive.binding,\n  \t    el = this;\n\n  \tif (!!binding._timeout) clearTimeout(binding._timeout);\n\n  \tbinding._timeout = setTimeout(function () {\n  \t\tif (binding.rendered) handleDomEvent.call(el);\n  \t\tbinding._timeout = undefined;\n  \t}, binding.element.lazy);\n  }\n\n  var ContentEditableBinding = Binding_GenericBinding.extend({\n  \tgetInitialValue: function () {\n  \t\treturn this.element.fragment ? this.element.fragment.toString() : \"\";\n  \t},\n\n  \tgetValue: function () {\n  \t\treturn this.element.node.innerHTML;\n  \t}\n  });\n\n  var Binding_ContentEditableBinding = ContentEditableBinding;\n\n  var shared_getSiblings = getSiblings;\n  var sets = {};\n  function getSiblings(id, group, keypath) {\n  \tvar hash = id + group + keypath;\n  \treturn sets[hash] || (sets[hash] = []);\n  }\n\n  var RadioBinding = Binding_Binding.extend({\n  \tname: \"checked\",\n\n  \tinit: function () {\n  \t\tthis.siblings = shared_getSiblings(this.root._guid, \"radio\", this.element.getAttribute(\"name\"));\n  \t\tthis.siblings.push(this);\n  \t},\n\n  \trender: function () {\n  \t\tvar node = this.element.node;\n\n  \t\tnode.addEventListener(\"change\", handleDomEvent, false);\n\n  \t\tif (node.attachEvent) {\n  \t\t\tnode.addEventListener(\"click\", handleDomEvent, false);\n  \t\t}\n  \t},\n\n  \tunrender: function () {\n  \t\tvar node = this.element.node;\n\n  \t\tnode.removeEventListener(\"change\", handleDomEvent, false);\n  \t\tnode.removeEventListener(\"click\", handleDomEvent, false);\n  \t},\n\n  \thandleChange: function () {\n  \t\tglobal_runloop.start(this.root);\n\n  \t\tthis.siblings.forEach(function (binding) {\n  \t\t\tbinding.root.viewmodel.set(binding.keypath, binding.getValue());\n  \t\t});\n\n  \t\tglobal_runloop.end();\n  \t},\n\n  \tgetValue: function () {\n  \t\treturn this.element.node.checked;\n  \t},\n\n  \tunbind: function () {\n  \t\tremoveFromArray(this.siblings, this);\n  \t}\n  });\n\n  var Binding_RadioBinding = RadioBinding;\n\n  var RadioNameBinding = Binding_Binding.extend({\n  \tname: \"name\",\n\n  \tinit: function () {\n  \t\tthis.siblings = shared_getSiblings(this.root._guid, \"radioname\", this.keypath.str);\n  \t\tthis.siblings.push(this);\n\n  \t\tthis.radioName = true; // so that ractive.updateModel() knows what to do with this\n  \t},\n\n  \tgetInitialValue: function () {\n  \t\tif (this.element.getAttribute(\"checked\")) {\n  \t\t\treturn this.element.getAttribute(\"value\");\n  \t\t}\n  \t},\n\n  \trender: function () {\n  \t\tvar node = this.element.node;\n\n  \t\tnode.name = \"{{\" + this.keypath.str + \"}}\";\n  \t\tnode.checked = this.root.viewmodel.get(this.keypath) == this.element.getAttribute(\"value\");\n\n  \t\tnode.addEventListener(\"change\", handleDomEvent, false);\n\n  \t\tif (node.attachEvent) {\n  \t\t\tnode.addEventListener(\"click\", handleDomEvent, false);\n  \t\t}\n  \t},\n\n  \tunrender: function () {\n  \t\tvar node = this.element.node;\n\n  \t\tnode.removeEventListener(\"change\", handleDomEvent, false);\n  \t\tnode.removeEventListener(\"click\", handleDomEvent, false);\n  \t},\n\n  \tgetValue: function () {\n  \t\tvar node = this.element.node;\n  \t\treturn node._ractive ? node._ractive.value : node.value;\n  \t},\n\n  \thandleChange: function () {\n  \t\t// If this <input> is the one that's checked, then the value of its\n  \t\t// `name` keypath gets set to its value\n  \t\tif (this.element.node.checked) {\n  \t\t\tBinding_Binding.prototype.handleChange.call(this);\n  \t\t}\n  \t},\n\n  \trebound: function (oldKeypath, newKeypath) {\n  \t\tvar node;\n\n  \t\tBinding_Binding.prototype.rebound.call(this, oldKeypath, newKeypath);\n\n  \t\tif (node = this.element.node) {\n  \t\t\tnode.name = \"{{\" + this.keypath.str + \"}}\";\n  \t\t}\n  \t},\n\n  \tunbind: function () {\n  \t\tremoveFromArray(this.siblings, this);\n  \t}\n  });\n\n  var Binding_RadioNameBinding = RadioNameBinding;\n\n  var CheckboxNameBinding = Binding_Binding.extend({\n  \tname: \"name\",\n\n  \tgetInitialValue: function () {\n  \t\t// This only gets called once per group (of inputs that\n  \t\t// share a name), because it only gets called if there\n  \t\t// isn't an initial value. By the same token, we can make\n  \t\t// a note of that fact that there was no initial value,\n  \t\t// and populate it using any `checked` attributes that\n  \t\t// exist (which users should avoid, but which we should\n  \t\t// support anyway to avoid breaking expectations)\n  \t\tthis.noInitialValue = true;\n  \t\treturn [];\n  \t},\n\n  \tinit: function () {\n  \t\tvar existingValue, bindingValue;\n\n  \t\tthis.checkboxName = true; // so that ractive.updateModel() knows what to do with this\n\n  \t\t// Each input has a reference to an array containing it and its\n  \t\t// siblings, as two-way binding depends on being able to ascertain\n  \t\t// the status of all inputs within the group\n  \t\tthis.siblings = shared_getSiblings(this.root._guid, \"checkboxes\", this.keypath.str);\n  \t\tthis.siblings.push(this);\n\n  \t\tif (this.noInitialValue) {\n  \t\t\tthis.siblings.noInitialValue = true;\n  \t\t}\n\n  \t\t// If no initial value was set, and this input is checked, we\n  \t\t// update the model\n  \t\tif (this.siblings.noInitialValue && this.element.getAttribute(\"checked\")) {\n  \t\t\texistingValue = this.root.viewmodel.get(this.keypath);\n  \t\t\tbindingValue = this.element.getAttribute(\"value\");\n\n  \t\t\texistingValue.push(bindingValue);\n  \t\t}\n  \t},\n\n  \tunbind: function () {\n  \t\tremoveFromArray(this.siblings, this);\n  \t},\n\n  \trender: function () {\n  \t\tvar node = this.element.node,\n  \t\t    existingValue,\n  \t\t    bindingValue;\n\n  \t\texistingValue = this.root.viewmodel.get(this.keypath);\n  \t\tbindingValue = this.element.getAttribute(\"value\");\n\n  \t\tif (isArray(existingValue)) {\n  \t\t\tthis.isChecked = arrayContains(existingValue, bindingValue);\n  \t\t} else {\n  \t\t\tthis.isChecked = existingValue == bindingValue;\n  \t\t}\n\n  \t\tnode.name = \"{{\" + this.keypath.str + \"}}\";\n  \t\tnode.checked = this.isChecked;\n\n  \t\tnode.addEventListener(\"change\", handleDomEvent, false);\n\n  \t\t// in case of IE emergency, bind to click event as well\n  \t\tif (node.attachEvent) {\n  \t\t\tnode.addEventListener(\"click\", handleDomEvent, false);\n  \t\t}\n  \t},\n\n  \tunrender: function () {\n  \t\tvar node = this.element.node;\n\n  \t\tnode.removeEventListener(\"change\", handleDomEvent, false);\n  \t\tnode.removeEventListener(\"click\", handleDomEvent, false);\n  \t},\n\n  \tchanged: function () {\n  \t\tvar wasChecked = !!this.isChecked;\n  \t\tthis.isChecked = this.element.node.checked;\n  \t\treturn this.isChecked === wasChecked;\n  \t},\n\n  \thandleChange: function () {\n  \t\tthis.isChecked = this.element.node.checked;\n  \t\tBinding_Binding.prototype.handleChange.call(this);\n  \t},\n\n  \tgetValue: function () {\n  \t\treturn this.siblings.filter(isChecked).map(Binding_CheckboxNameBinding__getValue);\n  \t}\n  });\n\n  function isChecked(binding) {\n  \treturn binding.isChecked;\n  }\n\n  function Binding_CheckboxNameBinding__getValue(binding) {\n  \treturn binding.element.getAttribute(\"value\");\n  }\n\n  var Binding_CheckboxNameBinding = CheckboxNameBinding;\n\n  var CheckboxBinding = Binding_Binding.extend({\n  \tname: \"checked\",\n\n  \trender: function () {\n  \t\tvar node = this.element.node;\n\n  \t\tnode.addEventListener(\"change\", handleDomEvent, false);\n\n  \t\tif (node.attachEvent) {\n  \t\t\tnode.addEventListener(\"click\", handleDomEvent, false);\n  \t\t}\n  \t},\n\n  \tunrender: function () {\n  \t\tvar node = this.element.node;\n\n  \t\tnode.removeEventListener(\"change\", handleDomEvent, false);\n  \t\tnode.removeEventListener(\"click\", handleDomEvent, false);\n  \t},\n\n  \tgetValue: function () {\n  \t\treturn this.element.node.checked;\n  \t}\n  });\n\n  var Binding_CheckboxBinding = CheckboxBinding;\n\n  var SelectBinding = Binding_Binding.extend({\n  \tgetInitialValue: function () {\n  \t\tvar options = this.element.options,\n  \t\t    len,\n  \t\t    i,\n  \t\t    value,\n  \t\t    optionWasSelected;\n\n  \t\tif (this.element.getAttribute(\"value\") !== undefined) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\ti = len = options.length;\n\n  \t\tif (!len) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\t// take the final selected option...\n  \t\twhile (i--) {\n  \t\t\tif (options[i].getAttribute(\"selected\")) {\n  \t\t\t\tvalue = options[i].getAttribute(\"value\");\n  \t\t\t\toptionWasSelected = true;\n  \t\t\t\tbreak;\n  \t\t\t}\n  \t\t}\n\n  \t\t// or the first non-disabled option, if none are selected\n  \t\tif (!optionWasSelected) {\n  \t\t\twhile (++i < len) {\n  \t\t\t\tif (!options[i].getAttribute(\"disabled\")) {\n  \t\t\t\t\tvalue = options[i].getAttribute(\"value\");\n  \t\t\t\t\tbreak;\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n\n  \t\t// This is an optimisation (aka hack) that allows us to forgo some\n  \t\t// other more expensive work\n  \t\tif (value !== undefined) {\n  \t\t\tthis.element.attributes.value.value = value;\n  \t\t}\n\n  \t\treturn value;\n  \t},\n\n  \trender: function () {\n  \t\tthis.element.node.addEventListener(\"change\", handleDomEvent, false);\n  \t},\n\n  \tunrender: function () {\n  \t\tthis.element.node.removeEventListener(\"change\", handleDomEvent, false);\n  \t},\n\n  \t// TODO this method is an anomaly... is it necessary?\n  \tsetValue: function (value) {\n  \t\tthis.root.viewmodel.set(this.keypath, value);\n  \t},\n\n  \tgetValue: function () {\n  \t\tvar options, i, len, option, optionValue;\n\n  \t\toptions = this.element.node.options;\n  \t\tlen = options.length;\n\n  \t\tfor (i = 0; i < len; i += 1) {\n  \t\t\toption = options[i];\n\n  \t\t\tif (options[i].selected) {\n  \t\t\t\toptionValue = option._ractive ? option._ractive.value : option.value;\n  \t\t\t\treturn optionValue;\n  \t\t\t}\n  \t\t}\n  \t},\n\n  \tforceUpdate: function () {\n  \t\tvar _this = this;\n\n  \t\tvar value = this.getValue();\n\n  \t\tif (value !== undefined) {\n  \t\t\tthis.attribute.locked = true;\n  \t\t\tglobal_runloop.scheduleTask(function () {\n  \t\t\t\treturn _this.attribute.locked = false;\n  \t\t\t});\n  \t\t\tthis.root.viewmodel.set(this.keypath, value);\n  \t\t}\n  \t}\n  });\n\n  var Binding_SelectBinding = SelectBinding;\n\n  var MultipleSelectBinding = Binding_SelectBinding.extend({\n  \tgetInitialValue: function () {\n  \t\treturn this.element.options.filter(function (option) {\n  \t\t\treturn option.getAttribute(\"selected\");\n  \t\t}).map(function (option) {\n  \t\t\treturn option.getAttribute(\"value\");\n  \t\t});\n  \t},\n\n  \trender: function () {\n  \t\tvar valueFromModel;\n\n  \t\tthis.element.node.addEventListener(\"change\", handleDomEvent, false);\n\n  \t\tvalueFromModel = this.root.viewmodel.get(this.keypath);\n\n  \t\tif (valueFromModel === undefined) {\n  \t\t\t// get value from DOM, if possible\n  \t\t\tthis.handleChange();\n  \t\t}\n  \t},\n\n  \tunrender: function () {\n  \t\tthis.element.node.removeEventListener(\"change\", handleDomEvent, false);\n  \t},\n\n  \tsetValue: function () {\n  \t\tthrow new Error(\"TODO not implemented yet\");\n  \t},\n\n  \tgetValue: function () {\n  \t\tvar selectedValues, options, i, len, option, optionValue;\n\n  \t\tselectedValues = [];\n  \t\toptions = this.element.node.options;\n  \t\tlen = options.length;\n\n  \t\tfor (i = 0; i < len; i += 1) {\n  \t\t\toption = options[i];\n\n  \t\t\tif (option.selected) {\n  \t\t\t\toptionValue = option._ractive ? option._ractive.value : option.value;\n  \t\t\t\tselectedValues.push(optionValue);\n  \t\t\t}\n  \t\t}\n\n  \t\treturn selectedValues;\n  \t},\n\n  \thandleChange: function () {\n  \t\tvar attribute, previousValue, value;\n\n  \t\tattribute = this.attribute;\n  \t\tpreviousValue = attribute.value;\n\n  \t\tvalue = this.getValue();\n\n  \t\tif (previousValue === undefined || !arrayContentsMatch(value, previousValue)) {\n  \t\t\tBinding_SelectBinding.prototype.handleChange.call(this);\n  \t\t}\n\n  \t\treturn this;\n  \t},\n\n  \tforceUpdate: function () {\n  \t\tvar _this = this;\n\n  \t\tvar value = this.getValue();\n\n  \t\tif (value !== undefined) {\n  \t\t\tthis.attribute.locked = true;\n  \t\t\tglobal_runloop.scheduleTask(function () {\n  \t\t\t\treturn _this.attribute.locked = false;\n  \t\t\t});\n  \t\t\tthis.root.viewmodel.set(this.keypath, value);\n  \t\t}\n  \t},\n\n  \tupdateModel: function () {\n  \t\tif (this.attribute.value === undefined || !this.attribute.value.length) {\n  \t\t\tthis.root.viewmodel.set(this.keypath, this.initialValue);\n  \t\t}\n  \t}\n  });\n\n  var Binding_MultipleSelectBinding = MultipleSelectBinding;\n\n  var FileListBinding = Binding_Binding.extend({\n  \trender: function () {\n  \t\tthis.element.node.addEventListener(\"change\", handleDomEvent, false);\n  \t},\n\n  \tunrender: function () {\n  \t\tthis.element.node.removeEventListener(\"change\", handleDomEvent, false);\n  \t},\n\n  \tgetValue: function () {\n  \t\treturn this.element.node.files;\n  \t}\n  });\n\n  var Binding_FileListBinding = FileListBinding;\n\n  var NumericBinding = Binding_GenericBinding.extend({\n  \tgetInitialValue: function () {\n  \t\treturn undefined;\n  \t},\n\n  \tgetValue: function () {\n  \t\tvar value = parseFloat(this.element.node.value);\n  \t\treturn isNaN(value) ? undefined : value;\n  \t}\n  });\n\n  var init_createTwowayBinding = createTwowayBinding;\n\n  function createTwowayBinding(element) {\n  \tvar attributes = element.attributes,\n  \t    type,\n  \t    Binding,\n  \t    bindName,\n  \t    bindChecked,\n  \t    binding;\n\n  \t// if this is a late binding, and there's already one, it\n  \t// needs to be torn down\n  \tif (element.binding) {\n  \t\telement.binding.teardown();\n  \t\telement.binding = null;\n  \t}\n\n  \t// contenteditable\n  \tif (\n  \t// if the contenteditable attribute is true or is bindable and may thus become true\n  \t(element.getAttribute(\"contenteditable\") || !!attributes.contenteditable && isBindable(attributes.contenteditable)) && isBindable(attributes.value)) {\n  \t\tBinding = Binding_ContentEditableBinding;\n  \t}\n\n  \t// <input>\n  \telse if (element.name === \"input\") {\n  \t\ttype = element.getAttribute(\"type\");\n\n  \t\tif (type === \"radio\" || type === \"checkbox\") {\n  \t\t\tbindName = isBindable(attributes.name);\n  \t\t\tbindChecked = isBindable(attributes.checked);\n\n  \t\t\t// we can either bind the name attribute, or the checked attribute - not both\n  \t\t\tif (bindName && bindChecked) {\n  \t\t\t\twarnIfDebug(\"A radio input can have two-way binding on its name attribute, or its checked attribute - not both\", { ractive: element.root });\n  \t\t\t}\n\n  \t\t\tif (bindName) {\n  \t\t\t\tBinding = type === \"radio\" ? Binding_RadioNameBinding : Binding_CheckboxNameBinding;\n  \t\t\t} else if (bindChecked) {\n  \t\t\t\tBinding = type === \"radio\" ? Binding_RadioBinding : Binding_CheckboxBinding;\n  \t\t\t}\n  \t\t} else if (type === \"file\" && isBindable(attributes.value)) {\n  \t\t\tBinding = Binding_FileListBinding;\n  \t\t} else if (isBindable(attributes.value)) {\n  \t\t\tBinding = type === \"number\" || type === \"range\" ? NumericBinding : Binding_GenericBinding;\n  \t\t}\n  \t}\n\n  \t// <select>\n  \telse if (element.name === \"select\" && isBindable(attributes.value)) {\n  \t\tBinding = element.getAttribute(\"multiple\") ? Binding_MultipleSelectBinding : Binding_SelectBinding;\n  \t}\n\n  \t// <textarea>\n  \telse if (element.name === \"textarea\" && isBindable(attributes.value)) {\n  \t\tBinding = Binding_GenericBinding;\n  \t}\n\n  \tif (Binding && (binding = new Binding(element)) && binding.keypath) {\n  \t\treturn binding;\n  \t}\n  }\n\n  function isBindable(attribute) {\n  \treturn attribute && attribute.isBindable;\n  }\n\n  // and this element also has a value attribute to bind\n\n  var EventHandler_prototype_bubble = EventHandler$bubble;\n\n  function EventHandler$bubble() {\n  \tvar hasAction = this.getAction();\n\n  \tif (hasAction && !this.hasListener) {\n  \t\tthis.listen();\n  \t} else if (!hasAction && this.hasListener) {\n  \t\tthis.unrender();\n  \t}\n  }\n\n  // This function may be overwritten, if the event directive\n  // includes parameters\n  var EventHandler_prototype_fire = EventHandler$fire;\n  function EventHandler$fire(event) {\n  \tshared_fireEvent(this.root, this.getAction(), { event: event });\n  }\n\n  var getAction = EventHandler$getAction;\n\n  function EventHandler$getAction() {\n  \treturn this.action.toString().trim();\n  }\n\n  var EventHandler_prototype_init = EventHandler$init;\n\n  var eventPattern = /^event(?:\\.(.+))?/;\n  function EventHandler$init(element, name, template) {\n  \tvar _this = this;\n\n  \tvar action, refs, ractive;\n\n  \tthis.element = element;\n  \tthis.root = element.root;\n  \tthis.parentFragment = element.parentFragment;\n  \tthis.name = name;\n\n  \tif (name.indexOf(\"*\") !== -1) {\n  \t\tfatal(\"Only component proxy-events may contain \\\"*\\\" wildcards, <%s on-%s=\\\"...\\\"/> is not valid\", element.name, name);\n  \t\tthis.invalid = true;\n  \t}\n\n  \tif (template.m) {\n  \t\trefs = template.a.r;\n\n  \t\t// This is a method call\n  \t\tthis.method = template.m;\n  \t\tthis.keypaths = [];\n  \t\tthis.fn = shared_getFunctionFromString(template.a.s, refs.length);\n\n  \t\tthis.parentFragment = element.parentFragment;\n  \t\tractive = this.root;\n\n  \t\t// Create resolvers for each reference\n  \t\tthis.refResolvers = [];\n  \t\trefs.forEach(function (ref, i) {\n  \t\t\tvar match = undefined;\n\n  \t\t\t// special case - the `event` object\n  \t\t\tif (match = eventPattern.exec(ref)) {\n  \t\t\t\t_this.keypaths[i] = {\n  \t\t\t\t\teventObject: true,\n  \t\t\t\t\trefinements: match[1] ? match[1].split(\".\") : []\n  \t\t\t\t};\n  \t\t\t} else {\n  \t\t\t\t_this.refResolvers.push(Resolvers_createReferenceResolver(_this, ref, function (keypath) {\n  \t\t\t\t\treturn _this.resolve(i, keypath);\n  \t\t\t\t}));\n  \t\t\t}\n  \t\t});\n\n  \t\tthis.fire = fireMethodCall;\n  \t} else {\n  \t\t// Get action ('foo' in 'on-click='foo')\n  \t\taction = template.n || template;\n  \t\tif (typeof action !== \"string\") {\n  \t\t\taction = new virtualdom_Fragment({\n  \t\t\t\ttemplate: action,\n  \t\t\t\troot: this.root,\n  \t\t\t\towner: this\n  \t\t\t});\n  \t\t}\n\n  \t\tthis.action = action;\n\n  \t\t// Get parameters\n  \t\tif (template.d) {\n  \t\t\tthis.dynamicParams = new virtualdom_Fragment({\n  \t\t\t\ttemplate: template.d,\n  \t\t\t\troot: this.root,\n  \t\t\t\towner: this.element\n  \t\t\t});\n\n  \t\t\tthis.fire = fireEventWithDynamicParams;\n  \t\t} else if (template.a) {\n  \t\t\tthis.params = template.a;\n  \t\t\tthis.fire = fireEventWithParams;\n  \t\t}\n  \t}\n  }\n\n  function fireMethodCall(event) {\n  \tvar ractive, values, args;\n\n  \tractive = this.root;\n\n  \tif (typeof ractive[this.method] !== \"function\") {\n  \t\tthrow new Error(\"Attempted to call a non-existent method (\\\"\" + this.method + \"\\\")\");\n  \t}\n\n  \tvalues = this.keypaths.map(function (keypath) {\n  \t\tvar value, len, i;\n\n  \t\tif (keypath === undefined) {\n  \t\t\t// not yet resolved\n  \t\t\treturn undefined;\n  \t\t}\n\n  \t\t// TODO the refinements stuff would be better handled at parse time\n  \t\tif (keypath.eventObject) {\n  \t\t\tvalue = event;\n\n  \t\t\tif (len = keypath.refinements.length) {\n  \t\t\t\tfor (i = 0; i < len; i += 1) {\n  \t\t\t\t\tvalue = value[keypath.refinements[i]];\n  \t\t\t\t}\n  \t\t\t}\n  \t\t} else {\n  \t\t\tvalue = ractive.viewmodel.get(keypath);\n  \t\t}\n\n  \t\treturn value;\n  \t});\n\n  \tshared_eventStack.enqueue(ractive, event);\n\n  \targs = this.fn.apply(null, values);\n  \tractive[this.method].apply(ractive, args);\n\n  \tshared_eventStack.dequeue(ractive);\n  }\n\n  function fireEventWithParams(event) {\n  \tshared_fireEvent(this.root, this.getAction(), { event: event, args: this.params });\n  }\n\n  function fireEventWithDynamicParams(event) {\n  \tvar args = this.dynamicParams.getArgsList();\n\n  \t// need to strip [] from ends if a string!\n  \tif (typeof args === \"string\") {\n  \t\targs = args.substr(1, args.length - 2);\n  \t}\n\n  \tshared_fireEvent(this.root, this.getAction(), { event: event, args: args });\n  }\n\n  var shared_genericHandler = genericHandler;\n  function genericHandler(event) {\n  \tvar storage,\n  \t    handler,\n  \t    indices,\n  \t    index = {};\n\n  \tstorage = this._ractive;\n  \thandler = storage.events[event.type];\n\n  \tif (indices = Resolvers_findIndexRefs(handler.element.parentFragment)) {\n  \t\tindex = Resolvers_findIndexRefs.resolve(indices);\n  \t}\n\n  \thandler.fire({\n  \t\tnode: this,\n  \t\toriginal: event,\n  \t\tindex: index,\n  \t\tkeypath: storage.keypath.str,\n  \t\tcontext: storage.root.viewmodel.get(storage.keypath)\n  \t});\n  }\n\n  var listen = EventHandler$listen;\n\n  var customHandlers = {},\n      touchEvents = {\n  \ttouchstart: true,\n  \ttouchmove: true,\n  \ttouchend: true,\n  \ttouchcancel: true,\n  \t//not w3c, but supported in some browsers\n  \ttouchleave: true\n  };\n  function EventHandler$listen() {\n  \tvar definition,\n  \t    name = this.name;\n\n  \tif (this.invalid) {\n  \t\treturn;\n  \t}\n\n  \tif (definition = findInViewHierarchy(\"events\", this.root, name)) {\n  \t\tthis.custom = definition(this.node, getCustomHandler(name));\n  \t} else {\n  \t\t// Looks like we're dealing with a standard DOM event... but let's check\n  \t\tif (!(\"on\" + name in this.node) && !(window && \"on\" + name in window) && !isJsdom) {\n\n  \t\t\t// okay to use touch events if this browser doesn't support them\n  \t\t\tif (!touchEvents[name]) {\n  \t\t\t\twarnOnceIfDebug(missingPlugin(name, \"event\"), { node: this.node });\n  \t\t\t}\n\n  \t\t\treturn;\n  \t\t}\n\n  \t\tthis.node.addEventListener(name, shared_genericHandler, false);\n  \t}\n\n  \tthis.hasListener = true;\n  }\n\n  function getCustomHandler(name) {\n  \tif (!customHandlers[name]) {\n  \t\tcustomHandlers[name] = function (event) {\n  \t\t\tvar storage = event.node._ractive;\n\n  \t\t\tevent.index = storage.index;\n  \t\t\tevent.keypath = storage.keypath.str;\n  \t\t\tevent.context = storage.root.viewmodel.get(storage.keypath);\n\n  \t\t\tstorage.events[name].fire(event);\n  \t\t};\n  \t}\n\n  \treturn customHandlers[name];\n  }\n\n  var EventHandler_prototype_rebind = EventHandler$rebind;\n\n  function EventHandler$rebind(oldKeypath, newKeypath) {\n  \tvar fragment;\n  \tif (this.method) {\n  \t\tfragment = this.element.parentFragment;\n  \t\tthis.refResolvers.forEach(rebind);\n\n  \t\treturn;\n  \t}\n\n  \tif (typeof this.action !== \"string\") {\n  \t\trebind(this.action);\n  \t}\n\n  \tif (this.dynamicParams) {\n  \t\trebind(this.dynamicParams);\n  \t}\n\n  \tfunction rebind(thing) {\n  \t\tthing && thing.rebind(oldKeypath, newKeypath);\n  \t}\n  }\n\n  var EventHandler_prototype_render = EventHandler$render;\n\n  function EventHandler$render() {\n  \tthis.node = this.element.node;\n  \t// store this on the node itself, so it can be retrieved by a\n  \t// universal handler\n  \tthis.node._ractive.events[this.name] = this;\n\n  \tif (this.method || this.getAction()) {\n  \t\tthis.listen();\n  \t}\n  }\n\n  var prototype_resolve = EventHandler$resolve;\n\n  function EventHandler$resolve(index, keypath) {\n  \tthis.keypaths[index] = keypath;\n  }\n\n  var EventHandler_prototype_unbind = EventHandler$unbind;\n  function EventHandler$unbind() {\n  \tif (this.method) {\n  \t\tthis.refResolvers.forEach(methodCallers__unbind);\n  \t\treturn;\n  \t}\n\n  \t// Tear down dynamic name\n  \tif (typeof this.action !== \"string\") {\n  \t\tthis.action.unbind();\n  \t}\n\n  \t// Tear down dynamic parameters\n  \tif (this.dynamicParams) {\n  \t\tthis.dynamicParams.unbind();\n  \t}\n  }\n\n  var EventHandler_prototype_unrender = EventHandler$unrender;\n  function EventHandler$unrender() {\n\n  \tif (this.custom) {\n  \t\tthis.custom.teardown();\n  \t} else {\n  \t\tthis.node.removeEventListener(this.name, shared_genericHandler, false);\n  \t}\n\n  \tthis.hasListener = false;\n  }\n\n  var EventHandler = function (element, name, template) {\n  \tthis.init(element, name, template);\n  };\n\n  EventHandler.prototype = {\n  \tbubble: EventHandler_prototype_bubble,\n  \tfire: EventHandler_prototype_fire,\n  \tgetAction: getAction,\n  \tinit: EventHandler_prototype_init,\n  \tlisten: listen,\n  \trebind: EventHandler_prototype_rebind,\n  \trender: EventHandler_prototype_render,\n  \tresolve: prototype_resolve,\n  \tunbind: EventHandler_prototype_unbind,\n  \tunrender: EventHandler_prototype_unrender\n  };\n\n  var _EventHandler = EventHandler;\n\n  var createEventHandlers = function (element, template) {\n  \tvar i,\n  \t    name,\n  \t    names,\n  \t    handler,\n  \t    result = [];\n\n  \tfor (name in template) {\n  \t\tif (template.hasOwnProperty(name)) {\n  \t\t\tnames = name.split(\"-\");\n  \t\t\ti = names.length;\n\n  \t\t\twhile (i--) {\n  \t\t\t\thandler = new _EventHandler(element, names[i], template[name]);\n  \t\t\t\tresult.push(handler);\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \treturn result;\n  };\n\n  var Decorator = function (element, template) {\n  \tvar self = this,\n  \t    ractive,\n  \t    name,\n  \t    fragment;\n\n  \tthis.element = element;\n  \tthis.root = ractive = element.root;\n\n  \tname = template.n || template;\n\n  \tif (typeof name !== \"string\") {\n  \t\tfragment = new virtualdom_Fragment({\n  \t\t\ttemplate: name,\n  \t\t\troot: ractive,\n  \t\t\towner: element\n  \t\t});\n\n  \t\tname = fragment.toString();\n  \t\tfragment.unbind();\n\n  \t\tif (name === \"\") {\n  \t\t\t// empty string okay, just no decorator\n  \t\t\treturn;\n  \t\t}\n  \t}\n\n  \tif (template.a) {\n  \t\tthis.params = template.a;\n  \t} else if (template.d) {\n  \t\tthis.fragment = new virtualdom_Fragment({\n  \t\t\ttemplate: template.d,\n  \t\t\troot: ractive,\n  \t\t\towner: element\n  \t\t});\n\n  \t\tthis.params = this.fragment.getArgsList();\n\n  \t\tthis.fragment.bubble = function () {\n  \t\t\tthis.dirtyArgs = this.dirtyValue = true;\n  \t\t\tself.params = this.getArgsList();\n\n  \t\t\tif (self.ready) {\n  \t\t\t\tself.update();\n  \t\t\t}\n  \t\t};\n  \t}\n\n  \tthis.fn = findInViewHierarchy(\"decorators\", ractive, name);\n\n  \tif (!this.fn) {\n  \t\tfatal(missingPlugin(name, \"decorator\"));\n  \t}\n  };\n\n  Decorator.prototype = {\n  \tinit: function () {\n  \t\tvar node, result, args;\n\n  \t\tnode = this.element.node;\n\n  \t\tif (this.params) {\n  \t\t\targs = [node].concat(this.params);\n  \t\t\tresult = this.fn.apply(this.root, args);\n  \t\t} else {\n  \t\t\tresult = this.fn.call(this.root, node);\n  \t\t}\n\n  \t\tif (!result || !result.teardown) {\n  \t\t\tthrow new Error(\"Decorator definition must return an object with a teardown method\");\n  \t\t}\n\n  \t\t// TODO does this make sense?\n  \t\tthis.actual = result;\n  \t\tthis.ready = true;\n  \t},\n\n  \tupdate: function () {\n  \t\tif (this.actual.update) {\n  \t\t\tthis.actual.update.apply(this.root, this.params);\n  \t\t} else {\n  \t\t\tthis.actual.teardown(true);\n  \t\t\tthis.init();\n  \t\t}\n  \t},\n\n  \trebind: function (oldKeypath, newKeypath) {\n  \t\tif (this.fragment) {\n  \t\t\tthis.fragment.rebind(oldKeypath, newKeypath);\n  \t\t}\n  \t},\n\n  \tteardown: function (updating) {\n  \t\tthis.torndown = true;\n  \t\tif (this.ready) {\n  \t\t\tthis.actual.teardown();\n  \t\t}\n\n  \t\tif (!updating && this.fragment) {\n  \t\t\tthis.fragment.unbind();\n  \t\t}\n  \t}\n  };\n\n  var _Decorator = Decorator;\n\n  function select__bubble() {\n  \tvar _this = this;\n\n  \tif (!this.dirty) {\n  \t\tthis.dirty = true;\n\n  \t\tglobal_runloop.scheduleTask(function () {\n  \t\t\tsync(_this);\n  \t\t\t_this.dirty = false;\n  \t\t});\n  \t}\n\n  \tthis.parentFragment.bubble(); // default behaviour\n  }\n\n  function sync(selectElement) {\n  \tvar selectNode, selectValue, isMultiple, options, optionWasSelected;\n\n  \tselectNode = selectElement.node;\n\n  \tif (!selectNode) {\n  \t\treturn;\n  \t}\n\n  \toptions = toArray(selectNode.options);\n\n  \tselectValue = selectElement.getAttribute(\"value\");\n  \tisMultiple = selectElement.getAttribute(\"multiple\");\n\n  \t// If the <select> has a specified value, that should override\n  \t// these options\n  \tif (selectValue !== undefined) {\n  \t\toptions.forEach(function (o) {\n  \t\t\tvar optionValue, shouldSelect;\n\n  \t\t\toptionValue = o._ractive ? o._ractive.value : o.value;\n  \t\t\tshouldSelect = isMultiple ? valueContains(selectValue, optionValue) : selectValue == optionValue;\n\n  \t\t\tif (shouldSelect) {\n  \t\t\t\toptionWasSelected = true;\n  \t\t\t}\n\n  \t\t\to.selected = shouldSelect;\n  \t\t});\n\n  \t\tif (!optionWasSelected) {\n  \t\t\tif (options[0]) {\n  \t\t\t\toptions[0].selected = true;\n  \t\t\t}\n\n  \t\t\tif (selectElement.binding) {\n  \t\t\t\tselectElement.binding.forceUpdate();\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \t// Otherwise the value should be initialised according to which\n  \t// <option> element is selected, if twoway binding is in effect\n  \telse if (selectElement.binding) {\n  \t\tselectElement.binding.forceUpdate();\n  \t}\n  }\n\n  function valueContains(selectValue, optionValue) {\n  \tvar i = selectValue.length;\n  \twhile (i--) {\n  \t\tif (selectValue[i] == optionValue) {\n  \t\t\treturn true;\n  \t\t}\n  \t}\n  }\n\n  function special_option__init(option, template) {\n  \toption.select = findParentSelect(option.parent);\n\n  \t// we might be inside a <datalist> element\n  \tif (!option.select) {\n  \t\treturn;\n  \t}\n\n  \toption.select.options.push(option);\n\n  \t// If the value attribute is missing, use the element's content\n  \tif (!template.a) {\n  \t\ttemplate.a = {};\n  \t}\n\n  \t// ...as long as it isn't disabled\n  \tif (template.a.value === undefined && !template.a.hasOwnProperty(\"disabled\")) {\n  \t\ttemplate.a.value = template.f;\n  \t}\n\n  \t// If there is a `selected` attribute, but the <select>\n  \t// already has a value, delete it\n  \tif (\"selected\" in template.a && option.select.getAttribute(\"value\") !== undefined) {\n  \t\tdelete template.a.selected;\n  \t}\n  }\n\n  function special_option__unbind(option) {\n  \tif (option.select) {\n  \t\tremoveFromArray(option.select.options, option);\n  \t}\n  }\n\n  function findParentSelect(element) {\n  \tif (!element) {\n  \t\treturn;\n  \t}\n\n  \tdo {\n  \t\tif (element.name === \"select\") {\n  \t\t\treturn element;\n  \t\t}\n  \t} while (element = element.parent);\n  }\n\n  var Element_prototype_init = Element$init;\n  function Element$init(options) {\n  \tvar parentFragment, template, ractive, binding, bindings, twoway, bindingAttrs;\n\n  \tthis.type = ELEMENT;\n\n  \t// stuff we'll need later\n  \tparentFragment = this.parentFragment = options.parentFragment;\n  \ttemplate = this.template = options.template;\n\n  \tthis.parent = options.pElement || parentFragment.pElement;\n\n  \tthis.root = ractive = parentFragment.root;\n  \tthis.index = options.index;\n  \tthis.key = options.key;\n\n  \tthis.name = enforceCase(template.e);\n\n  \t// Special case - <option> elements\n  \tif (this.name === \"option\") {\n  \t\tspecial_option__init(this, template);\n  \t}\n\n  \t// Special case - <select> elements\n  \tif (this.name === \"select\") {\n  \t\tthis.options = [];\n  \t\tthis.bubble = select__bubble; // TODO this is a kludge\n  \t}\n\n  \t// Special case - <form> elements\n  \tif (this.name === \"form\") {\n  \t\tthis.formBindings = [];\n  \t}\n\n  \t// handle binding attributes first (twoway, lazy)\n  \tbindingAttrs = processBindingAttributes(this, template);\n\n  \t// create attributes\n  \tthis.attributes = createAttributes(this, template.a);\n  \tthis.conditionalAttributes = createConditionalAttributes(this, template.m);\n\n  \t// append children, if there are any\n  \tif (template.f) {\n  \t\tthis.fragment = new virtualdom_Fragment({\n  \t\t\ttemplate: template.f,\n  \t\t\troot: ractive,\n  \t\t\towner: this,\n  \t\t\tpElement: this,\n  \t\t\tcssIds: null\n  \t\t});\n  \t}\n\n  \t// the element setting should override the ractive setting\n  \ttwoway = ractive.twoway;\n  \tif (bindingAttrs.twoway === false) twoway = false;else if (bindingAttrs.twoway === true) twoway = true;\n\n  \tthis.twoway = twoway;\n  \tthis.lazy = bindingAttrs.lazy;\n\n  \t// create twoway binding\n  \tif (twoway && (binding = init_createTwowayBinding(this, template.a))) {\n  \t\tthis.binding = binding;\n\n  \t\t// register this with the root, so that we can do ractive.updateModel()\n  \t\tbindings = this.root._twowayBindings[binding.keypath.str] || (this.root._twowayBindings[binding.keypath.str] = []);\n  \t\tbindings.push(binding);\n  \t}\n\n  \t// create event proxies\n  \tif (template.v) {\n  \t\tthis.eventHandlers = createEventHandlers(this, template.v);\n  \t}\n\n  \t// create decorator\n  \tif (template.o) {\n  \t\tthis.decorator = new _Decorator(this, template.o);\n  \t}\n\n  \t// create transitions\n  \tthis.intro = template.t0 || template.t1;\n  \tthis.outro = template.t0 || template.t2;\n  }\n\n  var Element_prototype_rebind = Element$rebind;\n  function Element$rebind(oldKeypath, newKeypath) {\n  \tvar i, storage, liveQueries, ractive;\n\n  \tif (this.attributes) {\n  \t\tthis.attributes.forEach(rebind);\n  \t}\n\n  \tif (this.conditionalAttributes) {\n  \t\tthis.conditionalAttributes.forEach(rebind);\n  \t}\n\n  \tif (this.eventHandlers) {\n  \t\tthis.eventHandlers.forEach(rebind);\n  \t}\n\n  \tif (this.decorator) {\n  \t\trebind(this.decorator);\n  \t}\n\n  \t// rebind children\n  \tif (this.fragment) {\n  \t\trebind(this.fragment);\n  \t}\n\n  \t// Update live queries, if necessary\n  \tif (liveQueries = this.liveQueries) {\n  \t\tractive = this.root;\n\n  \t\ti = liveQueries.length;\n  \t\twhile (i--) {\n  \t\t\tliveQueries[i]._makeDirty();\n  \t\t}\n  \t}\n\n  \tif (this.node && (storage = this.node._ractive)) {\n\n  \t\t// adjust keypath if needed\n  \t\tassignNewKeypath(storage, \"keypath\", oldKeypath, newKeypath);\n  \t}\n\n  \tfunction rebind(thing) {\n  \t\tthing.rebind(oldKeypath, newKeypath);\n  \t}\n  }\n\n  function special_img__render(img) {\n  \tvar loadHandler;\n\n  \t// if this is an <img>, and we're in a crap browser, we may need to prevent it\n  \t// from overriding width and height when it loads the src\n  \tif (img.attributes.width || img.attributes.height) {\n  \t\timg.node.addEventListener(\"load\", loadHandler = function () {\n  \t\t\tvar width = img.getAttribute(\"width\"),\n  \t\t\t    height = img.getAttribute(\"height\");\n\n  \t\t\tif (width !== undefined) {\n  \t\t\t\timg.node.setAttribute(\"width\", width);\n  \t\t\t}\n\n  \t\t\tif (height !== undefined) {\n  \t\t\t\timg.node.setAttribute(\"height\", height);\n  \t\t\t}\n\n  \t\t\timg.node.removeEventListener(\"load\", loadHandler, false);\n  \t\t}, false);\n  \t}\n  }\n\n  function form__render(element) {\n  \telement.node.addEventListener(\"reset\", handleReset, false);\n  }\n\n  function form__unrender(element) {\n  \telement.node.removeEventListener(\"reset\", handleReset, false);\n  }\n\n  function handleReset() {\n  \tvar element = this._ractive.proxy;\n\n  \tglobal_runloop.start();\n  \telement.formBindings.forEach(updateModel);\n  \tglobal_runloop.end();\n  }\n\n  function updateModel(binding) {\n  \tbinding.root.viewmodel.set(binding.keypath, binding.resetValue);\n  }\n\n  var Transition_prototype_init = Transition$init;\n  function Transition$init(element, template, isIntro) {\n  \tvar ractive, name, fragment;\n\n  \tthis.element = element;\n  \tthis.root = ractive = element.root;\n  \tthis.isIntro = isIntro;\n\n  \tname = template.n || template;\n\n  \tif (typeof name !== \"string\") {\n  \t\tfragment = new virtualdom_Fragment({\n  \t\t\ttemplate: name,\n  \t\t\troot: ractive,\n  \t\t\towner: element\n  \t\t});\n\n  \t\tname = fragment.toString();\n  \t\tfragment.unbind();\n\n  \t\tif (name === \"\") {\n  \t\t\t// empty string okay, just no transition\n  \t\t\treturn;\n  \t\t}\n  \t}\n\n  \tthis.name = name;\n\n  \tif (template.a) {\n  \t\tthis.params = template.a;\n  \t} else if (template.d) {\n  \t\t// TODO is there a way to interpret dynamic arguments without all the\n  \t\t// 'dependency thrashing'?\n  \t\tfragment = new virtualdom_Fragment({\n  \t\t\ttemplate: template.d,\n  \t\t\troot: ractive,\n  \t\t\towner: element\n  \t\t});\n\n  \t\tthis.params = fragment.getArgsList();\n  \t\tfragment.unbind();\n  \t}\n\n  \tthis._fn = findInViewHierarchy(\"transitions\", ractive, name);\n\n  \tif (!this._fn) {\n  \t\twarnOnceIfDebug(missingPlugin(name, \"transition\"), { ractive: this.root });\n  \t}\n  }\n\n  var camelCase = function (hyphenatedStr) {\n  \treturn hyphenatedStr.replace(/-([a-zA-Z])/g, function (match, $1) {\n  \t\treturn $1.toUpperCase();\n  \t});\n  };\n\n  var helpers_prefix__prefix, prefixCache, helpers_prefix__testStyle;\n\n  if (!isClient) {\n  \thelpers_prefix__prefix = null;\n  } else {\n  \tprefixCache = {};\n  \thelpers_prefix__testStyle = createElement(\"div\").style;\n\n  \thelpers_prefix__prefix = function (prop) {\n  \t\tvar i, vendor, capped;\n\n  \t\tprop = camelCase(prop);\n\n  \t\tif (!prefixCache[prop]) {\n  \t\t\tif (helpers_prefix__testStyle[prop] !== undefined) {\n  \t\t\t\tprefixCache[prop] = prop;\n  \t\t\t} else {\n  \t\t\t\t// test vendors...\n  \t\t\t\tcapped = prop.charAt(0).toUpperCase() + prop.substring(1);\n\n  \t\t\t\ti = vendors.length;\n  \t\t\t\twhile (i--) {\n  \t\t\t\t\tvendor = vendors[i];\n  \t\t\t\t\tif (helpers_prefix__testStyle[vendor + capped] !== undefined) {\n  \t\t\t\t\t\tprefixCache[prop] = vendor + capped;\n  \t\t\t\t\t\tbreak;\n  \t\t\t\t\t}\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n\n  \t\treturn prefixCache[prop];\n  \t};\n  }\n\n  var helpers_prefix = helpers_prefix__prefix;\n\n  var getStyle, prototype_getStyle__getComputedStyle;\n\n  if (!isClient) {\n  \tgetStyle = null;\n  } else {\n  \tprototype_getStyle__getComputedStyle = window.getComputedStyle || legacy.getComputedStyle;\n\n  \tgetStyle = function (props) {\n  \t\tvar computedStyle, styles, i, prop, value;\n\n  \t\tcomputedStyle = prototype_getStyle__getComputedStyle(this.node);\n\n  \t\tif (typeof props === \"string\") {\n  \t\t\tvalue = computedStyle[helpers_prefix(props)];\n  \t\t\tif (value === \"0px\") {\n  \t\t\t\tvalue = 0;\n  \t\t\t}\n  \t\t\treturn value;\n  \t\t}\n\n  \t\tif (!isArray(props)) {\n  \t\t\tthrow new Error(\"Transition$getStyle must be passed a string, or an array of strings representing CSS properties\");\n  \t\t}\n\n  \t\tstyles = {};\n\n  \t\ti = props.length;\n  \t\twhile (i--) {\n  \t\t\tprop = props[i];\n  \t\t\tvalue = computedStyle[helpers_prefix(prop)];\n  \t\t\tif (value === \"0px\") {\n  \t\t\t\tvalue = 0;\n  \t\t\t}\n  \t\t\tstyles[prop] = value;\n  \t\t}\n\n  \t\treturn styles;\n  \t};\n  }\n\n  var prototype_getStyle = getStyle;\n\n  var setStyle = function (style, value) {\n  \tvar prop;\n\n  \tif (typeof style === \"string\") {\n  \t\tthis.node.style[helpers_prefix(style)] = value;\n  \t} else {\n  \t\tfor (prop in style) {\n  \t\t\tif (style.hasOwnProperty(prop)) {\n  \t\t\t\tthis.node.style[helpers_prefix(prop)] = style[prop];\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \treturn this;\n  };\n\n  var Ticker = function (options) {\n  \tvar easing;\n\n  \tthis.duration = options.duration;\n  \tthis.step = options.step;\n  \tthis.complete = options.complete;\n\n  \t// easing\n  \tif (typeof options.easing === \"string\") {\n  \t\teasing = options.root.easing[options.easing];\n\n  \t\tif (!easing) {\n  \t\t\twarnOnceIfDebug(missingPlugin(options.easing, \"easing\"));\n  \t\t\teasing = linear;\n  \t\t}\n  \t} else if (typeof options.easing === \"function\") {\n  \t\teasing = options.easing;\n  \t} else {\n  \t\teasing = linear;\n  \t}\n\n  \tthis.easing = easing;\n\n  \tthis.start = utils_getTime();\n  \tthis.end = this.start + this.duration;\n\n  \tthis.running = true;\n  \tshared_animations.add(this);\n  };\n\n  Ticker.prototype = {\n  \ttick: function (now) {\n  \t\tvar elapsed, eased;\n\n  \t\tif (!this.running) {\n  \t\t\treturn false;\n  \t\t}\n\n  \t\tif (now > this.end) {\n  \t\t\tif (this.step) {\n  \t\t\t\tthis.step(1);\n  \t\t\t}\n\n  \t\t\tif (this.complete) {\n  \t\t\t\tthis.complete(1);\n  \t\t\t}\n\n  \t\t\treturn false;\n  \t\t}\n\n  \t\telapsed = now - this.start;\n  \t\teased = this.easing(elapsed / this.duration);\n\n  \t\tif (this.step) {\n  \t\t\tthis.step(eased);\n  \t\t}\n\n  \t\treturn true;\n  \t},\n\n  \tstop: function () {\n  \t\tif (this.abort) {\n  \t\t\tthis.abort();\n  \t\t}\n\n  \t\tthis.running = false;\n  \t}\n  };\n\n  var shared_Ticker = Ticker;\n  function linear(t) {\n  \treturn t;\n  }\n\n  var unprefixPattern = new RegExp(\"^-(?:\" + vendors.join(\"|\") + \")-\");\n\n  var unprefix = function (prop) {\n  \treturn prop.replace(unprefixPattern, \"\");\n  };\n\n  var vendorPattern = new RegExp(\"^(?:\" + vendors.join(\"|\") + \")([A-Z])\");\n\n  var hyphenate = function (str) {\n  \tvar hyphenated;\n\n  \tif (!str) {\n  \t\treturn \"\"; // edge case\n  \t}\n\n  \tif (vendorPattern.test(str)) {\n  \t\tstr = \"-\" + str;\n  \t}\n\n  \thyphenated = str.replace(/[A-Z]/g, function (match) {\n  \t\treturn \"-\" + match.toLowerCase();\n  \t});\n\n  \treturn hyphenated;\n  };\n\n  var createTransitions,\n      animateStyle_createTransitions__testStyle,\n      TRANSITION,\n      TRANSITIONEND,\n      CSS_TRANSITIONS_ENABLED,\n      TRANSITION_DURATION,\n      TRANSITION_PROPERTY,\n      TRANSITION_TIMING_FUNCTION,\n      canUseCssTransitions = {},\n      cannotUseCssTransitions = {};\n\n  if (!isClient) {\n  \tcreateTransitions = null;\n  } else {\n  \tanimateStyle_createTransitions__testStyle = createElement(\"div\").style;\n\n  \t// determine some facts about our environment\n  \t(function () {\n  \t\tif (animateStyle_createTransitions__testStyle.transition !== undefined) {\n  \t\t\tTRANSITION = \"transition\";\n  \t\t\tTRANSITIONEND = \"transitionend\";\n  \t\t\tCSS_TRANSITIONS_ENABLED = true;\n  \t\t} else if (animateStyle_createTransitions__testStyle.webkitTransition !== undefined) {\n  \t\t\tTRANSITION = \"webkitTransition\";\n  \t\t\tTRANSITIONEND = \"webkitTransitionEnd\";\n  \t\t\tCSS_TRANSITIONS_ENABLED = true;\n  \t\t} else {\n  \t\t\tCSS_TRANSITIONS_ENABLED = false;\n  \t\t}\n  \t})();\n\n  \tif (TRANSITION) {\n  \t\tTRANSITION_DURATION = TRANSITION + \"Duration\";\n  \t\tTRANSITION_PROPERTY = TRANSITION + \"Property\";\n  \t\tTRANSITION_TIMING_FUNCTION = TRANSITION + \"TimingFunction\";\n  \t}\n\n  \tcreateTransitions = function (t, to, options, changedProperties, resolve) {\n\n  \t\t// Wait a beat (otherwise the target styles will be applied immediately)\n  \t\t// TODO use a fastdom-style mechanism?\n  \t\tsetTimeout(function () {\n\n  \t\t\tvar hashPrefix, jsTransitionsComplete, cssTransitionsComplete, checkComplete, transitionEndHandler;\n\n  \t\t\tcheckComplete = function () {\n  \t\t\t\tif (jsTransitionsComplete && cssTransitionsComplete) {\n  \t\t\t\t\t// will changes to events and fire have an unexpected consequence here?\n  \t\t\t\t\tt.root.fire(t.name + \":end\", t.node, t.isIntro);\n  \t\t\t\t\tresolve();\n  \t\t\t\t}\n  \t\t\t};\n\n  \t\t\t// this is used to keep track of which elements can use CSS to animate\n  \t\t\t// which properties\n  \t\t\thashPrefix = (t.node.namespaceURI || \"\") + t.node.tagName;\n\n  \t\t\tt.node.style[TRANSITION_PROPERTY] = changedProperties.map(helpers_prefix).map(hyphenate).join(\",\");\n  \t\t\tt.node.style[TRANSITION_TIMING_FUNCTION] = hyphenate(options.easing || \"linear\");\n  \t\t\tt.node.style[TRANSITION_DURATION] = options.duration / 1000 + \"s\";\n\n  \t\t\ttransitionEndHandler = function (event) {\n  \t\t\t\tvar index;\n\n  \t\t\t\tindex = changedProperties.indexOf(camelCase(unprefix(event.propertyName)));\n  \t\t\t\tif (index !== -1) {\n  \t\t\t\t\tchangedProperties.splice(index, 1);\n  \t\t\t\t}\n\n  \t\t\t\tif (changedProperties.length) {\n  \t\t\t\t\t// still transitioning...\n  \t\t\t\t\treturn;\n  \t\t\t\t}\n\n  \t\t\t\tt.node.removeEventListener(TRANSITIONEND, transitionEndHandler, false);\n\n  \t\t\t\tcssTransitionsComplete = true;\n  \t\t\t\tcheckComplete();\n  \t\t\t};\n\n  \t\t\tt.node.addEventListener(TRANSITIONEND, transitionEndHandler, false);\n\n  \t\t\tsetTimeout(function () {\n  \t\t\t\tvar i = changedProperties.length,\n  \t\t\t\t    hash,\n  \t\t\t\t    originalValue,\n  \t\t\t\t    index,\n  \t\t\t\t    propertiesToTransitionInJs = [],\n  \t\t\t\t    prop,\n  \t\t\t\t    suffix;\n\n  \t\t\t\twhile (i--) {\n  \t\t\t\t\tprop = changedProperties[i];\n  \t\t\t\t\thash = hashPrefix + prop;\n\n  \t\t\t\t\tif (CSS_TRANSITIONS_ENABLED && !cannotUseCssTransitions[hash]) {\n  \t\t\t\t\t\tt.node.style[helpers_prefix(prop)] = to[prop];\n\n  \t\t\t\t\t\t// If we're not sure if CSS transitions are supported for\n  \t\t\t\t\t\t// this tag/property combo, find out now\n  \t\t\t\t\t\tif (!canUseCssTransitions[hash]) {\n  \t\t\t\t\t\t\toriginalValue = t.getStyle(prop);\n\n  \t\t\t\t\t\t\t// if this property is transitionable in this browser,\n  \t\t\t\t\t\t\t// the current style will be different from the target style\n  \t\t\t\t\t\t\tcanUseCssTransitions[hash] = t.getStyle(prop) != to[prop];\n  \t\t\t\t\t\t\tcannotUseCssTransitions[hash] = !canUseCssTransitions[hash];\n\n  \t\t\t\t\t\t\t// Reset, if we're going to use timers after all\n  \t\t\t\t\t\t\tif (cannotUseCssTransitions[hash]) {\n  \t\t\t\t\t\t\t\tt.node.style[helpers_prefix(prop)] = originalValue;\n  \t\t\t\t\t\t\t}\n  \t\t\t\t\t\t}\n  \t\t\t\t\t}\n\n  \t\t\t\t\tif (!CSS_TRANSITIONS_ENABLED || cannotUseCssTransitions[hash]) {\n  \t\t\t\t\t\t// we need to fall back to timer-based stuff\n  \t\t\t\t\t\tif (originalValue === undefined) {\n  \t\t\t\t\t\t\toriginalValue = t.getStyle(prop);\n  \t\t\t\t\t\t}\n\n  \t\t\t\t\t\t// need to remove this from changedProperties, otherwise transitionEndHandler\n  \t\t\t\t\t\t// will get confused\n  \t\t\t\t\t\tindex = changedProperties.indexOf(prop);\n  \t\t\t\t\t\tif (index === -1) {\n  \t\t\t\t\t\t\twarnIfDebug(\"Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!\", { node: t.node });\n  \t\t\t\t\t\t} else {\n  \t\t\t\t\t\t\tchangedProperties.splice(index, 1);\n  \t\t\t\t\t\t}\n\n  \t\t\t\t\t\t// TODO Determine whether this property is animatable at all\n\n  \t\t\t\t\t\tsuffix = /[^\\d]*$/.exec(to[prop])[0];\n\n  \t\t\t\t\t\t// ...then kick off a timer-based transition\n  \t\t\t\t\t\tpropertiesToTransitionInJs.push({\n  \t\t\t\t\t\t\tname: helpers_prefix(prop),\n  \t\t\t\t\t\t\tinterpolator: shared_interpolate(parseFloat(originalValue), parseFloat(to[prop])),\n  \t\t\t\t\t\t\tsuffix: suffix\n  \t\t\t\t\t\t});\n  \t\t\t\t\t}\n  \t\t\t\t}\n\n  \t\t\t\t// javascript transitions\n  \t\t\t\tif (propertiesToTransitionInJs.length) {\n  \t\t\t\t\tnew shared_Ticker({\n  \t\t\t\t\t\troot: t.root,\n  \t\t\t\t\t\tduration: options.duration,\n  \t\t\t\t\t\teasing: camelCase(options.easing || \"\"),\n  \t\t\t\t\t\tstep: function (pos) {\n  \t\t\t\t\t\t\tvar prop, i;\n\n  \t\t\t\t\t\t\ti = propertiesToTransitionInJs.length;\n  \t\t\t\t\t\t\twhile (i--) {\n  \t\t\t\t\t\t\t\tprop = propertiesToTransitionInJs[i];\n  \t\t\t\t\t\t\t\tt.node.style[prop.name] = prop.interpolator(pos) + prop.suffix;\n  \t\t\t\t\t\t\t}\n  \t\t\t\t\t\t},\n  \t\t\t\t\t\tcomplete: function () {\n  \t\t\t\t\t\t\tjsTransitionsComplete = true;\n  \t\t\t\t\t\t\tcheckComplete();\n  \t\t\t\t\t\t}\n  \t\t\t\t\t});\n  \t\t\t\t} else {\n  \t\t\t\t\tjsTransitionsComplete = true;\n  \t\t\t\t}\n\n  \t\t\t\tif (!changedProperties.length) {\n  \t\t\t\t\t// We need to cancel the transitionEndHandler, and deal with\n  \t\t\t\t\t// the fact that it will never fire\n  \t\t\t\t\tt.node.removeEventListener(TRANSITIONEND, transitionEndHandler, false);\n  \t\t\t\t\tcssTransitionsComplete = true;\n  \t\t\t\t\tcheckComplete();\n  \t\t\t\t}\n  \t\t\t}, 0);\n  \t\t}, options.delay || 0);\n  \t};\n  }\n\n  var animateStyle_createTransitions = createTransitions;\n\n  var hidden, vendor, animateStyle_visibility__prefix, animateStyle_visibility__i, visibility;\n\n  if (typeof document !== \"undefined\") {\n  \thidden = \"hidden\";\n\n  \tvisibility = {};\n\n  \tif (hidden in document) {\n  \t\tanimateStyle_visibility__prefix = \"\";\n  \t} else {\n  \t\tanimateStyle_visibility__i = vendors.length;\n  \t\twhile (animateStyle_visibility__i--) {\n  \t\t\tvendor = vendors[animateStyle_visibility__i];\n  \t\t\thidden = vendor + \"Hidden\";\n\n  \t\t\tif (hidden in document) {\n  \t\t\t\tanimateStyle_visibility__prefix = vendor;\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \tif (animateStyle_visibility__prefix !== undefined) {\n  \t\tdocument.addEventListener(animateStyle_visibility__prefix + \"visibilitychange\", onChange);\n\n  \t\t// initialise\n  \t\tonChange();\n  \t} else {\n  \t\t// gah, we're in an old browser\n  \t\tif (\"onfocusout\" in document) {\n  \t\t\tdocument.addEventListener(\"focusout\", onHide);\n  \t\t\tdocument.addEventListener(\"focusin\", onShow);\n  \t\t} else {\n  \t\t\twindow.addEventListener(\"pagehide\", onHide);\n  \t\t\twindow.addEventListener(\"blur\", onHide);\n\n  \t\t\twindow.addEventListener(\"pageshow\", onShow);\n  \t\t\twindow.addEventListener(\"focus\", onShow);\n  \t\t}\n\n  \t\tvisibility.hidden = false; // until proven otherwise. Not ideal but hey\n  \t}\n  }\n\n  function onChange() {\n  \tvisibility.hidden = document[hidden];\n  }\n\n  function onHide() {\n  \tvisibility.hidden = true;\n  }\n\n  function onShow() {\n  \tvisibility.hidden = false;\n  }\n\n  var animateStyle_visibility = visibility;\n\n  var animateStyle, _animateStyle__getComputedStyle, resolved;\n\n  if (!isClient) {\n  \tanimateStyle = null;\n  } else {\n  \t_animateStyle__getComputedStyle = window.getComputedStyle || legacy.getComputedStyle;\n\n  \tanimateStyle = function (style, value, options) {\n  \t\tvar _this = this;\n\n  \t\tvar to;\n\n  \t\tif (arguments.length === 4) {\n  \t\t\tthrow new Error(\"t.animateStyle() returns a promise - use .then() instead of passing a callback\");\n  \t\t}\n\n  \t\t// Special case - page isn't visible. Don't animate anything, because\n  \t\t// that way you'll never get CSS transitionend events\n  \t\tif (animateStyle_visibility.hidden) {\n  \t\t\tthis.setStyle(style, value);\n  \t\t\treturn resolved || (resolved = utils_Promise.resolve());\n  \t\t}\n\n  \t\tif (typeof style === \"string\") {\n  \t\t\tto = {};\n  \t\t\tto[style] = value;\n  \t\t} else {\n  \t\t\tto = style;\n\n  \t\t\t// shuffle arguments\n  \t\t\toptions = value;\n  \t\t}\n\n  \t\t// As of 0.3.9, transition authors should supply an `option` object with\n  \t\t// `duration` and `easing` properties (and optional `delay`), plus a\n  \t\t// callback function that gets called after the animation completes\n\n  \t\t// TODO remove this check in a future version\n  \t\tif (!options) {\n  \t\t\twarnOnceIfDebug(\"The \\\"%s\\\" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340\", this.name);\n  \t\t\toptions = this;\n  \t\t}\n\n  \t\tvar promise = new utils_Promise(function (resolve) {\n  \t\t\tvar propertyNames, changedProperties, computedStyle, current, from, i, prop;\n\n  \t\t\t// Edge case - if duration is zero, set style synchronously and complete\n  \t\t\tif (!options.duration) {\n  \t\t\t\t_this.setStyle(to);\n  \t\t\t\tresolve();\n  \t\t\t\treturn;\n  \t\t\t}\n\n  \t\t\t// Get a list of the properties we're animating\n  \t\t\tpropertyNames = Object.keys(to);\n  \t\t\tchangedProperties = [];\n\n  \t\t\t// Store the current styles\n  \t\t\tcomputedStyle = _animateStyle__getComputedStyle(_this.node);\n\n  \t\t\tfrom = {};\n  \t\t\ti = propertyNames.length;\n  \t\t\twhile (i--) {\n  \t\t\t\tprop = propertyNames[i];\n  \t\t\t\tcurrent = computedStyle[helpers_prefix(prop)];\n\n  \t\t\t\tif (current === \"0px\") {\n  \t\t\t\t\tcurrent = 0;\n  \t\t\t\t}\n\n  \t\t\t\t// we need to know if we're actually changing anything\n  \t\t\t\tif (current != to[prop]) {\n  \t\t\t\t\t// use != instead of !==, so we can compare strings with numbers\n  \t\t\t\t\tchangedProperties.push(prop);\n\n  \t\t\t\t\t// make the computed style explicit, so we can animate where\n  \t\t\t\t\t// e.g. height='auto'\n  \t\t\t\t\t_this.node.style[helpers_prefix(prop)] = current;\n  \t\t\t\t}\n  \t\t\t}\n\n  \t\t\t// If we're not actually changing anything, the transitionend event\n  \t\t\t// will never fire! So we complete early\n  \t\t\tif (!changedProperties.length) {\n  \t\t\t\tresolve();\n  \t\t\t\treturn;\n  \t\t\t}\n\n  \t\t\tanimateStyle_createTransitions(_this, to, options, changedProperties, resolve);\n  \t\t});\n\n  \t\treturn promise;\n  \t};\n  }\n\n  var _animateStyle = animateStyle;\n\n  var processParams = function (params, defaults) {\n  \tif (typeof params === \"number\") {\n  \t\tparams = { duration: params };\n  \t} else if (typeof params === \"string\") {\n  \t\tif (params === \"slow\") {\n  \t\t\tparams = { duration: 600 };\n  \t\t} else if (params === \"fast\") {\n  \t\t\tparams = { duration: 200 };\n  \t\t} else {\n  \t\t\tparams = { duration: 400 };\n  \t\t}\n  \t} else if (!params) {\n  \t\tparams = {};\n  \t}\n\n  \treturn fillGaps({}, params, defaults);\n  };\n\n  var prototype_start = Transition$start;\n\n  function Transition$start() {\n  \tvar _this = this;\n\n  \tvar node, originalStyle, completed;\n\n  \tnode = this.node = this.element.node;\n  \toriginalStyle = node.getAttribute(\"style\");\n\n  \t// create t.complete() - we don't want this on the prototype,\n  \t// because we don't want `this` silliness when passing it as\n  \t// an argument\n  \tthis.complete = function (noReset) {\n  \t\tif (completed) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tif (!noReset && _this.isIntro) {\n  \t\t\tresetStyle(node, originalStyle);\n  \t\t}\n\n  \t\tnode._ractive.transition = null;\n  \t\t_this._manager.remove(_this);\n\n  \t\tcompleted = true;\n  \t};\n\n  \t// If the transition function doesn't exist, abort\n  \tif (!this._fn) {\n  \t\tthis.complete();\n  \t\treturn;\n  \t}\n\n  \tthis._fn.apply(this.root, [this].concat(this.params));\n  }\n\n  function resetStyle(node, style) {\n  \tif (style) {\n  \t\tnode.setAttribute(\"style\", style);\n  \t} else {\n\n  \t\t// Next line is necessary, to remove empty style attribute!\n  \t\t// See http://stackoverflow.com/a/7167553\n  \t\tnode.getAttribute(\"style\");\n  \t\tnode.removeAttribute(\"style\");\n  \t}\n  }\n\n  var Transition = function (owner, template, isIntro) {\n  \tthis.init(owner, template, isIntro);\n  };\n\n  Transition.prototype = {\n  \tinit: Transition_prototype_init,\n  \tstart: prototype_start,\n  \tgetStyle: prototype_getStyle,\n  \tsetStyle: setStyle,\n  \tanimateStyle: _animateStyle,\n  \tprocessParams: processParams\n  };\n\n  var _Transition = Transition;\n\n  var Element_prototype_render = Element$render;\n\n  var updateCss, updateScript;\n\n  updateCss = function () {\n  \tvar node = this.node,\n  \t    content = this.fragment.toString(false);\n\n  \t// IE8 has no styleSheet unless there's a type text/css\n  \tif (window && window.appearsToBeIELessEqual8) {\n  \t\tnode.type = \"text/css\";\n  \t}\n\n  \tif (node.styleSheet) {\n  \t\tnode.styleSheet.cssText = content;\n  \t} else {\n\n  \t\twhile (node.hasChildNodes()) {\n  \t\t\tnode.removeChild(node.firstChild);\n  \t\t}\n\n  \t\tnode.appendChild(document.createTextNode(content));\n  \t}\n  };\n\n  updateScript = function () {\n  \tif (!this.node.type || this.node.type === \"text/javascript\") {\n  \t\twarnIfDebug(\"Script tag was updated. This does not cause the code to be re-evaluated!\", { ractive: this.root });\n  \t\t// As it happens, we ARE in a position to re-evaluate the code if we wanted\n  \t\t// to - we could eval() it, or insert it into a fresh (temporary) script tag.\n  \t\t// But this would be a terrible idea with unpredictable results, so let's not.\n  \t}\n\n  \tthis.node.text = this.fragment.toString(false);\n  };\n  function Element$render() {\n  \tvar _this = this;\n\n  \tvar root = this.root,\n  \t    namespace,\n  \t    node,\n  \t    transition;\n\n  \tnamespace = getNamespace(this);\n  \tnode = this.node = createElement(this.name, namespace);\n\n  \t// Is this a top-level node of a component? If so, we may need to add\n  \t// a data-ractive-css attribute, for CSS encapsulation\n  \tif (this.parentFragment.cssIds) {\n  \t\tthis.node.setAttribute(\"data-ractive-css\", this.parentFragment.cssIds.map(function (x) {\n  \t\t\treturn \"{\" + x + \"}\";\n  \t\t}).join(\" \"));\n  \t}\n\n  \t// Add _ractive property to the node - we use this object to store stuff\n  \t// related to proxy events, two-way bindings etc\n  \tdefineProperty(this.node, \"_ractive\", {\n  \t\tvalue: {\n  \t\t\tproxy: this,\n  \t\t\tkeypath: getInnerContext(this.parentFragment),\n  \t\t\tevents: create(null),\n  \t\t\troot: root\n  \t\t}\n  \t});\n\n  \t// Render attributes\n  \tthis.attributes.forEach(function (a) {\n  \t\treturn a.render(node);\n  \t});\n  \tthis.conditionalAttributes.forEach(function (a) {\n  \t\treturn a.render(node);\n  \t});\n\n  \t// Render children\n  \tif (this.fragment) {\n  \t\t// Special case - <script> element\n  \t\tif (this.name === \"script\") {\n  \t\t\tthis.bubble = updateScript;\n  \t\t\tthis.node.text = this.fragment.toString(false); // bypass warning initially\n  \t\t\tthis.fragment.unrender = noop; // TODO this is a kludge\n  \t\t}\n\n  \t\t// Special case - <style> element\n  \t\telse if (this.name === \"style\") {\n  \t\t\tthis.bubble = updateCss;\n  \t\t\tthis.bubble();\n  \t\t\tthis.fragment.unrender = noop;\n  \t\t}\n\n  \t\t// Special case - contenteditable\n  \t\telse if (this.binding && this.getAttribute(\"contenteditable\")) {\n  \t\t\tthis.fragment.unrender = noop;\n  \t\t} else {\n  \t\t\tthis.node.appendChild(this.fragment.render());\n  \t\t}\n  \t}\n\n  \t// deal with two-way bindings\n  \tif (this.binding) {\n  \t\tthis.binding.render();\n  \t\tthis.node._ractive.binding = this.binding;\n  \t}\n\n  \t// Add proxy event handlers\n  \tif (this.eventHandlers) {\n  \t\tthis.eventHandlers.forEach(function (h) {\n  \t\t\treturn h.render();\n  \t\t});\n  \t}\n\n  \tif (this.name === \"option\") {\n  \t\tprocessOption(this);\n  \t}\n\n  \t// Special cases\n  \tif (this.name === \"img\") {\n  \t\t// if this is an <img>, and we're in a crap browser, we may\n  \t\t// need to prevent it from overriding width and height when\n  \t\t// it loads the src\n  \t\tspecial_img__render(this);\n  \t} else if (this.name === \"form\") {\n  \t\t// forms need to keep track of their bindings, in case of reset\n  \t\tform__render(this);\n  \t} else if (this.name === \"input\" || this.name === \"textarea\") {\n  \t\t// inputs and textareas should store their initial value as\n  \t\t// `defaultValue` in case of reset\n  \t\tthis.node.defaultValue = this.node.value;\n  \t} else if (this.name === \"option\") {\n  \t\t// similarly for option nodes\n  \t\tthis.node.defaultSelected = this.node.selected;\n  \t}\n\n  \t// apply decorator(s)\n  \tif (this.decorator && this.decorator.fn) {\n  \t\tglobal_runloop.scheduleTask(function () {\n  \t\t\tif (!_this.decorator.torndown) {\n  \t\t\t\t_this.decorator.init();\n  \t\t\t}\n  \t\t}, true);\n  \t}\n\n  \t// trigger intro transition\n  \tif (root.transitionsEnabled && this.intro) {\n  \t\ttransition = new _Transition(this, this.intro, true);\n  \t\tglobal_runloop.registerTransition(transition);\n  \t\tglobal_runloop.scheduleTask(function () {\n  \t\t\treturn transition.start();\n  \t\t}, true);\n\n  \t\tthis.transition = transition;\n  \t}\n\n  \tif (this.node.autofocus) {\n  \t\t// Special case. Some browsers (*cough* Firefix *cough*) have a problem\n  \t\t// with dynamically-generated elements having autofocus, and they won't\n  \t\t// allow you to programmatically focus the element until it's in the DOM\n  \t\tglobal_runloop.scheduleTask(function () {\n  \t\t\treturn _this.node.focus();\n  \t\t}, true);\n  \t}\n\n  \tupdateLiveQueries(this);\n  \treturn this.node;\n  }\n\n  function getNamespace(element) {\n  \tvar namespace, xmlns, parent;\n\n  \t// Use specified namespace...\n  \tif (xmlns = element.getAttribute(\"xmlns\")) {\n  \t\tnamespace = xmlns;\n  \t}\n\n  \t// ...or SVG namespace, if this is an <svg> element\n  \telse if (element.name === \"svg\") {\n  \t\tnamespace = namespaces.svg;\n  \t} else if (parent = element.parent) {\n  \t\t// ...or HTML, if the parent is a <foreignObject>\n  \t\tif (parent.name === \"foreignObject\") {\n  \t\t\tnamespace = namespaces.html;\n  \t\t}\n\n  \t\t// ...or inherit from the parent node\n  \t\telse {\n  \t\t\tnamespace = parent.node.namespaceURI;\n  \t\t}\n  \t} else {\n  \t\tnamespace = element.root.el.namespaceURI;\n  \t}\n\n  \treturn namespace;\n  }\n\n  function processOption(option) {\n  \tvar optionValue, selectValue, i;\n\n  \tif (!option.select) {\n  \t\treturn;\n  \t}\n\n  \tselectValue = option.select.getAttribute(\"value\");\n  \tif (selectValue === undefined) {\n  \t\treturn;\n  \t}\n\n  \toptionValue = option.getAttribute(\"value\");\n\n  \tif (option.select.node.multiple && isArray(selectValue)) {\n  \t\ti = selectValue.length;\n  \t\twhile (i--) {\n  \t\t\tif (optionValue == selectValue[i]) {\n  \t\t\t\toption.node.selected = true;\n  \t\t\t\tbreak;\n  \t\t\t}\n  \t\t}\n  \t} else {\n  \t\toption.node.selected = optionValue == selectValue;\n  \t}\n  }\n\n  function updateLiveQueries(element) {\n  \tvar instance, liveQueries, i, selector, query;\n\n  \t// Does this need to be added to any live queries?\n  \tinstance = element.root;\n\n  \tdo {\n  \t\tliveQueries = instance._liveQueries;\n\n  \t\ti = liveQueries.length;\n  \t\twhile (i--) {\n  \t\t\tselector = liveQueries[i];\n  \t\t\tquery = liveQueries[\"_\" + selector];\n\n  \t\t\tif (query._test(element)) {\n  \t\t\t\t// keep register of applicable selectors, for when we teardown\n  \t\t\t\t(element.liveQueries || (element.liveQueries = [])).push(query);\n  \t\t\t}\n  \t\t}\n  \t} while (instance = instance.parent);\n  }\n\n  var Element_prototype_toString = function () {\n  \tvar str, escape;\n\n  \tif (this.template.y) {\n  \t\t// DOCTYPE declaration\n  \t\treturn \"<!DOCTYPE\" + this.template.dd + \">\";\n  \t}\n\n  \tstr = \"<\" + this.template.e;\n\n  \tstr += this.attributes.map(stringifyAttribute).join(\"\") + this.conditionalAttributes.map(stringifyAttribute).join(\"\");\n\n  \t// Special case - selected options\n  \tif (this.name === \"option\" && optionIsSelected(this)) {\n  \t\tstr += \" selected\";\n  \t}\n\n  \t// Special case - two-way radio name bindings\n  \tif (this.name === \"input\" && inputIsCheckedRadio(this)) {\n  \t\tstr += \" checked\";\n  \t}\n\n  \tstr += \">\";\n\n  \t// Special case - textarea\n  \tif (this.name === \"textarea\" && this.getAttribute(\"value\") !== undefined) {\n  \t\tstr += escapeHtml(this.getAttribute(\"value\"));\n  \t}\n\n  \t// Special case - contenteditable\n  \telse if (this.getAttribute(\"contenteditable\") !== undefined) {\n  \t\tstr += this.getAttribute(\"value\") || \"\";\n  \t}\n\n  \tif (this.fragment) {\n  \t\tescape = this.name !== \"script\" && this.name !== \"style\";\n  \t\tstr += this.fragment.toString(escape);\n  \t}\n\n  \t// add a closing tag if this isn't a void element\n  \tif (!voidElementNames.test(this.template.e)) {\n  \t\tstr += \"</\" + this.template.e + \">\";\n  \t}\n\n  \treturn str;\n  };\n\n  function optionIsSelected(element) {\n  \tvar optionValue, selectValue, i;\n\n  \toptionValue = element.getAttribute(\"value\");\n\n  \tif (optionValue === undefined || !element.select) {\n  \t\treturn false;\n  \t}\n\n  \tselectValue = element.select.getAttribute(\"value\");\n\n  \tif (selectValue == optionValue) {\n  \t\treturn true;\n  \t}\n\n  \tif (element.select.getAttribute(\"multiple\") && isArray(selectValue)) {\n  \t\ti = selectValue.length;\n  \t\twhile (i--) {\n  \t\t\tif (selectValue[i] == optionValue) {\n  \t\t\t\treturn true;\n  \t\t\t}\n  \t\t}\n  \t}\n  }\n\n  function inputIsCheckedRadio(element) {\n  \tvar attributes, typeAttribute, valueAttribute, nameAttribute;\n\n  \tattributes = element.attributes;\n\n  \ttypeAttribute = attributes.type;\n  \tvalueAttribute = attributes.value;\n  \tnameAttribute = attributes.name;\n\n  \tif (!typeAttribute || typeAttribute.value !== \"radio\" || !valueAttribute || !nameAttribute.interpolator) {\n  \t\treturn;\n  \t}\n\n  \tif (valueAttribute.value === nameAttribute.interpolator.value) {\n  \t\treturn true;\n  \t}\n  }\n\n  function stringifyAttribute(attribute) {\n  \tvar str = attribute.toString();\n  \treturn str ? \" \" + str : \"\";\n  }\n\n  var Element_prototype_unbind = Element$unbind;\n  function Element$unbind() {\n  \tif (this.fragment) {\n  \t\tthis.fragment.unbind();\n  \t}\n\n  \tif (this.binding) {\n  \t\tthis.binding.unbind();\n  \t}\n\n  \tif (this.eventHandlers) {\n  \t\tthis.eventHandlers.forEach(methodCallers__unbind);\n  \t}\n\n  \t// Special case - <option>\n  \tif (this.name === \"option\") {\n  \t\tspecial_option__unbind(this);\n  \t}\n\n  \tthis.attributes.forEach(methodCallers__unbind);\n  \tthis.conditionalAttributes.forEach(methodCallers__unbind);\n  }\n\n  var Element_prototype_unrender = Element$unrender;\n\n  function Element$unrender(shouldDestroy) {\n  \tvar binding, bindings, transition;\n\n  \tif (transition = this.transition) {\n  \t\ttransition.complete();\n  \t}\n\n  \t// Detach as soon as we can\n  \tif (this.name === \"option\") {\n  \t\t// <option> elements detach immediately, so that\n  \t\t// their parent <select> element syncs correctly, and\n  \t\t// since option elements can't have transitions anyway\n  \t\tthis.detach();\n  \t} else if (shouldDestroy) {\n  \t\tglobal_runloop.detachWhenReady(this);\n  \t}\n\n  \t// Children first. that way, any transitions on child elements will be\n  \t// handled by the current transitionManager\n  \tif (this.fragment) {\n  \t\tthis.fragment.unrender(false);\n  \t}\n\n  \tif (binding = this.binding) {\n  \t\tthis.binding.unrender();\n\n  \t\tthis.node._ractive.binding = null;\n  \t\tbindings = this.root._twowayBindings[binding.keypath.str];\n  \t\tbindings.splice(bindings.indexOf(binding), 1);\n  \t}\n\n  \t// Remove event handlers\n  \tif (this.eventHandlers) {\n  \t\tthis.eventHandlers.forEach(methodCallers__unrender);\n  \t}\n\n  \tif (this.decorator) {\n  \t\tglobal_runloop.registerDecorator(this.decorator);\n  \t}\n\n  \t// trigger outro transition if necessary\n  \tif (this.root.transitionsEnabled && this.outro) {\n  \t\ttransition = new _Transition(this, this.outro, false);\n  \t\tglobal_runloop.registerTransition(transition);\n  \t\tglobal_runloop.scheduleTask(function () {\n  \t\t\treturn transition.start();\n  \t\t});\n  \t}\n\n  \t// Remove this node from any live queries\n  \tif (this.liveQueries) {\n  \t\tremoveFromLiveQueries(this);\n  \t}\n\n  \tif (this.name === \"form\") {\n  \t\tform__unrender(this);\n  \t}\n  }\n\n  function removeFromLiveQueries(element) {\n  \tvar query, selector, i;\n\n  \ti = element.liveQueries.length;\n  \twhile (i--) {\n  \t\tquery = element.liveQueries[i];\n  \t\tselector = query.selector;\n\n  \t\tquery._remove(element.node);\n  \t}\n  }\n\n  var Element = function (options) {\n  \tthis.init(options);\n  };\n\n  Element.prototype = {\n  \tbubble: Element_prototype_bubble,\n  \tdetach: Element_prototype_detach,\n  \tfind: Element_prototype_find,\n  \tfindAll: Element_prototype_findAll,\n  \tfindAllComponents: Element_prototype_findAllComponents,\n  \tfindComponent: Element_prototype_findComponent,\n  \tfindNextNode: Element_prototype_findNextNode,\n  \tfirstNode: Element_prototype_firstNode,\n  \tgetAttribute: getAttribute,\n  \tinit: Element_prototype_init,\n  \trebind: Element_prototype_rebind,\n  \trender: Element_prototype_render,\n  \ttoString: Element_prototype_toString,\n  \tunbind: Element_prototype_unbind,\n  \tunrender: Element_prototype_unrender\n  };\n\n  var _Element = Element;\n\n  var deIndent__empty = /^\\s*$/,\n      deIndent__leadingWhitespace = /^\\s*/;\n\n  var deIndent = function (str) {\n  \tvar lines, firstLine, lastLine, minIndent;\n\n  \tlines = str.split(\"\\n\");\n\n  \t// remove first and last line, if they only contain whitespace\n  \tfirstLine = lines[0];\n  \tif (firstLine !== undefined && deIndent__empty.test(firstLine)) {\n  \t\tlines.shift();\n  \t}\n\n  \tlastLine = lastItem(lines);\n  \tif (lastLine !== undefined && deIndent__empty.test(lastLine)) {\n  \t\tlines.pop();\n  \t}\n\n  \tminIndent = lines.reduce(reducer, null);\n\n  \tif (minIndent) {\n  \t\tstr = lines.map(function (line) {\n  \t\t\treturn line.replace(minIndent, \"\");\n  \t\t}).join(\"\\n\");\n  \t}\n\n  \treturn str;\n  };\n\n  function reducer(previous, line) {\n  \tvar lineIndent = deIndent__leadingWhitespace.exec(line)[0];\n\n  \tif (previous === null || lineIndent.length < previous.length) {\n  \t\treturn lineIndent;\n  \t}\n\n  \treturn previous;\n  }\n\n  var Partial_getPartialTemplate = getPartialTemplate;\n\n  function getPartialTemplate(ractive, name, parentFragment) {\n  \tvar partial;\n\n  \t// If the partial in instance or view heirarchy instances, great\n  \tif (partial = getPartialFromRegistry(ractive, name, parentFragment || {})) {\n  \t\treturn partial;\n  \t}\n\n  \t// Does it exist on the page as a script tag?\n  \tpartial = template_parser.fromId(name, { noThrow: true });\n\n  \tif (partial) {\n  \t\t// is this necessary?\n  \t\tpartial = deIndent(partial);\n\n  \t\t// parse and register to this ractive instance\n  \t\tvar parsed = template_parser.parse(partial, template_parser.getParseOptions(ractive));\n\n  \t\t// register (and return main partial if there are others in the template)\n  \t\treturn ractive.partials[name] = parsed.t;\n  \t}\n  }\n\n  function getPartialFromRegistry(ractive, name, parentFragment) {\n  \tvar fn = undefined,\n  \t    partial = findParentPartial(name, parentFragment.owner);\n\n  \t// if there was an instance up-hierarchy, cool\n  \tif (partial) return partial;\n\n  \t// find first instance in the ractive or view hierarchy that has this partial\n  \tvar instance = findInstance(\"partials\", ractive, name);\n\n  \tif (!instance) {\n  \t\treturn;\n  \t}\n\n  \tpartial = instance.partials[name];\n\n  \t// partial is a function?\n  \tif (typeof partial === \"function\") {\n  \t\tfn = partial.bind(instance);\n  \t\tfn.isOwner = instance.partials.hasOwnProperty(name);\n  \t\tpartial = fn.call(ractive, template_parser);\n  \t}\n\n  \tif (!partial && partial !== \"\") {\n  \t\twarnIfDebug(noRegistryFunctionReturn, name, \"partial\", \"partial\", { ractive: ractive });\n  \t\treturn;\n  \t}\n\n  \t// If this was added manually to the registry,\n  \t// but hasn't been parsed, parse it now\n  \tif (!template_parser.isParsed(partial)) {\n\n  \t\t// use the parseOptions of the ractive instance on which it was found\n  \t\tvar parsed = template_parser.parse(partial, template_parser.getParseOptions(instance));\n\n  \t\t// Partials cannot contain nested partials!\n  \t\t// TODO add a test for this\n  \t\tif (parsed.p) {\n  \t\t\twarnIfDebug(\"Partials ({{>%s}}) cannot contain nested inline partials\", name, { ractive: ractive });\n  \t\t}\n\n  \t\t// if fn, use instance to store result, otherwise needs to go\n  \t\t// in the correct point in prototype chain on instance or constructor\n  \t\tvar target = fn ? instance : findOwner(instance, name);\n\n  \t\t// may be a template with partials, which need to be registered and main template extracted\n  \t\ttarget.partials[name] = partial = parsed.t;\n  \t}\n\n  \t// store for reset\n  \tif (fn) {\n  \t\tpartial._fn = fn;\n  \t}\n\n  \treturn partial.v ? partial.t : partial;\n  }\n\n  function findOwner(ractive, key) {\n  \treturn ractive.partials.hasOwnProperty(key) ? ractive : findConstructor(ractive.constructor, key);\n  }\n\n  function findConstructor(constructor, key) {\n  \tif (!constructor) {\n  \t\treturn;\n  \t}\n  \treturn constructor.partials.hasOwnProperty(key) ? constructor : findConstructor(constructor._Parent, key);\n  }\n\n  function findParentPartial(name, parent) {\n  \tif (parent) {\n  \t\tif (parent.template && parent.template.p && parent.template.p[name]) {\n  \t\t\treturn parent.template.p[name];\n  \t\t} else if (parent.parentFragment && parent.parentFragment.owner) {\n  \t\t\treturn findParentPartial(name, parent.parentFragment.owner);\n  \t\t}\n  \t}\n  }\n\n  var applyIndent = function (string, indent) {\n  \tvar indented;\n\n  \tif (!indent) {\n  \t\treturn string;\n  \t}\n\n  \tindented = string.split(\"\\n\").map(function (line, notFirstLine) {\n  \t\treturn notFirstLine ? indent + line : line;\n  \t}).join(\"\\n\");\n\n  \treturn indented;\n  };\n\n  var missingPartialMessage = \"Could not find template for partial \\\"%s\\\"\";\n\n  var Partial = function (options) {\n  \tvar parentFragment, template;\n\n  \tparentFragment = this.parentFragment = options.parentFragment;\n\n  \tthis.root = parentFragment.root;\n  \tthis.type = PARTIAL;\n  \tthis.index = options.index;\n  \tthis.name = options.template.r;\n  \tthis.rendered = false;\n\n  \tthis.fragment = this.fragmentToRender = this.fragmentToUnrender = null;\n\n  \tMustache.init(this, options);\n\n  \t// If this didn't resolve, it most likely means we have a named partial\n  \t// (i.e. `{{>foo}}` means 'use the foo partial', not 'use the partial\n  \t// whose name is the value of `foo`')\n  \tif (!this.keypath) {\n  \t\tif (template = Partial_getPartialTemplate(this.root, this.name, parentFragment)) {\n  \t\t\tshared_unbind.call(this); // prevent any further changes\n  \t\t\tthis.isNamed = true;\n  \t\t\tthis.setTemplate(template);\n  \t\t} else {\n  \t\t\twarnOnceIfDebug(missingPartialMessage, this.name);\n  \t\t}\n  \t}\n  };\n\n  Partial.prototype = {\n  \tbubble: function () {\n  \t\tthis.parentFragment.bubble();\n  \t},\n\n  \tdetach: function () {\n  \t\treturn this.fragment.detach();\n  \t},\n\n  \tfind: function (selector) {\n  \t\treturn this.fragment.find(selector);\n  \t},\n\n  \tfindAll: function (selector, query) {\n  \t\treturn this.fragment.findAll(selector, query);\n  \t},\n\n  \tfindComponent: function (selector) {\n  \t\treturn this.fragment.findComponent(selector);\n  \t},\n\n  \tfindAllComponents: function (selector, query) {\n  \t\treturn this.fragment.findAllComponents(selector, query);\n  \t},\n\n  \tfirstNode: function () {\n  \t\treturn this.fragment.firstNode();\n  \t},\n\n  \tfindNextNode: function () {\n  \t\treturn this.parentFragment.findNextNode(this);\n  \t},\n\n  \tgetPartialName: function () {\n  \t\tif (this.isNamed && this.name) return this.name;else if (this.value === undefined) return this.name;else return this.value;\n  \t},\n\n  \tgetValue: function () {\n  \t\treturn this.fragment.getValue();\n  \t},\n\n  \trebind: function (oldKeypath, newKeypath) {\n  \t\t// named partials aren't bound, so don't rebind\n  \t\tif (!this.isNamed) {\n  \t\t\tMustache_rebind.call(this, oldKeypath, newKeypath);\n  \t\t}\n\n  \t\tif (this.fragment) {\n  \t\t\tthis.fragment.rebind(oldKeypath, newKeypath);\n  \t\t}\n  \t},\n\n  \trender: function () {\n  \t\tthis.docFrag = document.createDocumentFragment();\n  \t\tthis.update();\n\n  \t\tthis.rendered = true;\n  \t\treturn this.docFrag;\n  \t},\n\n  \tresolve: Mustache.resolve,\n\n  \tsetValue: function (value) {\n  \t\tvar template;\n\n  \t\tif (value !== undefined && value === this.value) {\n  \t\t\t// nothing has changed, so no work to be done\n  \t\t\treturn;\n  \t\t}\n\n  \t\tif (value !== undefined) {\n  \t\t\ttemplate = Partial_getPartialTemplate(this.root, \"\" + value, this.parentFragment);\n  \t\t}\n\n  \t\t// we may be here if we have a partial like `{{>foo}}` and `foo` is the\n  \t\t// name of both a data property (whose value ISN'T the name of a partial)\n  \t\t// and a partial. In those cases, this becomes a named partial\n  \t\tif (!template && this.name && (template = Partial_getPartialTemplate(this.root, this.name, this.parentFragment))) {\n  \t\t\tshared_unbind.call(this);\n  \t\t\tthis.isNamed = true;\n  \t\t}\n\n  \t\tif (!template) {\n  \t\t\twarnOnceIfDebug(missingPartialMessage, this.name, { ractive: this.root });\n  \t\t}\n\n  \t\tthis.value = value;\n\n  \t\tthis.setTemplate(template || []);\n\n  \t\tthis.bubble();\n\n  \t\tif (this.rendered) {\n  \t\t\tglobal_runloop.addView(this);\n  \t\t}\n  \t},\n\n  \tsetTemplate: function (template) {\n  \t\tif (this.fragment) {\n  \t\t\tthis.fragment.unbind();\n  \t\t\tif (this.rendered) {\n  \t\t\t\tthis.fragmentToUnrender = this.fragment;\n  \t\t\t}\n  \t\t}\n\n  \t\tthis.fragment = new virtualdom_Fragment({\n  \t\t\ttemplate: template,\n  \t\t\troot: this.root,\n  \t\t\towner: this,\n  \t\t\tpElement: this.parentFragment.pElement\n  \t\t});\n\n  \t\tthis.fragmentToRender = this.fragment;\n  \t},\n\n  \ttoString: function (toString) {\n  \t\tvar string, previousItem, lastLine, match;\n\n  \t\tstring = this.fragment.toString(toString);\n\n  \t\tpreviousItem = this.parentFragment.items[this.index - 1];\n\n  \t\tif (!previousItem || previousItem.type !== TEXT) {\n  \t\t\treturn string;\n  \t\t}\n\n  \t\tlastLine = previousItem.text.split(\"\\n\").pop();\n\n  \t\tif (match = /^\\s+$/.exec(lastLine)) {\n  \t\t\treturn applyIndent(string, match[0]);\n  \t\t}\n\n  \t\treturn string;\n  \t},\n\n  \tunbind: function () {\n  \t\tif (!this.isNamed) {\n  \t\t\t// dynamic partial - need to unbind self\n  \t\t\tshared_unbind.call(this);\n  \t\t}\n\n  \t\tif (this.fragment) {\n  \t\t\tthis.fragment.unbind();\n  \t\t}\n  \t},\n\n  \tunrender: function (shouldDestroy) {\n  \t\tif (this.rendered) {\n  \t\t\tif (this.fragment) {\n  \t\t\t\tthis.fragment.unrender(shouldDestroy);\n  \t\t\t}\n  \t\t\tthis.rendered = false;\n  \t\t}\n  \t},\n\n  \tupdate: function () {\n  \t\tvar target, anchor;\n\n  \t\tif (this.fragmentToUnrender) {\n  \t\t\tthis.fragmentToUnrender.unrender(true);\n  \t\t\tthis.fragmentToUnrender = null;\n  \t\t}\n\n  \t\tif (this.fragmentToRender) {\n  \t\t\tthis.docFrag.appendChild(this.fragmentToRender.render());\n  \t\t\tthis.fragmentToRender = null;\n  \t\t}\n\n  \t\tif (this.rendered) {\n  \t\t\ttarget = this.parentFragment.getNode();\n  \t\t\tanchor = this.parentFragment.findNextNode(this);\n  \t\t\ttarget.insertBefore(this.docFrag, anchor);\n  \t\t}\n  \t}\n  };\n\n  var _Partial = Partial;\n\n  // finds the component constructor in the registry or view hierarchy registries\n\n  var Component_getComponent = getComponent;\n  function getComponent(ractive, name) {\n\n  \tvar Component,\n  \t    instance = findInstance(\"components\", ractive, name);\n\n  \tif (instance) {\n  \t\tComponent = instance.components[name];\n\n  \t\t// best test we have for not Ractive.extend\n  \t\tif (!Component._Parent) {\n  \t\t\t// function option, execute and store for reset\n  \t\t\tvar fn = Component.bind(instance);\n  \t\t\tfn.isOwner = instance.components.hasOwnProperty(name);\n  \t\t\tComponent = fn();\n\n  \t\t\tif (!Component) {\n  \t\t\t\twarnIfDebug(noRegistryFunctionReturn, name, \"component\", \"component\", { ractive: ractive });\n\n  \t\t\t\treturn;\n  \t\t\t}\n\n  \t\t\tif (typeof Component === \"string\") {\n  \t\t\t\t// allow string lookup\n  \t\t\t\tComponent = getComponent(ractive, Component);\n  \t\t\t}\n\n  \t\t\tComponent._fn = fn;\n  \t\t\tinstance.components[name] = Component;\n  \t\t}\n  \t}\n\n  \treturn Component;\n  }\n\n  var Component_prototype_detach = Component$detach;\n  var Component_prototype_detach__detachHook = new hooks_Hook(\"detach\");\n  function Component$detach() {\n  \tvar detached = this.instance.fragment.detach();\n  \tComponent_prototype_detach__detachHook.fire(this.instance);\n  \treturn detached;\n  }\n\n  var Component_prototype_find = Component$find;\n\n  function Component$find(selector) {\n  \treturn this.instance.fragment.find(selector);\n  }\n\n  var Component_prototype_findAll = Component$findAll;\n\n  function Component$findAll(selector, query) {\n  \treturn this.instance.fragment.findAll(selector, query);\n  }\n\n  var Component_prototype_findAllComponents = Component$findAllComponents;\n\n  function Component$findAllComponents(selector, query) {\n  \tquery._test(this, true);\n\n  \tif (this.instance.fragment) {\n  \t\tthis.instance.fragment.findAllComponents(selector, query);\n  \t}\n  }\n\n  var Component_prototype_findComponent = Component$findComponent;\n\n  function Component$findComponent(selector) {\n  \tif (!selector || selector === this.name) {\n  \t\treturn this.instance;\n  \t}\n\n  \tif (this.instance.fragment) {\n  \t\treturn this.instance.fragment.findComponent(selector);\n  \t}\n\n  \treturn null;\n  }\n\n  var Component_prototype_findNextNode = Component$findNextNode;\n\n  function Component$findNextNode() {\n  \treturn this.parentFragment.findNextNode(this);\n  }\n\n  var Component_prototype_firstNode = Component$firstNode;\n\n  function Component$firstNode() {\n  \tif (this.rendered) {\n  \t\treturn this.instance.fragment.firstNode();\n  \t}\n\n  \treturn null;\n  }\n\n  var processWrapper = function (wrapper, array, methodName, newIndices) {\n  \tvar root = wrapper.root;\n  \tvar keypath = wrapper.keypath;\n\n  \tif (!!newIndices) {\n  \t\troot.viewmodel.smartUpdate(keypath, array, newIndices);\n  \t} else {\n  \t\t// If this is a sort or reverse, we just do root.set()...\n  \t\t// TODO use merge logic?\n  \t\troot.viewmodel.mark(keypath);\n  \t}\n  };\n\n  var patchedArrayProto = [],\n      mutatorMethods = [\"pop\", \"push\", \"reverse\", \"shift\", \"sort\", \"splice\", \"unshift\"],\n      testObj,\n      patchArrayMethods,\n      unpatchArrayMethods;\n\n  mutatorMethods.forEach(function (methodName) {\n  \tvar method = function () {\n  \t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n  \t\t\targs[_key] = arguments[_key];\n  \t\t}\n\n  \t\tvar newIndices, result, wrapper, i;\n\n  \t\tnewIndices = shared_getNewIndices(this, methodName, args);\n\n  \t\t// apply the underlying method\n  \t\tresult = Array.prototype[methodName].apply(this, arguments);\n\n  \t\t// trigger changes\n  \t\tglobal_runloop.start();\n\n  \t\tthis._ractive.setting = true;\n  \t\ti = this._ractive.wrappers.length;\n  \t\twhile (i--) {\n  \t\t\twrapper = this._ractive.wrappers[i];\n\n  \t\t\tglobal_runloop.addRactive(wrapper.root);\n  \t\t\tprocessWrapper(wrapper, this, methodName, newIndices);\n  \t\t}\n\n  \t\tglobal_runloop.end();\n\n  \t\tthis._ractive.setting = false;\n  \t\treturn result;\n  \t};\n\n  \tdefineProperty(patchedArrayProto, methodName, {\n  \t\tvalue: method\n  \t});\n  });\n\n  // can we use prototype chain injection?\n  // http://perfectionkills.com/how-ecmascript-5-still-does-not-allow-to-subclass-an-array/#wrappers_prototype_chain_injection\n  testObj = {};\n\n  if (testObj.__proto__) {\n  \t// yes, we can\n  \tpatchArrayMethods = function (array) {\n  \t\tarray.__proto__ = patchedArrayProto;\n  \t};\n\n  \tunpatchArrayMethods = function (array) {\n  \t\tarray.__proto__ = Array.prototype;\n  \t};\n  } else {\n  \t// no, we can't\n  \tpatchArrayMethods = function (array) {\n  \t\tvar i, methodName;\n\n  \t\ti = mutatorMethods.length;\n  \t\twhile (i--) {\n  \t\t\tmethodName = mutatorMethods[i];\n  \t\t\tdefineProperty(array, methodName, {\n  \t\t\t\tvalue: patchedArrayProto[methodName],\n  \t\t\t\tconfigurable: true\n  \t\t\t});\n  \t\t}\n  \t};\n\n  \tunpatchArrayMethods = function (array) {\n  \t\tvar i;\n\n  \t\ti = mutatorMethods.length;\n  \t\twhile (i--) {\n  \t\t\tdelete array[mutatorMethods[i]];\n  \t\t}\n  \t};\n  }\n\n  patchArrayMethods.unpatch = unpatchArrayMethods;\n  var patch = patchArrayMethods;\n\n  var arrayAdaptor,\n\n  // helpers\n  ArrayWrapper, array_index__errorMessage;\n\n  arrayAdaptor = {\n  \tfilter: function (object) {\n  \t\t// wrap the array if a) b) it's an array, and b) either it hasn't been wrapped already,\n  \t\t// or the array didn't trigger the get() itself\n  \t\treturn isArray(object) && (!object._ractive || !object._ractive.setting);\n  \t},\n  \twrap: function (ractive, array, keypath) {\n  \t\treturn new ArrayWrapper(ractive, array, keypath);\n  \t}\n  };\n\n  ArrayWrapper = function (ractive, array, keypath) {\n  \tthis.root = ractive;\n  \tthis.value = array;\n  \tthis.keypath = getKeypath(keypath);\n\n  \t// if this array hasn't already been ractified, ractify it\n  \tif (!array._ractive) {\n\n  \t\t// define a non-enumerable _ractive property to store the wrappers\n  \t\tdefineProperty(array, \"_ractive\", {\n  \t\t\tvalue: {\n  \t\t\t\twrappers: [],\n  \t\t\t\tinstances: [],\n  \t\t\t\tsetting: false\n  \t\t\t},\n  \t\t\tconfigurable: true\n  \t\t});\n\n  \t\tpatch(array);\n  \t}\n\n  \t// store the ractive instance, so we can handle transitions later\n  \tif (!array._ractive.instances[ractive._guid]) {\n  \t\tarray._ractive.instances[ractive._guid] = 0;\n  \t\tarray._ractive.instances.push(ractive);\n  \t}\n\n  \tarray._ractive.instances[ractive._guid] += 1;\n  \tarray._ractive.wrappers.push(this);\n  };\n\n  ArrayWrapper.prototype = {\n  \tget: function () {\n  \t\treturn this.value;\n  \t},\n  \tteardown: function () {\n  \t\tvar array, storage, wrappers, instances, index;\n\n  \t\tarray = this.value;\n  \t\tstorage = array._ractive;\n  \t\twrappers = storage.wrappers;\n  \t\tinstances = storage.instances;\n\n  \t\t// if teardown() was invoked because we're clearing the cache as a result of\n  \t\t// a change that the array itself triggered, we can save ourselves the teardown\n  \t\t// and immediate setup\n  \t\tif (storage.setting) {\n  \t\t\treturn false; // so that we don't remove it from this.root.viewmodel.wrapped\n  \t\t}\n\n  \t\tindex = wrappers.indexOf(this);\n  \t\tif (index === -1) {\n  \t\t\tthrow new Error(array_index__errorMessage);\n  \t\t}\n\n  \t\twrappers.splice(index, 1);\n\n  \t\t// if nothing else depends on this array, we can revert it to its\n  \t\t// natural state\n  \t\tif (!wrappers.length) {\n  \t\t\tdelete array._ractive;\n  \t\t\tpatch.unpatch(this.value);\n  \t\t} else {\n  \t\t\t// remove ractive instance if possible\n  \t\t\tinstances[this.root._guid] -= 1;\n  \t\t\tif (!instances[this.root._guid]) {\n  \t\t\t\tindex = instances.indexOf(this.root);\n\n  \t\t\t\tif (index === -1) {\n  \t\t\t\t\tthrow new Error(array_index__errorMessage);\n  \t\t\t\t}\n\n  \t\t\t\tinstances.splice(index, 1);\n  \t\t\t}\n  \t\t}\n  \t}\n  };\n\n  array_index__errorMessage = \"Something went wrong in a rather interesting way\";\n  var array_index = arrayAdaptor;\n\n  var numeric = /^\\s*[0-9]+\\s*$/;\n\n  var createBranch = function (key) {\n  \treturn numeric.test(key) ? [] : {};\n  };\n\n  var magicAdaptor, MagicWrapper;\n\n  try {\n  \tObject.defineProperty({}, \"test\", { value: 0 });\n\n  \tmagicAdaptor = {\n  \t\tfilter: function (object, keypath, ractive) {\n  \t\t\tvar parentWrapper, parentValue;\n\n  \t\t\tif (!keypath) {\n  \t\t\t\treturn false;\n  \t\t\t}\n\n  \t\t\tkeypath = getKeypath(keypath);\n\n  \t\t\t// If the parent value is a wrapper, other than a magic wrapper,\n  \t\t\t// we shouldn't wrap this property\n  \t\t\tif ((parentWrapper = ractive.viewmodel.wrapped[keypath.parent.str]) && !parentWrapper.magic) {\n  \t\t\t\treturn false;\n  \t\t\t}\n\n  \t\t\tparentValue = ractive.viewmodel.get(keypath.parent);\n\n  \t\t\t// if parentValue is an array that doesn't include this member,\n  \t\t\t// we should return false otherwise lengths will get messed up\n  \t\t\tif (isArray(parentValue) && /^[0-9]+$/.test(keypath.lastKey)) {\n  \t\t\t\treturn false;\n  \t\t\t}\n\n  \t\t\treturn parentValue && (typeof parentValue === \"object\" || typeof parentValue === \"function\");\n  \t\t},\n  \t\twrap: function (ractive, property, keypath) {\n  \t\t\treturn new MagicWrapper(ractive, property, keypath);\n  \t\t}\n  \t};\n\n  \tMagicWrapper = function (ractive, value, keypath) {\n  \t\tvar objKeypath, template, siblings;\n\n  \t\tkeypath = getKeypath(keypath);\n\n  \t\tthis.magic = true;\n\n  \t\tthis.ractive = ractive;\n  \t\tthis.keypath = keypath;\n  \t\tthis.value = value;\n\n  \t\tthis.prop = keypath.lastKey;\n\n  \t\tobjKeypath = keypath.parent;\n  \t\tthis.obj = objKeypath.isRoot ? ractive.viewmodel.data : ractive.viewmodel.get(objKeypath);\n\n  \t\ttemplate = this.originalDescriptor = Object.getOwnPropertyDescriptor(this.obj, this.prop);\n\n  \t\t// Has this property already been wrapped?\n  \t\tif (template && template.set && (siblings = template.set._ractiveWrappers)) {\n\n  \t\t\t// Yes. Register this wrapper to this property, if it hasn't been already\n  \t\t\tif (siblings.indexOf(this) === -1) {\n  \t\t\t\tsiblings.push(this);\n  \t\t\t}\n\n  \t\t\treturn; // already wrapped\n  \t\t}\n\n  \t\t// No, it hasn't been wrapped\n  \t\tcreateAccessors(this, value, template);\n  \t};\n\n  \tMagicWrapper.prototype = {\n  \t\tget: function () {\n  \t\t\treturn this.value;\n  \t\t},\n  \t\treset: function (value) {\n  \t\t\tif (this.updating) {\n  \t\t\t\treturn;\n  \t\t\t}\n\n  \t\t\tthis.updating = true;\n  \t\t\tthis.obj[this.prop] = value; // trigger set() accessor\n  \t\t\tglobal_runloop.addRactive(this.ractive);\n  \t\t\tthis.ractive.viewmodel.mark(this.keypath, { keepExistingWrapper: true });\n  \t\t\tthis.updating = false;\n  \t\t\treturn true;\n  \t\t},\n  \t\tset: function (key, value) {\n  \t\t\tif (this.updating) {\n  \t\t\t\treturn;\n  \t\t\t}\n\n  \t\t\tif (!this.obj[this.prop]) {\n  \t\t\t\tthis.updating = true;\n  \t\t\t\tthis.obj[this.prop] = createBranch(key);\n  \t\t\t\tthis.updating = false;\n  \t\t\t}\n\n  \t\t\tthis.obj[this.prop][key] = value;\n  \t\t},\n  \t\tteardown: function () {\n  \t\t\tvar template, set, value, wrappers, index;\n\n  \t\t\t// If this method was called because the cache was being cleared as a\n  \t\t\t// result of a set()/update() call made by this wrapper, we return false\n  \t\t\t// so that it doesn't get torn down\n  \t\t\tif (this.updating) {\n  \t\t\t\treturn false;\n  \t\t\t}\n\n  \t\t\ttemplate = Object.getOwnPropertyDescriptor(this.obj, this.prop);\n  \t\t\tset = template && template.set;\n\n  \t\t\tif (!set) {\n  \t\t\t\t// most likely, this was an array member that was spliced out\n  \t\t\t\treturn;\n  \t\t\t}\n\n  \t\t\twrappers = set._ractiveWrappers;\n\n  \t\t\tindex = wrappers.indexOf(this);\n  \t\t\tif (index !== -1) {\n  \t\t\t\twrappers.splice(index, 1);\n  \t\t\t}\n\n  \t\t\t// Last one out, turn off the lights\n  \t\t\tif (!wrappers.length) {\n  \t\t\t\tvalue = this.obj[this.prop];\n\n  \t\t\t\tObject.defineProperty(this.obj, this.prop, this.originalDescriptor || {\n  \t\t\t\t\twritable: true,\n  \t\t\t\t\tenumerable: true,\n  \t\t\t\t\tconfigurable: true\n  \t\t\t\t});\n\n  \t\t\t\tthis.obj[this.prop] = value;\n  \t\t\t}\n  \t\t}\n  \t};\n  } catch (err) {\n  \tmagicAdaptor = false; // no magic in this browser\n  }\n\n  var adaptors_magic = magicAdaptor;\n\n  function createAccessors(originalWrapper, value, template) {\n\n  \tvar object, property, oldGet, oldSet, get, set;\n\n  \tobject = originalWrapper.obj;\n  \tproperty = originalWrapper.prop;\n\n  \t// Is this template configurable?\n  \tif (template && !template.configurable) {\n  \t\t// Special case - array length\n  \t\tif (property === \"length\") {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tthrow new Error(\"Cannot use magic mode with property \\\"\" + property + \"\\\" - object is not configurable\");\n  \t}\n\n  \t// Time to wrap this property\n  \tif (template) {\n  \t\toldGet = template.get;\n  \t\toldSet = template.set;\n  \t}\n\n  \tget = oldGet || function () {\n  \t\treturn value;\n  \t};\n\n  \tset = function (v) {\n  \t\tif (oldSet) {\n  \t\t\toldSet(v);\n  \t\t}\n\n  \t\tvalue = oldGet ? oldGet() : v;\n  \t\tset._ractiveWrappers.forEach(updateWrapper);\n  \t};\n\n  \tfunction updateWrapper(wrapper) {\n  \t\tvar keypath, ractive;\n\n  \t\twrapper.value = value;\n\n  \t\tif (wrapper.updating) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tractive = wrapper.ractive;\n  \t\tkeypath = wrapper.keypath;\n\n  \t\twrapper.updating = true;\n  \t\tglobal_runloop.start(ractive);\n\n  \t\tractive.viewmodel.mark(keypath);\n\n  \t\tglobal_runloop.end();\n  \t\twrapper.updating = false;\n  \t}\n\n  \t// Create an array of wrappers, in case other keypaths/ractives depend on this property.\n  \t// Handily, we can store them as a property of the set function. Yay JavaScript.\n  \tset._ractiveWrappers = [originalWrapper];\n  \tObject.defineProperty(object, property, { get: get, set: set, enumerable: true, configurable: true });\n  }\n\n  var magicArrayAdaptor, MagicArrayWrapper;\n\n  if (adaptors_magic) {\n  \tmagicArrayAdaptor = {\n  \t\tfilter: function (object, keypath, ractive) {\n  \t\t\treturn adaptors_magic.filter(object, keypath, ractive) && array_index.filter(object);\n  \t\t},\n\n  \t\twrap: function (ractive, array, keypath) {\n  \t\t\treturn new MagicArrayWrapper(ractive, array, keypath);\n  \t\t}\n  \t};\n\n  \tMagicArrayWrapper = function (ractive, array, keypath) {\n  \t\tthis.value = array;\n\n  \t\tthis.magic = true;\n\n  \t\tthis.magicWrapper = adaptors_magic.wrap(ractive, array, keypath);\n  \t\tthis.arrayWrapper = array_index.wrap(ractive, array, keypath);\n  \t};\n\n  \tMagicArrayWrapper.prototype = {\n  \t\tget: function () {\n  \t\t\treturn this.value;\n  \t\t},\n  \t\tteardown: function () {\n  \t\t\tthis.arrayWrapper.teardown();\n  \t\t\tthis.magicWrapper.teardown();\n  \t\t},\n  \t\treset: function (value) {\n  \t\t\treturn this.magicWrapper.reset(value);\n  \t\t}\n  \t};\n  }\n\n  var magicArray = magicArrayAdaptor;\n\n  var prototype_adapt = Viewmodel$adapt;\n\n  var prefixers = {};\n  function Viewmodel$adapt(keypath, value) {\n  \tvar len, i, adaptor, wrapped;\n\n  \tif (!this.adaptors) return;\n\n  \t// Do we have an adaptor for this value?\n  \tlen = this.adaptors.length;\n  \tfor (i = 0; i < len; i += 1) {\n  \t\tadaptor = this.adaptors[i];\n\n  \t\tif (adaptor.filter(value, keypath, this.ractive)) {\n  \t\t\twrapped = this.wrapped[keypath] = adaptor.wrap(this.ractive, value, keypath, getPrefixer(keypath));\n  \t\t\twrapped.value = value;\n  \t\t\treturn;\n  \t\t}\n  \t}\n  }\n\n  function prefixKeypath(obj, prefix) {\n  \tvar prefixed = {},\n  \t    key;\n\n  \tif (!prefix) {\n  \t\treturn obj;\n  \t}\n\n  \tprefix += \".\";\n\n  \tfor (key in obj) {\n  \t\tif (obj.hasOwnProperty(key)) {\n  \t\t\tprefixed[prefix + key] = obj[key];\n  \t\t}\n  \t}\n\n  \treturn prefixed;\n  }\n\n  function getPrefixer(rootKeypath) {\n  \tvar rootDot;\n\n  \tif (!prefixers[rootKeypath]) {\n  \t\trootDot = rootKeypath ? rootKeypath + \".\" : \"\";\n\n  \t\tprefixers[rootKeypath] = function (relativeKeypath, value) {\n  \t\t\tvar obj;\n\n  \t\t\tif (typeof relativeKeypath === \"string\") {\n  \t\t\t\tobj = {};\n  \t\t\t\tobj[rootDot + relativeKeypath] = value;\n  \t\t\t\treturn obj;\n  \t\t\t}\n\n  \t\t\tif (typeof relativeKeypath === \"object\") {\n  \t\t\t\t// 'relativeKeypath' is in fact a hash, not a keypath\n  \t\t\t\treturn rootDot ? prefixKeypath(relativeKeypath, rootKeypath) : relativeKeypath;\n  \t\t\t}\n  \t\t};\n  \t}\n\n  \treturn prefixers[rootKeypath];\n  }\n\n  // TEMP\n\n  var helpers_getUpstreamChanges = getUpstreamChanges;\n  function getUpstreamChanges(changes) {\n  \tvar upstreamChanges = [rootKeypath],\n  \t    i,\n  \t    keypath;\n\n  \ti = changes.length;\n  \twhile (i--) {\n  \t\tkeypath = changes[i].parent;\n\n  \t\twhile (keypath && !keypath.isRoot) {\n  \t\t\tif (changes.indexOf(keypath) === -1) {\n  \t\t\t\taddToArray(upstreamChanges, keypath);\n  \t\t\t}\n  \t\t\tkeypath = keypath.parent;\n  \t\t}\n  \t}\n\n  \treturn upstreamChanges;\n  }\n\n  var applyChanges_notifyPatternObservers = notifyPatternObservers;\n\n  function notifyPatternObservers(viewmodel, keypath, onlyDirect) {\n  \tvar potentialWildcardMatches;\n\n  \tupdateMatchingPatternObservers(viewmodel, keypath);\n\n  \tif (onlyDirect) {\n  \t\treturn;\n  \t}\n\n  \tpotentialWildcardMatches = keypath.wildcardMatches();\n  \tpotentialWildcardMatches.forEach(function (upstreamPattern) {\n  \t\tcascade(viewmodel, upstreamPattern, keypath);\n  \t});\n  }\n\n  function cascade(viewmodel, upstreamPattern, keypath) {\n  \tvar group, map, actualChildKeypath;\n\n  \t// TODO should be one or the other\n  \tupstreamPattern = upstreamPattern.str || upstreamPattern;\n\n  \tgroup = viewmodel.depsMap.patternObservers;\n  \tmap = group && group[upstreamPattern];\n\n  \tif (!map) {\n  \t\treturn;\n  \t}\n\n  \tmap.forEach(function (childKeypath) {\n  \t\tactualChildKeypath = keypath.join(childKeypath.lastKey); // 'foo.bar.baz'\n\n  \t\tupdateMatchingPatternObservers(viewmodel, actualChildKeypath);\n  \t\tcascade(viewmodel, childKeypath, actualChildKeypath);\n  \t});\n  }\n\n  function updateMatchingPatternObservers(viewmodel, keypath) {\n  \tviewmodel.patternObservers.forEach(function (observer) {\n  \t\tif (observer.regex.test(keypath.str)) {\n  \t\t\tobserver.update(keypath);\n  \t\t}\n  \t});\n  }\n\n  var applyChanges = Viewmodel$applyChanges;\n\n  function Viewmodel$applyChanges() {\n  \tvar _this = this;\n\n  \tvar self = this,\n  \t    changes,\n  \t    upstreamChanges,\n  \t    hash = {},\n  \t    bindings;\n\n  \tchanges = this.changes;\n\n  \tif (!changes.length) {\n  \t\t// TODO we end up here on initial render. Perhaps we shouldn't?\n  \t\treturn;\n  \t}\n\n  \tfunction invalidateComputation(computation) {\n  \t\tvar key = computation.key;\n\n  \t\tif (computation.viewmodel === self) {\n  \t\t\tself.clearCache(key.str);\n  \t\t\tcomputation.invalidate();\n\n  \t\t\tchanges.push(key);\n  \t\t\tcascade(key);\n  \t\t} else {\n  \t\t\tcomputation.viewmodel.mark(key);\n  \t\t}\n  \t}\n\n  \tfunction cascade(keypath) {\n  \t\tvar map, computations;\n\n  \t\tif (self.noCascade.hasOwnProperty(keypath.str)) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tif (computations = self.deps.computed[keypath.str]) {\n  \t\t\tcomputations.forEach(invalidateComputation);\n  \t\t}\n\n  \t\tif (map = self.depsMap.computed[keypath.str]) {\n  \t\t\tmap.forEach(cascade);\n  \t\t}\n  \t}\n\n  \tchanges.slice().forEach(cascade);\n\n  \tupstreamChanges = helpers_getUpstreamChanges(changes);\n  \tupstreamChanges.forEach(function (keypath) {\n  \t\tvar computations;\n\n  \t\t// make sure we haven't already been down this particular keypath in this turn\n  \t\tif (changes.indexOf(keypath) === -1 && (computations = self.deps.computed[keypath.str])) {\n  \t\t\tcomputations.forEach(invalidateComputation);\n  \t\t}\n  \t});\n\n  \tthis.changes = [];\n\n  \t// Pattern observers are a weird special case\n  \tif (this.patternObservers.length) {\n  \t\tupstreamChanges.forEach(function (keypath) {\n  \t\t\treturn applyChanges_notifyPatternObservers(_this, keypath, true);\n  \t\t});\n  \t\tchanges.forEach(function (keypath) {\n  \t\t\treturn applyChanges_notifyPatternObservers(_this, keypath);\n  \t\t});\n  \t}\n\n  \tif (this.deps.observers) {\n  \t\tupstreamChanges.forEach(function (keypath) {\n  \t\t\treturn notifyUpstreamDependants(_this, null, keypath, \"observers\");\n  \t\t});\n  \t\tnotifyAllDependants(this, changes, \"observers\");\n  \t}\n\n  \tif (this.deps[\"default\"]) {\n  \t\tbindings = [];\n  \t\tupstreamChanges.forEach(function (keypath) {\n  \t\t\treturn notifyUpstreamDependants(_this, bindings, keypath, \"default\");\n  \t\t});\n\n  \t\tif (bindings.length) {\n  \t\t\tnotifyBindings(this, bindings, changes);\n  \t\t}\n\n  \t\tnotifyAllDependants(this, changes, \"default\");\n  \t}\n\n  \t// Return a hash of keypaths to updated values\n  \tchanges.forEach(function (keypath) {\n  \t\thash[keypath.str] = _this.get(keypath);\n  \t});\n\n  \tthis.implicitChanges = {};\n  \tthis.noCascade = {};\n\n  \treturn hash;\n  }\n\n  function notifyUpstreamDependants(viewmodel, bindings, keypath, groupName) {\n  \tvar dependants, value;\n\n  \tif (dependants = findDependants(viewmodel, keypath, groupName)) {\n  \t\tvalue = viewmodel.get(keypath);\n\n  \t\tdependants.forEach(function (d) {\n  \t\t\t// don't \"set\" the parent value, refine it\n  \t\t\t// i.e. not data = value, but data[foo] = fooValue\n  \t\t\tif (bindings && d.refineValue) {\n  \t\t\t\tbindings.push(d);\n  \t\t\t} else {\n  \t\t\t\td.setValue(value);\n  \t\t\t}\n  \t\t});\n  \t}\n  }\n\n  function notifyBindings(viewmodel, bindings, changes) {\n\n  \tbindings.forEach(function (binding) {\n  \t\tvar useSet = false,\n  \t\t    i = 0,\n  \t\t    length = changes.length,\n  \t\t    refinements = [];\n\n  \t\twhile (i < length) {\n  \t\t\tvar keypath = changes[i];\n\n  \t\t\tif (keypath === binding.keypath) {\n  \t\t\t\tuseSet = true;\n  \t\t\t\tbreak;\n  \t\t\t}\n\n  \t\t\tif (keypath.slice(0, binding.keypath.length) === binding.keypath) {\n  \t\t\t\trefinements.push(keypath);\n  \t\t\t}\n\n  \t\t\ti++;\n  \t\t}\n\n  \t\tif (useSet) {\n  \t\t\tbinding.setValue(viewmodel.get(binding.keypath));\n  \t\t}\n\n  \t\tif (refinements.length) {\n  \t\t\tbinding.refineValue(refinements);\n  \t\t}\n  \t});\n  }\n\n  function notifyAllDependants(viewmodel, keypaths, groupName) {\n  \tvar queue = [];\n\n  \taddKeypaths(keypaths);\n  \tqueue.forEach(dispatch);\n\n  \tfunction addKeypaths(keypaths) {\n  \t\tkeypaths.forEach(addKeypath);\n  \t\tkeypaths.forEach(cascade);\n  \t}\n\n  \tfunction addKeypath(keypath) {\n  \t\tvar deps = findDependants(viewmodel, keypath, groupName);\n\n  \t\tif (deps) {\n  \t\t\tqueue.push({\n  \t\t\t\tkeypath: keypath,\n  \t\t\t\tdeps: deps\n  \t\t\t});\n  \t\t}\n  \t}\n\n  \tfunction cascade(keypath) {\n  \t\tvar childDeps;\n\n  \t\tif (childDeps = viewmodel.depsMap[groupName][keypath.str]) {\n  \t\t\taddKeypaths(childDeps);\n  \t\t}\n  \t}\n\n  \tfunction dispatch(set) {\n  \t\tvar value = viewmodel.get(set.keypath);\n  \t\tset.deps.forEach(function (d) {\n  \t\t\treturn d.setValue(value);\n  \t\t});\n  \t}\n  }\n\n  function findDependants(viewmodel, keypath, groupName) {\n  \tvar group = viewmodel.deps[groupName];\n  \treturn group ? group[keypath.str] : null;\n  }\n\n  var capture = Viewmodel$capture;\n\n  function Viewmodel$capture() {\n  \tthis.captureGroups.push([]);\n  }\n\n  var clearCache = Viewmodel$clearCache;\n\n  function Viewmodel$clearCache(keypath, keepExistingWrapper) {\n  \tvar cacheMap, wrapper;\n\n  \tif (!keepExistingWrapper) {\n  \t\t// Is there a wrapped property at this keypath?\n  \t\tif (wrapper = this.wrapped[keypath]) {\n  \t\t\t// Did we unwrap it?\n  \t\t\tif (wrapper.teardown() !== false) {\n  \t\t\t\t// Is this right?\n  \t\t\t\t// What's the meaning of returning false from teardown?\n  \t\t\t\t// Could there be a GC ramification if this is a \"real\" ractive.teardown()?\n  \t\t\t\tthis.wrapped[keypath] = null;\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \tthis.cache[keypath] = undefined;\n\n  \tif (cacheMap = this.cacheMap[keypath]) {\n  \t\twhile (cacheMap.length) {\n  \t\t\tthis.clearCache(cacheMap.pop());\n  \t\t}\n  \t}\n  }\n\n  var UnresolvedDependency = function (computation, ref) {\n  \tthis.computation = computation;\n  \tthis.viewmodel = computation.viewmodel;\n  \tthis.ref = ref;\n\n  \t// TODO this seems like a red flag!\n  \tthis.root = this.viewmodel.ractive;\n  \tthis.parentFragment = this.root.component && this.root.component.parentFragment;\n  };\n\n  UnresolvedDependency.prototype = {\n  \tresolve: function (keypath) {\n  \t\tthis.computation.softDeps.push(keypath);\n  \t\tthis.computation.unresolvedDeps[keypath.str] = null;\n  \t\tthis.viewmodel.register(keypath, this.computation, \"computed\");\n  \t}\n  };\n\n  var Computation_UnresolvedDependency = UnresolvedDependency;\n\n  var Computation = function (key, signature) {\n  \tthis.key = key;\n\n  \tthis.getter = signature.getter;\n  \tthis.setter = signature.setter;\n\n  \tthis.hardDeps = signature.deps || [];\n  \tthis.softDeps = [];\n  \tthis.unresolvedDeps = {};\n\n  \tthis.depValues = {};\n\n  \tthis._dirty = this._firstRun = true;\n  };\n\n  Computation.prototype = {\n  \tconstructor: Computation,\n\n  \tinit: function (viewmodel) {\n  \t\tvar _this = this;\n\n  \t\tvar initial;\n\n  \t\tthis.viewmodel = viewmodel;\n  \t\tthis.bypass = true;\n\n  \t\tinitial = viewmodel.get(this.key);\n  \t\tviewmodel.clearCache(this.key.str);\n\n  \t\tthis.bypass = false;\n\n  \t\tif (this.setter && initial !== undefined) {\n  \t\t\tthis.set(initial);\n  \t\t}\n\n  \t\tif (this.hardDeps) {\n  \t\t\tthis.hardDeps.forEach(function (d) {\n  \t\t\t\treturn viewmodel.register(d, _this, \"computed\");\n  \t\t\t});\n  \t\t}\n  \t},\n\n  \tinvalidate: function () {\n  \t\tthis._dirty = true;\n  \t},\n\n  \tget: function () {\n  \t\tvar _this = this;\n\n  \t\tvar newDeps,\n  \t\t    dependenciesChanged,\n  \t\t    dependencyValuesChanged = false;\n\n  \t\tif (this.getting) {\n  \t\t\t// prevent double-computation (e.g. caused by array mutation inside computation)\n  \t\t\tvar msg = \"The \" + this.key.str + \" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`\";\n  \t\t\twarnOnce(msg);\n  \t\t\treturn this.value;\n  \t\t}\n\n  \t\tthis.getting = true;\n\n  \t\tif (this._dirty) {\n  \t\t\t// determine whether the inputs have changed, in case this depends on\n  \t\t\t// other computed values\n  \t\t\tif (this._firstRun || !this.hardDeps.length && !this.softDeps.length) {\n  \t\t\t\tdependencyValuesChanged = true;\n  \t\t\t} else {\n  \t\t\t\t[this.hardDeps, this.softDeps].forEach(function (deps) {\n  \t\t\t\t\tvar keypath, value, i;\n\n  \t\t\t\t\tif (dependencyValuesChanged) {\n  \t\t\t\t\t\treturn;\n  \t\t\t\t\t}\n\n  \t\t\t\t\ti = deps.length;\n  \t\t\t\t\twhile (i--) {\n  \t\t\t\t\t\tkeypath = deps[i];\n  \t\t\t\t\t\tvalue = _this.viewmodel.get(keypath);\n\n  \t\t\t\t\t\tif (!isEqual(value, _this.depValues[keypath.str])) {\n  \t\t\t\t\t\t\t_this.depValues[keypath.str] = value;\n  \t\t\t\t\t\t\tdependencyValuesChanged = true;\n\n  \t\t\t\t\t\t\treturn;\n  \t\t\t\t\t\t}\n  \t\t\t\t\t}\n  \t\t\t\t});\n  \t\t\t}\n\n  \t\t\tif (dependencyValuesChanged) {\n  \t\t\t\tthis.viewmodel.capture();\n\n  \t\t\t\ttry {\n  \t\t\t\t\tthis.value = this.getter();\n  \t\t\t\t} catch (err) {\n  \t\t\t\t\twarnIfDebug(\"Failed to compute \\\"%s\\\"\", this.key.str);\n  \t\t\t\t\tlogIfDebug(err.stack || err);\n\n  \t\t\t\t\tthis.value = void 0;\n  \t\t\t\t}\n\n  \t\t\t\tnewDeps = this.viewmodel.release();\n  \t\t\t\tdependenciesChanged = this.updateDependencies(newDeps);\n\n  \t\t\t\tif (dependenciesChanged) {\n  \t\t\t\t\t[this.hardDeps, this.softDeps].forEach(function (deps) {\n  \t\t\t\t\t\tdeps.forEach(function (keypath) {\n  \t\t\t\t\t\t\t_this.depValues[keypath.str] = _this.viewmodel.get(keypath);\n  \t\t\t\t\t\t});\n  \t\t\t\t\t});\n  \t\t\t\t}\n  \t\t\t}\n\n  \t\t\tthis._dirty = false;\n  \t\t}\n\n  \t\tthis.getting = this._firstRun = false;\n  \t\treturn this.value;\n  \t},\n\n  \tset: function (value) {\n  \t\tif (this.setting) {\n  \t\t\tthis.value = value;\n  \t\t\treturn;\n  \t\t}\n\n  \t\tif (!this.setter) {\n  \t\t\tthrow new Error(\"Computed properties without setters are read-only. (This may change in a future version of Ractive!)\");\n  \t\t}\n\n  \t\tthis.setter(value);\n  \t},\n\n  \tupdateDependencies: function (newDeps) {\n  \t\tvar i, oldDeps, keypath, dependenciesChanged, unresolved;\n\n  \t\toldDeps = this.softDeps;\n\n  \t\t// remove dependencies that are no longer used\n  \t\ti = oldDeps.length;\n  \t\twhile (i--) {\n  \t\t\tkeypath = oldDeps[i];\n\n  \t\t\tif (newDeps.indexOf(keypath) === -1) {\n  \t\t\t\tdependenciesChanged = true;\n  \t\t\t\tthis.viewmodel.unregister(keypath, this, \"computed\");\n  \t\t\t}\n  \t\t}\n\n  \t\t// create references for any new dependencies\n  \t\ti = newDeps.length;\n  \t\twhile (i--) {\n  \t\t\tkeypath = newDeps[i];\n\n  \t\t\tif (oldDeps.indexOf(keypath) === -1 && (!this.hardDeps || this.hardDeps.indexOf(keypath) === -1)) {\n  \t\t\t\tdependenciesChanged = true;\n\n  \t\t\t\t// if this keypath is currently unresolved, we need to mark\n  \t\t\t\t// it as such. TODO this is a bit muddy...\n  \t\t\t\tif (isUnresolved(this.viewmodel, keypath) && !this.unresolvedDeps[keypath.str]) {\n  \t\t\t\t\tunresolved = new Computation_UnresolvedDependency(this, keypath.str);\n  \t\t\t\t\tnewDeps.splice(i, 1);\n\n  \t\t\t\t\tthis.unresolvedDeps[keypath.str] = unresolved;\n  \t\t\t\t\tglobal_runloop.addUnresolved(unresolved);\n  \t\t\t\t} else {\n  \t\t\t\t\tthis.viewmodel.register(keypath, this, \"computed\");\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n\n  \t\tif (dependenciesChanged) {\n  \t\t\tthis.softDeps = newDeps.slice();\n  \t\t}\n\n  \t\treturn dependenciesChanged;\n  \t}\n  };\n\n  function isUnresolved(viewmodel, keypath) {\n  \tvar key = keypath.firstKey;\n\n  \treturn !(key in viewmodel.data) && !(key in viewmodel.computations) && !(key in viewmodel.mappings);\n  }\n\n  var Computation_Computation = Computation;\n\n  var compute = Viewmodel$compute;\n  function Viewmodel$compute(key, signature) {\n  \tvar computation = new Computation_Computation(key, signature);\n\n  \tif (this.ready) {\n  \t\tcomputation.init(this);\n  \t}\n\n  \treturn this.computations[key.str] = computation;\n  }\n\n  var FAILED_LOOKUP = { FAILED_LOOKUP: true };\n\n  var viewmodel_prototype_get = Viewmodel$get;\n\n  var viewmodel_prototype_get__empty = {};\n  function Viewmodel$get(keypath, options) {\n  \tvar cache = this.cache,\n  \t    value,\n  \t    computation,\n  \t    wrapped,\n  \t    captureGroup,\n  \t    keypathStr = keypath.str,\n  \t    key;\n\n  \toptions = options || viewmodel_prototype_get__empty;\n\n  \t// capture the keypath, if we're inside a computation\n  \tif (options.capture && (captureGroup = lastItem(this.captureGroups))) {\n  \t\tif (! ~captureGroup.indexOf(keypath)) {\n  \t\t\tcaptureGroup.push(keypath);\n  \t\t}\n  \t}\n\n  \tif (hasOwn.call(this.mappings, keypath.firstKey)) {\n  \t\treturn this.mappings[keypath.firstKey].get(keypath, options);\n  \t}\n\n  \tif (keypath.isSpecial) {\n  \t\treturn keypath.value;\n  \t}\n\n  \tif (cache[keypathStr] === undefined) {\n\n  \t\t// Is this a computed property?\n  \t\tif ((computation = this.computations[keypathStr]) && !computation.bypass) {\n  \t\t\tvalue = computation.get();\n  \t\t\tthis.adapt(keypathStr, value);\n  \t\t}\n\n  \t\t// Is this a wrapped property?\n  \t\telse if (wrapped = this.wrapped[keypathStr]) {\n  \t\t\tvalue = wrapped.value;\n  \t\t}\n\n  \t\t// Is it the root?\n  \t\telse if (keypath.isRoot) {\n  \t\t\tthis.adapt(\"\", this.data);\n  \t\t\tvalue = this.data;\n  \t\t}\n\n  \t\t// No? Then we need to retrieve the value one key at a time\n  \t\telse {\n  \t\t\tvalue = retrieve(this, keypath);\n  \t\t}\n\n  \t\tcache[keypathStr] = value;\n  \t} else {\n  \t\tvalue = cache[keypathStr];\n  \t}\n\n  \tif (!options.noUnwrap && (wrapped = this.wrapped[keypathStr])) {\n  \t\tvalue = wrapped.get();\n  \t}\n\n  \tif (keypath.isRoot && options.fullRootGet) {\n  \t\tfor (key in this.mappings) {\n  \t\t\tvalue[key] = this.mappings[key].getValue();\n  \t\t}\n  \t}\n\n  \treturn value === FAILED_LOOKUP ? void 0 : value;\n  }\n\n  function retrieve(viewmodel, keypath) {\n\n  \tvar parentValue, cacheMap, value, wrapped;\n\n  \tparentValue = viewmodel.get(keypath.parent);\n\n  \tif (wrapped = viewmodel.wrapped[keypath.parent.str]) {\n  \t\tparentValue = wrapped.get();\n  \t}\n\n  \tif (parentValue === null || parentValue === undefined) {\n  \t\treturn;\n  \t}\n\n  \t// update cache map\n  \tif (!(cacheMap = viewmodel.cacheMap[keypath.parent.str])) {\n  \t\tviewmodel.cacheMap[keypath.parent.str] = [keypath.str];\n  \t} else {\n  \t\tif (cacheMap.indexOf(keypath.str) === -1) {\n  \t\t\tcacheMap.push(keypath.str);\n  \t\t}\n  \t}\n\n  \t// If this property doesn't exist, we return a sentinel value\n  \t// so that we know to query parent scope (if such there be)\n  \tif (typeof parentValue === \"object\" && !(keypath.lastKey in parentValue)) {\n  \t\treturn viewmodel.cache[keypath.str] = FAILED_LOOKUP;\n  \t}\n\n  \tvalue = parentValue[keypath.lastKey];\n\n  \t// Do we have an adaptor for this value?\n  \tviewmodel.adapt(keypath.str, value, false);\n\n  \t// Update cache\n  \tviewmodel.cache[keypath.str] = value;\n  \treturn value;\n  }\n\n  var viewmodel_prototype_init = Viewmodel$init;\n\n  function Viewmodel$init() {\n  \tvar key;\n\n  \tfor (key in this.computations) {\n  \t\tthis.computations[key].init(this);\n  \t}\n  }\n\n  var prototype_map = Viewmodel$map;\n\n  function Viewmodel$map(key, options) {\n  \tvar mapping = this.mappings[key.str] = new Mapping(key, options);\n  \tmapping.initViewmodel(this);\n  \treturn mapping;\n  }\n\n  var Mapping = function (localKey, options) {\n  \tthis.localKey = localKey;\n  \tthis.keypath = options.keypath;\n  \tthis.origin = options.origin;\n\n  \tthis.deps = [];\n  \tthis.unresolved = [];\n\n  \tthis.resolved = false;\n  };\n\n  Mapping.prototype = {\n  \tforceResolution: function () {\n  \t\t// TODO warn, as per #1692?\n  \t\tthis.keypath = this.localKey;\n  \t\tthis.setup();\n  \t},\n\n  \tget: function (keypath, options) {\n  \t\tif (!this.resolved) {\n  \t\t\treturn undefined;\n  \t\t}\n  \t\treturn this.origin.get(this.map(keypath), options);\n  \t},\n\n  \tgetValue: function () {\n  \t\tif (!this.keypath) {\n  \t\t\treturn undefined;\n  \t\t}\n  \t\treturn this.origin.get(this.keypath);\n  \t},\n\n  \tinitViewmodel: function (viewmodel) {\n  \t\tthis.local = viewmodel;\n  \t\tthis.setup();\n  \t},\n\n  \tmap: function (keypath) {\n  \t\tif (typeof this.keypath === undefined) {\n  \t\t\treturn this.localKey;\n  \t\t}\n  \t\treturn keypath.replace(this.localKey, this.keypath);\n  \t},\n\n  \tregister: function (keypath, dependant, group) {\n  \t\tthis.deps.push({ keypath: keypath, dep: dependant, group: group });\n\n  \t\tif (this.resolved) {\n  \t\t\tthis.origin.register(this.map(keypath), dependant, group);\n  \t\t}\n  \t},\n\n  \tresolve: function (keypath) {\n  \t\tif (this.keypath !== undefined) {\n  \t\t\tthis.unbind(true);\n  \t\t}\n\n  \t\tthis.keypath = keypath;\n  \t\tthis.setup();\n  \t},\n\n  \tset: function (keypath, value) {\n  \t\tif (!this.resolved) {\n  \t\t\tthis.forceResolution();\n  \t\t}\n\n  \t\tthis.origin.set(this.map(keypath), value);\n  \t},\n\n  \tsetup: function () {\n  \t\tvar _this = this;\n\n  \t\tif (this.keypath === undefined) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tthis.resolved = true;\n\n  \t\t// accumulated dependants can now be registered\n  \t\tif (this.deps.length) {\n  \t\t\tthis.deps.forEach(function (d) {\n  \t\t\t\tvar keypath = _this.map(d.keypath);\n  \t\t\t\t_this.origin.register(keypath, d.dep, d.group);\n\n  \t\t\t\t// TODO this is a bit of a red flag... all deps should be the same?\n  \t\t\t\tif (d.dep.setValue) {\n  \t\t\t\t\td.dep.setValue(_this.origin.get(keypath));\n  \t\t\t\t} else if (d.dep.invalidate) {\n  \t\t\t\t\td.dep.invalidate();\n  \t\t\t\t} else {\n  \t\t\t\t\tthrow new Error(\"An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!\");\n  \t\t\t\t}\n  \t\t\t});\n\n  \t\t\tthis.origin.mark(this.keypath);\n  \t\t}\n  \t},\n\n  \tsetValue: function (value) {\n  \t\tif (!this.keypath) {\n  \t\t\tthrow new Error(\"Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!\");\n  \t\t}\n\n  \t\tthis.origin.set(this.keypath, value);\n  \t},\n\n  \tunbind: function (keepLocal) {\n  \t\tvar _this = this;\n\n  \t\tif (!keepLocal) {\n  \t\t\tdelete this.local.mappings[this.localKey];\n  \t\t}\n\n  \t\tif (!this.resolved) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tthis.deps.forEach(function (d) {\n  \t\t\t_this.origin.unregister(_this.map(d.keypath), d.dep, d.group);\n  \t\t});\n\n  \t\tif (this.tracker) {\n  \t\t\tthis.origin.unregister(this.keypath, this.tracker);\n  \t\t}\n  \t},\n\n  \tunregister: function (keypath, dependant, group) {\n  \t\tvar deps, i;\n\n  \t\tif (!this.resolved) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tdeps = this.deps;\n  \t\ti = deps.length;\n\n  \t\twhile (i--) {\n  \t\t\tif (deps[i].dep === dependant) {\n  \t\t\t\tdeps.splice(i, 1);\n  \t\t\t\tbreak;\n  \t\t\t}\n  \t\t}\n  \t\tthis.origin.unregister(this.map(keypath), dependant, group);\n  \t}\n  };\n\n  var mark = Viewmodel$mark;\n\n  function Viewmodel$mark(keypath, options) {\n  \tvar computation,\n  \t    keypathStr = keypath.str;\n\n  \t// implicit changes (i.e. `foo.length` on `ractive.push('foo',42)`)\n  \t// should not be picked up by pattern observers\n  \tif (options) {\n  \t\tif (options.implicit) {\n  \t\t\tthis.implicitChanges[keypathStr] = true;\n  \t\t}\n  \t\tif (options.noCascade) {\n  \t\t\tthis.noCascade[keypathStr] = true;\n  \t\t}\n  \t}\n\n  \tif (computation = this.computations[keypathStr]) {\n  \t\tcomputation.invalidate();\n  \t}\n\n  \tif (this.changes.indexOf(keypath) === -1) {\n  \t\tthis.changes.push(keypath);\n  \t}\n\n  \t// pass on keepExistingWrapper, if we can\n  \tvar keepExistingWrapper = options ? options.keepExistingWrapper : false;\n\n  \tthis.clearCache(keypathStr, keepExistingWrapper);\n\n  \tif (this.ready) {\n  \t\tthis.onchange();\n  \t}\n  }\n\n  var mapOldToNewIndex = function (oldArray, newArray) {\n  \tvar usedIndices, firstUnusedIndex, newIndices, changed;\n\n  \tusedIndices = {};\n  \tfirstUnusedIndex = 0;\n\n  \tnewIndices = oldArray.map(function (item, i) {\n  \t\tvar index, start, len;\n\n  \t\tstart = firstUnusedIndex;\n  \t\tlen = newArray.length;\n\n  \t\tdo {\n  \t\t\tindex = newArray.indexOf(item, start);\n\n  \t\t\tif (index === -1) {\n  \t\t\t\tchanged = true;\n  \t\t\t\treturn -1;\n  \t\t\t}\n\n  \t\t\tstart = index + 1;\n  \t\t} while (usedIndices[index] && start < len);\n\n  \t\t// keep track of the first unused index, so we don't search\n  \t\t// the whole of newArray for each item in oldArray unnecessarily\n  \t\tif (index === firstUnusedIndex) {\n  \t\t\tfirstUnusedIndex += 1;\n  \t\t}\n\n  \t\tif (index !== i) {\n  \t\t\tchanged = true;\n  \t\t}\n\n  \t\tusedIndices[index] = true;\n  \t\treturn index;\n  \t});\n\n  \treturn newIndices;\n  };\n\n  var merge = Viewmodel$merge;\n\n  var comparators = {};\n  function Viewmodel$merge(keypath, currentArray, array, options) {\n  \tvar oldArray, newArray, comparator, newIndices;\n\n  \tthis.mark(keypath);\n\n  \tif (options && options.compare) {\n\n  \t\tcomparator = getComparatorFunction(options.compare);\n\n  \t\ttry {\n  \t\t\toldArray = currentArray.map(comparator);\n  \t\t\tnewArray = array.map(comparator);\n  \t\t} catch (err) {\n  \t\t\t// fallback to an identity check - worst case scenario we have\n  \t\t\t// to do more DOM manipulation than we thought...\n  \t\t\twarnIfDebug(\"merge(): \\\"%s\\\" comparison failed. Falling back to identity checking\", keypath);\n\n  \t\t\toldArray = currentArray;\n  \t\t\tnewArray = array;\n  \t\t}\n  \t} else {\n  \t\toldArray = currentArray;\n  \t\tnewArray = array;\n  \t}\n\n  \t// find new indices for members of oldArray\n  \tnewIndices = mapOldToNewIndex(oldArray, newArray);\n\n  \tthis.smartUpdate(keypath, array, newIndices, currentArray.length !== array.length);\n  }\n\n  function stringify(item) {\n  \treturn JSON.stringify(item);\n  }\n\n  function getComparatorFunction(comparator) {\n  \t// If `compare` is `true`, we use JSON.stringify to compare\n  \t// objects that are the same shape, but non-identical - i.e.\n  \t// { foo: 'bar' } !== { foo: 'bar' }\n  \tif (comparator === true) {\n  \t\treturn stringify;\n  \t}\n\n  \tif (typeof comparator === \"string\") {\n  \t\tif (!comparators[comparator]) {\n  \t\t\tcomparators[comparator] = function (item) {\n  \t\t\t\treturn item[comparator];\n  \t\t\t};\n  \t\t}\n\n  \t\treturn comparators[comparator];\n  \t}\n\n  \tif (typeof comparator === \"function\") {\n  \t\treturn comparator;\n  \t}\n\n  \tthrow new Error(\"The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)\");\n  }\n\n  var register = Viewmodel$register;\n\n  function Viewmodel$register(keypath, dependant) {\n  \tvar group = arguments[2] === undefined ? \"default\" : arguments[2];\n\n  \tvar mapping, depsByKeypath, deps;\n\n  \tif (dependant.isStatic) {\n  \t\treturn; // TODO we should never get here if a dependant is static...\n  \t}\n\n  \tif (mapping = this.mappings[keypath.firstKey]) {\n  \t\tmapping.register(keypath, dependant, group);\n  \t} else {\n  \t\tdepsByKeypath = this.deps[group] || (this.deps[group] = {});\n  \t\tdeps = depsByKeypath[keypath.str] || (depsByKeypath[keypath.str] = []);\n\n  \t\tdeps.push(dependant);\n\n  \t\tif (!this.depsMap[group]) {\n  \t\t\tthis.depsMap[group] = {};\n  \t\t}\n\n  \t\tif (!keypath.isRoot) {\n  \t\t\tregister__updateDependantsMap(this, keypath, group);\n  \t\t}\n  \t}\n  }\n\n  function register__updateDependantsMap(viewmodel, keypath, group) {\n  \tvar map, parent, keypathStr;\n\n  \t// update dependants map\n  \twhile (!keypath.isRoot) {\n  \t\tmap = viewmodel.depsMap[group];\n  \t\tparent = map[keypath.parent.str] || (map[keypath.parent.str] = []);\n\n  \t\tkeypathStr = keypath.str;\n\n  \t\t// TODO find an alternative to this nasty approach\n  \t\tif (parent[\"_\" + keypathStr] === undefined) {\n  \t\t\tparent[\"_\" + keypathStr] = 0;\n  \t\t\tparent.push(keypath);\n  \t\t}\n\n  \t\tparent[\"_\" + keypathStr] += 1;\n  \t\tkeypath = keypath.parent;\n  \t}\n  }\n\n  var release = Viewmodel$release;\n\n  function Viewmodel$release() {\n  \treturn this.captureGroups.pop();\n  }\n\n  var reset = Viewmodel$reset;\n\n  function Viewmodel$reset(data) {\n  \tthis.data = data;\n  \tthis.clearCache(\"\");\n  }\n\n  var prototype_set = Viewmodel$set;\n\n  function Viewmodel$set(keypath, value) {\n  \tvar options = arguments[2] === undefined ? {} : arguments[2];\n\n  \tvar mapping, computation, wrapper, keepExistingWrapper;\n\n  \t// unless data is being set for data tracking purposes\n  \tif (!options.noMapping) {\n  \t\t// If this data belongs to a different viewmodel,\n  \t\t// pass the change along\n  \t\tif (mapping = this.mappings[keypath.firstKey]) {\n  \t\t\treturn mapping.set(keypath, value);\n  \t\t}\n  \t}\n\n  \tcomputation = this.computations[keypath.str];\n  \tif (computation) {\n  \t\tif (computation.setting) {\n  \t\t\t// let the other computation set() handle things...\n  \t\t\treturn;\n  \t\t}\n  \t\tcomputation.set(value);\n  \t\tvalue = computation.get();\n  \t}\n\n  \tif (isEqual(this.cache[keypath.str], value)) {\n  \t\treturn;\n  \t}\n\n  \twrapper = this.wrapped[keypath.str];\n\n  \t// If we have a wrapper with a `reset()` method, we try and use it. If the\n  \t// `reset()` method returns false, the wrapper should be torn down, and\n  \t// (most likely) a new one should be created later\n  \tif (wrapper && wrapper.reset) {\n  \t\tkeepExistingWrapper = wrapper.reset(value) !== false;\n\n  \t\tif (keepExistingWrapper) {\n  \t\t\tvalue = wrapper.get();\n  \t\t}\n  \t}\n\n  \tif (!computation && !keepExistingWrapper) {\n  \t\tresolveSet(this, keypath, value);\n  \t}\n\n  \tif (!options.silent) {\n  \t\tthis.mark(keypath);\n  \t} else {\n  \t\t// We're setting a parent of the original target keypath (i.e.\n  \t\t// creating a fresh branch) - we need to clear the cache, but\n  \t\t// not mark it as a change\n  \t\tthis.clearCache(keypath.str);\n  \t}\n  }\n\n  function resolveSet(viewmodel, keypath, value) {\n  \tvar wrapper, parentValue, wrapperSet, valueSet;\n\n  \twrapperSet = function () {\n  \t\tif (wrapper.set) {\n  \t\t\twrapper.set(keypath.lastKey, value);\n  \t\t} else {\n  \t\t\tparentValue = wrapper.get();\n  \t\t\tvalueSet();\n  \t\t}\n  \t};\n\n  \tvalueSet = function () {\n  \t\tif (!parentValue) {\n  \t\t\tparentValue = createBranch(keypath.lastKey);\n  \t\t\tviewmodel.set(keypath.parent, parentValue, { silent: true });\n  \t\t}\n  \t\tparentValue[keypath.lastKey] = value;\n  \t};\n\n  \twrapper = viewmodel.wrapped[keypath.parent.str];\n\n  \tif (wrapper) {\n  \t\twrapperSet();\n  \t} else {\n  \t\tparentValue = viewmodel.get(keypath.parent);\n\n  \t\t// may have been wrapped via the above .get()\n  \t\t// call on viewmodel if this is first access via .set()!\n  \t\tif (wrapper = viewmodel.wrapped[keypath.parent.str]) {\n  \t\t\twrapperSet();\n  \t\t} else {\n  \t\t\tvalueSet();\n  \t\t}\n  \t}\n  }\n\n  var smartUpdate = Viewmodel$smartUpdate;\n\n  var implicitOption = { implicit: true },\n      noCascadeOption = { noCascade: true };\n  function Viewmodel$smartUpdate(keypath, array, newIndices) {\n  \tvar _this = this;\n\n  \tvar dependants, oldLength, i;\n\n  \toldLength = newIndices.length;\n\n  \t// Indices that are being removed should be marked as dirty\n  \tnewIndices.forEach(function (newIndex, oldIndex) {\n  \t\tif (newIndex === -1) {\n  \t\t\t_this.mark(keypath.join(oldIndex), noCascadeOption);\n  \t\t}\n  \t});\n\n  \t// Update the model\n  \t// TODO allow existing array to be updated in place, rather than replaced?\n  \tthis.set(keypath, array, { silent: true });\n\n  \tif (dependants = this.deps[\"default\"][keypath.str]) {\n  \t\tdependants.filter(canShuffle).forEach(function (d) {\n  \t\t\treturn d.shuffle(newIndices, array);\n  \t\t});\n  \t}\n\n  \tif (oldLength !== array.length) {\n  \t\tthis.mark(keypath.join(\"length\"), implicitOption);\n\n  \t\tfor (i = newIndices.touchedFrom; i < array.length; i += 1) {\n  \t\t\tthis.mark(keypath.join(i));\n  \t\t}\n\n  \t\t// don't allow removed indexes beyond end of new array to trigger recomputations\n  \t\t// TODO is this still necessary, now that computations are lazy?\n  \t\tfor (i = array.length; i < oldLength; i += 1) {\n  \t\t\tthis.mark(keypath.join(i), noCascadeOption);\n  \t\t}\n  \t}\n  }\n\n  function canShuffle(dependant) {\n  \treturn typeof dependant.shuffle === \"function\";\n  }\n\n  var prototype_teardown = Viewmodel$teardown;\n\n  function Viewmodel$teardown() {\n  \tvar _this = this;\n\n  \tvar unresolvedImplicitDependency;\n\n  \t// Clear entire cache - this has the desired side-effect\n  \t// of unwrapping adapted values (e.g. arrays)\n  \tObject.keys(this.cache).forEach(function (keypath) {\n  \t\treturn _this.clearCache(keypath);\n  \t});\n\n  \t// Teardown any failed lookups - we don't need them to resolve any more\n  \twhile (unresolvedImplicitDependency = this.unresolvedImplicitDependencies.pop()) {\n  \t\tunresolvedImplicitDependency.teardown();\n  \t}\n  }\n\n  var unregister = Viewmodel$unregister;\n\n  function Viewmodel$unregister(keypath, dependant) {\n  \tvar group = arguments[2] === undefined ? \"default\" : arguments[2];\n\n  \tvar mapping, deps, index;\n\n  \tif (dependant.isStatic) {\n  \t\treturn;\n  \t}\n\n  \tif (mapping = this.mappings[keypath.firstKey]) {\n  \t\treturn mapping.unregister(keypath, dependant, group);\n  \t}\n\n  \tdeps = this.deps[group][keypath.str];\n  \tindex = deps.indexOf(dependant);\n\n  \tif (index === -1) {\n  \t\tthrow new Error(\"Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks\");\n  \t}\n\n  \tdeps.splice(index, 1);\n\n  \tif (keypath.isRoot) {\n  \t\treturn;\n  \t}\n\n  \tunregister__updateDependantsMap(this, keypath, group);\n  }\n\n  function unregister__updateDependantsMap(viewmodel, keypath, group) {\n  \tvar map, parent;\n\n  \t// update dependants map\n  \twhile (!keypath.isRoot) {\n  \t\tmap = viewmodel.depsMap[group];\n  \t\tparent = map[keypath.parent.str];\n\n  \t\tparent[\"_\" + keypath.str] -= 1;\n\n  \t\tif (!parent[\"_\" + keypath.str]) {\n  \t\t\t// remove from parent deps map\n  \t\t\tremoveFromArray(parent, keypath);\n  \t\t\tparent[\"_\" + keypath.str] = undefined;\n  \t\t}\n\n  \t\tkeypath = keypath.parent;\n  \t}\n  }\n\n  var Viewmodel = function (options) {\n  \tvar adapt = options.adapt;\n  \tvar data = options.data;\n  \tvar ractive = options.ractive;\n  \tvar computed = options.computed;\n  \tvar mappings = options.mappings;\n  \tvar key;\n  \tvar mapping;\n\n  \t// TODO is it possible to remove this reference?\n  \tthis.ractive = ractive;\n\n  \tthis.adaptors = adapt;\n  \tthis.onchange = options.onchange;\n\n  \tthis.cache = {}; // we need to be able to use hasOwnProperty, so can't inherit from null\n  \tthis.cacheMap = create(null);\n\n  \tthis.deps = {\n  \t\tcomputed: create(null),\n  \t\t\"default\": create(null)\n  \t};\n  \tthis.depsMap = {\n  \t\tcomputed: create(null),\n  \t\t\"default\": create(null)\n  \t};\n\n  \tthis.patternObservers = [];\n\n  \tthis.specials = create(null);\n\n  \tthis.wrapped = create(null);\n  \tthis.computations = create(null);\n\n  \tthis.captureGroups = [];\n  \tthis.unresolvedImplicitDependencies = [];\n\n  \tthis.changes = [];\n  \tthis.implicitChanges = {};\n  \tthis.noCascade = {};\n\n  \tthis.data = data;\n\n  \t// set up explicit mappings\n  \tthis.mappings = create(null);\n  \tfor (key in mappings) {\n  \t\tthis.map(getKeypath(key), mappings[key]);\n  \t}\n\n  \tif (data) {\n  \t\t// if data exists locally, but is missing on the parent,\n  \t\t// we transfer ownership to the parent\n  \t\tfor (key in data) {\n  \t\t\tif ((mapping = this.mappings[key]) && mapping.getValue() === undefined) {\n  \t\t\t\tmapping.setValue(data[key]);\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \tfor (key in computed) {\n  \t\tif (mappings && key in mappings) {\n  \t\t\tfatal(\"Cannot map to a computed property ('%s')\", key);\n  \t\t}\n\n  \t\tthis.compute(getKeypath(key), computed[key]);\n  \t}\n\n  \tthis.ready = true;\n  };\n\n  Viewmodel.prototype = {\n  \tadapt: prototype_adapt,\n  \tapplyChanges: applyChanges,\n  \tcapture: capture,\n  \tclearCache: clearCache,\n  \tcompute: compute,\n  \tget: viewmodel_prototype_get,\n  \tinit: viewmodel_prototype_init,\n  \tmap: prototype_map,\n  \tmark: mark,\n  \tmerge: merge,\n  \tregister: register,\n  \trelease: release,\n  \treset: reset,\n  \tset: prototype_set,\n  \tsmartUpdate: smartUpdate,\n  \tteardown: prototype_teardown,\n  \tunregister: unregister\n  };\n\n  var viewmodel_Viewmodel = Viewmodel;\n\n  function HookQueue(event) {\n  \tthis.hook = new hooks_Hook(event);\n  \tthis.inProcess = {};\n  \tthis.queue = {};\n  }\n\n  HookQueue.prototype = {\n\n  \tconstructor: HookQueue,\n\n  \tbegin: function (ractive) {\n  \t\tthis.inProcess[ractive._guid] = true;\n  \t},\n\n  \tend: function (ractive) {\n\n  \t\tvar parent = ractive.parent;\n\n  \t\t// If this is *isn't* a child of a component that's in process,\n  \t\t// it should call methods or fire at this point\n  \t\tif (!parent || !this.inProcess[parent._guid]) {\n  \t\t\tfire(this, ractive);\n  \t\t}\n  \t\t// elsewise, handoff to parent to fire when ready\n  \t\telse {\n  \t\t\tgetChildQueue(this.queue, parent).push(ractive);\n  \t\t}\n\n  \t\tdelete this.inProcess[ractive._guid];\n  \t}\n  };\n\n  function getChildQueue(queue, ractive) {\n  \treturn queue[ractive._guid] || (queue[ractive._guid] = []);\n  }\n\n  function fire(hookQueue, ractive) {\n\n  \tvar childQueue = getChildQueue(hookQueue.queue, ractive);\n\n  \thookQueue.hook.fire(ractive);\n\n  \t// queue is \"live\" because components can end up being\n  \t// added while hooks fire on parents that modify data values.\n  \twhile (childQueue.length) {\n  \t\tfire(hookQueue, childQueue.shift());\n  \t}\n\n  \tdelete hookQueue.queue[ractive._guid];\n  }\n\n  var hooks_HookQueue = HookQueue;\n\n  var helpers_getComputationSignatures = getComputationSignatures;\n\n  var helpers_getComputationSignatures__pattern = /\\$\\{([^\\}]+)\\}/g;\n  function getComputationSignatures(ractive, computed) {\n  \tvar signatures = {},\n  \t    key;\n\n  \tfor (key in computed) {\n  \t\tsignatures[key] = getComputationSignature(ractive, key, computed[key]);\n  \t}\n\n  \treturn signatures;\n  }\n\n  function getComputationSignature(ractive, key, signature) {\n  \tvar getter, setter;\n\n  \tif (typeof signature === \"function\") {\n  \t\tgetter = helpers_getComputationSignatures__bind(signature, ractive);\n  \t}\n\n  \tif (typeof signature === \"string\") {\n  \t\tgetter = createFunctionFromString(ractive, signature);\n  \t}\n\n  \tif (typeof signature === \"object\") {\n  \t\tif (typeof signature.get === \"string\") {\n  \t\t\tgetter = createFunctionFromString(ractive, signature.get);\n  \t\t} else if (typeof signature.get === \"function\") {\n  \t\t\tgetter = helpers_getComputationSignatures__bind(signature.get, ractive);\n  \t\t} else {\n  \t\t\tfatal(\"`%s` computation must have a `get()` method\", key);\n  \t\t}\n\n  \t\tif (typeof signature.set === \"function\") {\n  \t\t\tsetter = helpers_getComputationSignatures__bind(signature.set, ractive);\n  \t\t}\n  \t}\n\n  \treturn { getter: getter, setter: setter };\n  }\n\n  function createFunctionFromString(ractive, str) {\n  \tvar functionBody, hasThis, fn;\n\n  \tfunctionBody = \"return (\" + str.replace(helpers_getComputationSignatures__pattern, function (match, keypath) {\n  \t\thasThis = true;\n  \t\treturn \"__ractive.get(\\\"\" + keypath + \"\\\")\";\n  \t}) + \");\";\n\n  \tif (hasThis) {\n  \t\tfunctionBody = \"var __ractive = this; \" + functionBody;\n  \t}\n\n  \tfn = new Function(functionBody);\n  \treturn hasThis ? fn.bind(ractive) : fn;\n  }\n\n  function helpers_getComputationSignatures__bind(fn, context) {\n  \treturn /this/.test(fn.toString()) ? fn.bind(context) : fn;\n  }\n\n  var constructHook = new hooks_Hook(\"construct\");\n  var configHook = new hooks_Hook(\"config\");\n  var initHook = new hooks_HookQueue(\"init\");\n  var initialise__uid = 0;\n\n  var initialise__registryNames = [\"adaptors\", \"components\", \"decorators\", \"easing\", \"events\", \"interpolators\", \"partials\", \"transitions\"];\n\n  var initialise = initialiseRactiveInstance;\n\n  function initialiseRactiveInstance(ractive) {\n  \tvar userOptions = arguments[1] === undefined ? {} : arguments[1];\n  \tvar options = arguments[2] === undefined ? {} : arguments[2];\n\n  \tvar el, viewmodel;\n\n  \tif (_Ractive.DEBUG) {\n  \t\twelcome();\n  \t}\n\n  \tinitialiseProperties(ractive, options);\n\n  \t// TODO remove this, eventually\n  \tdefineProperty(ractive, \"data\", { get: deprecateRactiveData });\n\n  \t// TODO don't allow `onconstruct` with `new Ractive()`, there's no need for it\n  \tconstructHook.fire(ractive, userOptions);\n\n  \t// Add registries\n  \tinitialise__registryNames.forEach(function (name) {\n  \t\tractive[name] = utils_object__extend(create(ractive.constructor[name] || null), userOptions[name]);\n  \t});\n\n  \t// Create a viewmodel\n  \tviewmodel = new viewmodel_Viewmodel({\n  \t\tadapt: getAdaptors(ractive, ractive.adapt, userOptions),\n  \t\tdata: custom_data.init(ractive.constructor, ractive, userOptions),\n  \t\tcomputed: helpers_getComputationSignatures(ractive, utils_object__extend(create(ractive.constructor.prototype.computed), userOptions.computed)),\n  \t\tmappings: options.mappings,\n  \t\tractive: ractive,\n  \t\tonchange: function () {\n  \t\t\treturn global_runloop.addRactive(ractive);\n  \t\t}\n  \t});\n\n  \tractive.viewmodel = viewmodel;\n\n  \t// This can't happen earlier, because computed properties may call `ractive.get()`, etc\n  \tviewmodel.init();\n\n  \t// init config from Parent and options\n  \tconfig_config.init(ractive.constructor, ractive, userOptions);\n\n  \tconfigHook.fire(ractive);\n  \tinitHook.begin(ractive);\n\n  \t// // If this is a component with a function `data` property, call the function\n  \t// // with `ractive` as context (unless the child was also a function)\n  \t// if ( typeof ractive.constructor.prototype.data === 'function' && typeof userOptions.data !== 'function' ) {\n  \t// \tviewmodel.reset( ractive.constructor.prototype.data.call( ractive ) || fatal( '`data` functions must return a data object' ) );\n  \t// }\n\n  \t// Render virtual DOM\n  \tif (ractive.template) {\n  \t\tvar cssIds = undefined;\n\n  \t\tif (options.cssIds || ractive.cssId) {\n  \t\t\tcssIds = options.cssIds ? options.cssIds.slice() : [];\n\n  \t\t\tif (ractive.cssId) {\n  \t\t\t\tcssIds.push(ractive.cssId);\n  \t\t\t}\n  \t\t}\n\n  \t\tractive.fragment = new virtualdom_Fragment({\n  \t\t\ttemplate: ractive.template,\n  \t\t\troot: ractive,\n  \t\t\towner: ractive, // saves doing `if ( this.parent ) { /*...*/ }` later on\n  \t\t\tcssIds: cssIds\n  \t\t});\n  \t}\n\n  \tinitHook.end(ractive);\n\n  \t// render automatically ( if `el` is specified )\n  \tif (el = getElement(ractive.el)) {\n  \t\tvar promise = ractive.render(el, ractive.append);\n\n  \t\tif (_Ractive.DEBUG_PROMISES) {\n  \t\t\tpromise[\"catch\"](function (err) {\n  \t\t\t\twarnOnceIfDebug(\"Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\\n  Ractive.DEBUG_PROMISES = false;\");\n  \t\t\t\twarnIfDebug(\"An error happened during rendering\", { ractive: ractive });\n  \t\t\t\terr.stack && logIfDebug(err.stack);\n\n  \t\t\t\tthrow err;\n  \t\t\t});\n  \t\t}\n  \t}\n  }\n\n  function getAdaptors(ractive, protoAdapt, userOptions) {\n  \tvar adapt, magic, modifyArrays;\n\n  \tprotoAdapt = protoAdapt.map(lookup);\n  \tadapt = ensureArray(userOptions.adapt).map(lookup);\n\n  \tadapt = initialise__combine(protoAdapt, adapt);\n\n  \tmagic = \"magic\" in userOptions ? userOptions.magic : ractive.magic;\n  \tmodifyArrays = \"modifyArrays\" in userOptions ? userOptions.modifyArrays : ractive.modifyArrays;\n\n  \tif (magic) {\n  \t\tif (!environment__magic) {\n  \t\t\tthrow new Error(\"Getters and setters (magic mode) are not supported in this browser\");\n  \t\t}\n\n  \t\tif (modifyArrays) {\n  \t\t\tadapt.push(magicArray);\n  \t\t}\n\n  \t\tadapt.push(adaptors_magic);\n  \t}\n\n  \tif (modifyArrays) {\n  \t\tadapt.push(array_index);\n  \t}\n\n  \treturn adapt;\n\n  \tfunction lookup(adaptor) {\n  \t\tif (typeof adaptor === \"string\") {\n  \t\t\tadaptor = findInViewHierarchy(\"adaptors\", ractive, adaptor);\n\n  \t\t\tif (!adaptor) {\n  \t\t\t\tfatal(missingPlugin(adaptor, \"adaptor\"));\n  \t\t\t}\n  \t\t}\n\n  \t\treturn adaptor;\n  \t}\n  }\n\n  function initialise__combine(a, b) {\n  \tvar c = a.slice(),\n  \t    i = b.length;\n\n  \twhile (i--) {\n  \t\tif (! ~c.indexOf(b[i])) {\n  \t\t\tc.push(b[i]);\n  \t\t}\n  \t}\n\n  \treturn c;\n  }\n\n  function initialiseProperties(ractive, options) {\n  \t// Generate a unique identifier, for places where you'd use a weak map if it\n  \t// existed\n  \tractive._guid = \"r-\" + initialise__uid++;\n\n  \t// events\n  \tractive._subs = create(null);\n\n  \t// storage for item configuration from instantiation to reset,\n  \t// like dynamic functions or original values\n  \tractive._config = {};\n\n  \t// two-way bindings\n  \tractive._twowayBindings = create(null);\n\n  \t// animations (so we can stop any in progress at teardown)\n  \tractive._animations = [];\n\n  \t// nodes registry\n  \tractive.nodes = {};\n\n  \t// live queries\n  \tractive._liveQueries = [];\n  \tractive._liveComponentQueries = [];\n\n  \t// bound data functions\n  \tractive._boundFunctions = [];\n\n  \t// observers\n  \tractive._observers = [];\n\n  \t// properties specific to inline components\n  \tif (options.component) {\n  \t\tractive.parent = options.parent;\n  \t\tractive.container = options.container || null;\n  \t\tractive.root = ractive.parent.root;\n\n  \t\tractive.component = options.component;\n  \t\toptions.component.instance = ractive;\n\n  \t\t// for hackability, this could be an open option\n  \t\t// for any ractive instance, but for now, just\n  \t\t// for components and just for ractive...\n  \t\tractive._inlinePartials = options.inlinePartials;\n  \t} else {\n  \t\tractive.root = ractive;\n  \t\tractive.parent = ractive.container = null;\n  \t}\n  }\n\n  function deprecateRactiveData() {\n  \tthrow new Error(\"Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead\");\n  }\n\n  function ComplexParameter(component, template, callback) {\n  \tthis.parentFragment = component.parentFragment;\n  \tthis.callback = callback;\n\n  \tthis.fragment = new virtualdom_Fragment({\n  \t\ttemplate: template,\n  \t\troot: component.root,\n  \t\towner: this\n  \t});\n\n  \tthis.update();\n  }\n\n  var initialise_ComplexParameter = ComplexParameter;\n\n  ComplexParameter.prototype = {\n  \tbubble: function () {\n  \t\tif (!this.dirty) {\n  \t\t\tthis.dirty = true;\n  \t\t\tglobal_runloop.addView(this);\n  \t\t}\n  \t},\n\n  \tupdate: function () {\n  \t\tthis.callback(this.fragment.getValue());\n  \t\tthis.dirty = false;\n  \t},\n\n  \trebind: function (oldKeypath, newKeypath) {\n  \t\tthis.fragment.rebind(oldKeypath, newKeypath);\n  \t},\n\n  \tunbind: function () {\n  \t\tthis.fragment.unbind();\n  \t}\n  };\n\n  var createInstance = function (component, Component, attributes, yieldTemplate, partials) {\n  \tvar instance,\n  \t    parentFragment,\n  \t    ractive,\n  \t    fragment,\n  \t    container,\n  \t    inlinePartials = {},\n  \t    data = {},\n  \t    mappings = {},\n  \t    ready,\n  \t    resolvers = [];\n\n  \tparentFragment = component.parentFragment;\n  \tractive = component.root;\n\n  \tpartials = partials || {};\n  \tutils_object__extend(inlinePartials, partials);\n\n  \t// Make contents available as a {{>content}} partial\n  \tpartials.content = yieldTemplate || [];\n\n  \t// set a default partial for yields with no name\n  \tinlinePartials[\"\"] = partials.content;\n\n  \tif (Component.defaults.el) {\n  \t\twarnIfDebug(\"The <%s/> component has a default `el` property; it has been disregarded\", component.name);\n  \t}\n\n  \t// find container\n  \tfragment = parentFragment;\n  \twhile (fragment) {\n  \t\tif (fragment.owner.type === YIELDER) {\n  \t\t\tcontainer = fragment.owner.container;\n  \t\t\tbreak;\n  \t\t}\n\n  \t\tfragment = fragment.parent;\n  \t}\n\n  \t// each attribute represents either a) data or b) a mapping\n  \tif (attributes) {\n  \t\tObject.keys(attributes).forEach(function (key) {\n  \t\t\tvar attribute = attributes[key],\n  \t\t\t    parsed,\n  \t\t\t    resolver;\n\n  \t\t\tif (typeof attribute === \"string\") {\n  \t\t\t\t// it's static data\n  \t\t\t\tparsed = parseJSON(attribute);\n  \t\t\t\tdata[key] = parsed ? parsed.value : attribute;\n  \t\t\t} else if (attribute === 0) {\n  \t\t\t\t// it had no '=', so we'll call it true\n  \t\t\t\tdata[key] = true;\n  \t\t\t} else if (isArray(attribute)) {\n  \t\t\t\t// this represents dynamic data\n  \t\t\t\tif (isSingleInterpolator(attribute)) {\n  \t\t\t\t\tmappings[key] = {\n  \t\t\t\t\t\torigin: component.root.viewmodel,\n  \t\t\t\t\t\tkeypath: undefined\n  \t\t\t\t\t};\n\n  \t\t\t\t\tresolver = createResolver(component, attribute[0], function (keypath) {\n  \t\t\t\t\t\tif (keypath.isSpecial) {\n  \t\t\t\t\t\t\tif (ready) {\n  \t\t\t\t\t\t\t\tinstance.set(key, keypath.value); // TODO use viewmodel?\n  \t\t\t\t\t\t\t} else {\n  \t\t\t\t\t\t\t\tdata[key] = keypath.value;\n\n  \t\t\t\t\t\t\t\t// TODO errr.... would be better if we didn't have to do this\n  \t\t\t\t\t\t\t\tdelete mappings[key];\n  \t\t\t\t\t\t\t}\n  \t\t\t\t\t\t} else {\n  \t\t\t\t\t\t\tif (ready) {\n  \t\t\t\t\t\t\t\tinstance.viewmodel.mappings[key].resolve(keypath);\n  \t\t\t\t\t\t\t} else {\n  \t\t\t\t\t\t\t\t// resolved immediately\n  \t\t\t\t\t\t\t\tmappings[key].keypath = keypath;\n  \t\t\t\t\t\t\t}\n  \t\t\t\t\t\t}\n  \t\t\t\t\t});\n  \t\t\t\t} else {\n  \t\t\t\t\tresolver = new initialise_ComplexParameter(component, attribute, function (value) {\n  \t\t\t\t\t\tif (ready) {\n  \t\t\t\t\t\t\tinstance.set(key, value); // TODO use viewmodel?\n  \t\t\t\t\t\t} else {\n  \t\t\t\t\t\t\tdata[key] = value;\n  \t\t\t\t\t\t}\n  \t\t\t\t\t});\n  \t\t\t\t}\n\n  \t\t\t\tresolvers.push(resolver);\n  \t\t\t} else {\n  \t\t\t\tthrow new Error(\"erm wut\");\n  \t\t\t}\n  \t\t});\n  \t}\n\n  \tinstance = create(Component.prototype);\n\n  \tinitialise(instance, {\n  \t\tel: null,\n  \t\tappend: true,\n  \t\tdata: data,\n  \t\tpartials: partials,\n  \t\tmagic: ractive.magic || Component.defaults.magic,\n  \t\tmodifyArrays: ractive.modifyArrays,\n  \t\t// need to inherit runtime parent adaptors\n  \t\tadapt: ractive.adapt\n  \t}, {\n  \t\tparent: ractive,\n  \t\tcomponent: component,\n  \t\tcontainer: container,\n  \t\tmappings: mappings,\n  \t\tinlinePartials: inlinePartials,\n  \t\tcssIds: parentFragment.cssIds\n  \t});\n\n  \tready = true;\n  \tcomponent.resolvers = resolvers;\n\n  \treturn instance;\n  };\n\n  function createResolver(component, template, callback) {\n  \tvar resolver;\n\n  \tif (template.r) {\n  \t\tresolver = Resolvers_createReferenceResolver(component, template.r, callback);\n  \t} else if (template.x) {\n  \t\tresolver = new Resolvers_ExpressionResolver(component, component.parentFragment, template.x, callback);\n  \t} else if (template.rx) {\n  \t\tresolver = new ReferenceExpressionResolver_ReferenceExpressionResolver(component, template.rx, callback);\n  \t}\n\n  \treturn resolver;\n  }\n\n  function isSingleInterpolator(template) {\n  \treturn template.length === 1 && template[0].t === INTERPOLATOR;\n  }\n\n  // TODO how should event arguments be handled? e.g.\n  // <widget on-foo='bar:1,2,3'/>\n  // The event 'bar' will be fired on the parent instance\n  // when 'foo' fires on the child, but the 1,2,3 arguments\n  // will be lost\n\n  var initialise_propagateEvents = propagateEvents;\n\n  function propagateEvents(component, eventsDescriptor) {\n  \tvar eventName;\n\n  \tfor (eventName in eventsDescriptor) {\n  \t\tif (eventsDescriptor.hasOwnProperty(eventName)) {\n  \t\t\tpropagateEvent(component.instance, component.root, eventName, eventsDescriptor[eventName]);\n  \t\t}\n  \t}\n  }\n\n  function propagateEvent(childInstance, parentInstance, eventName, proxyEventName) {\n  \tif (typeof proxyEventName !== \"string\") {\n  \t\tfatal(\"Components currently only support simple events - you cannot include arguments. Sorry!\");\n  \t}\n\n  \tchildInstance.on(eventName, function () {\n  \t\tvar event, args;\n\n  \t\t// semi-weak test, but what else? tag the event obj ._isEvent ?\n  \t\tif (arguments.length && arguments[0] && arguments[0].node) {\n  \t\t\tevent = Array.prototype.shift.call(arguments);\n  \t\t}\n\n  \t\targs = Array.prototype.slice.call(arguments);\n\n  \t\tshared_fireEvent(parentInstance, proxyEventName, { event: event, args: args });\n\n  \t\t// cancel bubbling\n  \t\treturn false;\n  \t});\n  }\n\n  var initialise_updateLiveQueries = function (component) {\n  \tvar ancestor, query;\n\n  \t// If there's a live query for this component type, add it\n  \tancestor = component.root;\n  \twhile (ancestor) {\n  \t\tif (query = ancestor._liveComponentQueries[\"_\" + component.name]) {\n  \t\t\tquery.push(component.instance);\n  \t\t}\n\n  \t\tancestor = ancestor.parent;\n  \t}\n  };\n\n  var Component_prototype_init = Component$init;\n  function Component$init(options, Component) {\n  \tvar parentFragment, root;\n\n  \tif (!Component) {\n  \t\tthrow new Error(\"Component \\\"\" + this.name + \"\\\" not found\");\n  \t}\n\n  \tparentFragment = this.parentFragment = options.parentFragment;\n  \troot = parentFragment.root;\n\n  \tthis.root = root;\n  \tthis.type = COMPONENT;\n  \tthis.name = options.template.e;\n  \tthis.index = options.index;\n  \tthis.indexRefBindings = {};\n  \tthis.yielders = {};\n  \tthis.resolvers = [];\n\n  \tcreateInstance(this, Component, options.template.a, options.template.f, options.template.p);\n  \tinitialise_propagateEvents(this, options.template.v);\n\n  \t// intro, outro and decorator directives have no effect\n  \tif (options.template.t0 || options.template.t1 || options.template.t2 || options.template.o) {\n  \t\twarnIfDebug(\"The \\\"intro\\\", \\\"outro\\\" and \\\"decorator\\\" directives have no effect on components\", { ractive: this.instance });\n  \t}\n\n  \tinitialise_updateLiveQueries(this);\n  }\n\n  var Component_prototype_rebind = Component$rebind;\n\n  function Component$rebind(oldKeypath, newKeypath) {\n  \tvar query;\n\n  \tthis.resolvers.forEach(rebind);\n\n  \tfor (var k in this.yielders) {\n  \t\tif (this.yielders[k][0]) {\n  \t\t\trebind(this.yielders[k][0]);\n  \t\t}\n  \t}\n\n  \tif (query = this.root._liveComponentQueries[\"_\" + this.name]) {\n  \t\tquery._makeDirty();\n  \t}\n\n  \tfunction rebind(x) {\n  \t\tx.rebind(oldKeypath, newKeypath);\n  \t}\n  }\n\n  var Component_prototype_render = Component$render;\n\n  function Component$render() {\n  \tvar instance = this.instance;\n\n  \tinstance.render(this.parentFragment.getNode());\n\n  \tthis.rendered = true;\n  \treturn instance.fragment.detach();\n  }\n\n  var Component_prototype_toString = Component$toString;\n\n  function Component$toString() {\n  \treturn this.instance.fragment.toString();\n  }\n\n  var Component_prototype_unbind = Component$unbind;\n\n  var Component_prototype_unbind__teardownHook = new hooks_Hook(\"teardown\");\n  function Component$unbind() {\n  \tvar instance = this.instance;\n\n  \tthis.resolvers.forEach(methodCallers__unbind);\n\n  \tremoveFromLiveComponentQueries(this);\n\n  \tinstance._observers.forEach(cancel);\n\n  \t// teardown the instance\n  \tinstance.fragment.unbind();\n  \tinstance.viewmodel.teardown();\n\n  \tif (instance.fragment.rendered && instance.el.__ractive_instances__) {\n  \t\tremoveFromArray(instance.el.__ractive_instances__, instance);\n  \t}\n\n  \tComponent_prototype_unbind__teardownHook.fire(instance);\n  }\n\n  function removeFromLiveComponentQueries(component) {\n  \tvar instance, query;\n\n  \tinstance = component.root;\n\n  \tdo {\n  \t\tif (query = instance._liveComponentQueries[\"_\" + component.name]) {\n  \t\t\tquery._remove(component);\n  \t\t}\n  \t} while (instance = instance.parent);\n  }\n\n  var Component_prototype_unrender = Component$unrender;\n\n  function Component$unrender(shouldDestroy) {\n  \tthis.shouldDestroy = shouldDestroy;\n  \tthis.instance.unrender();\n  }\n\n  var Component = function (options, Constructor) {\n  \tthis.init(options, Constructor);\n  };\n\n  Component.prototype = {\n  \tdetach: Component_prototype_detach,\n  \tfind: Component_prototype_find,\n  \tfindAll: Component_prototype_findAll,\n  \tfindAllComponents: Component_prototype_findAllComponents,\n  \tfindComponent: Component_prototype_findComponent,\n  \tfindNextNode: Component_prototype_findNextNode,\n  \tfirstNode: Component_prototype_firstNode,\n  \tinit: Component_prototype_init,\n  \trebind: Component_prototype_rebind,\n  \trender: Component_prototype_render,\n  \ttoString: Component_prototype_toString,\n  \tunbind: Component_prototype_unbind,\n  \tunrender: Component_prototype_unrender\n  };\n\n  var _Component = Component;\n\n  var Comment = function (options) {\n  \tthis.type = COMMENT;\n  \tthis.value = options.template.c;\n  };\n\n  Comment.prototype = {\n  \tdetach: shared_detach,\n\n  \tfirstNode: function () {\n  \t\treturn this.node;\n  \t},\n\n  \trender: function () {\n  \t\tif (!this.node) {\n  \t\t\tthis.node = document.createComment(this.value);\n  \t\t}\n\n  \t\treturn this.node;\n  \t},\n\n  \ttoString: function () {\n  \t\treturn \"<!--\" + this.value + \"-->\";\n  \t},\n\n  \tunrender: function (shouldDestroy) {\n  \t\tif (shouldDestroy) {\n  \t\t\tthis.node.parentNode.removeChild(this.node);\n  \t\t}\n  \t}\n  };\n\n  var items_Comment = Comment;\n\n  var Yielder = function (options) {\n  \tvar container, component;\n\n  \tthis.type = YIELDER;\n\n  \tthis.container = container = options.parentFragment.root;\n  \tthis.component = component = container.component;\n\n  \tthis.container = container;\n  \tthis.containerFragment = options.parentFragment;\n  \tthis.parentFragment = component.parentFragment;\n\n  \tvar name = this.name = options.template.n || \"\";\n\n  \tvar template = container._inlinePartials[name];\n\n  \tif (!template) {\n  \t\twarnIfDebug(\"Could not find template for partial \\\"\" + name + \"\\\"\", { ractive: options.root });\n  \t\ttemplate = [];\n  \t}\n\n  \tthis.fragment = new virtualdom_Fragment({\n  \t\towner: this,\n  \t\troot: container.parent,\n  \t\ttemplate: template,\n  \t\tpElement: this.containerFragment.pElement\n  \t});\n\n  \t// even though only one yielder is allowed, we need to have an array of them\n  \t// as it's possible to cause a yielder to be created before the last one\n  \t// was destroyed in the same turn of the runloop\n  \tif (!isArray(component.yielders[name])) {\n  \t\tcomponent.yielders[name] = [this];\n  \t} else {\n  \t\tcomponent.yielders[name].push(this);\n  \t}\n\n  \tglobal_runloop.scheduleTask(function () {\n  \t\tif (component.yielders[name].length > 1) {\n  \t\t\tthrow new Error(\"A component template can only have one {{yield\" + (name ? \" \" + name : \"\") + \"}} declaration at a time\");\n  \t\t}\n  \t});\n  };\n\n  Yielder.prototype = {\n  \tdetach: function () {\n  \t\treturn this.fragment.detach();\n  \t},\n\n  \tfind: function (selector) {\n  \t\treturn this.fragment.find(selector);\n  \t},\n\n  \tfindAll: function (selector, query) {\n  \t\treturn this.fragment.findAll(selector, query);\n  \t},\n\n  \tfindComponent: function (selector) {\n  \t\treturn this.fragment.findComponent(selector);\n  \t},\n\n  \tfindAllComponents: function (selector, query) {\n  \t\treturn this.fragment.findAllComponents(selector, query);\n  \t},\n\n  \tfindNextNode: function () {\n  \t\treturn this.containerFragment.findNextNode(this);\n  \t},\n\n  \tfirstNode: function () {\n  \t\treturn this.fragment.firstNode();\n  \t},\n\n  \tgetValue: function (options) {\n  \t\treturn this.fragment.getValue(options);\n  \t},\n\n  \trender: function () {\n  \t\treturn this.fragment.render();\n  \t},\n\n  \tunbind: function () {\n  \t\tthis.fragment.unbind();\n  \t},\n\n  \tunrender: function (shouldDestroy) {\n  \t\tthis.fragment.unrender(shouldDestroy);\n  \t\tremoveFromArray(this.component.yielders[this.name], this);\n  \t},\n\n  \trebind: function (oldKeypath, newKeypath) {\n  \t\tthis.fragment.rebind(oldKeypath, newKeypath);\n  \t},\n\n  \ttoString: function () {\n  \t\treturn this.fragment.toString();\n  \t}\n  };\n\n  var items_Yielder = Yielder;\n\n  var Doctype = function (options) {\n  \tthis.declaration = options.template.a;\n  };\n\n  Doctype.prototype = {\n  \tinit: noop,\n  \trender: noop,\n  \tunrender: noop,\n  \tteardown: noop,\n  \ttoString: function () {\n  \t\treturn \"<!DOCTYPE\" + this.declaration + \">\";\n  \t}\n  };\n\n  var items_Doctype = Doctype;\n\n  var Fragment_prototype_init = Fragment$init;\n\n  function Fragment$init(options) {\n  \tvar _this = this;\n\n  \tthis.owner = options.owner; // The item that owns this fragment - an element, section, partial, or attribute\n  \tthis.parent = this.owner.parentFragment;\n\n  \t// inherited properties\n  \tthis.root = options.root;\n  \tthis.pElement = options.pElement;\n  \tthis.context = options.context;\n  \tthis.index = options.index;\n  \tthis.key = options.key;\n  \tthis.registeredIndexRefs = [];\n\n  \t// encapsulated styles should be inherited until they get applied by an element\n  \tthis.cssIds = \"cssIds\" in options ? options.cssIds : this.parent ? this.parent.cssIds : null;\n\n  \tthis.items = options.template.map(function (template, i) {\n  \t\treturn createItem({\n  \t\t\tparentFragment: _this,\n  \t\t\tpElement: options.pElement,\n  \t\t\ttemplate: template,\n  \t\t\tindex: i\n  \t\t});\n  \t});\n\n  \tthis.value = this.argsList = null;\n  \tthis.dirtyArgs = this.dirtyValue = true;\n\n  \tthis.bound = true;\n  }\n\n  function createItem(options) {\n  \tif (typeof options.template === \"string\") {\n  \t\treturn new items_Text(options);\n  \t}\n\n  \tswitch (options.template.t) {\n  \t\tcase YIELDER:\n  \t\t\treturn new items_Yielder(options);\n  \t\tcase INTERPOLATOR:\n  \t\t\treturn new items_Interpolator(options);\n  \t\tcase SECTION:\n  \t\t\treturn new _Section(options);\n  \t\tcase TRIPLE:\n  \t\t\treturn new _Triple(options);\n  \t\tcase ELEMENT:\n  \t\t\tvar constructor = undefined;\n  \t\t\tif (constructor = Component_getComponent(options.parentFragment.root, options.template.e)) {\n  \t\t\t\treturn new _Component(options, constructor);\n  \t\t\t}\n  \t\t\treturn new _Element(options);\n  \t\tcase PARTIAL:\n  \t\t\treturn new _Partial(options);\n  \t\tcase COMMENT:\n  \t\t\treturn new items_Comment(options);\n  \t\tcase DOCTYPE:\n  \t\t\treturn new items_Doctype(options);\n\n  \t\tdefault:\n  \t\t\tthrow new Error(\"Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!\");\n  \t}\n  }\n\n  var Fragment_prototype_rebind = Fragment$rebind;\n  function Fragment$rebind(oldKeypath, newKeypath) {\n\n  \t// assign new context keypath if needed\n  \tif (!this.owner || this.owner.hasContext) {\n  \t\tassignNewKeypath(this, \"context\", oldKeypath, newKeypath);\n  \t}\n\n  \tthis.items.forEach(function (item) {\n  \t\tif (item.rebind) {\n  \t\t\titem.rebind(oldKeypath, newKeypath);\n  \t\t}\n  \t});\n  }\n\n  var Fragment_prototype_render = Fragment$render;\n\n  function Fragment$render() {\n  \tvar result;\n\n  \tif (this.items.length === 1) {\n  \t\tresult = this.items[0].render();\n  \t} else {\n  \t\tresult = document.createDocumentFragment();\n\n  \t\tthis.items.forEach(function (item) {\n  \t\t\tresult.appendChild(item.render());\n  \t\t});\n  \t}\n\n  \tthis.rendered = true;\n  \treturn result;\n  }\n\n  var Fragment_prototype_toString = Fragment$toString;\n\n  function Fragment$toString(escape) {\n  \tif (!this.items) {\n  \t\treturn \"\";\n  \t}\n\n  \treturn this.items.map(escape ? toEscapedString : Fragment_prototype_toString__toString).join(\"\");\n  }\n\n  function Fragment_prototype_toString__toString(item) {\n  \treturn item.toString();\n  }\n\n  function toEscapedString(item) {\n  \treturn item.toString(true);\n  }\n\n  var Fragment_prototype_unbind = Fragment$unbind;\n\n  function Fragment$unbind() {\n  \tif (!this.bound) {\n  \t\treturn;\n  \t}\n\n  \tthis.items.forEach(unbindItem);\n  \tthis.bound = false;\n  }\n\n  function unbindItem(item) {\n  \tif (item.unbind) {\n  \t\titem.unbind();\n  \t}\n  }\n\n  var Fragment_prototype_unrender = Fragment$unrender;\n\n  function Fragment$unrender(shouldDestroy) {\n  \tif (!this.rendered) {\n  \t\tthrow new Error(\"Attempted to unrender a fragment that was not rendered\");\n  \t}\n\n  \tthis.items.forEach(function (i) {\n  \t\treturn i.unrender(shouldDestroy);\n  \t});\n  \tthis.rendered = false;\n  }\n\n  var Fragment = function (options) {\n  \tthis.init(options);\n  };\n\n  Fragment.prototype = {\n  \tbubble: prototype_bubble,\n  \tdetach: Fragment_prototype_detach,\n  \tfind: Fragment_prototype_find,\n  \tfindAll: Fragment_prototype_findAll,\n  \tfindAllComponents: Fragment_prototype_findAllComponents,\n  \tfindComponent: Fragment_prototype_findComponent,\n  \tfindNextNode: prototype_findNextNode,\n  \tfirstNode: prototype_firstNode,\n  \tgetArgsList: getArgsList,\n  \tgetNode: getNode,\n  \tgetValue: prototype_getValue,\n  \tinit: Fragment_prototype_init,\n  \trebind: Fragment_prototype_rebind,\n  \tregisterIndexRef: function (idx) {\n  \t\tvar idxs = this.registeredIndexRefs;\n  \t\tif (idxs.indexOf(idx) === -1) {\n  \t\t\tidxs.push(idx);\n  \t\t}\n  \t},\n  \trender: Fragment_prototype_render,\n  \ttoString: Fragment_prototype_toString,\n  \tunbind: Fragment_prototype_unbind,\n  \tunregisterIndexRef: function (idx) {\n  \t\tvar idxs = this.registeredIndexRefs;\n  \t\tidxs.splice(idxs.indexOf(idx), 1);\n  \t},\n  \tunrender: Fragment_prototype_unrender\n  };\n\n  var virtualdom_Fragment = Fragment;\n\n  var prototype_reset = Ractive$reset;\n  var shouldRerender = [\"template\", \"partials\", \"components\", \"decorators\", \"events\"],\n      resetHook = new hooks_Hook(\"reset\");\n  function Ractive$reset(data) {\n  \tvar promise, wrapper, changes, i, rerender;\n\n  \tdata = data || {};\n\n  \tif (typeof data !== \"object\") {\n  \t\tthrow new Error(\"The reset method takes either no arguments, or an object containing new data\");\n  \t}\n\n  \t// If the root object is wrapped, try and use the wrapper's reset value\n  \tif ((wrapper = this.viewmodel.wrapped[\"\"]) && wrapper.reset) {\n  \t\tif (wrapper.reset(data) === false) {\n  \t\t\t// reset was rejected, we need to replace the object\n  \t\t\tthis.viewmodel.reset(data);\n  \t\t}\n  \t} else {\n  \t\tthis.viewmodel.reset(data);\n  \t}\n\n  \t// reset config items and track if need to rerender\n  \tchanges = config_config.reset(this);\n\n  \ti = changes.length;\n  \twhile (i--) {\n  \t\tif (shouldRerender.indexOf(changes[i]) > -1) {\n  \t\t\trerender = true;\n  \t\t\tbreak;\n  \t\t}\n  \t}\n\n  \tif (rerender) {\n  \t\tvar component = undefined;\n\n  \t\tthis.viewmodel.mark(rootKeypath);\n\n  \t\t// Is this is a component, we need to set the `shouldDestroy`\n  \t\t// flag, otherwise it will assume by default that a parent node\n  \t\t// will be detached, and therefore it doesn't need to bother\n  \t\t// detaching its own nodes\n  \t\tif (component = this.component) {\n  \t\t\tcomponent.shouldDestroy = true;\n  \t\t}\n\n  \t\tthis.unrender();\n\n  \t\tif (component) {\n  \t\t\tcomponent.shouldDestroy = false;\n  \t\t}\n\n  \t\t// If the template changed, we need to destroy the parallel DOM\n  \t\t// TODO if we're here, presumably it did?\n  \t\tif (this.fragment.template !== this.template) {\n  \t\t\tthis.fragment.unbind();\n\n  \t\t\tthis.fragment = new virtualdom_Fragment({\n  \t\t\t\ttemplate: this.template,\n  \t\t\t\troot: this,\n  \t\t\t\towner: this\n  \t\t\t});\n  \t\t}\n\n  \t\tpromise = this.render(this.el, this.anchor);\n  \t} else {\n  \t\tpromise = global_runloop.start(this, true);\n  \t\tthis.viewmodel.mark(rootKeypath);\n  \t\tglobal_runloop.end();\n  \t}\n\n  \tresetHook.fire(this, data);\n\n  \treturn promise;\n  }\n\n  var resetPartial = function (name, partial) {\n  \tvar promise,\n  \t    collection = [];\n\n  \tfunction collect(source, dest, ractive) {\n  \t\t// if this is a component and it has its own partial, bail\n  \t\tif (ractive && ractive.partials[name]) return;\n\n  \t\tsource.forEach(function (item) {\n  \t\t\t// queue to rerender if the item is a partial and the current name matches\n  \t\t\tif (item.type === PARTIAL && item.getPartialName() === name) {\n  \t\t\t\tdest.push(item);\n  \t\t\t}\n\n  \t\t\t// if it has a fragment, process its items\n  \t\t\tif (item.fragment) {\n  \t\t\t\tcollect(item.fragment.items, dest, ractive);\n  \t\t\t}\n\n  \t\t\t// or if it has fragments\n  \t\t\tif (isArray(item.fragments)) {\n  \t\t\t\tcollect(item.fragments, dest, ractive);\n  \t\t\t}\n\n  \t\t\t// or if it is itself a fragment, process its items\n  \t\t\telse if (isArray(item.items)) {\n  \t\t\t\tcollect(item.items, dest, ractive);\n  \t\t\t}\n\n  \t\t\t// or if it is a component, step in and process its items\n  \t\t\telse if (item.type === COMPONENT && item.instance) {\n  \t\t\t\tcollect(item.instance.fragment.items, dest, item.instance);\n  \t\t\t}\n\n  \t\t\t// if the item is an element, process its attributes too\n  \t\t\tif (item.type === ELEMENT) {\n  \t\t\t\tif (isArray(item.attributes)) {\n  \t\t\t\t\tcollect(item.attributes, dest, ractive);\n  \t\t\t\t}\n\n  \t\t\t\tif (isArray(item.conditionalAttributes)) {\n  \t\t\t\t\tcollect(item.conditionalAttributes, dest, ractive);\n  \t\t\t\t}\n  \t\t\t}\n  \t\t});\n  \t}\n\n  \tcollect(this.fragment.items, collection);\n  \tthis.partials[name] = partial;\n\n  \tpromise = global_runloop.start(this, true);\n\n  \tcollection.forEach(function (item) {\n  \t\titem.value = undefined;\n  \t\titem.setValue(name);\n  \t});\n\n  \tglobal_runloop.end();\n\n  \treturn promise;\n  };\n\n  // TODO should resetTemplate be asynchronous? i.e. should it be a case\n  // of outro, update template, intro? I reckon probably not, since that\n  // could be achieved with unrender-resetTemplate-render. Also, it should\n  // conceptually be similar to resetPartial, which couldn't be async\n\n  var resetTemplate = Ractive$resetTemplate;\n  function Ractive$resetTemplate(template) {\n  \tvar transitionsEnabled, component;\n\n  \ttemplate_template.init(null, this, { template: template });\n\n  \ttransitionsEnabled = this.transitionsEnabled;\n  \tthis.transitionsEnabled = false;\n\n  \t// Is this is a component, we need to set the `shouldDestroy`\n  \t// flag, otherwise it will assume by default that a parent node\n  \t// will be detached, and therefore it doesn't need to bother\n  \t// detaching its own nodes\n  \tif (component = this.component) {\n  \t\tcomponent.shouldDestroy = true;\n  \t}\n\n  \tthis.unrender();\n\n  \tif (component) {\n  \t\tcomponent.shouldDestroy = false;\n  \t}\n\n  \t// remove existing fragment and create new one\n  \tthis.fragment.unbind();\n  \tthis.fragment = new virtualdom_Fragment({\n  \t\ttemplate: this.template,\n  \t\troot: this,\n  \t\towner: this\n  \t});\n\n  \tthis.render(this.el, this.anchor);\n\n  \tthis.transitionsEnabled = transitionsEnabled;\n  }\n\n  var reverse = makeArrayMethod(\"reverse\");\n\n  var Ractive_prototype_set = Ractive$set;\n\n  function Ractive$set(keypath, value) {\n  \tvar map, promise;\n\n  \tpromise = global_runloop.start(this, true);\n\n  \t// Set multiple keypaths in one go\n  \tif (isObject(keypath)) {\n  \t\tmap = keypath;\n\n  \t\tfor (keypath in map) {\n  \t\t\tif (map.hasOwnProperty(keypath)) {\n  \t\t\t\tvalue = map[keypath];\n  \t\t\t\tset(this, keypath, value);\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \t// Set a single keypath\n  \telse {\n  \t\tset(this, keypath, value);\n  \t}\n\n  \tglobal_runloop.end();\n\n  \treturn promise;\n  }\n\n  function set(ractive, keypath, value) {\n  \tkeypath = getKeypath(normalise(keypath));\n\n  \tif (keypath.isPattern) {\n  \t\tgetMatchingKeypaths(ractive, keypath).forEach(function (keypath) {\n  \t\t\tractive.viewmodel.set(keypath, value);\n  \t\t});\n  \t} else {\n  \t\tractive.viewmodel.set(keypath, value);\n  \t}\n  }\n\n  var shift = makeArrayMethod(\"shift\");\n\n  var prototype_sort = makeArrayMethod(\"sort\");\n\n  var splice = makeArrayMethod(\"splice\");\n\n  var subtract = Ractive$subtract;\n  function Ractive$subtract(keypath, d) {\n  \treturn shared_add(this, keypath, d === undefined ? -1 : -d);\n  }\n\n  // Teardown. This goes through the root fragment and all its children, removing observers\n  // and generally cleaning up after itself\n\n  var Ractive_prototype_teardown = Ractive$teardown;\n\n  var Ractive_prototype_teardown__teardownHook = new hooks_Hook(\"teardown\");\n  function Ractive$teardown() {\n  \tvar promise;\n\n  \tthis.fragment.unbind();\n  \tthis.viewmodel.teardown();\n\n  \tthis._observers.forEach(cancel);\n\n  \tif (this.fragment.rendered && this.el.__ractive_instances__) {\n  \t\tremoveFromArray(this.el.__ractive_instances__, this);\n  \t}\n\n  \tthis.shouldDestroy = true;\n  \tpromise = this.fragment.rendered ? this.unrender() : utils_Promise.resolve();\n\n  \tRactive_prototype_teardown__teardownHook.fire(this);\n\n  \tthis._boundFunctions.forEach(deleteFunctionCopy);\n\n  \treturn promise;\n  }\n\n  function deleteFunctionCopy(bound) {\n  \tdelete bound.fn[bound.prop];\n  }\n\n  var toggle = Ractive$toggle;\n  function Ractive$toggle(keypath) {\n  \tvar _this = this;\n\n  \tif (typeof keypath !== \"string\") {\n  \t\tthrow new TypeError(badArguments);\n  \t}\n\n  \tvar changes = undefined;\n\n  \tif (/\\*/.test(keypath)) {\n  \t\tchanges = {};\n\n  \t\tgetMatchingKeypaths(this, getKeypath(normalise(keypath))).forEach(function (keypath) {\n  \t\t\tchanges[keypath.str] = !_this.viewmodel.get(keypath);\n  \t\t});\n\n  \t\treturn this.set(changes);\n  \t}\n\n  \treturn this.set(keypath, !this.get(keypath));\n  }\n\n  var toHTML = Ractive$toHTML;\n\n  function Ractive$toHTML() {\n  \treturn this.fragment.toString(true);\n  }\n\n  var Ractive_prototype_unrender = Ractive$unrender;\n  var unrenderHook = new hooks_Hook(\"unrender\");\n  function Ractive$unrender() {\n  \tvar promise, shouldDestroy;\n\n  \tif (!this.fragment.rendered) {\n  \t\twarnIfDebug(\"ractive.unrender() was called on a Ractive instance that was not rendered\");\n  \t\treturn utils_Promise.resolve();\n  \t}\n\n  \tpromise = global_runloop.start(this, true);\n\n  \t// If this is a component, and the component isn't marked for destruction,\n  \t// don't detach nodes from the DOM unnecessarily\n  \tshouldDestroy = !this.component || this.component.shouldDestroy || this.shouldDestroy;\n\n  \t// Cancel any animations in progress\n  \twhile (this._animations[0]) {\n  \t\tthis._animations[0].stop(); // it will remove itself from the index\n  \t}\n\n  \tthis.fragment.unrender(shouldDestroy);\n\n  \tremoveFromArray(this.el.__ractive_instances__, this);\n\n  \tunrenderHook.fire(this);\n\n  \tglobal_runloop.end();\n  \treturn promise;\n  }\n\n  var unshift = makeArrayMethod(\"unshift\");\n\n  var Ractive_prototype_update = Ractive$update;\n  var updateHook = new hooks_Hook(\"update\");\n  function Ractive$update(keypath) {\n  \tvar promise;\n\n  \tkeypath = getKeypath(keypath) || rootKeypath;\n\n  \tpromise = global_runloop.start(this, true);\n  \tthis.viewmodel.mark(keypath);\n  \tglobal_runloop.end();\n\n  \tupdateHook.fire(this, keypath);\n\n  \treturn promise;\n  }\n\n  var prototype_updateModel = Ractive$updateModel;\n\n  function Ractive$updateModel(keypath, cascade) {\n  \tvar values, key, bindings;\n\n  \tif (typeof keypath === \"string\" && !cascade) {\n  \t\tbindings = this._twowayBindings[keypath];\n  \t} else {\n  \t\tbindings = [];\n\n  \t\tfor (key in this._twowayBindings) {\n  \t\t\tif (!keypath || getKeypath(key).equalsOrStartsWith(keypath)) {\n  \t\t\t\t// TODO is this right?\n  \t\t\t\tbindings.push.apply(bindings, this._twowayBindings[key]);\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \tvalues = consolidate(this, bindings);\n  \treturn this.set(values);\n  }\n\n  function consolidate(ractive, bindings) {\n  \tvar values = {},\n  \t    checkboxGroups = [];\n\n  \tbindings.forEach(function (b) {\n  \t\tvar oldValue, newValue;\n\n  \t\t// special case - radio name bindings\n  \t\tif (b.radioName && !b.element.node.checked) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\t// special case - checkbox name bindings come in groups, so\n  \t\t// we want to get the value once at most\n  \t\tif (b.checkboxName) {\n  \t\t\tif (!checkboxGroups[b.keypath.str] && !b.changed()) {\n  \t\t\t\tcheckboxGroups.push(b.keypath);\n  \t\t\t\tcheckboxGroups[b.keypath.str] = b;\n  \t\t\t}\n\n  \t\t\treturn;\n  \t\t}\n\n  \t\toldValue = b.attribute.value;\n  \t\tnewValue = b.getValue();\n\n  \t\tif (arrayContentsMatch(oldValue, newValue)) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tif (!isEqual(oldValue, newValue)) {\n  \t\t\tvalues[b.keypath.str] = newValue;\n  \t\t}\n  \t});\n\n  \t// Handle groups of `<input type='checkbox' name='{{foo}}' ...>`\n  \tif (checkboxGroups.length) {\n  \t\tcheckboxGroups.forEach(function (keypath) {\n  \t\t\tvar binding, oldValue, newValue;\n\n  \t\t\tbinding = checkboxGroups[keypath.str]; // one to represent the entire group\n  \t\t\toldValue = binding.attribute.value;\n  \t\t\tnewValue = binding.getValue();\n\n  \t\t\tif (!arrayContentsMatch(oldValue, newValue)) {\n  \t\t\t\tvalues[keypath.str] = newValue;\n  \t\t\t}\n  \t\t});\n  \t}\n\n  \treturn values;\n  }\n\n  var prototype = {\n  \tadd: prototype_add,\n  \tanimate: prototype_animate,\n  \tdetach: prototype_detach,\n  \tfind: prototype_find,\n  \tfindAll: prototype_findAll,\n  \tfindAllComponents: prototype_findAllComponents,\n  \tfindComponent: prototype_findComponent,\n  \tfindContainer: findContainer,\n  \tfindParent: findParent,\n  \tfire: prototype_fire,\n  \tget: prototype_get,\n  \tinsert: insert,\n  \tmerge: prototype_merge,\n  \tobserve: observe,\n  \tobserveOnce: observeOnce,\n  \toff: off,\n  \ton: on,\n  \tonce: once,\n  \tpop: pop,\n  \tpush: push,\n  \trender: prototype_render,\n  \treset: prototype_reset,\n  \tresetPartial: resetPartial,\n  \tresetTemplate: resetTemplate,\n  \treverse: reverse,\n  \tset: Ractive_prototype_set,\n  \tshift: shift,\n  \tsort: prototype_sort,\n  \tsplice: splice,\n  \tsubtract: subtract,\n  \tteardown: Ractive_prototype_teardown,\n  \ttoggle: toggle,\n  \ttoHTML: toHTML,\n  \ttoHtml: toHTML,\n  \tunrender: Ractive_prototype_unrender,\n  \tunshift: unshift,\n  \tupdate: Ractive_prototype_update,\n  \tupdateModel: prototype_updateModel\n  };\n\n  var wrapMethod = function (method, superMethod, force) {\n\n  \tif (force || needsSuper(method, superMethod)) {\n\n  \t\treturn function () {\n\n  \t\t\tvar hasSuper = (\"_super\" in this),\n  \t\t\t    _super = this._super,\n  \t\t\t    result;\n\n  \t\t\tthis._super = superMethod;\n\n  \t\t\tresult = method.apply(this, arguments);\n\n  \t\t\tif (hasSuper) {\n  \t\t\t\tthis._super = _super;\n  \t\t\t}\n\n  \t\t\treturn result;\n  \t\t};\n  \t} else {\n  \t\treturn method;\n  \t}\n  };\n\n  function needsSuper(method, superMethod) {\n  \treturn typeof superMethod === \"function\" && /_super/.test(method);\n  }\n\n  var unwrapExtended = unwrap;\n\n  function unwrap(Child) {\n  \tvar options = {};\n\n  \twhile (Child) {\n  \t\taddRegistries(Child, options);\n  \t\taddOtherOptions(Child, options);\n\n  \t\tif (Child._Parent !== _Ractive) {\n  \t\t\tChild = Child._Parent;\n  \t\t} else {\n  \t\t\tChild = false;\n  \t\t}\n  \t}\n\n  \treturn options;\n  }\n\n  function addRegistries(Child, options) {\n  \tconfig_registries.forEach(function (r) {\n  \t\taddRegistry(r.useDefaults ? Child.prototype : Child, options, r.name);\n  \t});\n  }\n\n  function addRegistry(target, options, name) {\n  \tvar registry,\n  \t    keys = Object.keys(target[name]);\n\n  \tif (!keys.length) {\n  \t\treturn;\n  \t}\n\n  \tif (!(registry = options[name])) {\n  \t\tregistry = options[name] = {};\n  \t}\n\n  \tkeys.filter(function (key) {\n  \t\treturn !(key in registry);\n  \t}).forEach(function (key) {\n  \t\treturn registry[key] = target[name][key];\n  \t});\n  }\n\n  function addOtherOptions(Child, options) {\n  \tObject.keys(Child.prototype).forEach(function (key) {\n  \t\tif (key === \"computed\") {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tvar value = Child.prototype[key];\n\n  \t\tif (!(key in options)) {\n  \t\t\toptions[key] = value._method ? value._method : value;\n  \t\t}\n\n  \t\t// is it a wrapped function?\n  \t\telse if (typeof options[key] === \"function\" && typeof value === \"function\" && options[key]._method) {\n\n  \t\t\tvar result = undefined,\n  \t\t\t    needsSuper = value._method;\n\n  \t\t\tif (needsSuper) {\n  \t\t\t\tvalue = value._method;\n  \t\t\t}\n\n  \t\t\t// rewrap bound directly to parent fn\n  \t\t\tresult = wrapMethod(options[key]._method, value);\n\n  \t\t\tif (needsSuper) {\n  \t\t\t\tresult._method = result;\n  \t\t\t}\n\n  \t\t\toptions[key] = result;\n  \t\t}\n  \t});\n  }\n\n  var _extend = _extend__extend;\n\n  function _extend__extend() {\n  \tfor (var _len = arguments.length, options = Array(_len), _key = 0; _key < _len; _key++) {\n  \t\toptions[_key] = arguments[_key];\n  \t}\n\n  \tif (!options.length) {\n  \t\treturn extendOne(this);\n  \t} else {\n  \t\treturn options.reduce(extendOne, this);\n  \t}\n  }\n\n  function extendOne(Parent) {\n  \tvar options = arguments[1] === undefined ? {} : arguments[1];\n\n  \tvar Child, proto;\n\n  \t// if we're extending with another Ractive instance...\n  \t//\n  \t//   var Human = Ractive.extend(...), Spider = Ractive.extend(...);\n  \t//   var Spiderman = Human.extend( Spider );\n  \t//\n  \t// ...inherit prototype methods and default options as well\n  \tif (options.prototype instanceof _Ractive) {\n  \t\toptions = unwrapExtended(options);\n  \t}\n\n  \tChild = function (options) {\n  \t\tif (!(this instanceof Child)) return new Child(options);\n  \t\tinitialise(this, options);\n  \t};\n\n  \tproto = create(Parent.prototype);\n  \tproto.constructor = Child;\n\n  \t// Static properties\n  \tdefineProperties(Child, {\n  \t\t// alias prototype as defaults\n  \t\tdefaults: { value: proto },\n\n  \t\t// extendable\n  \t\textend: { value: _extend__extend, writable: true, configurable: true },\n\n  \t\t// Parent - for IE8, can't use Object.getPrototypeOf\n  \t\t_Parent: { value: Parent }\n  \t});\n\n  \t// extend configuration\n  \tconfig_config.extend(Parent, proto, options);\n\n  \tcustom_data.extend(Parent, proto, options);\n\n  \tif (options.computed) {\n  \t\tproto.computed = utils_object__extend(create(Parent.prototype.computed), options.computed);\n  \t}\n\n  \tChild.prototype = proto;\n\n  \treturn Child;\n  }\n\n  var getNodeInfo = function (node) {\n  \tvar info = {},\n  \t    priv,\n  \t    indices;\n\n  \tif (!node || !(priv = node._ractive)) {\n  \t\treturn info;\n  \t}\n\n  \tinfo.ractive = priv.root;\n  \tinfo.keypath = priv.keypath.str;\n  \tinfo.index = {};\n\n  \t// find all index references and resolve them\n  \tif (indices = Resolvers_findIndexRefs(priv.proxy.parentFragment)) {\n  \t\tinfo.index = Resolvers_findIndexRefs.resolve(indices);\n  \t}\n\n  \treturn info;\n  };\n\n  var Ractive, properties;\n\n  // Main Ractive required object\n  Ractive = function (options) {\n  \tif (!(this instanceof Ractive)) return new Ractive(options);\n  \tinitialise(this, options);\n  };\n\n  // Ractive properties\n  properties = {\n\n  \t// debug flag\n  \tDEBUG: { writable: true, value: true },\n  \tDEBUG_PROMISES: { writable: true, value: true },\n\n  \t// static methods:\n  \textend: { value: _extend },\n  \tgetNodeInfo: { value: getNodeInfo },\n  \tparse: { value: _parse },\n\n  \t// Namespaced constructors\n  \tPromise: { value: utils_Promise },\n\n  \t// support\n  \tsvg: { value: svg },\n  \tmagic: { value: environment__magic },\n\n  \t// version\n  \tVERSION: { value: \"0.7.3\" },\n\n  \t// Plugins\n  \tadaptors: { writable: true, value: {} },\n  \tcomponents: { writable: true, value: {} },\n  \tdecorators: { writable: true, value: {} },\n  \teasing: { writable: true, value: static_easing },\n  \tevents: { writable: true, value: {} },\n  \tinterpolators: { writable: true, value: static_interpolators },\n  \tpartials: { writable: true, value: {} },\n  \ttransitions: { writable: true, value: {} }\n  };\n\n  // Ractive properties\n  defineProperties(Ractive, properties);\n\n  Ractive.prototype = utils_object__extend(prototype, config_defaults);\n\n  Ractive.prototype.constructor = Ractive;\n\n  // alias prototype as defaults\n  Ractive.defaults = Ractive.prototype;\n\n  // Ractive.js makes liberal use of things like Array.prototype.indexOf. In\n  // older browsers, these are made available via a shim - here, we do a quick\n  // pre-flight check to make sure that either a) we're not in a shit browser,\n  // or b) we're using a Ractive-legacy.js build\n  var FUNCTION = \"function\";\n\n  if (typeof Date.now !== FUNCTION || typeof String.prototype.trim !== FUNCTION || typeof Object.keys !== FUNCTION || typeof Array.prototype.indexOf !== FUNCTION || typeof Array.prototype.forEach !== FUNCTION || typeof Array.prototype.map !== FUNCTION || typeof Array.prototype.filter !== FUNCTION || typeof window !== \"undefined\" && typeof window.addEventListener !== FUNCTION) {\n  \tthrow new Error(\"It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.\");\n  }\n\n  var _Ractive = Ractive;\n\n  return _Ractive;\n\n}));\n//# sourceMappingURL=ractive.js.map\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ractive/ractive.js\n **/","module.exports={\"v\":3,\"t\":[{\"t\":7,\"e\":\"div\",\"a\":{\"class\":\"manual-signalling-root\"},\"f\":[{\"t\":7,\"e\":\"textarea\",\"a\":{\"value\":[{\"t\":2,\"r\":\"data\"}]}},\" \",{\"t\":7,\"e\":\"button\",\"a\":{\"class\":\"offer-btn\"},\"v\":{\"click\":{\"m\":\"makeOffer\",\"a\":{\"r\":[],\"s\":\"[]\"}}},\"f\":[\"make offer\"]},\" \",{\"t\":7,\"e\":\"button\",\"a\":{\"class\":\"ack-btn\"},\"v\":{\"click\":{\"m\":\"gotAnswer\",\"a\":{\"r\":[],\"s\":\"[]\"}}},\"f\":[\"accept answer\"]},\" \",{\"t\":7,\"e\":\"button\",\"a\":{\"class\":\"answer-btn\"},\"v\":{\"click\":{\"m\":\"gotOffer\",\"a\":{\"r\":[],\"s\":\"[]\"}}},\"f\":[\"accept offer\"]}]}]};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/ractive-loader!./lib/signalling/manual/index.html\n ** module id = 8\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/less-loader/index.js!./index.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/less-loader/index.js!./index.less\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/less-loader/index.js!./index.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader!./~/css-loader!./~/less-loader!./lib/signalling/manual/index.less\n ** module id = 9\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".manual-signalling-root textarea{width:100%;height:200px}\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/less-loader!./lib/signalling/manual/index.less\n ** module id = 10\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/css-loader/lib/css-base.js\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 12\n ** module chunks = 0\n **/","import EventEmitter from 'eventemitter2';\nimport $ from 'jquery';\nimport Ractive from 'ractive';\nimport template from 'ractive!./index.html';\nimport '!style!css!less!./index.less';\n\nclass ManualSignalling extends EventEmitter {\n    constructor () {\n        super();\n        var model = this._model = {\n            fileList: []\n        };\n        this._comp = new Ractive({\n            template: template,\n            data: this._model,\n            makeOffer: () => this.emit('make-offer'),\n            gotAnswer: () => {\n                getFileContents(model.fileList[0]).then(contents => {\n                    this.emit('got-answer', JSON.parse(contents));\n                });\n            },\n            gotOffer: () => {\n                getFileContents(model.fileList[0]).then(contents => {\n                    this.emit('got-offer', JSON.parse(contents));\n                });\n            }\n        });\n    }\n\n    getName () {\n        return \"Files\";\n    }\n\n    sendOffer (data) {\n        data = JSON.stringify(data, null, 2);\n        downloadFile(data, 'offer.txt');\n    }\n\n    sendAnswer (data) {\n        data = JSON.stringify(data, null, 2);\n        downloadFile(data, 'answer.txt');\n    }\n\n    render ($target) {\n        return new Promise(resolve => {\n            this._comp.render($target);\n            resolve();\n        });\n    }\n}\n\nfunction getFileContents(file){\n    var reader = new FileReader();\n    return new Promise((resolve, reject) => {\n        if (!file) throw Error();\n        reader.readAsText(file);\n        reader.onload = resolve;\n        reader.onerror = reject;\n    }).then(() => reader.result, () => \"\");\n}\n\nfunction downloadFile(contents, filename){\n        var element = document.createElement('a');\n        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(contents));\n        element.setAttribute('download', filename);\n\n        element.style.display = 'none';\n        document.body.appendChild(element);\n\n        element.click();\n\n        document.body.removeChild(element);\n}\n\nexport default ManualSignalling;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/signalling/files/index.js\n **/","module.exports={\"v\":3,\"t\":[{\"t\":7,\"e\":\"div\",\"a\":{\"class\":\"file-signalling-root\"},\"f\":[{\"t\":7,\"e\":\"button\",\"a\":{\"class\":\"offer-btn\"},\"v\":{\"click\":{\"m\":\"makeOffer\",\"a\":{\"r\":[],\"s\":\"[]\"}}},\"f\":[\"make offer\"]},\" \",{\"t\":7,\"e\":\"input\",\"a\":{\"type\":\"file\",\"value\":[{\"t\":2,\"r\":\"fileList\"}]}},\" \",{\"t\":7,\"e\":\"button\",\"a\":{\"class\":\"ack-btn\"},\"v\":{\"click\":{\"m\":\"gotAnswer\",\"a\":{\"r\":[],\"s\":\"[]\"}}},\"f\":[\"accept answer\"]},\" \",{\"t\":7,\"e\":\"button\",\"a\":{\"class\":\"answer-btn\"},\"v\":{\"click\":{\"m\":\"gotOffer\",\"a\":{\"r\":[],\"s\":\"[]\"}}},\"f\":[\"accept offer\"]}]}]};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/ractive-loader!./lib/signalling/files/index.html\n ** module id = 14\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/less-loader/index.js!./index.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/less-loader/index.js!./index.less\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/less-loader/index.js!./index.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader!./~/css-loader!./~/less-loader!./lib/signalling/files/index.less\n ** module id = 15\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/less-loader!./lib/signalling/files/index.less\n ** module id = 16\n ** module chunks = 0\n **/","import EventEmitter from 'eventemitter2';\nimport $ from 'jquery';\nimport template from 'html!./index.html';\nimport '!style!css!less!./index.less';\n\nclass Meeting extends EventEmitter {\n    constructor () {\n        super();\n        this._$root = $(template);\n    }\n\n    setLocalStream (s) {\n        this._$root.find(\"video.local\").show()[0].srcObject = s;\n    }\n\n    addRemoteStream (s) {\n        var $vid = $(\"<video autoplay>\").addClass(\"remote\");\n        $vid[0].srcObject = s;\n        this._$root.append($vid);\n    }\n\n    render ($target) {\n        return new Promise(resolve => {\n            $target.append(this._$root);\n            resolve();\n        });\n    }\n}\n\nexport default Meeting;\n\n\n\n/** WEBPACK FOOTER **\n ** ./app/meeting/index.js\n **/","module.exports = \"<div class=meeting><video autoplay class=local></video><div class=remote-videos></div></div>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/html-loader!./app/meeting/index.html\n ** module id = 18\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/less-loader/index.js!./index.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/less-loader/index.js!./index.less\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/less-loader/index.js!./index.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader!./~/css-loader!./~/less-loader!./app/meeting/index.less\n ** module id = 19\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".meeting video{border-width:20px;border-style:solid;border-radius:20px}.meeting video.remote{border-color:red}.meeting video.local{border-color:blue;display:none}\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/less-loader!./app/meeting/index.less\n ** module id = 20\n ** module chunks = 0\n **/","module.exports = \"<div id=meeting-container></div><div id=error></div><div id=signalling-services-prompt>Please select a signalling service:<select id=signalling-services><option></select></div><div id=service-container></div>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/html-loader!./app/index.html\n ** module id = 21\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/less-loader/index.js!./index.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./../node_modules/less-loader/index.js!./index.less\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/less-loader/index.js!./index.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader!./~/css-loader!./~/less-loader!./app/index.less\n ** module id = 22\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"#error{display:none;color:red}\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/less-loader!./app/index.less\n ** module id = 23\n ** module chunks = 0\n **/"],"sourceRoot":""}